"use strict";function postFilter(){event.preventDefault();var t=$("#entry-filters"),e=window.location.href.split("?")[0],a=window.location.href.split("?")[1],n=a.split("&")[0],i=e+"?"+n+"&"+t.serialize();window.location.href=i}var $context=$("#custom-filters"),$valueLinks=$("a[data-value]",$context),$inputs=$("input[type=text]",$context),$dateRangeOccurrences=$("#date-range-inputs",$context),$dateChoice=$("input[name=search_date_range]",$context);$valueLinks.unbind("click").on({click:function(){var t=$(this),e=t.parents("div.sub-menu"),a=t.parents("ul:first[data-target]").data("target"),n=$("input[name="+a+"]",$context),i=t.data("value");n.val(i),e.hide(),e.parents("li:first").find("a.has-sub > span.faded").html("("+t.html().trim()+")"),"search_date_range"==a&&("date_range"==i?$dateRangeOccurrences.show():$dateRangeOccurrences.hide().find("input").val("")),t.data("prevent-trigger")||(event.preventDefault(),event.stopPropagation(),postFilter())}}),$inputs.on({keypress:function(t){var e=t.which?t.which:t.charCode;13==e&&(t.preventDefault(),t.stopPropagation(),postFilter())}}),"date_range"==$dateChoice.val()&&$dateRangeOccurrences.show(),$("input",$context).each(function(){$(this).val()&&$(".filter-clear",$context).show()}),$(function(){$("#change-layout-trigger").featherlight(".choice-panel",{otherClose:"button[data-featherlight-close]",afterContent:function(t){$("ul.very-sortable",this.$content).sortable()}}),$("button[data-layout-save]").on({click:function(){var t=$(".featherlight-content"),e=layoutEditorFormId,a=[];$("ul.very-sortable > li",t).each(function(){var t=$(this).data("id"),e=$(this).data("handle"),n=$(this).data("label"),i=$("input[type=checkbox]",$(this)).is(":checked");a.push({id:t,handle:e,label:n,checked:i?1:0})}),$.ajax({url:layoutEditorSaveUrl,type:"post",dataType:"json",data:{formId:e,data:a},success:function(t){t.success&&window.location.reload(!1)}})}}),$("#export-csv-modal").on({submit:function(){var t=$.featherlight.current();t.close()}}),$("#quick-export-trigger").featherlight("#quick-export-modal",{otherClose:".btn.cancel",afterContent:function(){$(".checkbox-select",this.$content).sortable()}})});