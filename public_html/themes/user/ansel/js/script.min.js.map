{"version":3,"sources":["../../fab/js/fab.js","../../assetsSource/js/components/dropzone.js","../../assetsSource/js/components/FAB.controller.js","../../assetsSource/js/components/FAB.model.js","../../assetsSource/js/components/jquery.Jcrop.js","../../assetsSource/js/components/jquery.jsHide.js","../../assetsSource/js/components/prototype.toCamelCase.js","../../assetsSource/js/components/select2.js","../../assetsSource/js/components/sortable.js","../../assetsSource/js/Controller/Field/_Field.js","../../assetsSource/js/Controller/Field/AnselCrop.js","../../assetsSource/js/Controller/Field/AssetsFileChooser.js","../../assetsSource/js/Controller/Field/DropZone.js","../../assetsSource/js/Controller/Field/EEFileChooser.js","../../assetsSource/js/Controller/Field/Message.js","../../assetsSource/js/Controller/Field/Row.js","../../assetsSource/js/Controller/Field/Rows.js","../../assetsSource/js/Controller/Field/TreasuryFileChooser.js","../../assetsSource/js/Controller/FieldsInit.js","../../assetsSource/js/Controller/GridSettingsSelect2.js","../../assetsSource/js/Controller/LicensePing.js","../../assetsSource/js/Controller/StopNumberScroll.js","../../assetsSource/js/main.js"],"names":["window","ANSEL","Dropzone","Emitter","camelize","contentLoaded","detectVerticalSquash","drawImageIOSFix","noop","without","__slice","slice","__hasProp","hasOwnProperty","__extends","child","parent","ctor","this","constructor","key","call","prototype","__super__","addEventListener","on","event","fn","_callbacks","push","emit","args","callback","callbacks","_i","_len","arguments","length","apply","removeListener","off","removeAllListeners","removeEventListener","i","splice","_super","element","options","elementOptions","fallback","_ref","version","defaultOptions","previewTemplate","replace","clickableElements","listeners","files","document","querySelector","nodeType","Error","dropzone","instances","optionsForElement","extend","forceFallback","isBrowserSupported","url","getAttribute","acceptedFiles","acceptedMimeTypes","method","toUpperCase","getExistingFallback","parentNode","removeChild","previewsContainer","getElement","clickable","getElements","init","resolveOption","events","withCredentials","parallelUploads","uploadMultiple","maxFilesize","paramName","createImageThumbnails","maxThumbnailFilesize","thumbnailWidth","thumbnailHeight","filesizeBase","maxFiles","params","ignoreHiddenFiles","autoProcessQueue","autoQueue","addRemoveLinks","hiddenInputContainer","capture","renameFilename","dictDefaultMessage","dictFallbackMessage","dictFallbackText","dictFileTooBig","dictInvalidFileType","dictResponseError","dictCancelUpload","dictCancelUploadConfirmation","dictRemoveFile","dictRemoveFileConfirmation","dictMaxFilesExceeded","accept","file","done","messageElement","span","className","getElementsByTagName","test","createElement","appendChild","textContent","innerText","getFallbackForm","resize","info","srcRatio","trgRatio","srcX","srcY","srcWidth","width","srcHeight","height","optWidth","optHeight","trgHeight","trgWidth","drop","e","classList","remove","dragstart","dragend","dragenter","add","dragover","dragleave","paste","reset","addedfile","node","removeFileEvent","removeLink","_j","_k","_len1","_len2","_ref1","_ref2","_results","previewElement","trim","querySelectorAll","_renameFilename","name","innerHTML","filesize","size","_removeLink","_this","preventDefault","stopPropagation","status","UPLOADING","confirm","removeFile","removedfile","_updateMaxFilesReachedClass","thumbnail","dataUrl","thumbnailElement","alt","src","setTimeout","error","message","errormultiple","processing","processingmultiple","uploadprogress","progress","bytesSent","nodeName","value","style","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","maxfilesexceeded","maxfilesreached","queuecomplete","addedfiles","object","objects","target","val","getAcceptedFiles","accepted","getRejectedFiles","getFilesWithStatus","getQueuedFiles","QUEUED","getUploadingFiles","getAddedFiles","ADDED","getActiveFiles","eventName","noPropagation","setupHiddenFileInput","tagName","setAttribute","contains","hiddenFileInput","visibility","position","top","left","addFile","URL","webkitURL","updateTotalUploadProgress","returnValue","efct","dataTransfer","effectAllowed","_error","dropEffect","forEach","clickableElement","click","evt","elementInside","enable","destroy","disable","removeAllFiles","indexOf","activeFiles","totalBytes","totalBytesSent","totalUploadProgress","upload","total","_getParamName","n","existingFallback","fields","fieldsString","form","getFallback","elements","el","setupEventListeners","elementListeners","listener","_results1","removeEventListeners","cancelUpload","cutoff","selectedSize","selectedUnit","unit","units","Math","pow","round","items","webkitGetAsEntry","_addFilesFromItems","handleFiles","clipboardData","entry","item","isFile","getAsFile","isDirectory","_addFilesFromDirectory","kind","directory","path","dirReader","errorHandler","readEntries","createReader","console","log","entries","substring","fullPath","isValidFile","_enqueueThumbnail","_errorProcessing","enqueueFile","enqueueFiles","processQueue","_thumbnailQueue","_processingThumbnail","type","match","_processThumbnailQueue","createThumbnail","shift","cancelIfNecessary","fileReader","FileReader","onload","result","createThumbnailFromUrl","readAsDataURL","imageUrl","crossOrigin","img","canvas","ctx","resizeInfo","_ref3","getContext","trgX","trgY","toDataURL","onerror","processingLength","queuedFiles","processFiles","processFile","uploadFiles","_getFilesWithXhr","xhr","groupedFile","groupedFiles","CANCELED","abort","option","uploadFile","formData","handleError","headerName","headerValue","headers","input","inputName","inputType","progressObj","response","updateProgress","_l","_len3","_m","_ref4","_ref5","XMLHttpRequest","open","allFilesFinished","loaded","readyState","responseText","getResponseHeader","JSON","parse","_finished","onprogress","Accept","Cache-Control","X-Requested-With","setRequestHeader","FormData","append","hasAttribute","selected","toLowerCase","checked","submitRequest","send","SUCCESS","ERROR","forElement","autoDiscover","discover","checkElements","dropzones","blacklistedBrowsers","capableBrowser","regex","File","FileList","Blob","navigator","userAgent","list","rejectedItem","str","charAt","string","div","childNodes","container","els","Array","question","rejected","baseMimeType","mimeType","validType","split","jQuery","each","module","exports","ACCEPTED","PROCESSING","alpha","data","ey","ih","iw","py","ratio","sy","naturalWidth","naturalHeight","drawImage","getImageData","sx","sw","sh","dx","dy","dw","dh","vertSquashRatio","win","doc","poll","pre","rem","root","documentElement","doScroll","createEventObject","frameElement","_autoDiscoverFunction","F","constructors","constructed","createConstructor","obj","optObj","ControllerModel","thisObj","newObj","$","$el","get","HTMLElement","model","validateGuid","guid","make","undefined","controller","construct","constructedObj","Function","bind","guids","s4","floor","random","toString","createModelConstructor","attrs","initialValues","properties","propertyTypes","changeEvents","prop","parseInt","parseFloat","String","Object","set","changed","oldVal","onChange","noNameSpace","offChange","JcropAnsel","opt","_ua","defaults","is_msie","is_ie_lt9","addClass","css_container","ui","state","multi","selection","filter","setOptions","applySizeConstraints","trigger","dragEventTarget","body","component","stage","registerComponent","registerFilter","registerStageType","attach","imgCopy","imgel","Image","imageClone","supportsCanvas","canvasClone","propagate","plist","config","l","getLargestBox","w","h","stageConstructor","stages","sort","a","b","priority","isSupported","create","supportsColorFade","fx","step","wrapFromXywh","xywh","x","y","x2","y2","AbstractStage","o","core","triggerEvent","ev","ImageStage","ImageLoader","wrap","imgsrc","CanvasStage","angle","scale","scaleMin","scaleMax","offset","hide","createCanvas","before","redraw","setOffset","setAngle","v","setScale","boundScale","$canvas","context","fillstyle","clear","fillStyle","fillRect","save","translate","xscale","yscale","rotate","PI","restore","setFillStyle","BackoffFilter","minw","minh","maxw","maxh","tag","r","bound","minx","miny","maxx","maxy","refresh","sel","elw","elh","edge","s","ConstrainFilter","ord","ExtentFilter","offsetFromCorner","corner","box","getQuadrant","relx","opposite","offsetx","rely","offsety","st","limits","quad","minSize","maxSize","GridFilter","stepx","stepy","RatioFilter","getBoundRatio","aspectRatio","RoundFilter","ShadeFilter","opacity","color","shades","fade","fadeEasing","fadeSpeed","t","attached","visible","css_shades","prependTo","createShade","right","bottom","setColor","instant","colorfade","u","animate","backgroundColor","queue","duration","easing","css","setOpacity","appendTo","m","bgColor","bgOpacity","active","show","CanvasAnimator","cloneStagePosition","cb","animEasing","animDuration","anim","props","tw","tweens","now","Canvas","getAnimator","CropAnimator","allowResize","updateRaw","DragState","pageX","pageY","eventTarget","orig","callFilterFunction","p","elx","ely","getOppositeCornerOffset","initEvents","createDragHandler","createStopHandler","dragEvent","getBox","endDragEvent","removeClass","unscale","focus","update","resultWrap","d","min","max","_c","nx","ny","EventManager","load","getDimensions","fireCallback","isLoaded","JcropAnselTouch","support","DocumentTouch","touch","shimDragState","shimStageDrag","substr","dragWrap","manager","startDragHandler","originalEvent","changedTouches","c","css_drag","startDrag","KeyWatcher","passthru","debug","nudge","shiftKey","inArray","keyCode","requestDelete","metaKey","ctrlKey","Selection","last","linked","canDelete","canDrag","canResize","canSelect","startup","getDefaultFilters","css_selection","frame","css_button","attr","insertElements","setSelection","allowDrag","allowSelect","f","addFilter","hasFilter","sortFilters","clearFilters","removeFilter","runFilters","endDrag","hasClass","css_nodrag","css_noresize","toBack","toFront","moveTo","animateTo","ca","Animator","center","blur","rv","fr","borders","handles","dragbars","css_dragbars","css_handles","css_borders","StageDrag","minsize","start","multiMax","currentTarget","origx","origy","multiCleanup","removeSelection","newSelection","end","drag","StageManager","setupEvents","dragger","tellConfigUpdate","linkCurrent","button","removeEvents","shimLegacyHandlers","tmp","legacyHandlers","k","Thumbnailer","fading","fadeDelay","fadeDuration","autoHide","_hiding","recopyCanvas","cxt","putImageData","renderSelection","selectionTarget","preview","updateImage","renderCoords","cw","ch","rx","ry","marginLeft","marginTop","selectionStart","clearTimeout","stop","DialDrag","actuator","$btn","$targ","mousedown","isFunction","ondone","setTarget","getOffset","targ","pos","relMouse","ang","atan2","vec","sqrt","mouseUp","that","mouseMove","rel","angleOffset","distOffset","dragOffset","setSelect","eventManagerComponent","keyboardComponent","Keyboard","dragstateComponent","stagemanagerComponent","animatorComponent","selectionComponent","animation","applyFilters","boxWidth","boxHeight","onSelect","keyboard","supportsTouch","Touch","bw","bh","bx","resizeContainer","trueSize","cs","getContainerSize","initComponent","unshift","proptype","isPlainObject","removeData","getSelection","raw","hasSelection","maxSelect","blurAll","xs","ys","deleteSelection","closest","setImage","first","eq","$t","exists","Modernizr","setCss","mStyle","cssText","is","testProps","prefixed","testDOMProps","elem","testPropsAll","ucProp","cssomPrefixes","join","inputElem","featureName","hasOwnProp","docElement","mod","modElem","prefixes","omPrefixes","domPrefixes","ns","svg","tests","classes","injectElementWithStyles","rule","nodes","testnames","ret","docOverflow","fakeBody","id","background","overflow","isEventSupported","TAGNAMES","removeAttribute","select","change","submit","_hasOwnProperty","property","TypeError","self","concat","fillText","bool","offsetTop","createElementNS","createSVGRect","firstChild","namespaceURI","feature","addTest","enableClasses","_version","_prefixes","_domPrefixes","_cssomPrefixes","hasEvent","testProp","testAllProps","testStyles","datauri","supportsCanvasText","canvastext","supportsDragAndDrop","draganddrop","supportsDataURI","supportsSVG","supportsInlineSVG","inlinesvg","supportsSVGClipPaths","svgclippaths","supportsCSSTransforms","csstransforms","jsHide","jsShow","toCamelCase","$1","factory","define","amd","require","S2","select2","requirejs","undef","hasProp","hasOwn","normalize","baseName","nameParts","nameSegment","mapValue","foundMap","lastIndex","foundI","foundStarMap","starI","j","part","baseParts","map","starMap","nodeIdCompat","jsSuffixRegExp","makeRequire","relName","forceSync","aps","req","makeNormalize","makeLoad","depName","defined","callDep","waiting","defining","main","splitPrefix","prefix","index","makeConfig","makeMap","handlers","plugin","parts","pr","uri","deps","cjsModule","usingExports","callbackType","cfg","_defined","_$","getMethods","theClass","proto","methods","methodName","Utils","Extend","ChildClass","SuperClass","BaseConstructor","Decorate","DecoratorClass","DecoratedClass","argCount","calledConstructor","ctr","decoratedMethods","superMethods","displayName","superMethod","calledMethod","originalMethod","decoratedMethod","Observable","_type","invoke","len","generateChars","chars","randomChar","func","_convertData","originalKey","keys","dataLevel","hasScroll","overflowX","overflowY","innerHeight","scrollHeight","innerWidth","scrollWidth","escapeMarkup","markup","replaceMap","\\","&","<",">","\"","'","/","appendMany","$element","$nodes","jquery","$jqNodes","Results","dataAdapter","render","$results","empty","displayMessage","hideLoading","$message","hideMessages","find","$options","results","children","$option","$dropdown","$resultsContainer","sorter","highlightFirstItem","$selected","ensureHighlightVisible","setClasses","current","selectedIds","showLoading","loadingMore","loading","disabled","text","$loading","prepend","role","aria-selected","_resultId","title","label","template","$children","$child","$childrenContainer","class","$container","isOpen","removeAttr","$highlighted","getHighlightedResults","currentIndex","nextIndex","$next","currentOffset","nextTop","nextOffset","scrollTop","outerHeight","nextBottom","mousewheel","deltaY","isAtTop","isAtBottom","$this","offsetDelta","content","display","KEYS","BACKSPACE","TAB","ENTER","SHIFT","CTRL","ALT","ESC","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","DELETE","BaseSelection","$selection","_tabindex","resultsId","_handleBlur","which","_attachCloseHandler","_detachCloseHandler","activeElement","$target","$select","$all","$selectionContainer","SingleSelection","html","selectionContainer","$rendered","formatted","MultipleSelection","$remove","$selections","Placeholder","decorated","placeholder","normalizePlaceholder","_","createPlaceholder","$placeholder","singlePlaceholder","multipleSelections","AllowClear","_handleClear","_handleKeyboardClear","$clear","unselectData","prevented","Search","$search","$searchContainer","_transferTabIndex","_keyUpPrevented","isDefaultPrevented","$previousChoice","prev","searchRemoveChoice","msie","documentMode","disableInputEvents","handleSearch","searchHadFocus","resizeSearch","term","minimumWidth","EventRelay","relayEvents","preventableEvents","Event","Translation","dict","all","translation","_cache","loadPath","translations","diacritics","Ⓐ","Ａ","À","Á","Â","Ầ","Ấ","Ẫ","Ẩ","Ã","Ā","Ă","Ằ","Ắ","Ẵ","Ẳ","Ȧ","Ǡ","Ä","Ǟ","Ả","Å","Ǻ","Ǎ","Ȁ","Ȃ","Ạ","Ậ","Ặ","Ḁ","Ą","Ⱥ","Ɐ","Ꜳ","Æ","Ǽ","Ǣ","Ꜵ","Ꜷ","Ꜹ","Ꜻ","Ꜽ","Ⓑ","Ｂ","Ḃ","Ḅ","Ḇ","Ƀ","Ƃ","Ɓ","Ⓒ","Ｃ","Ć","Ĉ","Ċ","Č","Ç","Ḉ","Ƈ","Ȼ","Ꜿ","Ⓓ","Ｄ","Ḋ","Ď","Ḍ","Ḑ","Ḓ","Ḏ","Đ","Ƌ","Ɗ","Ɖ","Ꝺ","Ǳ","Ǆ","ǲ","ǅ","Ⓔ","Ｅ","È","É","Ê","Ề","Ế","Ễ","Ể","Ẽ","Ē","Ḕ","Ḗ","Ĕ","Ė","Ë","Ẻ","Ě","Ȅ","Ȇ","Ẹ","Ệ","Ȩ","Ḝ","Ę","Ḙ","Ḛ","Ɛ","Ǝ","Ⓕ","Ｆ","Ḟ","Ƒ","Ꝼ","Ⓖ","Ｇ","Ǵ","Ĝ","Ḡ","Ğ","Ġ","Ǧ","Ģ","Ǥ","Ɠ","Ꞡ","Ᵹ","Ꝿ","Ⓗ","Ｈ","Ĥ","Ḣ","Ḧ","Ȟ","Ḥ","Ḩ","Ḫ","Ħ","Ⱨ","Ⱶ","Ɥ","Ⓘ","Ｉ","Ì","Í","Î","Ĩ","Ī","Ĭ","İ","Ï","Ḯ","Ỉ","Ǐ","Ȉ","Ȋ","Ị","Į","Ḭ","Ɨ","Ⓙ","Ｊ","Ĵ","Ɉ","Ⓚ","Ｋ","Ḱ","Ǩ","Ḳ","Ķ","Ḵ","Ƙ","Ⱪ","Ꝁ","Ꝃ","Ꝅ","Ꞣ","Ⓛ","Ｌ","Ŀ","Ĺ","Ľ","Ḷ","Ḹ","Ļ","Ḽ","Ḻ","Ł","Ƚ","Ɫ","Ⱡ","Ꝉ","Ꝇ","Ꞁ","Ǉ","ǈ","Ⓜ","Ｍ","Ḿ","Ṁ","Ṃ","Ɱ","Ɯ","Ⓝ","Ｎ","Ǹ","Ń","Ñ","Ṅ","Ň","Ṇ","Ņ","Ṋ","Ṉ","Ƞ","Ɲ","Ꞑ","Ꞥ","Ǌ","ǋ","Ⓞ","Ｏ","Ò","Ó","Ô","Ồ","Ố","Ỗ","Ổ","Õ","Ṍ","Ȭ","Ṏ","Ō","Ṑ","Ṓ","Ŏ","Ȯ","Ȱ","Ö","Ȫ","Ỏ","Ő","Ǒ","Ȍ","Ȏ","Ơ","Ờ","Ớ","Ỡ","Ở","Ợ","Ọ","Ộ","Ǫ","Ǭ","Ø","Ǿ","Ɔ","Ɵ","Ꝋ","Ꝍ","Ƣ","Ꝏ","Ȣ","Ⓟ","Ｐ","Ṕ","Ṗ","Ƥ","Ᵽ","Ꝑ","Ꝓ","Ꝕ","Ⓠ","Ｑ","Ꝗ","Ꝙ","Ɋ","Ⓡ","Ｒ","Ŕ","Ṙ","Ř","Ȑ","Ȓ","Ṛ","Ṝ","Ŗ","Ṟ","Ɍ","Ɽ","Ꝛ","Ꞧ","Ꞃ","Ⓢ","Ｓ","ẞ","Ś","Ṥ","Ŝ","Ṡ","Š","Ṧ","Ṣ","Ṩ","Ș","Ş","Ȿ","Ꞩ","Ꞅ","Ⓣ","Ｔ","Ṫ","Ť","Ṭ","Ț","Ţ","Ṱ","Ṯ","Ŧ","Ƭ","Ʈ","Ⱦ","Ꞇ","Ꜩ","Ⓤ","Ｕ","Ù","Ú","Û","Ũ","Ṹ","Ū","Ṻ","Ŭ","Ü","Ǜ","Ǘ","Ǖ","Ǚ","Ủ","Ů","Ű","Ǔ","Ȕ","Ȗ","Ư","Ừ","Ứ","Ữ","Ử","Ự","Ụ","Ṳ","Ų","Ṷ","Ṵ","Ʉ","Ⓥ","Ｖ","Ṽ","Ṿ","Ʋ","Ꝟ","Ʌ","Ꝡ","Ⓦ","Ｗ","Ẁ","Ẃ","Ŵ","Ẇ","Ẅ","Ẉ","Ⱳ","Ⓧ","Ｘ","Ẋ","Ẍ","Ⓨ","Ｙ","Ỳ","Ý","Ŷ","Ỹ","Ȳ","Ẏ","Ÿ","Ỷ","Ỵ","Ƴ","Ɏ","Ỿ","Ⓩ","Ｚ","Ź","Ẑ","Ż","Ž","Ẓ","Ẕ","Ƶ","Ȥ","Ɀ","Ⱬ","Ꝣ","ⓐ","ａ","ẚ","à","á","â","ầ","ấ","ẫ","ẩ","ã","ā","ă","ằ","ắ","ẵ","ẳ","ȧ","ǡ","ä","ǟ","ả","å","ǻ","ǎ","ȁ","ȃ","ạ","ậ","ặ","ḁ","ą","ⱥ","ɐ","ꜳ","æ","ǽ","ǣ","ꜵ","ꜷ","ꜹ","ꜻ","ꜽ","ⓑ","ｂ","ḃ","ḅ","ḇ","ƀ","ƃ","ɓ","ⓒ","ｃ","ć","ĉ","ċ","č","ç","ḉ","ƈ","ȼ","ꜿ","ↄ","ⓓ","ｄ","ḋ","ď","ḍ","ḑ","ḓ","ḏ","đ","ƌ","ɖ","ɗ","ꝺ","ǳ","ǆ","ⓔ","ｅ","è","é","ê","ề","ế","ễ","ể","ẽ","ē","ḕ","ḗ","ĕ","ė","ë","ẻ","ě","ȅ","ȇ","ẹ","ệ","ȩ","ḝ","ę","ḙ","ḛ","ɇ","ɛ","ǝ","ⓕ","ｆ","ḟ","ƒ","ꝼ","ⓖ","ｇ","ǵ","ĝ","ḡ","ğ","ġ","ǧ","ģ","ǥ","ɠ","ꞡ","ᵹ","ꝿ","ⓗ","ｈ","ĥ","ḣ","ḧ","ȟ","ḥ","ḩ","ḫ","ẖ","ħ","ⱨ","ⱶ","ɥ","ƕ","ⓘ","ｉ","ì","í","î","ĩ","ī","ĭ","ï","ḯ","ỉ","ǐ","ȉ","ȋ","ị","į","ḭ","ɨ","ı","ⓙ","ｊ","ĵ","ǰ","ɉ","ⓚ","ｋ","ḱ","ǩ","ḳ","ķ","ḵ","ƙ","ⱪ","ꝁ","ꝃ","ꝅ","ꞣ","ⓛ","ｌ","ŀ","ĺ","ľ","ḷ","ḹ","ļ","ḽ","ḻ","ſ","ł","ƚ","ɫ","ⱡ","ꝉ","ꞁ","ꝇ","ǉ","ⓜ","ｍ","ḿ","ṁ","ṃ","ɱ","ɯ","ⓝ","ｎ","ǹ","ń","ñ","ṅ","ň","ṇ","ņ","ṋ","ṉ","ƞ","ɲ","ŉ","ꞑ","ꞥ","ǌ","ⓞ","ｏ","ò","ó","ô","ồ","ố","ỗ","ổ","õ","ṍ","ȭ","ṏ","ō","ṑ","ṓ","ŏ","ȯ","ȱ","ö","ȫ","ỏ","ő","ǒ","ȍ","ȏ","ơ","ờ","ớ","ỡ","ở","ợ","ọ","ộ","ǫ","ǭ","ø","ǿ","ɔ","ꝋ","ꝍ","ɵ","ƣ","ȣ","ꝏ","ⓟ","ｐ","ṕ","ṗ","ƥ","ᵽ","ꝑ","ꝓ","ꝕ","ⓠ","ｑ","ɋ","ꝗ","ꝙ","ⓡ","ｒ","ŕ","ṙ","ř","ȑ","ȓ","ṛ","ṝ","ŗ","ṟ","ɍ","ɽ","ꝛ","ꞧ","ꞃ","ⓢ","ｓ","ß","ś","ṥ","ŝ","ṡ","š","ṧ","ṣ","ṩ","ș","ş","ȿ","ꞩ","ꞅ","ẛ","ⓣ","ｔ","ṫ","ẗ","ť","ṭ","ț","ţ","ṱ","ṯ","ŧ","ƭ","ʈ","ⱦ","ꞇ","ꜩ","ⓤ","ｕ","ù","ú","û","ũ","ṹ","ū","ṻ","ŭ","ü","ǜ","ǘ","ǖ","ǚ","ủ","ů","ű","ǔ","ȕ","ȗ","ư","ừ","ứ","ữ","ử","ự","ụ","ṳ","ų","ṷ","ṵ","ʉ","ⓥ","ｖ","ṽ","ṿ","ʋ","ꝟ","ʌ","ꝡ","ⓦ","ｗ","ẁ","ẃ","ŵ","ẇ","ẅ","ẘ","ẉ","ⱳ","ⓧ","ｘ","ẋ","ẍ","ⓨ","ｙ","ỳ","ý","ŷ","ỹ","ȳ","ẏ","ÿ","ỷ","ẙ","ỵ","ƴ","ɏ","ỿ","ⓩ","ｚ","ź","ẑ","ż","ž","ẓ","ẕ","ƶ","ȥ","ɀ","ⱬ","ꝣ","Ά","Έ","Ή","Ί","Ϊ","Ό","Ύ","Ϋ","Ώ","ά","έ","ή","ί","ϊ","ΐ","ό","ύ","ϋ","ΰ","ω","ς","BaseAdapter","query","generateResultId","SelectAdapter","currentData","unselect","matches","addOptions","normalizedData","_normalizeItem","matcher","ArrayAdapter","convertToOptions","elm","onlyItem","$existing","existingIds","$existingOption","existingData","newData","$newOption","replaceWith","AjaxAdapter","ajaxOptions","_applyDefaults","processResults","q","transport","failure","$request","ajax","then","fail","request","isArray","_request","delay","_queryTimeout","Tags","tags","createTag","insertTag","wrapper","checkChildren","checkText","_removeOldTags","page","_lastTag","Tokenizer","tokenizer","dropdown","createAndSelect","$existingOptions","tokenData","separators","termChar","partParams","MinimumInputLength","$e","minimumInputLength","minimum","MaximumInputLength","maximumInputLength","maximum","MaximumSelectionLength","maximumSelectionLength","count","Dropdown","showSearch","HidePlaceholder","removePlaceholder","modifiedData","InfiniteScroll","lastParams","$loadingMore","createLoadingMore","showLoadingMore","isLoadMoreVisible","loadingMoreOffset","loadMore","pagination","more","AttachBody","$dropdownParent","setupResultsEvents","_showDropdown","_attachPositioningHandler","_positionDropdown","_resizeDropdown","_hideDropdown","_detachPositioningHandler","$dropdownContainer","detach","scrollEvent","resizeEvent","orientationEvent","$watchers","parents","scrollLeft","$window","isCurrentlyAbove","isCurrentlyBelow","newDirection","viewport","enoughRoomAbove","enoughRoomBelow","$offsetParent","offsetParent","parentOffset","outerWidth","minWidth","countResults","MinimumResultsForSearch","minimumResultsForSearch","Infinity","SelectOnClose","_handleSelectOnClose","originalSelect2Event","$highlightedResults","CloseOnSelect","_selectTriggered","errorLoading","inputTooLong","overChars","inputTooShort","remainingChars","maximumSelected","noResults","searching","ResultsList","SelectionSearch","DIACRITICS","SelectData","ArrayData","AjaxData","DropdownSearch","EnglishTranslation","Defaults","tokenSeparators","Query","amdBase","initSelection","InitSelection","resultsAdapter","selectOnClose","dropdownAdapter","multiple","SearchableDropdown","closeOnSelect","dropdownCssClass","dropdownCss","adaptDropdownCssClass","DropdownCSS","selectionAdapter","allowClear","containerCssClass","containerCss","adaptContainerCssClass","ContainerCSS","language","languageParts","baseLanguage","languages","languageNames","amdLanguageBase","ex","warn","baseTranslation","customTranslation","stripDiacritics","original","dropdownAutoWidth","templateResult","templateSelection","theme","camelKey","camelCase","convertedData","Options","fromElement","InputCompat","excludedData","dir","dataset","Select2","_generateId","tabindex","DataAdapter","_placeContainer","SelectionAdapter","DropdownAdapter","ResultsAdapter","_bindAdapters","_registerDomEvents","_registerDataEvents","_registerSelectionEvents","_registerDropdownEvents","_registerResultsEvents","_registerEvents","initialData","_syncAttributes","insertAfter","_resolveWidth","WIDTH","styleWidth","elementWidth","_syncA","_syncS","_syncSubtree","attachEvent","observer","MutationObserver","WebKitMutationObserver","MozMutationObserver","_observer","mutations","observe","attributes","childList","subtree","nonRelayEvents","toggleDropdown","altKey","close","addedNodes","removedNodes","actualTrigger","preTriggerMap","preTriggerName","preTriggerArgs","hasFocus","newVal","detachEvent","disconnect","thisMethods","instanceOptions","instance","Package","Sortable","_extend","expando","group","store","handle","scroll","scrollSensitivity","scrollSpeed","draggable","ghostClass","chosenClass","ignore","setData","dragEl","dropBubble","dragoverBubble","dataIdAttr","fallbackClass","fallbackOnBody","disableXAxis","_prepareGroup","nativeDraggable","supportDraggable","_on","_onTapStart","touchDragOverListeners","_onDragOver","_cloneHide","cloneEl","_css","rootEl","insertBefore","_closest","selector","re","RegExp","_globalDragOver","_off","_toggleClass","RSPACE","defaultView","getComputedStyle","currentStyle","_find","iterator","_dispatchEvent","sortable","targetEl","fromEl","startIndex","newIndex","createEvent","onName","initEvent","to","from","clone","oldIndex","dispatchEvent","_onMove","toEl","dragRect","targetRect","retVal","onMoveFn","onMove","dragged","draggedRect","related","relatedRect","getBoundingClientRect","_disableDraggable","_unsilent","_silent","_ghostIsLast","lastEl","lastElementChild","rect","clientY","clientX","href","sum","charCodeAt","_index","previousElementSibling","_throttle","ms","dst","parentEl","ghostEl","nextEl","scrollEl","scrollParentEl","lastCSS","lastParentCSS","activeGroup","tapEvt","touchEvt","moved","autoScroll","Date","getTime","supportCssPointerEvents","pointerEvents","abs","_autoScroll","vx","vy","sens","speed","winWidth","winHeight","offsetWidth","offsetHeight","clearInterval","pid","setInterval","scrollTo","pageXOffset","pageYOffset","groups","put","touches","originalTarget","some","criteria","_prepareDragStart","dragStartFn","ownerDocument","nextSibling","_disableDelayedDrag","_triggerDragStart","_onDrop","_dragStartTimer","_onDragStart","removeAllRanges","err","_dragStarted","_emulateDragOver","_lastX","_lastY","elementFromPoint","groupName","_onTouchMove","_appendGhost","translate3d","ghostRect","cloneNode","useFallback","_offUpEvents","pull","_loopId","revert","groupPut","isOwner","canSort","animated","_animate","after","floating","cssFloat","isWide","isLong","halfway","nextElementSibling","moveVector","elTop","tgTop","prevRect","currentRect","handleEvent","toArray","order","utils","throttle","toggleClass","SharedModelConstructor","fieldId","uploadDirectory","saveDirectory","minQty","maxQty","preventUploadOverMax","quality","forceJpg","retinaMode","minHeight","maxWidth","maxHeight","ratioWidth","ratioHeight","showTitle","requireTitle","titleLabel","showCaption","requireCaption","captionLabel","showCover","requireCover","coverLabel","fieldChangeEvent","coverRowId","SharedModelOtherConstructor","numRows","sharedModel","sharedModelOther","sharedStorage","lang","dropZone","rowTemplate","cropTableTemplate","$table","$tableBody","$messages","getLang","commonObjSend","initFieldSettings","initLang","initSorting","settingsObj","rawSettings","langObj","rawLang","onEnd","locked","$rowImage","$cropImage","Jcrop","resizingTimer","resizingInProgress","imageWidth","imageHeight","$approveCropBtn","$cancelCropBtn","prevCropValues","setInitialCoords","timer","unbind","imgWidth","imgHeight","setUpInitialCoords","coords","setUpCrop","closeCrop","resetCropValues","setUpKeyBindings","JcropOptions","jCropOnChange","widthRatio","heightRatio","limitedWidth","limitedHeight","JcropChangeTimeout","origMinWidth","origMinHeight","oldCoords","$body","lmitedHeight","lastKey","sheet","Assets","Sheet","multiSelect","filedirs","kinds","processAssetsFileSelection","autoRender","msg","destroyOnEvent","fileData","identifier","DropZone","$hideMaxEls","$dropZoneContainer","dropZoneContainer","shouldHideUploads","uploadKey","json","$previewEl","ourJson","parseJSON","fadeOut","$parentEl","$otherEls","not","uploadData","FilePicker","references","modal","isImage","file_id","destroyAfterTimeout","sourceFileMissing","referenceImg","orderNum","runCrop","xInput","yInput","widthInput","heightInput","orderInput","$anselImageHolder","$anselImageHolderInner","$anselImage","rowId","click .js-ansel-input-cover","checkOrder","updateCoordsInputs","updateThumbImgPosition","base64","setUp","anselCachePath","setCoordsFromInput","$rowImg","setUpRowId","setUpInputVariables","$rowInputs","oldRowId","prevAll","ceil","holderWidth","holderHeight","thumbWidth","thumbHeight","thumbX","thumbY","siblingsLength","siblings","$formContainer","$deleteInput","$idInput","underMinMsg","overMaxMsg","numRowsReact","checkNumRows","$rows","tempQty","removeExtraRows","TreasuryFilePicker","G","FLUID","initField","$row","$root","Grid","FluidField","initSelect2Visible","initGridSelect2","initGridSelect2EE4","$gridColSel","$sel","runGridSelect2","$parent","$sib","$selects","next","$thisSel","tries","licensePingUrl","licensePingActionId","ACT","FieldManager","$modal"],"mappings":"AAKAA,OAAOC,MAAQD,OAAOC,UAAtBD,OAAOC,MAAQD,OAAOC,UCwBtB,WACC,GAAIC,GAAUC,EAASC,EAAUC,EAAeC,EAAsBC,EAAiBC,EAAMC,EAC5FC,KAAaC,MACbC,KAAeC,eACfC,EAAY,SAASC,EAAOC,GAAiG,QAASC,KAASC,KAAKC,YAAcJ,EAA5H,IAAK,GAAIK,KAAOJ,GAAcJ,EAAUS,KAAKL,EAAQI,KAAML,EAAMK,GAAOJ,EAAOI,GAA2J,OAArGH,GAAKK,UAAYN,EAAOM,UAAWP,EAAMO,UAAY,GAAIL,GAAQF,EAAMQ,UAAYP,EAAOM,UAAkBP,EAExRP,GAAO,aAEPL,EAAU,WACT,QAASA,MAyDT,MAvDAA,GAAQmB,UAAUE,iBAAmBrB,EAAQmB,UAAUG,GAEvDtB,EAAQmB,UAAUG,GAAK,SAASC,EAAOC,GAMtC,MALAT,MAAKU,WAAaV,KAAKU,eAClBV,KAAKU,WAAWF,KACpBR,KAAKU,WAAWF,OAEjBR,KAAKU,WAAWF,GAAOG,KAAKF,GACrBT,MAGRf,EAAQmB,UAAUQ,KAAO,WACxB,GAAIC,GAAMC,EAAUC,EAAWP,EAAOQ,EAAIC,CAI1C,IAHAT,EAAQU,UAAU,GAAIL,EAAO,GAAKK,UAAUC,OAAS3B,EAAQW,KAAKe,UAAW,MAC7ElB,KAAKU,WAAaV,KAAKU,eACvBK,EAAYf,KAAKU,WAAWF,GAE3B,IAAKQ,EAAK,EAAGC,EAAOF,EAAUI,OAAQH,EAAKC,EAAMD,IAChDF,EAAWC,EAAUC,GACrBF,EAASM,MAAMpB,KAAMa,EAGvB,OAAOb,OAGRf,EAAQmB,UAAUiB,eAAiBpC,EAAQmB,UAAUkB,IAErDrC,EAAQmB,UAAUmB,mBAAqBtC,EAAQmB,UAAUkB,IAEzDrC,EAAQmB,UAAUoB,oBAAsBvC,EAAQmB,UAAUkB,IAE1DrC,EAAQmB,UAAUkB,IAAM,SAASd,EAAOC,GACvC,GAAIK,GAAUC,EAAWU,EAAGT,EAAIC,CAChC,KAAKjB,KAAKU,YAAmC,IAArBQ,UAAUC,OAEjC,MADAnB,MAAKU,cACEV,IAGR,IADAe,EAAYf,KAAKU,WAAWF,IACvBO,EACJ,MAAOf,KAER,IAAyB,IAArBkB,UAAUC,OAEb,aADOnB,MAAKU,WAAWF,GAChBR,IAER,KAAKyB,EAAIT,EAAK,EAAGC,EAAOF,EAAUI,OAAQH,EAAKC,EAAMQ,IAAMT,EAE1D,GADAF,EAAWC,EAAUU,GACjBX,IAAaL,EAAI,CACpBM,EAAUW,OAAOD,EAAG,EACpB,OAGF,MAAOzB,OAGDf,KAIRD,EAAW,SAAU2C,GA0TpB,QAAS3C,GAAS4C,EAASC,GAC1B,GAAIC,GAAgBC,EAAUC,CAU9B,IATAhC,KAAK4B,QAAUA,EACf5B,KAAKiC,QAAUjD,EAASiD,QACxBjC,KAAKkC,eAAeC,gBAAkBnC,KAAKkC,eAAeC,gBAAgBC,QAAQ,OAAQ,IAC1FpC,KAAKqC,qBACLrC,KAAKsC,aACLtC,KAAKuC,SACuB,gBAAjBvC,MAAK4B,UACf5B,KAAK4B,QAAUY,SAASC,cAAczC,KAAK4B,WAEtC5B,KAAK4B,SAAqC,MAAzB5B,KAAK4B,QAAQc,SACnC,KAAM,IAAIC,OAAM,4BAEjB,IAAI3C,KAAK4B,QAAQgB,SAChB,KAAM,IAAID,OAAM,6BAMjB,IAJA3D,EAAS6D,UAAUlC,KAAKX,MACxBA,KAAK4B,QAAQgB,SAAW5C,KACxB8B,EAAsE,OAApDE,EAAOhD,EAAS8D,kBAAkB9C,KAAK4B,UAAoBI,KAC7EhC,KAAK6B,QAAUkB,KAAW/C,KAAKkC,eAAgBJ,EAA2B,MAAXD,EAAkBA,MAC7E7B,KAAK6B,QAAQmB,gBAAkBhE,EAASiE,qBAC3C,MAAOjD,MAAK6B,QAAQE,SAAS5B,KAAKH,KAKnC,IAHwB,MAApBA,KAAK6B,QAAQqB,MAChBlD,KAAK6B,QAAQqB,IAAMlD,KAAK4B,QAAQuB,aAAa,YAEzCnD,KAAK6B,QAAQqB,IACjB,KAAM,IAAIP,OAAM,mBAEjB,IAAI3C,KAAK6B,QAAQuB,eAAiBpD,KAAK6B,QAAQwB,kBAC9C,KAAM,IAAIV,OAAM,qGAEb3C,MAAK6B,QAAQwB,oBAChBrD,KAAK6B,QAAQuB,cAAgBpD,KAAK6B,QAAQwB,wBACnCrD,MAAK6B,QAAQwB,mBAErBrD,KAAK6B,QAAQyB,OAAStD,KAAK6B,QAAQyB,OAAOC,eACrCxB,EAAW/B,KAAKwD,wBAA0BzB,EAAS0B,YACvD1B,EAAS0B,WAAWC,YAAY3B,GAE7B/B,KAAK6B,QAAQ8B,qBAAsB,IAClC3D,KAAK6B,QAAQ8B,kBAChB3D,KAAK2D,kBAAoB3E,EAAS4E,WAAW5D,KAAK6B,QAAQ8B,kBAAmB,qBAE7E3D,KAAK2D,kBAAoB3D,KAAK4B,SAG5B5B,KAAK6B,QAAQgC,YACZ7D,KAAK6B,QAAQgC,aAAc,EAC9B7D,KAAKqC,mBAAqBrC,KAAK4B,SAE/B5B,KAAKqC,kBAAoBrD,EAAS8E,YAAY9D,KAAK6B,QAAQgC,UAAW,cAGxE7D,KAAK+D,OAhXN,GAAIhB,GAAQiB,CA4yCZ,OA1yCApE,GAAUZ,EAAU2C,GAEpB3C,EAASoB,UAAUnB,QAAUA,EAW7BD,EAASoB,UAAU6D,QAAU,OAAQ,YAAa,UAAW,YAAa,WAAY,YAAa,YAAa,aAAc,cAAe,YAAa,QAAS,gBAAiB,aAAc,qBAAsB,iBAAkB,sBAAuB,UAAW,kBAAmB,UAAW,kBAAmB,WAAY,mBAAoB,WAAY,mBAAoB,QAAS,mBAAoB,kBAAmB,iBAE7ajF,EAASoB,UAAU8B,gBAClBgB,IAAK,KACLI,OAAQ,OACRY,iBAAiB,EACjBC,gBAAiB,EACjBC,gBAAgB,EAChBC,YAAa,IACbC,UAAW,OACXC,uBAAuB,EACvBC,qBAAsB,GACtBC,eAAgB,IAChBC,gBAAiB,IACjBC,aAAc,IACdC,SAAU,KACVC,UACAhB,WAAW,EACXiB,mBAAmB,EACnB1B,cAAe,KACfC,kBAAmB,KACnB0B,kBAAkB,EAClBC,WAAW,EACXC,gBAAgB,EAChBtB,kBAAmB,KACnBuB,qBAAsB,OACtBC,QAAS,KACTC,eAAgB,KAChBC,mBAAoB,4BACpBC,oBAAqB,0DACrBC,iBAAkB,kFAClBC,eAAgB,uEAChBC,oBAAqB,uCACrBC,kBAAmB,6CACnBC,iBAAkB,gBAClBC,6BAA8B,+CAC9BC,eAAgB,cAChBC,2BAA4B,KAC5BC,qBAAsB,qCACtBC,OAAQ,SAASC,EAAMC,GACtB,MAAOA,MAERnC,KAAM,WACL,MAAOzE,IAER0D,eAAe,EACfjB,SAAU,WACT,GAAIlC,GAAOsG,EAAgBC,EAAMpF,EAAIC,EAAMe,CAG3C,KAFAhC,KAAK4B,QAAQyE,UAAY,GAAKrG,KAAK4B,QAAQyE,UAAY,4BACvDrE,EAAOhC,KAAK4B,QAAQ0E,qBAAqB,OACpCtF,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CnB,EAAQmC,EAAKhB,GACT,uBAAuBuF,KAAK1G,EAAMwG,aACrCF,EAAiBtG,EACjBA,EAAMwG,UAAY,aAgBpB,OAZKF,KACJA,EAAiBnH,EAASwH,cAAc,+CACxCxG,KAAK4B,QAAQ6E,YAAYN,IAE1BC,EAAOD,EAAeG,qBAAqB,QAAQ,GAC/CF,IACqB,MAApBA,EAAKM,YACRN,EAAKM,YAAc1G,KAAK6B,QAAQyD,oBACJ,MAAlBc,EAAKO,YACfP,EAAKO,UAAY3G,KAAK6B,QAAQyD,sBAGzBtF,KAAK4B,QAAQ6E,YAAYzG,KAAK4G,oBAEtCC,OAAQ,SAASZ,GAChB,GAAIa,GAAMC,EAAUC,CAiCpB,OAhCAF,IACCG,KAAM,EACNC,KAAM,EACNC,SAAUlB,EAAKmB,MACfC,UAAWpB,EAAKqB,QAEjBP,EAAWd,EAAKmB,MAAQnB,EAAKqB,OAC7BR,EAAKS,SAAWvH,KAAK6B,QAAQ4C,eAC7BqC,EAAKU,UAAYxH,KAAK6B,QAAQ6C,gBACR,MAAjBoC,EAAKS,UAAwC,MAAlBT,EAAKU,WACpCV,EAAKS,SAAWT,EAAKK,SACrBL,EAAKU,UAAYV,EAAKO,WACK,MAAjBP,EAAKS,SACfT,EAAKS,SAAWR,EAAWD,EAAKU,UACJ,MAAlBV,EAAKU,YACfV,EAAKU,UAAa,EAAIT,EAAYD,EAAKS,UAExCP,EAAWF,EAAKS,SAAWT,EAAKU,UAC5BvB,EAAKqB,OAASR,EAAKU,WAAavB,EAAKmB,MAAQN,EAAKS,UACrDT,EAAKW,UAAYX,EAAKO,UACtBP,EAAKY,SAAWZ,EAAKK,UAEjBJ,EAAWC,GACdF,EAAKO,UAAYpB,EAAKqB,OACtBR,EAAKK,SAAWL,EAAKO,UAAYL,IAEjCF,EAAKK,SAAWlB,EAAKmB,MACrBN,EAAKO,UAAYP,EAAKK,SAAWH,GAGnCF,EAAKG,MAAQhB,EAAKmB,MAAQN,EAAKK,UAAY,EAC3CL,EAAKI,MAAQjB,EAAKqB,OAASR,EAAKO,WAAa,EACtCP,GAWRa,KAAM,SAASC,GACd,MAAO5H,MAAK4B,QAAQiG,UAAUC,OAAO,kBAEtCC,UAAWzI,EACX0I,QAAS,SAASJ,GACjB,MAAO5H,MAAK4B,QAAQiG,UAAUC,OAAO,kBAEtCG,UAAW,SAASL,GACnB,MAAO5H,MAAK4B,QAAQiG,UAAUK,IAAI,kBAEnCC,SAAU,SAASP,GAClB,MAAO5H,MAAK4B,QAAQiG,UAAUK,IAAI,kBAEnCE,UAAW,SAASR,GACnB,MAAO5H,MAAK4B,QAAQiG,UAAUC,OAAO,kBAEtCO,MAAO/I,EACPgJ,MAAO,WACN,MAAOtI,MAAK4B,QAAQiG,UAAUC,OAAO,eAEtCS,UAAW,SAAStC,GACnB,GAAIuC,GAAMC,EAAiBC,EAAY1H,EAAI2H,EAAIC,EAAI3H,EAAM4H,EAAOC,EAAO9G,EAAM+G,EAAOC,EAAOC,CAI3F,IAHIjJ,KAAK4B,UAAY5B,KAAK2D,mBACzB3D,KAAK4B,QAAQiG,UAAUK,IAAI,cAExBlI,KAAK2D,kBAAmB,CAK3B,IAJAsC,EAAKiD,eAAiBlK,EAASwH,cAAcxG,KAAK6B,QAAQM,gBAAgBgH,QAC1ElD,EAAK9D,gBAAkB8D,EAAKiD,eAC5BlJ,KAAK2D,kBAAkB8C,YAAYR,EAAKiD,gBACxClH,EAAOiE,EAAKiD,eAAeE,iBAAiB,kBACvCpI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CwH,EAAOxG,EAAKhB,GACZwH,EAAK9B,YAAc1G,KAAKqJ,gBAAgBpD,EAAKqD,KAG9C,KADAP,EAAQ9C,EAAKiD,eAAeE,iBAAiB,kBACxCT,EAAK,EAAGE,EAAQE,EAAM5H,OAAQwH,EAAKE,EAAOF,IAC9CH,EAAOO,EAAMJ,GACbH,EAAKe,UAAYvJ,KAAKwJ,SAASvD,EAAKwD,KA2BrC,KAzBIzJ,KAAK6B,QAAQoD,iBAChBgB,EAAKyD,YAAc1K,EAASwH,cAAc,oEAA0ExG,KAAK6B,QAAQgE,eAAiB,QAClJI,EAAKiD,eAAezC,YAAYR,EAAKyD,cAEtCjB,EAAkB,SAAUkB,GAC3B,MAAO,UAAS/B,GAGf,MAFAA,GAAEgC,iBACFhC,EAAEiC,kBACE5D,EAAK6D,SAAW9K,EAAS+K,UACrB/K,EAASgL,QAAQL,EAAM9H,QAAQ+D,6BAA8B,WACnE,MAAO+D,GAAMM,WAAWhE,KAGrB0D,EAAM9H,QAAQiE,2BACV9G,EAASgL,QAAQL,EAAM9H,QAAQiE,2BAA4B,WACjE,MAAO6D,GAAMM,WAAWhE,KAGlB0D,EAAMM,WAAWhE,KAIzBjG,MACHgJ,EAAQ/C,EAAKiD,eAAeE,iBAAiB,oBAC7CH,KACKL,EAAK,EAAGE,EAAQE,EAAM7H,OAAQyH,EAAKE,EAAOF,IAC9CF,EAAaM,EAAMJ,GACnBK,EAAStI,KAAK+H,EAAWpI,iBAAiB,QAASmI,GAEpD,OAAOQ,KAGTiB,YAAa,SAASjE,GACrB,GAAIjE,EAMJ,OALIiE,GAAKiD,gBAC4B,OAA/BlH,EAAOiE,EAAKiD,iBAChBlH,EAAKyB,WAAWC,YAAYuC,EAAKiD,gBAG5BlJ,KAAKmK,+BAEbC,UAAW,SAASnE,EAAMoE,GACzB,GAAIC,GAAkBtJ,EAAIC,EAAMe,CAChC,IAAIiE,EAAKiD,eAAgB,CAGxB,IAFAjD,EAAKiD,eAAerB,UAAUC,OAAO,mBACrC9F,EAAOiE,EAAKiD,eAAeE,iBAAiB,uBACvCpI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CsJ,EAAmBtI,EAAKhB,GACxBsJ,EAAiBC,IAAMtE,EAAKqD,KAC5BgB,EAAiBE,IAAMH,CAExB,OAAOI,YAAY,SAAUd,GAC5B,MAAO,YACN,MAAO1D,GAAKiD,eAAerB,UAAUK,IAAI,sBAExClI,MAAQ,KAGb0K,MAAO,SAASzE,EAAM0E,GACrB,GAAInC,GAAMxH,EAAIC,EAAMe,EAAMiH,CAC1B,IAAIhD,EAAKiD,eAAgB,CAOxB,IANAjD,EAAKiD,eAAerB,UAAUK,IAAI,YACX,gBAAZyC,IAAwBA,EAAQD,QAC1CC,EAAUA,EAAQD,OAEnB1I,EAAOiE,EAAKiD,eAAeE,iBAAiB,0BAC5CH,KACKjI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CwH,EAAOxG,EAAKhB,GACZiI,EAAStI,KAAK6H,EAAK9B,YAAciE,EAElC,OAAO1B,KAGT2B,cAAetL,EACfuL,WAAY,SAAS5E,GACpB,GAAIA,EAAKiD,iBACRjD,EAAKiD,eAAerB,UAAUK,IAAI,iBAC9BjC,EAAKyD,aACR,MAAOzD,GAAKyD,YAAYhD,YAAc1G,KAAK6B,QAAQ8D,kBAItDmF,mBAAoBxL,EACpByL,eAAgB,SAAS9E,EAAM+E,EAAUC,GACxC,GAAIzC,GAAMxH,EAAIC,EAAMe,EAAMiH,CAC1B,IAAIhD,EAAKiD,eAAgB,CAGxB,IAFAlH,EAAOiE,EAAKiD,eAAeE,iBAAiB,4BAC5CH,KACKjI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CwH,EAAOxG,EAAKhB,GACU,aAAlBwH,EAAK0C,SACRjC,EAAStI,KAAK6H,EAAK2C,MAAQH,GAE3B/B,EAAStI,KAAK6H,EAAK4C,MAAMhE,MAAQ,GAAK4D,EAAW,IAGnD,OAAO/B,KAGToC,oBAAqB/L,EACrBgM,QAAShM,EACTiM,gBAAiBjM,EACjBkM,QAAS,SAASvF,GACjB,GAAIA,EAAKiD,eACR,MAAOjD,GAAKiD,eAAerB,UAAUK,IAAI,eAG3CuD,gBAAiBnM,EACjBoM,SAAU,SAASzF,GAClB,MAAOjG,MAAKY,KAAK,QAASqF,EAAM,qBAEjC0F,iBAAkBrM,EAClBsM,SAAU,SAAS3F,GAIlB,GAHIA,EAAKyD,cACRzD,EAAKyD,YAAYhD,YAAc1G,KAAK6B,QAAQgE,gBAEzCI,EAAKiD,eACR,MAAOjD,GAAKiD,eAAerB,UAAUK,IAAI,gBAG3C2D,iBAAkBvM,EAClBwM,iBAAkBxM,EAClByM,gBAAiBzM,EACjB0M,cAAe1M,EACf2M,WAAY3M,EACZ6C,gBAAiB,8lGAGlBY,EAAS,WACR,GAAI7C,GAAKgM,EAAQC,EAASC,EAAQC,EAAKrL,EAAIC,CAE3C,KADAmL,EAASlL,UAAU,GAAIiL,EAAU,GAAKjL,UAAUC,OAAS3B,EAAQW,KAAKe,UAAW,MAC5EF,EAAK,EAAGC,EAAOkL,EAAQhL,OAAQH,EAAKC,EAAMD,IAAM,CACpDkL,EAASC,EAAQnL,EACjB,KAAKd,IAAOgM,GACXG,EAAMH,EAAOhM,GACbkM,EAAOlM,GAAOmM,EAGhB,MAAOD,IA6DRpN,EAASoB,UAAUkM,iBAAmB,WACrC,GAAIrG,GAAMjF,EAAIC,EAAMe,EAAMiH,CAG1B,KAFAjH,EAAOhC,KAAKuC,MACZ0G,KACKjI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CiF,EAAOjE,EAAKhB,GACRiF,EAAKsG,UACRtD,EAAStI,KAAKsF,EAGhB,OAAOgD,IAGRjK,EAASoB,UAAUoM,iBAAmB,WACrC,GAAIvG,GAAMjF,EAAIC,EAAMe,EAAMiH,CAG1B,KAFAjH,EAAOhC,KAAKuC,MACZ0G,KACKjI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CiF,EAAOjE,EAAKhB,GACPiF,EAAKsG,UACTtD,EAAStI,KAAKsF,EAGhB,OAAOgD,IAGRjK,EAASoB,UAAUqM,mBAAqB,SAAS3C,GAChD,GAAI7D,GAAMjF,EAAIC,EAAMe,EAAMiH,CAG1B,KAFAjH,EAAOhC,KAAKuC,MACZ0G,KACKjI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CiF,EAAOjE,EAAKhB,GACRiF,EAAK6D,SAAWA,GACnBb,EAAStI,KAAKsF,EAGhB,OAAOgD,IAGRjK,EAASoB,UAAUsM,eAAiB,WACnC,MAAO1M,MAAKyM,mBAAmBzN,EAAS2N,SAGzC3N,EAASoB,UAAUwM,kBAAoB,WACtC,MAAO5M,MAAKyM,mBAAmBzN,EAAS+K,YAGzC/K,EAASoB,UAAUyM,cAAgB,WAClC,MAAO7M,MAAKyM,mBAAmBzN,EAAS8N,QAGzC9N,EAASoB,UAAU2M,eAAiB,WACnC,GAAI9G,GAAMjF,EAAIC,EAAMe,EAAMiH,CAG1B,KAFAjH,EAAOhC,KAAKuC,MACZ0G,KACKjI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CiF,EAAOjE,EAAKhB,GACRiF,EAAK6D,SAAW9K,EAAS+K,WAAa9D,EAAK6D,SAAW9K,EAAS2N,QAClE1D,EAAStI,KAAKsF,EAGhB,OAAOgD,IAGRjK,EAASoB,UAAU2D,KAAO,WACzB,GAAIiJ,GAAWC,EAAeC,EAAsBlM,EAAIC,EAAMe,EAAM+G,CAkDpE,KAjD6B,SAAzB/I,KAAK4B,QAAQuL,SAChBnN,KAAK4B,QAAQwL,aAAa,UAAW,uBAElCpN,KAAK4B,QAAQiG,UAAUwF,SAAS,cAAgBrN,KAAK4B,QAAQa,cAAc,gBAC9EzC,KAAK4B,QAAQ6E,YAAYzH,EAASwH,cAAc,4CAAgDxG,KAAK6B,QAAQwD,mBAAqB,kBAE/HrF,KAAKqC,kBAAkBlB,SAC1B+L,EAAuB,SAAUvD,GAChC,MAAO,YAuBN,MAtBIA,GAAM2D,iBACT3D,EAAM2D,gBAAgB7J,WAAWC,YAAYiG,EAAM2D,iBAEpD3D,EAAM2D,gBAAkB9K,SAASgE,cAAc,SAC/CmD,EAAM2D,gBAAgBF,aAAa,OAAQ,SACZ,MAA1BzD,EAAM9H,QAAQ+C,UAAqB+E,EAAM9H,QAAQ+C,SAAW,IAChE+E,EAAM2D,gBAAgBF,aAAa,WAAY,YAEhDzD,EAAM2D,gBAAgBjH,UAAY,kBACC,MAA/BsD,EAAM9H,QAAQuB,eACjBuG,EAAM2D,gBAAgBF,aAAa,SAAUzD,EAAM9H,QAAQuB,eAE/B,MAAzBuG,EAAM9H,QAAQsD,SACjBwE,EAAM2D,gBAAgBF,aAAa,UAAWzD,EAAM9H,QAAQsD,SAE7DwE,EAAM2D,gBAAgBlC,MAAMmC,WAAa,SACzC5D,EAAM2D,gBAAgBlC,MAAMoC,SAAW,WACvC7D,EAAM2D,gBAAgBlC,MAAMqC,IAAM,IAClC9D,EAAM2D,gBAAgBlC,MAAMsC,KAAO,IACnC/D,EAAM2D,gBAAgBlC,MAAM9D,OAAS,IACrCqC,EAAM2D,gBAAgBlC,MAAMhE,MAAQ,IACpC5E,SAASC,cAAckH,EAAM9H,QAAQqD,sBAAsBuB,YAAYkD,EAAM2D,iBACtE3D,EAAM2D,gBAAgBhN,iBAAiB,SAAU,WACvD,GAAI2F,GAAM1D,EAAOvB,EAAIC,CAErB,IADAsB,EAAQoH,EAAM2D,gBAAgB/K,MAC1BA,EAAMpB,OACT,IAAKH,EAAK,EAAGC,EAAOsB,EAAMpB,OAAQH,EAAKC,EAAMD,IAC5CiF,EAAO1D,EAAMvB,GACb2I,EAAMgE,QAAQ1H,EAIhB,OADA0D,GAAM/I,KAAK,aAAc2B,GAClB2K,QAGPlN,SAGJA,KAAK4N,IAA6B,OAAtB5L,EAAOlD,OAAO8O,KAAe5L,EAAOlD,OAAO+O,UACvD9E,EAAQ/I,KAAKiE,OACRjD,EAAK,EAAGC,EAAO8H,EAAM5H,OAAQH,EAAKC,EAAMD,IAC5CgM,EAAYjE,EAAM/H,GAClBhB,KAAKO,GAAGyM,EAAWhN,KAAK6B,QAAQmL,GA+FjC,OA7FAhN,MAAKO,GAAG,iBAAkB,SAAUoJ,GACnC,MAAO,YACN,MAAOA,GAAMmE,8BAEZ9N,OACHA,KAAKO,GAAG,cAAe,SAAUoJ,GAChC,MAAO,YACN,MAAOA,GAAMmE,8BAEZ9N,OACHA,KAAKO,GAAG,WAAY,SAAUoJ,GAC7B,MAAO,UAAS1D,GACf,MAAO0D,GAAM/I,KAAK,WAAYqF,KAE7BjG,OACHA,KAAKO,GAAG,WAAY,SAAUoJ,GAC7B,MAAO,UAAS1D,GACf,GAAqC,IAAjC0D,EAAMkD,gBAAgB1L,QAAqD,IAArCwI,EAAMiD,oBAAoBzL,QAAkD,IAAlCwI,EAAM+C,iBAAiBvL,OAC1G,MAAOsJ,YAAW,WACjB,MAAOd,GAAM/I,KAAK,kBACf,KAGJZ,OACHiN,EAAgB,SAASrF,GAExB,MADAA,GAAEiC,kBACEjC,EAAEgC,eACEhC,EAAEgC,iBAEFhC,EAAEmG,aAAc,GAGzB/N,KAAKsC,YAEHV,QAAS5B,KAAK4B,QACdqC,QACC8D,UAAa,SAAU4B,GACtB,MAAO,UAAS/B,GACf,MAAO+B,GAAM/I,KAAK,YAAagH,KAE9B5H,MACHiI,UAAa,SAAU0B,GACtB,MAAO,UAAS/B,GAEf,MADAqF,GAAcrF,GACP+B,EAAM/I,KAAK,YAAagH,KAE9B5H,MACHmI,SAAY,SAAUwB,GACrB,MAAO,UAAS/B,GACf,GAAIoG,EACJ,KACCA,EAAOpG,EAAEqG,aAAaC,cACrB,MAAOC,IAGT,MAFAvG,GAAEqG,aAAaG,WAAa,SAAWJ,GAAQ,aAAeA,EAAO,OAAS,OAC9Ef,EAAcrF,GACP+B,EAAM/I,KAAK,WAAYgH,KAE7B5H,MACHoI,UAAa,SAAUuB,GACtB,MAAO,UAAS/B,GACf,MAAO+B,GAAM/I,KAAK,YAAagH,KAE9B5H,MACH2H,KAAQ,SAAUgC,GACjB,MAAO,UAAS/B,GAEf,MADAqF,GAAcrF,GACP+B,EAAMhC,KAAKC,KAEjB5H,MACHgI,QAAW,SAAU2B,GACpB,MAAO,UAAS/B,GACf,MAAO+B,GAAM/I,KAAK,UAAWgH,KAE5B5H,SAINA,KAAKqC,kBAAkBgM,QAAQ,SAAU1E,GACxC,MAAO,UAAS2E,GACf,MAAO3E,GAAMrH,UAAU3B,MACtBiB,QAAS0M,EACTrK,QACCsK,MAAS,SAASC,GAIjB,OAHKF,IAAqB3E,EAAM/H,SAAa4M,EAAIpC,SAAWzC,EAAM/H,SAAW5C,EAASyP,cAAcD,EAAIpC,OAAQzC,EAAM/H,QAAQa,cAAc,kBAC3IkH,EAAM2D,gBAAgBiB,SAEhB,QAKTvO,OACHA,KAAK0O,SACE1O,KAAK6B,QAAQkC,KAAK5D,KAAKH,OAG/BhB,EAASoB,UAAUuO,QAAU,WAC5B,GAAI3M,EAQJ,OAPAhC,MAAK4O,UACL5O,KAAK6O,gBAAe,IACiB,OAAhC7M,EAAOhC,KAAKsN,iBAA2BtL,EAAKyB,WAAa,UAC7DzD,KAAKsN,gBAAgB7J,WAAWC,YAAY1D,KAAKsN,iBACjDtN,KAAKsN,gBAAkB,YAEjBtN,MAAK4B,QAAQgB,SACb5D,EAAS6D,UAAUnB,OAAO1C,EAAS6D,UAAUiM,QAAQ9O,MAAO,IAGpEhB,EAASoB,UAAU0N,0BAA4B,WAC9C,GAAIiB,GAAa9I,EAAM+I,EAAYC,EAAgBC,EAAqBlO,EAAIC,EAAMe,CAIlF,IAHAiN,EAAiB,EACjBD,EAAa,EACbD,EAAc/O,KAAK+M,iBACfgC,EAAY5N,OAAQ,CAEvB,IADAa,EAAOhC,KAAK+M,iBACP/L,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CiF,EAAOjE,EAAKhB,GACZiO,GAAkBhJ,EAAKkJ,OAAOlE,UAC9B+D,GAAc/I,EAAKkJ,OAAOC,KAE3BF,GAAsB,IAAMD,EAAiBD,MAE7CE,GAAsB,GAEvB,OAAOlP,MAAKY,KAAK,sBAAuBsO,EAAqBF,EAAYC,IAG1EjQ,EAASoB,UAAUiP,cAAgB,SAASC,GAC3C,MAAsC,kBAA3BtP,MAAK6B,QAAQyC,UAChBtE,KAAK6B,QAAQyC,UAAUgL,GAEvB,GAAKtP,KAAK6B,QAAQyC,WAAatE,KAAK6B,QAAQuC,eAAiB,IAAMkL,EAAI,IAAM,KAItFtQ,EAASoB,UAAUiJ,gBAAkB,SAASC,GAC7C,MAA2C,kBAAhCtJ,MAAK6B,QAAQuD,eAChBkE,EAEDtJ,KAAK6B,QAAQuD,eAAekE,IAGpCtK,EAASoB,UAAUwG,gBAAkB,WACpC,GAAI2I,GAAkBC,EAAQC,EAAcC,CAC5C,QAAIH,EAAmBvP,KAAKwD,uBACpB+L,GAERE,EAAe,4BACXzP,KAAK6B,QAAQ0D,mBAChBkK,GAAgB,MAAQzP,KAAK6B,QAAQ0D,iBAAmB,QAEzDkK,GAAgB,4BAAkCzP,KAAKqP,cAAc,GAAM,MAASrP,KAAK6B,QAAQuC,eAAiB,sBAAwB,QAAU,iDACpJoL,EAASxQ,EAASwH,cAAciJ,GACH,SAAzBzP,KAAK4B,QAAQuL,SAChBuC,EAAO1Q,EAASwH,cAAc,iBAAoBxG,KAAK6B,QAAQqB,IAAM,2CAAiDlD,KAAK6B,QAAQyB,OAAS,aAC5IoM,EAAKjJ,YAAY+I,KAEjBxP,KAAK4B,QAAQwL,aAAa,UAAW,uBACrCpN,KAAK4B,QAAQwL,aAAa,SAAUpN,KAAK6B,QAAQyB,SAEnC,MAARoM,EAAeA,EAAOF,IAG9BxQ,EAASoB,UAAUoD,oBAAsB,WACxC,GAAIzB,GAAU4N,EAAaxC,EAASnM,EAAIC,EAAMe,CAW9C,KAVA2N,EAAc,SAASC,GACtB,GAAIC,GAAI7O,EAAIC,CACZ,KAAKD,EAAK,EAAGC,EAAO2O,EAASzO,OAAQH,EAAKC,EAAMD,IAE/C,GADA6O,EAAKD,EAAS5O,GACV,qBAAqBuF,KAAKsJ,EAAGxJ,WAChC,MAAOwJ,IAIV7N,GAAQ,MAAO,QACVhB,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAE3C,GADAmM,EAAUnL,EAAKhB,GACXe,EAAW4N,EAAY3P,KAAK4B,QAAQ0E,qBAAqB6G,IAC5D,MAAOpL,IAKV/C,EAASoB,UAAU0P,oBAAsB,WACxC,GAAIC,GAAkBvP,EAAOwP,EAAUhP,EAAIC,EAAMe,EAAMiH,CAGvD,KAFAjH,EAAOhC,KAAKsC,UACZ2G,KACKjI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3C+O,EAAmB/N,EAAKhB,GACxBiI,EAAStI,KAAK,WACb,GAAIoI,GAAOkH,CACXlH,GAAQgH,EAAiB9L,OACzBgM,IACA,KAAKzP,IAASuI,GACbiH,EAAWjH,EAAMvI,GACjByP,EAAUtP,KAAKoP,EAAiBnO,QAAQtB,iBAAiBE,EAAOwP,GAAU,GAE3E,OAAOC,MAGT,OAAOhH,IAGRjK,EAASoB,UAAU8P,qBAAuB,WACzC,GAAIH,GAAkBvP,EAAOwP,EAAUhP,EAAIC,EAAMe,EAAMiH,CAGvD,KAFAjH,EAAOhC,KAAKsC,UACZ2G,KACKjI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3C+O,EAAmB/N,EAAKhB,GACxBiI,EAAStI,KAAK,WACb,GAAIoI,GAAOkH,CACXlH,GAAQgH,EAAiB9L,OACzBgM,IACA,KAAKzP,IAASuI,GACbiH,EAAWjH,EAAMvI,GACjByP,EAAUtP,KAAKoP,EAAiBnO,QAAQJ,oBAAoBhB,EAAOwP,GAAU,GAE9E,OAAOC,MAGT,OAAOhH,IAGRjK,EAASoB,UAAUwO,QAAU,WAC5B,GAAI3I,GAAMjF,EAAIC,EAAMe,EAAMiH,CAO1B,KANAjJ,KAAKqC,kBAAkBgM,QAAQ,SAASzM,GACvC,MAAOA,GAAQiG,UAAUC,OAAO,kBAEjC9H,KAAKkQ,uBACLlO,EAAOhC,KAAKuC,MACZ0G,KACKjI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CiF,EAAOjE,EAAKhB,GACZiI,EAAStI,KAAKX,KAAKmQ,aAAalK,GAEjC,OAAOgD,IAGRjK,EAASoB,UAAUsO,OAAS,WAI3B,MAHA1O,MAAKqC,kBAAkBgM,QAAQ,SAASzM,GACvC,MAAOA,GAAQiG,UAAUK,IAAI,kBAEvBlI,KAAK8P,uBAGb9Q,EAASoB,UAAUoJ,SAAW,SAASC,GACtC,GAAI2G,GAAQ3O,EAAG4O,EAAcC,EAAcC,EAAMC,EAAOxP,EAAIC,CAG5D,IAFAoP,EAAe,EACfC,EAAe,IACX7G,EAAO,EAAG,CAEb,IADA+G,GAAS,KAAM,KAAM,KAAM,KAAM,KAC5B/O,EAAIT,EAAK,EAAGC,EAAOuP,EAAMrP,OAAQH,EAAKC,EAAMQ,IAAMT,EAGtD,GAFAuP,EAAOC,EAAM/O,GACb2O,EAASK,KAAKC,IAAI1Q,KAAK6B,QAAQ8C,aAAc,EAAIlD,GAAK,GAClDgI,GAAQ2G,EAAQ,CACnBC,EAAe5G,EAAOgH,KAAKC,IAAI1Q,KAAK6B,QAAQ8C,aAAc,EAAIlD,GAC9D6O,EAAeC,CACf,OAGFF,EAAeI,KAAKE,MAAM,GAAKN,GAAgB,GAEhD,MAAO,WAAaA,EAAe,aAAeC,GAGnDtR,EAASoB,UAAU+J,4BAA8B,WAChD,MAA8B,OAAzBnK,KAAK6B,QAAQ+C,UAAqB5E,KAAKsM,mBAAmBnL,QAAUnB,KAAK6B,QAAQ+C,UACjF5E,KAAKsM,mBAAmBnL,SAAWnB,KAAK6B,QAAQ+C,UACnD5E,KAAKY,KAAK,kBAAmBZ,KAAKuC,OAE5BvC,KAAK4B,QAAQiG,UAAUK,IAAI,yBAE3BlI,KAAK4B,QAAQiG,UAAUC,OAAO,yBAIvC9I,EAASoB,UAAUuH,KAAO,SAASC,GAClC,GAAIrF,GAAOqO,CACNhJ,GAAEqG,eAGPjO,KAAKY,KAAK,OAAQgH,GAClBrF,EAAQqF,EAAEqG,aAAa1L,MACvBvC,KAAKY,KAAK,aAAc2B,GACpBA,EAAMpB,SACTyP,EAAQhJ,EAAEqG,aAAa2C,MACnBA,GAASA,EAAMzP,QAAwC,MAA7ByP,EAAM,GAAGC,iBACtC7Q,KAAK8Q,mBAAmBF,GAExB5Q,KAAK+Q,YAAYxO,MAKpBvD,EAASoB,UAAUiI,MAAQ,SAAST,GACnC,GAAIgJ,GAAO5O,CACX,IAAqF,OAA3E,MAAL4F,GAAwC,OAA3B5F,EAAO4F,EAAEoJ,eAAyBhP,EAAK4O,MAAiB,QAK1E,MAFA5Q,MAAKY,KAAK,QAASgH,GACnBgJ,EAAQhJ,EAAEoJ,cAAcJ,MACpBA,EAAMzP,OACFnB,KAAK8Q,mBAAmBF,GADhC,QAKD5R,EAASoB,UAAU2Q,YAAc,SAASxO,GACzC,GAAI0D,GAAMjF,EAAIC,EAAMgI,CAEpB,KADAA,KACKjI,EAAK,EAAGC,EAAOsB,EAAMpB,OAAQH,EAAKC,EAAMD,IAC5CiF,EAAO1D,EAAMvB,GACbiI,EAAStI,KAAKX,KAAK2N,QAAQ1H,GAE5B,OAAOgD,IAGRjK,EAASoB,UAAU0Q,mBAAqB,SAASF,GAChD,GAAIK,GAAOC,EAAMlQ,EAAIC,EAAMgI,CAE3B,KADAA,KACKjI,EAAK,EAAGC,EAAO2P,EAAMzP,OAAQH,EAAKC,EAAMD,IAC5CkQ,EAAON,EAAM5P,GACiB,MAAzBkQ,EAAKL,mBAA8BI,EAAQC,EAAKL,oBAChDI,EAAME,OACTlI,EAAStI,KAAKX,KAAK2N,QAAQuD,EAAKE,cACtBH,EAAMI,YAChBpI,EAAStI,KAAKX,KAAKsR,uBAAuBL,EAAOA,EAAM3H,OAEvDL,EAAStI,KAAK,QAEa,MAAlBuQ,EAAKE,YACG,MAAbF,EAAKK,MAA+B,SAAdL,EAAKK,MAC/BtI,EAAStI,KAAKX,KAAK2N,QAAQuD,EAAKE,cAKjCnI,EAAStI,KAAK,OAGhB,OAAOsI,IAGRjK,EAASoB,UAAUkR,uBAAyB,SAASE,EAAWC,GAC/D,GAAIC,GAAWC,EAAcC,CA8B7B,OA7BAF,GAAYF,EAAUK,eACtBF,EAAe,SAASjH,GACvB,MAA0B,mBAAZoH,UAAuC,OAAZA,SAA0C,kBAAhBA,SAAQC,IAAqBD,QAAQC,IAAIrH,GAAkB,SAE/HkH,EAAc,SAAUjI,GACvB,MAAO,YACN,MAAO+H,GAAUE,YAAY,SAASI,GACrC,GAAIf,GAAOjQ,EAAIC,CACf,IAAI+Q,EAAQ7Q,OAAS,EAAG,CACvB,IAAKH,EAAK,EAAGC,EAAO+Q,EAAQ7Q,OAAQH,EAAKC,EAAMD,IAC9CiQ,EAAQe,EAAQhR,GACZiQ,EAAME,OACTF,EAAMhL,KAAK,SAASA,GACnB,IAAI0D,EAAM9H,QAAQiD,mBAAmD,MAA9BmB,EAAKqD,KAAK2I,UAAU,EAAG,GAI9D,MADAhM,GAAKiM,SAAW,GAAKT,EAAO,IAAMxL,EAAKqD,KAChCK,EAAMgE,QAAQ1H,KAEZgL,EAAMI,aAChB1H,EAAM2H,uBAAuBL,EAAO,GAAKQ,EAAO,IAAMR,EAAM3H,KAG9DsI,KAED,MAAO,OACLD,KAEF3R,UAIJhB,EAASoB,UAAU4F,OAAS,SAASC,EAAMC,GAC1C,MAAID,GAAKwD,KAAkC,KAA3BzJ,KAAK6B,QAAQwC,YAAqB,KAC1C6B,EAAKlG,KAAK6B,QAAQ2D,eAAepD,QAAQ,eAAgBqO,KAAKE,MAAM1K,EAAKwD,KAAO,KAAO,OAAS,KAAKrH,QAAQ,kBAAmBpC,KAAK6B,QAAQwC,cACzIrF,EAASmT,YAAYlM,EAAMjG,KAAK6B,QAAQuB,eAEf,MAAzBpD,KAAK6B,QAAQ+C,UAAqB5E,KAAKsM,mBAAmBnL,QAAUnB,KAAK6B,QAAQ+C,UAC5FsB,EAAKlG,KAAK6B,QAAQkE,qBAAqB3D,QAAQ,eAAgBpC,KAAK6B,QAAQ+C,WACrE5E,KAAKY,KAAK,mBAAoBqF,IAE9BjG,KAAK6B,QAAQmE,OAAO7F,KAAKH,KAAMiG,EAAMC,GALrCA,EAAKlG,KAAK6B,QAAQ4D,sBAS3BzG,EAASoB,UAAUuN,QAAU,SAAS1H,GAUrC,MATAA,GAAKkJ,QACJnE,SAAU,EACVoE,MAAOnJ,EAAKwD,KACZwB,UAAW,GAEZjL,KAAKuC,MAAM5B,KAAKsF,GAChBA,EAAK6D,OAAS9K,EAAS8N,MACvB9M,KAAKY,KAAK,YAAaqF,GACvBjG,KAAKoS,kBAAkBnM,GAChBjG,KAAKgG,OAAOC,EAAM,SAAU0D,GAClC,MAAO,UAASe,GAUf,MATIA,IACHzE,EAAKsG,UAAW,EAChB5C,EAAM0I,kBAAkBpM,GAAOyE,KAE/BzE,EAAKsG,UAAW,EACZ5C,EAAM9H,QAAQmD,WACjB2E,EAAM2I,YAAYrM,IAGb0D,EAAMQ,gCAEZnK,QAGJhB,EAASoB,UAAUmS,aAAe,SAAShQ,GAC1C,GAAI0D,GAAMjF,EAAIC,CACd,KAAKD,EAAK,EAAGC,EAAOsB,EAAMpB,OAAQH,EAAKC,EAAMD,IAC5CiF,EAAO1D,EAAMvB,GACbhB,KAAKsS,YAAYrM,EAElB,OAAO,OAGRjH,EAASoB,UAAUkS,YAAc,SAASrM,GACzC,GAAIA,EAAK6D,SAAW9K,EAAS8N,OAAS7G,EAAKsG,YAAa,EAUvD,KAAM,IAAI5J,OAAM,mFARhB,IADAsD,EAAK6D,OAAS9K,EAAS2N,OACnB3M,KAAK6B,QAAQkD,iBAChB,MAAO0F,YAAY,SAAUd,GAC5B,MAAO,YACN,MAAOA,GAAM6I,iBAEZxS,MAAQ,IAOdhB,EAASoB,UAAUqS,mBAEnBzT,EAASoB,UAAUsS,sBAAuB,EAE1C1T,EAASoB,UAAUgS,kBAAoB,SAASnM,GAC/C,GAAIjG,KAAK6B,QAAQ0C,uBAAyB0B,EAAK0M,KAAKC,MAAM,YAAc3M,EAAKwD,MAA4C,KAApCzJ,KAAK6B,QAAQ2C,qBAA8B,KAE/H,MADAxE,MAAKyS,gBAAgB9R,KAAKsF,GACnBwE,WAAY,SAAUd,GAC5B,MAAO,YACN,MAAOA,GAAMkJ,2BAEZ7S,MAAQ,IAIbhB,EAASoB,UAAUyS,uBAAyB,WAC3C,IAAI7S,KAAK0S,sBAAwD,IAAhC1S,KAAKyS,gBAAgBtR,OAItD,MADAnB,MAAK0S,sBAAuB,EACrB1S,KAAK8S,gBAAgB9S,KAAKyS,gBAAgBM,QAAS,SAAUpJ,GACnE,MAAO,YAEN,MADAA,GAAM+I,sBAAuB,EACtB/I,EAAMkJ,2BAEZ7S,QAGJhB,EAASoB,UAAU6J,WAAa,SAAShE,GAMxC,GALIA,EAAK6D,SAAW9K,EAAS+K,WAC5B/J,KAAKmQ,aAAalK,GAEnBjG,KAAKuC,MAAQhD,EAAQS,KAAKuC,MAAO0D,GACjCjG,KAAKY,KAAK,cAAeqF,GACC,IAAtBjG,KAAKuC,MAAMpB,OACd,MAAOnB,MAAKY,KAAK,UAInB5B,EAASoB,UAAUyO,eAAiB,SAASmE,GAC5C,GAAI/M,GAAMjF,EAAIC,EAAMe,CAKpB,KAJyB,MAArBgR,IACHA,GAAoB,GAErBhR,EAAOhC,KAAKuC,MAAM9C,QACbuB,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CiF,EAAOjE,EAAKhB,IACRiF,EAAK6D,SAAW9K,EAAS+K,WAAaiJ,IACzChT,KAAKiK,WAAWhE,EAGlB,OAAO,OAGRjH,EAASoB,UAAU0S,gBAAkB,SAAS7M,EAAMnF,GACnD,GAAImS,EAcJ,OAbAA,GAAa,GAAIC,YACjBD,EAAWE,OAAS,SAAUxJ,GAC7B,MAAO,YACN,MAAkB,kBAAd1D,EAAK0M,MACRhJ,EAAM/I,KAAK,YAAaqF,EAAMgN,EAAWG,aACzB,MAAZtS,GACHA,MAIK6I,EAAM0J,uBAAuBpN,EAAMgN,EAAWG,OAAQtS,KAE5Dd,MACIiT,EAAWK,cAAcrN,IAGjCjH,EAASoB,UAAUiT,uBAAyB,SAASpN,EAAMsN,EAAUzS,EAAU0S,GAC9E,GAAIC,EAgCJ,OA/BAA,GAAMjR,SAASgE,cAAc,OACzBgN,IACHC,EAAID,YAAcA,GAEnBC,EAAIN,OAAS,SAAUxJ,GACtB,MAAO,YACN,GAAI+J,GAAQC,EAAKC,EAAYxJ,EAAWpI,EAAM+G,EAAOC,EAAO6K,CAiB5D,IAhBA5N,EAAKmB,MAAQqM,EAAIrM,MACjBnB,EAAKqB,OAASmM,EAAInM,OAClBsM,EAAajK,EAAM9H,QAAQgF,OAAO1G,KAAKwJ,EAAO1D,GACnB,MAAvB2N,EAAWlM,WACdkM,EAAWlM,SAAWkM,EAAWrM,UAEN,MAAxBqM,EAAWnM,YACdmM,EAAWnM,UAAYmM,EAAWpM,WAEnCkM,EAASlR,SAASgE,cAAc,UAChCmN,EAAMD,EAAOI,WAAW,MACxBJ,EAAOtM,MAAQwM,EAAWlM,SAC1BgM,EAAOpM,OAASsM,EAAWnM,UAC3BpI,EAAgBsU,EAAKF,EAAiC,OAA3BzR,EAAO4R,EAAW3M,MAAgBjF,EAAO,EAAgC,OAA5B+G,EAAQ6K,EAAW1M,MAAgB6B,EAAQ,EAAG6K,EAAWzM,SAAUyM,EAAWvM,UAAwC,OAA5B2B,EAAQ4K,EAAWG,MAAgB/K,EAAQ,EAAgC,OAA5B6K,EAAQD,EAAWI,MAAgBH,EAAQ,EAAGD,EAAWlM,SAAUkM,EAAWnM,WAC/R2C,EAAYsJ,EAAOO,UAAU,aAC7BtK,EAAM/I,KAAK,YAAaqF,EAAMmE,GACd,MAAZtJ,EACH,MAAOA,OAGPd,MACa,MAAZc,IACH2S,EAAIS,QAAUpT,GAER2S,EAAIjJ,IAAM+I,GAGlBvU,EAASoB,UAAUoS,aAAe,WACjC,GAAI/Q,GAAG0C,EAAiBgQ,EAAkBC,CAI1C,IAHAjQ,EAAkBnE,KAAK6B,QAAQsC,gBAC/BgQ,EAAmBnU,KAAK4M,oBAAoBzL,OAC5CM,EAAI0S,IACAA,GAAoBhQ,KAGxBiQ,EAAcpU,KAAK0M,iBACb0H,EAAYjT,OAAS,GAA3B,CAGA,GAAInB,KAAK6B,QAAQuC,eAChB,MAAOpE,MAAKqU,aAAaD,EAAY3U,MAAM,EAAG0E,EAAkBgQ,GAEhE,MAAO1S,EAAI0C,GAAiB,CAC3B,IAAKiQ,EAAYjT,OAChB,MAEDnB,MAAKsU,YAAYF,EAAYrB,SAC7BtR,OAKHzC,EAASoB,UAAUkU,YAAc,SAASrO,GACzC,MAAOjG,MAAKqU,cAAcpO,KAG3BjH,EAASoB,UAAUiU,aAAe,SAAS9R,GAC1C,GAAI0D,GAAMjF,EAAIC,CACd,KAAKD,EAAK,EAAGC,EAAOsB,EAAMpB,OAAQH,EAAKC,EAAMD,IAC5CiF,EAAO1D,EAAMvB,GACbiF,EAAK4E,YAAa,EAClB5E,EAAK6D,OAAS9K,EAAS+K,UACvB/J,KAAKY,KAAK,aAAcqF,EAKzB,OAHIjG,MAAK6B,QAAQuC,gBAChBpE,KAAKY,KAAK,qBAAsB2B,GAE1BvC,KAAKuU,YAAYhS,IAGzBvD,EAASoB,UAAUoU,iBAAmB,SAASC,GAC9C,GAAIxO,GAAM1D,CACV,OAAOA,GAAQ,WACd,GAAIvB,GAAIC,EAAMe,EAAMiH,CAGpB,KAFAjH,EAAOhC,KAAKuC,MACZ0G,KACKjI,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CiF,EAAOjE,EAAKhB,GACRiF,EAAKwO,MAAQA,GAChBxL,EAAStI,KAAKsF,EAGhB,OAAOgD,IACL9I,KAAKH,OAGThB,EAASoB,UAAU+P,aAAe,SAASlK,GAC1C,GAAIyO,GAAaC,EAAc3T,EAAI2H,EAAI1H,EAAM4H,EAAO7G,CACpD,IAAIiE,EAAK6D,SAAW9K,EAAS+K,UAAW,CAEvC,IADA4K,EAAe3U,KAAKwU,iBAAiBvO,EAAKwO,KACrCzT,EAAK,EAAGC,EAAO0T,EAAaxT,OAAQH,EAAKC,EAAMD,IACnD0T,EAAcC,EAAa3T,GAC3B0T,EAAY5K,OAAS9K,EAAS4V,QAG/B,KADA3O,EAAKwO,IAAII,QACJlM,EAAK,EAAGE,EAAQ8L,EAAaxT,OAAQwH,EAAKE,EAAOF,IACrD+L,EAAcC,EAAahM,GAC3B3I,KAAKY,KAAK,WAAY8T,EAEnB1U,MAAK6B,QAAQuC,gBAChBpE,KAAKY,KAAK,mBAAoB+T,QAEpB3S,EAAOiE,EAAK6D,UAAY9K,EAAS8N,OAAS9K,IAAShD,EAAS2N,SACvE1G,EAAK6D,OAAS9K,EAAS4V,SACvB5U,KAAKY,KAAK,WAAYqF,GAClBjG,KAAK6B,QAAQuC,gBAChBpE,KAAKY,KAAK,oBAAqBqF,IAGjC,IAAIjG,KAAK6B,QAAQkD,iBAChB,MAAO/E,MAAKwS,gBAIdxO,EAAgB,WACf,GAAInD,GAAMiU,CAEV,OADAA,GAAS5T,UAAU,GAAIL,EAAO,GAAKK,UAAUC,OAAS3B,EAAQW,KAAKe,UAAW,MACxD,kBAAX4T,GACHA,EAAO1T,MAAMpB,KAAMa,GAEpBiU,GAGR9V,EAASoB,UAAU2U,WAAa,SAAS9O,GACxC,MAAOjG,MAAKuU,aAAatO,KAG1BjH,EAASoB,UAAUmU,YAAc,SAAShS,GACzC,GAAI0D,GAAM+O,EAAUC,EAAaC,EAAYC,EAAaC,EAAS3T,EAAG4T,EAAOC,EAAWC,EAAWrV,EAAKoD,EAAQwR,EAAQU,EAAaC,EAAUC,EAAgBxS,EAAKiI,EAAOsJ,EAAKzT,EAAI2H,EAAIC,EAAI+M,EAAI1U,EAAM4H,EAAOC,EAAO8M,EAAOC,EAAI7T,EAAM+G,EAAOC,EAAO6K,EAAOiC,EAAOC,CAEjQ,KADAtB,EAAM,GAAIuB,gBACLhV,EAAK,EAAGC,EAAOsB,EAAMpB,OAAQH,EAAKC,EAAMD,IAC5CiF,EAAO1D,EAAMvB,GACbiF,EAAKwO,IAAMA,CAEZnR,GAASU,EAAchE,KAAK6B,QAAQyB,OAAQf,GAC5CW,EAAMc,EAAchE,KAAK6B,QAAQqB,IAAKX,GACtCkS,EAAIwB,KAAK3S,EAAQJ,GAAK,GACtBuR,EAAIvQ,kBAAoBlE,KAAK6B,QAAQqC,gBACrCuR,EAAW,KACXR,EAAc,SAAUtL,GACvB,MAAO,YACN,GAAIhB,GAAIE,EAAOI,CAEf,KADAA,KACKN,EAAK,EAAGE,EAAQtG,EAAMpB,OAAQwH,EAAKE,EAAOF,IAC9C1C,EAAO1D,EAAMoG,GACbM,EAAStI,KAAKgJ,EAAM0I,iBAAiB9P,EAAOkT,GAAY9L,EAAM9H,QAAQ6D,kBAAkBtD,QAAQ,iBAAkBqS,EAAI3K,QAAS2K,GAEhI,OAAOxL,KAENjJ,MACH0V,EAAiB,SAAU/L,GAC1B,MAAO,UAAS/B,GACf,GAAIsO,GAAkBlL,EAAUrC,EAAIC,EAAI+M,EAAI9M,EAAOC,EAAO8M,EAAO3M,CACjE,IAAS,MAALrB,EAEH,IADAoD,EAAW,IAAMpD,EAAEuO,OAASvO,EAAEwH,MACzBzG,EAAK,EAAGE,EAAQtG,EAAMpB,OAAQwH,EAAKE,EAAOF,IAC9C1C,EAAO1D,EAAMoG,GACb1C,EAAKkJ,QACJnE,SAAUA,EACVoE,MAAOxH,EAAEwH,MACTnE,UAAWrD,EAAEuO,YAGT,CAGN,IAFAD,GAAmB,EACnBlL,EAAW,IACNpC,EAAK,EAAGE,EAAQvG,EAAMpB,OAAQyH,EAAKE,EAAOF,IAC9C3C,EAAO1D,EAAMqG,GACkB,MAAzB3C,EAAKkJ,OAAOnE,UAAoB/E,EAAKkJ,OAAOlE,YAAchF,EAAKkJ,OAAOC,QAC3E8G,GAAmB,GAEpBjQ,EAAKkJ,OAAOnE,SAAWA,EACvB/E,EAAKkJ,OAAOlE,UAAYhF,EAAKkJ,OAAOC,KAErC,IAAI8G,EACH,OAIF,IADAjN,KACK0M,EAAK,EAAGC,EAAQrT,EAAMpB,OAAQwU,EAAKC,EAAOD,IAC9C1P,EAAO1D,EAAMoT,GACb1M,EAAStI,KAAKgJ,EAAM/I,KAAK,iBAAkBqF,EAAM+E,EAAU/E,EAAKkJ,OAAOlE,WAExE,OAAOhC,KAENjJ,MACHyU,EAAItB,OAAS,SAAUxJ,GACtB,MAAO,UAAS/B,GACf,GAAI5F,EACJ,IAAIO,EAAM,GAAGuH,SAAW9K,EAAS4V,UAGV,IAAnBH,EAAI2B,WAAR,CAIA,GADAX,EAAWhB,EAAI4B,aACX5B,EAAI6B,kBAAkB,kBAAoB7B,EAAI6B,kBAAkB,gBAAgBxH,QAAQ,oBAC3F,IACC2G,EAAWc,KAAKC,MAAMf,GACrB,MAAOtH,GACRvG,EAAIuG,EACJsH,EAAW,qCAIb,MADAC,KACO,MAAQ1T,EAAOyS,EAAI3K,SAAW9H,EAAO,IAGpC2H,EAAM8M,UAAUlU,EAAOkT,EAAU7N,GAFjCqN,OAKPjV,MACHyU,EAAIP,QAAU,SAAUvK,GACvB,MAAO,YACN,GAAIpH,EAAM,GAAGuH,SAAW9K,EAAS4V,SAGjC,MAAOK,OAENjV,MACHwV,EAAqC,OAAtBxT,EAAOyS,EAAItF,QAAkBnN,EAAOyS,EACnDe,EAAYkB,WAAahB,EACzBN,GACCuB,OAAU,mBACVC,gBAAiB,WACjBC,mBAAoB,kBAEjB7W,KAAK6B,QAAQuT,SAChBrS,EAAOqS,EAASpV,KAAK6B,QAAQuT,QAE9B,KAAKF,IAAcE,GAClBD,EAAcC,EAAQF,GAClBC,GACHV,EAAIqC,iBAAiB5B,EAAYC,EAInC,IADAH,EAAW,GAAI+B,UACX/W,KAAK6B,QAAQgD,OAAQ,CACxBkE,EAAQ/I,KAAK6B,QAAQgD,MACrB,KAAK3E,IAAO6I,GACXoC,EAAQpC,EAAM7I,GACd8U,EAASgC,OAAO9W,EAAKiL,GAGvB,IAAKxC,EAAK,EAAGE,EAAQtG,EAAMpB,OAAQwH,EAAKE,EAAOF,IAC9C1C,EAAO1D,EAAMoG,GACb3I,KAAKY,KAAK,UAAWqF,EAAMwO,EAAKO,EAKjC,IAHIhV,KAAK6B,QAAQuC,gBAChBpE,KAAKY,KAAK,kBAAmB2B,EAAOkS,EAAKO,GAEb,SAAzBhV,KAAK4B,QAAQuL,QAEhB,IADAnE,EAAQhJ,KAAK4B,QAAQwH,iBAAiB,mCACjCR,EAAK,EAAGE,EAAQE,EAAM7H,OAAQyH,EAAKE,EAAOF,IAI9C,GAHAyM,EAAQrM,EAAMJ,GACd0M,EAAYD,EAAMlS,aAAa,QAC/BoS,EAAYF,EAAMlS,aAAa,QACT,WAAlBkS,EAAMlI,SAAwBkI,EAAM4B,aAAa,YAEpD,IADApD,EAAQwB,EAAMxT,QACT8T,EAAK,EAAGC,EAAQ/B,EAAM1S,OAAQwU,EAAKC,EAAOD,IAC9Cb,EAASjB,EAAM8B,GACXb,EAAOoC,UACVlC,EAASgC,OAAO1B,EAAWR,EAAO3J,aAGzBoK,GAAoD,cAArCO,EAAQP,EAAU4B,gBAA2C,UAAVrB,GAAsBT,EAAM+B,UACzGpC,EAASgC,OAAO1B,EAAWD,EAAMlK,MAIpC,KAAK1J,EAAIoU,EAAK,EAAGE,EAAQxT,EAAMpB,OAAS,EAAG,GAAK4U,EAAQF,GAAME,EAAQF,GAAME,EAAOtU,EAAI,GAAKsU,IAAUF,IAAOA,EAC5Gb,EAASgC,OAAOhX,KAAKqP,cAAc5N,GAAIc,EAAMd,GAAIzB,KAAKqJ,gBAAgB9G,EAAMd,GAAG6H,MAEhF,OAAOtJ,MAAKqX,cAAc5C,EAAKO,EAAUzS,IAG1CvD,EAASoB,UAAUiX,cAAgB,SAAS5C,EAAKO,EAAUzS,GAC1D,MAAOkS,GAAI6C,KAAKtC,IAGjBhW,EAASoB,UAAUqW,UAAY,SAASlU,EAAO8T,EAAczO,GAC5D,GAAI3B,GAAMjF,EAAIC,CACd,KAAKD,EAAK,EAAGC,EAAOsB,EAAMpB,OAAQH,EAAKC,EAAMD,IAC5CiF,EAAO1D,EAAMvB,GACbiF,EAAK6D,OAAS9K,EAASuY,QACvBvX,KAAKY,KAAK,UAAWqF,EAAMoQ,EAAczO,GACzC5H,KAAKY,KAAK,WAAYqF,EAMvB,IAJIjG,KAAK6B,QAAQuC,iBAChBpE,KAAKY,KAAK,kBAAmB2B,EAAO8T,EAAczO,GAClD5H,KAAKY,KAAK,mBAAoB2B,IAE3BvC,KAAK6B,QAAQkD,iBAChB,MAAO/E,MAAKwS,gBAIdxT,EAASoB,UAAUiS,iBAAmB,SAAS9P,EAAOoI,EAAS8J,GAC9D,GAAIxO,GAAMjF,EAAIC,CACd,KAAKD,EAAK,EAAGC,EAAOsB,EAAMpB,OAAQH,EAAKC,EAAMD,IAC5CiF,EAAO1D,EAAMvB,GACbiF,EAAK6D,OAAS9K,EAASwY,MACvBxX,KAAKY,KAAK,QAASqF,EAAM0E,EAAS8J,GAClCzU,KAAKY,KAAK,WAAYqF,EAMvB,IAJIjG,KAAK6B,QAAQuC,iBAChBpE,KAAKY,KAAK,gBAAiB2B,EAAOoI,EAAS8J,GAC3CzU,KAAKY,KAAK,mBAAoB2B,IAE3BvC,KAAK6B,QAAQkD,iBAChB,MAAO/E,MAAKwS,gBAIPxT,GAELC,GAEHD,EAASiD,QAAU,QAEnBjD,EAAS6C,WAET7C,EAAS8D,kBAAoB,SAASlB,GACrC,MAAIA,GAAQuB,aAAa,MACjBnE,EAAS6C,QAAQ3C,EAAS0C,EAAQuB,aAAa,QAEtD,QAIFnE,EAAS6D,aAET7D,EAASyY,WAAa,SAAS7V,GAI9B,GAHuB,gBAAZA,KACVA,EAAUY,SAASC,cAAcb,IAEmB,OAArC,MAAXA,EAAkBA,EAAQgB,SAAW,QACzC,KAAM,IAAID,OAAM,iNAEjB,OAAOf,GAAQgB,UAGhB5D,EAAS0Y,cAAe,EAExB1Y,EAAS2Y,SAAW,WACnB,GAAIC,GAAehV,EAAUiV,EAAW7W,EAAIC,EAAMgI,CAsBlD,KArBIzG,SAAS4G,iBACZyO,EAAYrV,SAAS4G,iBAAiB,cAEtCyO,KACAD,EAAgB,SAAShI,GACxB,GAAIC,GAAI7O,EAAIC,EAAMgI,CAElB,KADAA,KACKjI,EAAK,EAAGC,EAAO2O,EAASzO,OAAQH,EAAKC,EAAMD,IAC/C6O,EAAKD,EAAS5O,GACV,qBAAqBuF,KAAKsJ,EAAGxJ,WAChC4C,EAAStI,KAAKkX,EAAUlX,KAAKkP,IAE7B5G,EAAStI,KAAK,OAGhB,OAAOsI,IAER2O,EAAcpV,SAAS8D,qBAAqB,QAC5CsR,EAAcpV,SAAS8D,qBAAqB,UAE7C2C,KACKjI,EAAK,EAAGC,EAAO4W,EAAU1W,OAAQH,EAAKC,EAAMD,IAChD4B,EAAWiV,EAAU7W,GACjBhC,EAAS8D,kBAAkBF,MAAc,EAC5CqG,EAAStI,KAAK,GAAI3B,GAAS4D,IAE3BqG,EAAStI,KAAK,OAGhB,OAAOsI,IAGRjK,EAAS8Y,qBAAuB,kCAEhC9Y,EAASiE,mBAAqB,WAC7B,GAAI8U,GAAgBC,EAAOhX,EAAIC,EAAMe,CAErC,IADA+V,GAAiB,EACbjZ,OAAOmZ,MAAQnZ,OAAOoU,YAAcpU,OAAOoZ,UAAYpZ,OAAOqZ,MAAQrZ,OAAOiY,UAAYvU,SAASC,cACrG,GAAM,aAAeD,UAASgE,cAAc,KAI3C,IADAxE,EAAOhD,EAAS8Y,oBACX9W,EAAK,EAAGC,EAAOe,EAAKb,OAAQH,EAAKC,EAAMD,IAC3CgX,EAAQhW,EAAKhB,GACTgX,EAAMzR,KAAK6R,UAAUC,aACxBN,GAAiB,OANnBA,IAAiB,MAYlBA,IAAiB,CAElB,OAAOA,IAGRxY,EAAU,SAAS+Y,EAAMC,GACxB,GAAIrH,GAAMlQ,EAAIC,EAAMgI,CAEpB,KADAA,KACKjI,EAAK,EAAGC,EAAOqX,EAAKnX,OAAQH,EAAKC,EAAMD,IAC3CkQ,EAAOoH,EAAKtX,GACRkQ,IAASqH,GACZtP,EAAStI,KAAKuQ,EAGhB,OAAOjI,IAGR/J,EAAW,SAASsZ,GACnB,MAAOA,GAAIpW,QAAQ,aAAc,SAASwQ,GACzC,MAAOA,GAAM6F,OAAO,GAAGlV,iBAIzBvE,EAASwH,cAAgB,SAASkS,GACjC,GAAIC,EAGJ,OAFAA,GAAMnW,SAASgE,cAAc,OAC7BmS,EAAIpP,UAAYmP,EACTC,EAAIC,WAAW,IAGvB5Z,EAASyP,cAAgB,SAAS7M,EAASiX,GAC1C,GAAIjX,IAAYiX,EACf,OAAO,CAER,MAAOjX,EAAUA,EAAQ6B,YACxB,GAAI7B,IAAYiX,EACf,OAAO,CAGT,QAAO,GAGR7Z,EAAS4E,WAAa,SAASiM,EAAIvG,GAClC,GAAI1H,EAMJ,IALkB,gBAAPiO,GACVjO,EAAUY,SAASC,cAAcoN,GACR,MAAfA,EAAGnN,WACbd,EAAUiO,GAEI,MAAXjO,EACH,KAAM,IAAIe,OAAM,YAAc2G,EAAO,4EAEtC,OAAO1H,IAGR5C,EAAS8E,YAAc,SAASgV,EAAKxP,GACpC,GAAI1B,GAAGiI,EAAID,EAAU5O,EAAI2H,EAAI1H,EAAM4H,EAAO7G,CAC1C,IAAI8W,YAAeC,OAAO,CACzBnJ,IACA,KACC,IAAK5O,EAAK,EAAGC,EAAO6X,EAAI3X,OAAQH,EAAKC,EAAMD,IAC1C6O,EAAKiJ,EAAI9X,GACT4O,EAASjP,KAAKX,KAAK4D,WAAWiM,EAAIvG,IAElC,MAAO6E,GACRvG,EAAIuG,EACJyB,EAAW,UAEN,IAAmB,gBAARkJ,GAGjB,IAFAlJ,KACA5N,EAAOQ,SAAS4G,iBAAiB0P,GAC5BnQ,EAAK,EAAGE,EAAQ7G,EAAKb,OAAQwH,EAAKE,EAAOF,IAC7CkH,EAAK7N,EAAK2G,GACViH,EAASjP,KAAKkP,OAEW,OAAhBiJ,EAAIpW,WACdkN,GAAYkJ,GAEb,IAAmB,MAAZlJ,IAAqBA,EAASzO,OACpC,KAAM,IAAIwB,OAAM,YAAc2G,EAAO,6FAEtC,OAAOsG,IAGR5Q,EAASgL,QAAU,SAASgP,EAAUzM,EAAU0M,GAC/C,MAAIna,QAAOkL,QAAQgP,GACXzM,IACe,MAAZ0M,EACHA,IADD,QAKRja,EAASmT,YAAc,SAASlM,EAAM7C,GACrC,GAAI8V,GAAcC,EAAUC,EAAWpY,EAAIC,CAC3C,KAAKmC,EACJ,OAAO,CAKR,KAHAA,EAAgBA,EAAciW,MAAM,KACpCF,EAAWlT,EAAK0M,KAChBuG,EAAeC,EAAS/W,QAAQ,QAAS,IACpCpB,EAAK,EAAGC,EAAOmC,EAAcjC,OAAQH,EAAKC,EAAMD,IAGpD,GAFAoY,EAAYhW,EAAcpC,GAC1BoY,EAAYA,EAAUjQ,OACM,MAAxBiQ,EAAUX,OAAO,IACpB,GAAIxS,EAAKqD,KAAK6N,cAAcrI,QAAQsK,EAAUjC,cAAelR,EAAKqD,KAAKnI,OAASiY,EAAUjY,WAAY,EACrG,OAAO;KAEF,IAAI,QAAQoF,KAAK6S,IACvB,GAAIF,IAAiBE,EAAUhX,QAAQ,QAAS,IAC/C,OAAO,MAGR,IAAI+W,IAAaC,EAChB,OAAO,CAIV,QAAO,GAGc,mBAAXE,SAAqC,OAAXA,SACpCA,OAAO7Y,GAAGmC,SAAW,SAASf,GAC7B,MAAO7B,MAAKuZ,KAAK,WAChB,MAAO,IAAIva,GAASgB,KAAM6B,OAKP,mBAAX2X,SAAqC,OAAXA,OACpCA,OAAOC,QAAUza,EAEjBF,OAAOE,SAAWA,EAGnBA,EAAS8N,MAAQ,QAEjB9N,EAAS2N,OAAS,SAElB3N,EAAS0a,SAAW1a,EAAS2N,OAE7B3N,EAAS+K,UAAY,YAErB/K,EAAS2a,WAAa3a,EAAS+K,UAE/B/K,EAAS4V,SAAW,WAEpB5V,EAASwY,MAAQ,QAEjBxY,EAASuY,QAAU,UAUnBnY,EAAuB,SAASqU,GAC/B,GAAImG,GAAOlG,EAAQC,EAAKkG,EAAMC,EAAIC,EAAIC,EAAIC,EAAIC,EAAOC,CAYrD,KAXAH,EAAKvG,EAAI2G,aACTL,EAAKtG,EAAI4G,cACT3G,EAASlR,SAASgE,cAAc,UAChCkN,EAAOtM,MAAQ,EACfsM,EAAOpM,OAASyS,EAChBpG,EAAMD,EAAOI,WAAW,MACxBH,EAAI2G,UAAU7G,EAAK,EAAG,GACtBoG,EAAOlG,EAAI4G,aAAa,EAAG,EAAG,EAAGR,GAAIF,KACrCM,EAAK,EACLL,EAAKC,EACLE,EAAKF,EACEE,EAAKE,GACXP,EAAQC,EAAgB,GAAVI,EAAK,GAAS,GACd,IAAVL,EACHE,EAAKG,EAELE,EAAKF,EAENA,EAAMH,EAAKK,GAAO,CAGnB,OADAD,GAAQD,EAAKF,EACC,IAAVG,EACI,EAEAA,GAIT7a,EAAkB,SAASsU,EAAKF,EAAK+G,EAAIL,EAAIM,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAChE,GAAIC,EAEJ,OADAA,GAAkB3b,EAAqBqU,GAChCE,EAAI2G,UAAU7G,EAAK+G,EAAIL,EAAIM,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAKC,IAkB5D5b,EAAgB,SAAS6b,EAAKva,GAC7B,GAAIyH,GAAK+S,EAAK/U,EAAMnC,EAAMmX,EAAMC,EAAKC,EAAKC,EAAM5N,CA4BhD,IA3BAvH,GAAO,EACPuH,GAAM,EACNwN,EAAMD,EAAIxY,SACV6Y,EAAOJ,EAAIK,gBACXpT,EAAO+S,EAAI3a,iBAAmB,mBAAqB,cACnD8a,EAAOH,EAAI3a,iBAAmB,sBAAwB,cACtD6a,EAAOF,EAAI3a,iBAAmB,GAAK,KACnCyD,EAAO,SAAS6D,GACf,GAAe,qBAAXA,EAAE+K,MAAkD,aAAnBsI,EAAI7E,WAIzC,OADY,SAAXxO,EAAE+K,KAAkBqI,EAAMC,GAAKG,GAAKD,EAAMvT,EAAE+K,KAAM5O,GAAM,IACpDmC,IAASA,GAAO,GACbzF,EAAGN,KAAK6a,EAAKpT,EAAE+K,MAAQ/K,GAD/B,QAIDsT,EAAO,WACN,GAAItT,EACJ,KACCyT,EAAKE,SAAS,QACb,MAAOpN,GAGR,MAFAvG,GAAIuG,MACJ1D,YAAWyQ,EAAM,IAGlB,MAAOnX,GAAK,SAEU,aAAnBkX,EAAI7E,WAA2B,CAClC,GAAI6E,EAAIO,mBAAqBH,EAAKE,SAAU,CAC3C,IACC9N,GAAOuN,EAAIS,aACV,MAAOtN,IACLV,GACHyN,IAKF,MAFAD,GAAI/S,GAAKiT,EAAM,mBAAoBpX,GAAM,GACzCkX,EAAI/S,GAAKiT,EAAM,mBAAoBpX,GAAM,GAClCiX,EAAI9S,GAAKiT,EAAM,OAAQpX,GAAM,KAItC/E,EAAS0c,sBAAwB,WAChC,GAAI1c,EAAS0Y,aACZ,MAAO1Y,GAAS2Y,YAIlBxY,EAAcL,OAAQE,EAAS0c,wBAE7Bvb,KAAKH,MC/tDRlB,OAAOC,MAAQD,OAAOC,UAEtB,SAAU4c,EAAGrC,GACZ,YAGA,IAAIsC,MAGAC,KASAC,EAAoB,SAASrb,EAAIsb,GAEpC,GAAI9b,EAqHJ,OAlHkB,gBAAPQ,IACVsb,EAAMtb,EACNA,EAAK,MACmB,gBAAPA,KACjBsb,KACAtb,EAAK,MAQNR,EAAc,SAAS+b,GAEtB,GAMIva,GAGAwa,EATAC,EAAUlc,KAGVmc,EAASC,EAAErZ,QAAO,KAAUgZ,EAShC,KAAKta,IAAK0a,GACLA,EAAOxc,eAAe8B,KACzBya,EAAQza,GAAK0a,EAAO1a,GAKtB,IAAsB,gBAAXua,GACV,IAAKva,IAAKua,GACLA,EAAOrc,eAAe8B,KACzBya,EAAQza,GAAKua,EAAOva,GA6CvB,IAvCMya,EAAQrM,GAKmB,gBAAfqM,GAAQrM,IACzBqM,EAAQG,IAAMD,EAAEF,EAAQrM,IACxBqM,EAAQrM,GAAKqM,EAAQG,IAAIC,IAAI,IAGnBJ,EAAQrM,aAAcyJ,IAChC4C,EAAQG,IAAMH,EAAQrM,GACtBqM,EAAQrM,GAAKqM,EAAQG,IAAIC,IAAI,IAGnBJ,EAAQrM,aAAc0M,eAChCL,EAAQG,IAAMD,EAAEF,EAAQrM,MAfxBqM,EAAQG,IAAMD,EAAE,eAChBF,EAAQrM,GAAKqM,EAAQG,IAAIC,IAAI,IAkBD,gBAAlBJ,GAAQM,OAAyC,mBAAZb,GAAEa,MAC3Cb,EAAEa,MAAMC,aAAaP,EAAQM,MAAME,QACxCT,EAAkBN,EAAEa,MAAMG,KAAKT,EAAQM,OACvCN,EAAQM,MAAQ,GAAIP,IAEIW,SAAf5c,KAAKwc,QACfN,EAAQM,MAAQ,MAIW,kBAAjBN,GAAQnY,OAElBgV,MAAM3Y,UAAU2S,MAAM3R,MAAMF,WAG5Bgb,EAAQnY,KAAK3C,MAAM8a,EAAShb,YAIC,gBAAnBgb,GAAQjY,OAElB,IAAKxC,IAAKya,GAAQjY,OAGhBiY,EAAQjY,OAAOtE,eAAe8B,IAED,kBAAtBya,GAAQjY,OAAOxC,KAGtB,SAAUvB,EAAKY,GACVZ,EAAI,GACPgc,EAAQG,IAAI9b,GAAGL,EAAI,GAAIA,EAAI,GAAI,WAC9BY,EAASM,MAAM8a,EAAShb,aAGzBgb,EAAQG,IAAI9b,GAAGL,EAAI,GAAI,WACtBY,EAASM,MAAM8a,EAAShb,cAGxBO,EAAE4X,MAAM,KAAM6C,EAAQjY,OAAOxC,KAOhChB,IACHmb,EAAanb,GAAMR,GAIbA,EAMR0b,GAAEkB,YAKDF,KAAM,WACL,MAAOb,GAAkB1a,MAAM0a,EAAmB5a,YAQnD4b,UAAW,SAASxT,GAEnB,GAAIyT,EAGJ,OAAkC,kBAAvBnB,GAAatS,GAChB,MAIRyT,EAAiB,IAAKC,SAAS5c,UAAU6c,KAAK7b,MAC7Cwa,EAAatS,GAAOpI,YAIrB2a,EAAYlb,KAAKoc,GAGVA,MAGPje,OAAOC,MAAOD,OAAOwa,QClLxBxa,OAAOC,MAAQD,OAAOC,UAEtB,SAAU4c,GACT,YAGA,IAAIuB,MAGAR,EAAO,WACV,GAAIS,GAAK,WACR,MAAO1M,MAAK2M,MAA4B,OAArB,EAAI3M,KAAK4M,WAC1BC,SAAS,IACTrL,UAAU,GAGb,OAAOkL,KAAOA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAC9CA,IAAO,IAAMA,IAAOA,IAAOA,KAQzBI,EAAyB,SAASC,GAErC,GAAIvd,EA0KJ,OAvKqB,gBAAVud,KACVA,MAIDvd,EAAc,SAASwd,GAEtB,GAAIvB,GAAUlc,IAGdkc,GAAQQ,KAAOA,IAGfQ,EAAMvc,KAAKub,EAAQQ,MAGnBR,EAAQwB,cAGRxB,EAAQyB,cAAgBH,EAGxBtB,EAAQ0B,eAGR,KAAK,GAAIC,KAAQ3B,GAAQyB,cACpBzB,EAAQyB,cAAche,eAAeke,KACxC3B,EAAQ0B,aAAaC,MAKvB,KAAK,GAAIpc,KAAKgc,GACTA,EAAc9d,eAAe8B,IACCmb,SAA7BV,EAAQyB,cAAclc,KACzBya,EAAQwB,WAAWjc,GAAKgc,EAAchc,KAO1CxB,EAAYG,WACXkc,IAAK,SAAShT,GACb,GAAIkT,GAAQxc,IAEZ,OAAIwc,GAAMkB,WAAWpU,GACc,QAA9BkT,EAAMmB,cAAcrU,GAChBwU,SAAStB,EAAMkB,WAAWpU,IACO,UAA9BkT,EAAMmB,cAAcrU,GACvByU,WAAWvB,EAAMkB,WAAWpU,IACK,WAA9BkT,EAAMmB,cAAcrU,GACvB0U,OAAOxB,EAAMkB,WAAWpU,IACS,SAA9BkT,EAAMmB,cAAcrU,GACvBkT,EAAMkB,WAAWpU,MAAU,EACM,UAA9BkT,EAAMmB,cAAcrU,GAC1BkT,EAAMkB,WAAWpU,GAAMrJ,cAAgB8Y,MACnCyD,EAAMkB,WAAWpU,MAIe,WAA9BkT,EAAMmB,cAAcrU,GAC1BkT,EAAMkB,WAAWpU,GAAMrJ,cAAgBge,OACnCzB,EAAMkB,WAAWpU,MAKlB,KAIuB,QAA9BkT,EAAMmB,cAAcrU,IACU,UAA9BkT,EAAMmB,cAAcrU,GAEb,EACiC,WAA9BkT,EAAMmB,cAAcrU,GACvB,GACiC,SAA9BkT,EAAMmB,cAAcrU,KAEU,UAA9BkT,EAAMmB,cAAcrU,MAEU,WAA9BkT,EAAMmB,cAAcrU,MAGvB,OAIV4U,IAAK,SAAS5U,EAAM+C,GACnB,GAGIxL,GAHA2b,EAAQxc,KACRme,GAAU,EACVC,EAAS5B,EAAMkB,WAAWpU,EA2B9B,IAxBkC,QAA9BkT,EAAMmB,cAAcrU,IACvBkT,EAAMkB,WAAWpU,GAAQwU,SAASzR,GAClC8R,GAAU,GAC8B,UAA9B3B,EAAMmB,cAAcrU,IAC9BkT,EAAMkB,WAAWpU,GAAQyU,WAAW1R,GACpC8R,GAAU,GAC8B,WAA9B3B,EAAMmB,cAAcrU,IAC9BkT,EAAMkB,WAAWpU,GAAQ0U,OAAO3R,GAChC8R,GAAU,GAC8B,SAA9B3B,EAAMmB,cAAcrU,IAC9BkT,EAAMkB,WAAWpU,GAAQ+C,KAAQ,GAAgB,SAARA,GAA0B,QAARA,GAAyB,MAARA,EAC5E8R,GAAU,GAC8B,UAA9B3B,EAAMmB,cAAcrU,GAC1B+C,EAAIpM,cAAgB8Y,QACvByD,EAAMkB,WAAWpU,GAAQ+C,EACzB8R,GAAU,GAE6B,WAA9B3B,EAAMmB,cAAcrU,IAC1B+C,EAAIpM,cAAgBge,SACvBzB,EAAMkB,WAAWpU,GAAQ+C,EACzB8R,GAAU,GAINA,GAAWC,IAAW5B,EAAMkB,WAAWpU,IAAsCsT,SAA7BJ,EAAMoB,aAAatU,GAAzE,CAIAzI,GACC2b,EAAMkB,WAAWpU,GACjB8U,EAGD,KAAK,GAAI3c,KAAK+a,GAAMoB,aAAatU,GAChCkT,EAAMoB,aAAatU,GAAM7H,GAAG4M,QAAQ,SAASvN,GAC5CA,EAASM,MAAMN,EAAUD,OAI5Bwd,SAAU,SAAS/U,EAAMxI,GACxB,GAAI0b,GAAQxc,KACRE,EAAMoJ,EAAK+P,MAAM,IAEeuD,UAAhCJ,EAAMmB,cAAczd,EAAI,MACZ0c,SAAX1c,EAAI,IACwC0c,SAA3CJ,EAAMoB,aAAa1d,EAAI,IAAIoe,cAC9B9B,EAAMoB,aAAa1d,EAAI,IAAIoe,gBAG5B9B,EAAMoB,aAAa1d,EAAI,IAAIoe,YAAY3d,KAAKG,KAED8b,SAAvCJ,EAAMoB,aAAa1d,EAAI,IAAIA,EAAI,MAClCsc,EAAMoB,aAAa1d,EAAI,IAAIA,EAAI,QAGhCsc,EAAMoB,aAAa1d,EAAI,IAAIA,EAAI,IAAIS,KAAKG,MAI3Cyd,UAAW,SAASjV,GACnB,GAAIkT,GAAQxc,KACRE,EAAMoJ,EAAK+P,MAAM,IAENuD,UAAX1c,EAAI,GACPsc,EAAMoB,aAAa1d,EAAI,aAEhBsc,GAAMoB,aAAa1d,EAAI,IAAIA,EAAI,MAMlCD,EAMR0b,GAAEa,OAIDG,KAAM,WACL,MAAOY,GAAuBnc,MAC7Bmc,EACArc,YASFub,aAAc,SAASC,GACtB,MAAOQ,GAAMpO,QAAQ4N,IAAQ,KAG7B5d,OAAOC,OChOV,SAAUqd,GACR,YAGA,IAAIoC,GAAa,SAAS5c,EAAQ6c,GAChC,GAAIC,GAAMtG,UAAUC,UAAUlB,aAE9BnX,MAAKye,IAAMrC,EAAErZ,UAAUyb,EAAWG,SAASF,OAE3Cze,KAAK6Y,UAAYuD,EAAExa,GAEnB5B,KAAKye,IAAIG,QAAU,OAAOrY,KAAKmY,GAC/B1e,KAAKye,IAAII,UAAY,eAAetY,KAAKmY,GAEzC1e,KAAK6Y,UAAUiG,SAAS9e,KAAKye,IAAIM,eAEjC/e,KAAKgf,MACLhf,KAAKif,MAAQ,KACbjf,KAAKgf,GAAGE,SACRlf,KAAKgf,GAAGG,UAAY,KACpBnf,KAAKof,UAELpf,KAAK+D,OACL/D,KAAKqf,WAAWZ,GAChBze,KAAKsf,uBACLtf,KAAK6Y,UAAU0G,QAAQ,WAAWvf,MAG9BA,KAAKye,IAAII,YACX7e,KAAKye,IAAIe,gBAAkBhd,SAASid,MAKxCrD,GAAErZ,OAAOyb,GACPkB,aACAN,UACAO,SACAC,kBAAmB,SAAStW,EAAKoW,GAC/BlB,EAAWkB,UAAUpW,GAAQoW,GAE/BG,eAAgB,SAASvW,EAAK8V,GAC5BZ,EAAWY,OAAO9V,GAAQ8V,GAE5BU,kBAAmB,SAASxW,EAAKqW,GAC/BnB,EAAWmB,MAAMrW,GAAQqW,GAG3BI,OAAQ,SAASne,EAAQ6c,GACvB,GAAI1C,GAAM,GAAIK,GAAEoC,WAAW5c,EAAQ6c,EACnC,OAAO1C,IAITiE,QAAS,SAASC,GAChB,GAAIxM,GAAM,GAAIyM,MAEd,OADAzM,GAAIjJ,IAAMyV,EAAMzV,IACTiJ,GAIT0M,WAAY,SAASF,GACnB,MAAO7D,GAAEoC,WAAW4B,eAClB5B,EAAW6B,YAAYJ,GACvBzB,EAAWwB,QAAQC,IAIvBI,YAAa,SAASJ,GACpB,GAAIvM,GAASlR,SAASgE,cAAc,UAChCmN,EAAMD,EAAOI,WAAW,KAM5B,OAJAsI,GAAE1I,GAAQtM,MAAM6Y,EAAM7Y,OAAOE,OAAO2Y,EAAM3Y,QAC1CoM,EAAOtM,MAAQ6Y,EAAM7F,aACrB1G,EAAOpM,OAAS2Y,EAAM5F,cACtB1G,EAAI2G,UAAU2F,EAAM,EAAE,EAAEA,EAAM7F,aAAa6F,EAAM5F,eAC1C3G,GAIT4M,UAAW,SAASC,EAAMC,EAAOzE,GAC/B,IAAI,GAAIta,GAAE,EAAEgf,EAAEF,EAAMpf,OAAOM,EAAEgf,EAAEhf,IACzB+e,EAAO7gB,eAAe4gB,EAAM9e,MAC9Bsa,EAAIwE,EAAM9e,IAAM+e,EAAOD,EAAM9e,MAInCif,cAAe,SAASxG,EAAMyG,EAAEC,GAC9B,MAAKD,GAAEC,EAAK1G,GACD0G,EAAI1G,EAAO0G,IACJD,EAAGA,EAAIzG,IAI3B2G,iBAAkB,SAAShR,EAAGhO,EAAQf,GAGpC,GAAIggB,KACJ1E,GAAE7C,KAAKiF,EAAWmB,MAAM,SAASle,EAAEmG,GACjCkZ,EAAOngB,KAAKiH,KAEdkZ,EAAOC,KAAK,SAASC,EAAEC,GAAI,MAAOD,GAAEE,SAAWD,EAAEC,UAGjD,KAAI,GAAIzf,GAAE,EAAEgf,EAAEK,EAAO3f,OAAOM,EAAEgf,EAAEhf,IAC9B,GAAIqf,EAAOrf,GAAG0f,YAAYtR,EAAGhO,GAAS,CACpCif,EAAOrf,GAAG2f,OAAOvR,EAAGhO,EAAQ,SAASka,EAAI0C,GAChB,kBAAZ3d,IAAwBA,EAASib,EAAI0C,IAElD,SAMN4C,kBAAmB,WACjB,MAAOjF,GAAEkF,GAAGC,KAAK5hB,eAAe,oBAIlC6hB,aAAc,SAASC,GACrB,GAAIR,IAAMS,EAAGD,EAAK,GAAIE,EAAGF,EAAK,GAAId,EAAGc,EAAK,GAAIb,EAAGa,EAAK,GAGtD,OAFAR,GAAEW,GAAKX,EAAES,EAAIT,EAAEN,EACfM,EAAEY,GAAKZ,EAAEU,EAAIV,EAAEL,EACRK,IAKb,IAAIa,GAAgB,YAGpB1F,GAAErZ,OAAO+e,GACPX,YAAa,SAAStR,EAAGkS,GAEvB,OAAO,GAITb,SAAU,IACVE,OAAQ,SAASvR,EAAGhO,EAAQf,GAC1B,GAAIib,GAAM,GAAI+F,EACd/F,GAAIna,QAAUiO,EACd/O,EAASX,KAAKH,KAAK+b,EAAIla,IAEzBzB,WACE2f,OAAQ,SAASiC,GACfhiB,KAAK+D,KAAKie,GACVA,EAAKhD,GAAGW,MAAQ3f,MAElBiiB,aAAc,SAASC,GAErB,MADA9F,GAAEpc,KAAK4B,SAAS2d,QAAQ2C,GACjBliB,MAET4D,WAAY,WACV,MAAO5D,MAAK4B,YAIlB4c,EAAWsB,kBAAkB,QAAQgC,EAGrC,IAAIK,GAAa,YAGjBA,GAAW/hB,UAAY,GAAI0hB,GAE3B1F,EAAErZ,OAAOof,GACPhB,YAAa,SAAStR,EAAGkS,GACvB,GAAkB,OAAdlS,EAAG1C,QAAkB,OAAO,GAElC+T,SAAU,GACVE,OAAQ,SAASvR,EAAGhO,EAAQf,GAC1Bsb,EAAEoC,WAAWkB,UAAU0C,YAAYrC,OAAOlQ,EAAG,SAAS8Q,EAAEC,GACtD,GAAI7E,GAAM,GAAIoG,EACdpG,GAAIna,QAAUwa,EAAEvM,GAAIwS,KAAK,WAAWviB,SAEpCic,EAAIna,QAAQwF,MAAMuZ,GAAGrZ,OAAOsZ,GAC5B7E,EAAIuG,OAASzS,EAEU,kBAAZ/O,IACTA,EAASX,KAAKH,KAAK+b,EAAIla,QAI/B2c,EAAWsB,kBAAkB,QAAQqC,EAGrC,IAAII,GAAc,WAChBviB,KAAKwiB,MAAQ,EACbxiB,KAAKyiB,MAAQ,EACbziB,KAAK0iB,SAAW,GAChB1iB,KAAK2iB,SAAW,KAChB3iB,KAAK4iB,QAAU,EAAE,GAGnBL,GAAYniB,UAAY,GAAI+hB,GAE5B/F,EAAErZ,OAAOwf,GACPpB,YAAa,SAAStR,EAAGkS,GACvB,GAAI3F,EAAEoC,WAAW4B,gBAAiC,OAAdvQ,EAAG1C,QAAmB,OAAO,GAEnE+T,SAAU,GACVE,OAAQ,SAASvR,EAAGhO,EAAQf,GAC1B,GAAIub,GAAMD,EAAEvM,GACR4O,EAAMrC,EAAErZ,UAAUlB,EACtBua,GAAEoC,WAAWkB,UAAU0C,YAAYrC,OAAOlQ,EAAG,SAAS8Q,EAAEC,GACtD,GAAI7E,GAAM,GAAIwG,EACdlG,GAAIwG,OACJ9G,EAAI+G,aAAajT,EAAG8Q,EAAEC,GACtBvE,EAAI0G,OAAOhH,EAAIna,SACfma,EAAIuG,OAASzS,EACb4O,EAAI6D,OAASzS,EAEU,kBAAZ/O,KACTA,EAASib,EAAI0C,GACb1C,EAAIiH,eAMZ5G,EAAErZ,OAAOwf,EAAYniB,WACnB2D,KAAM,SAASie,GACbhiB,KAAKgiB,KAAOA,GAGdiB,UAAW,SAASvB,EAAEC,GAEpB,MADA3hB,MAAK4iB,QAAUlB,EAAEC,GACV3hB,MAITkjB,SAAU,SAASC,GAEjB,MADAnjB,MAAKwiB,MAAQW,EACNnjB,MAITojB,SAAU,SAASD,GAEjB,MADAnjB,MAAKyiB,MAAQziB,KAAKqjB,WAAWF,GACtBnjB,MAGTqjB,WAAY,SAASF,GAGnB,MAFIA,GAAEnjB,KAAK0iB,SAAUS,EAAInjB,KAAK0iB,SACrBS,EAAEnjB,KAAK2iB,WAAUQ,EAAInjB,KAAK2iB,UAC5BQ,GAETL,aAAc,SAASrP,EAAIkN,EAAEC,GAC3B5gB,KAAKoH,MAAQuZ,EACb3gB,KAAKsH,OAASsZ,EACd5gB,KAAK0T,OAASlR,SAASgE,cAAc,UACrCxG,KAAK0T,OAAOtM,MAAQuZ,EACpB3gB,KAAK0T,OAAOpM,OAASsZ,EACrB5gB,KAAKsjB,QAAUlH,EAAEpc,KAAK0T,QAAQtM,MAAM,QAAQE,OAAO,QACnDtH,KAAKujB,QAAUvjB,KAAK0T,OAAOI,WAAW,MACtC9T,KAAKwjB,UAAY,gBACjBxjB,KAAK4B,QAAU5B,KAAKsjB,QAAQjB,KAAK,WAAWviB,SAASsH,MAAMuZ,GAAGrZ,OAAOsZ,IAEvEqB,aAAc,SAASC,GAErB,MADAliB,MAAKsjB,QAAQ/D,QAAQ2C,GACdliB,MAGTyjB,MAAO,WAGL,MAFAzjB,MAAKujB,QAAQG,UAAY1jB,KAAKwjB,UAC9BxjB,KAAKujB,QAAQI,SAAS,EAAG,EAAG3jB,KAAK0T,OAAOtM,MAAOpH,KAAK0T,OAAOpM,QACpDtH,MAITgjB,OAAQ,WAmBN,MAjBAhjB,MAAKujB,QAAQK,OACb5jB,KAAKyjB,QAGLzjB,KAAKujB,QAAQM,UAAU/F,SAAsB,GAAb9d,KAAKoH,OAAc0W,SAAuB,GAAd9d,KAAKsH,SAEjEtH,KAAKujB,QAAQM,UAAU7jB,KAAK4iB,OAAO,GAAG5iB,KAAKgiB,KAAKvD,IAAIqF,OAAO9jB,KAAK4iB,OAAO,GAAG5iB,KAAKgiB,KAAKvD,IAAIsF,QACxF/jB,KAAKujB,QAAQS,OAAOhkB,KAAKwiB,OAAS/R,KAAKwT,GAAG,MAC1CjkB,KAAKujB,QAAQd,MAAMziB,KAAKyiB,MAAMziB,KAAKyiB,OAEnCziB,KAAKujB,QAAQM,WAAW/F,SAAsB,GAAb9d,KAAKoH,QAAe0W,SAAuB,GAAd9d,KAAKsH,SAEnEtH,KAAKujB,QAAQjJ,UAAUta,KAAKsiB,OAAO,EAAE,EAAEtiB,KAAKoH,MAAMpH,KAAKsH,QAGvDtH,KAAKujB,QAAQW,UACblkB,KAAKsjB,QAAQ/D,QAAQ,cACdvf,MAITmkB,aAAc,SAAShB,GAErB,MADAnjB,MAAKwjB,UAAYL,EACVnjB,QAKXwe,EAAWsB,kBAAkB,SAASyC,EAOpC,IAAI6B,GAAgB,WAClBpkB,KAAKqkB,KAAO,GACZrkB,KAAKskB,KAAO,GACZtkB,KAAKukB,KAAO,EACZvkB,KAAKwkB,KAAO,EACZxkB,KAAKgiB,KAAO,KAEd5F,GAAErZ,OAAOqhB,EAAchkB,WACrBqkB,IAAK,UACLvD,SAAU,GACV9B,OAAQ,SAAS6B,GACf,GAAIyD,GAAI1kB,KAAK2kB,KAOb,OALI1D,GAAES,EAAIgD,EAAEE,OAAQ3D,EAAES,EAAIgD,EAAEE,KAAM3D,EAAEW,GAAKX,EAAEN,EAAIM,EAAES,GAC7CT,EAAEU,EAAI+C,EAAEG,OAAQ5D,EAAEU,EAAI+C,EAAEG,KAAM5D,EAAEY,GAAKZ,EAAEL,EAAIK,EAAEU,GAC7CV,EAAEW,GAAK8C,EAAEI,OAAQ7D,EAAEW,GAAK8C,EAAEI,KAAM7D,EAAES,EAAIT,EAAEW,GAAKX,EAAEN,GAC/CM,EAAEY,GAAK6C,EAAEK,OAAQ9D,EAAEY,GAAK6C,EAAEK,KAAM9D,EAAEU,EAAIV,EAAEY,GAAKZ,EAAEL,GAE5CK,GAET+D,QAAS,SAASC,GAChBjlB,KAAKklB,IAAMD,EAAIjD,KAAKnJ,UAAUzR,QAC9BpH,KAAKmlB,IAAMF,EAAIjD,KAAKnJ,UAAUvR,SAC9BtH,KAAK2kB,OACHC,KAAM,EAAIK,EAAIG,KAAKzE,EACnBkE,KAAM,EAAII,EAAIG,KAAK9V,EACnBwV,KAAM9kB,KAAKklB,IAAMD,EAAIG,KAAKxd,EAC1Bmd,KAAM/kB,KAAKmlB,IAAMF,EAAIG,KAAKC,MAIhC7G,EAAWqB,eAAe,UAAUuE,EAMpC,IAAIkB,GAAkB,WACpBtlB,KAAKgiB,KAAO,KAEd5F,GAAErZ,OAAOuiB,EAAgBllB,WACvBqkB,IAAK,YACLvD,SAAU,EACV9B,OAAQ,SAAS6B,EAAEsE,GAcjB,MAbW,QAAPA,GACEtE,EAAES,EAAI1hB,KAAK4kB,OAAQ3D,EAAES,EAAI1hB,KAAK4kB,KAAM3D,EAAEW,GAAKX,EAAEN,EAAIM,EAAES,GACnDT,EAAEU,EAAI3hB,KAAK6kB,OAAQ5D,EAAEU,EAAI3hB,KAAK6kB,KAAM5D,EAAEY,GAAKZ,EAAEL,EAAIK,EAAEU,GACnDV,EAAEW,GAAK5hB,KAAK8kB,OAAQ7D,EAAEW,GAAK5hB,KAAK8kB,KAAM7D,EAAES,EAAIT,EAAEW,GAAKX,EAAEN,GACrDM,EAAEY,GAAK7hB,KAAK+kB,OAAQ9D,EAAEY,GAAK7hB,KAAK+kB,KAAM9D,EAAEU,EAAIV,EAAEY,GAAKZ,EAAEL,KAErDK,EAAES,EAAI1hB,KAAK4kB,OAAQ3D,EAAES,EAAI1hB,KAAK4kB,MAC9B3D,EAAEU,EAAI3hB,KAAK6kB,OAAQ5D,EAAEU,EAAI3hB,KAAK6kB,MAC9B5D,EAAEW,GAAK5hB,KAAK8kB,OAAQ7D,EAAEW,GAAK5hB,KAAK8kB,MAChC7D,EAAEY,GAAK7hB,KAAK+kB,OAAQ9D,EAAEY,GAAK7hB,KAAK+kB,OAEtC9D,EAAEN,EAAIM,EAAEW,GAAKX,EAAES,EACfT,EAAEL,EAAIK,EAAEY,GAAKZ,EAAEU,EACRV,GAET+D,QAAS,SAASC,GAChBjlB,KAAKklB,IAAMD,EAAIjD,KAAKnJ,UAAUzR,QAC9BpH,KAAKmlB,IAAMF,EAAIjD,KAAKnJ,UAAUvR,SAC9BtH,KAAK4kB,KAAO,EAAIK,EAAIG,KAAKzE,EACzB3gB,KAAK6kB,KAAO,EAAII,EAAIG,KAAK9V,EACzBtP,KAAK8kB,KAAO9kB,KAAKklB,IAAMD,EAAIG,KAAKxd,EAChC5H,KAAK+kB,KAAO/kB,KAAKmlB,IAAMF,EAAIG,KAAKC,KAGpC7G,EAAWqB,eAAe,YAAYyF,EAMtC,IAAIE,GAAe,WACjBxlB,KAAKgiB,KAAO,KAEd5F,GAAErZ,OAAOyiB,EAAaplB,WACpBqkB,IAAK,SACLvD,SAAU,GACVuE,iBAAkB,SAASC,EAAOC,EAAI1E,GACpC,GAAIN,GAAIgF,EAAI,GAAI/E,EAAI+E,EAAI,EACxB,QAAOD,GACL,IAAK,KAAM,OAASzE,EAAEW,GAAKjB,EAAGM,EAAEU,EAAGhB,EAAGC,EACtC,KAAK,KAAM,OAASK,EAAEW,GAAKjB,EAAIM,EAAEY,GAAKjB,EAAGD,EAAGC,EAC5C,KAAK,KAAM,OAASK,EAAES,EAAGT,EAAEU,EAAGhB,EAAGC,EACjC,KAAK,KAAM,OAASK,EAAES,EAAGT,EAAEY,GAAKjB,EAAGD,EAAGC,KAG1CgF,YAAa,SAASP,GACpB,GAAIQ,GAAOR,EAAES,SAAS,GAAGT,EAAEU,QACvBC,EAAOX,EAAES,SAAS,GAAGT,EAAEY,OAE3B,OAAKJ,GAAO,GAAOG,EAAO,EAAW,KACzBH,GAAQ,GAAOG,GAAQ,EAAW,KAClCH,EAAO,GAAOG,GAAQ,EAAW,KACpC,MAEX5G,OAAQ,SAAS6B,EAAEsE,EAAIN,GAErB,GAAW,QAAPM,EAAe,MAAOtE,EAE1B,IAAIN,GAAIM,EAAEN,EAAGC,EAAIK,EAAEL,EAAGsF,EAAKjB,EAAIhG,MAAOyF,EAAI1kB,KAAKmmB,OAC3CC,EAAOF,EAAIlmB,KAAK4lB,YAAYM,GAAK,IAOrC,OALIxB,GAAEL,MAAS1D,EAAI+D,EAAEL,OAAO1D,EAAI+D,EAAEL,MAC9BK,EAAEJ,MAAS1D,EAAI8D,EAAEJ,OAAO1D,EAAI8D,EAAEJ,MAC9BI,EAAEH,MAAS5D,EAAI+D,EAAEH,OAAO5D,EAAI+D,EAAEH,MAC9BG,EAAEF,MAAS5D,EAAI8D,EAAEF,OAAO5D,EAAI8D,EAAEF,MAE7B7D,GAAKM,EAAEN,GAAOC,GAAKK,EAAEL,EAAWK,EAE9BzC,EAAWgD,aAAaxhB,KAAKylB,iBAAiBW,GAAMzF,EAAEC,GAAGK,KAElE+D,QAAS,SAASC,GAChBjlB,KAAKklB,IAAMD,EAAIjD,KAAKnJ,UAAUzR,QAC9BpH,KAAKmlB,IAAMF,EAAIjD,KAAKnJ,UAAUvR,SAE9BtH,KAAKmmB,QACH9B,KAAMY,EAAIoB,QAAQ,GAClB/B,KAAMW,EAAIoB,QAAQ,GAClB9B,KAAMU,EAAIqB,QAAQ,GAClB9B,KAAMS,EAAIqB,QAAQ,OAIxB9H,EAAWqB,eAAe,SAAS2F,EAOnC,IAAIe,GAAa,WACfvmB,KAAKwmB,MAAQ,EACbxmB,KAAKymB,MAAQ,EACbzmB,KAAKgiB,KAAO,KAEd5F,GAAErZ,OAAOwjB,EAAWnmB,WAClBqkB,IAAK,OACLvD,SAAU,GACV9B,OAAQ,SAAS6B,GAEf,GAAI3R,IACFoS,EAAGjR,KAAKE,MAAMsQ,EAAES,EAAI1hB,KAAKwmB,OAASxmB,KAAKwmB,MACvC7E,EAAGlR,KAAKE,MAAMsQ,EAAEU,EAAI3hB,KAAKymB,OAASzmB,KAAKymB,MACvC7E,GAAInR,KAAKE,MAAMsQ,EAAEW,GAAK5hB,KAAKwmB,OAASxmB,KAAKwmB,MACzC3E,GAAIpR,KAAKE,MAAMsQ,EAAEY,GAAK7hB,KAAKymB,OAASzmB,KAAKymB,MAM3C,OAHAnX,GAAEqR,EAAIrR,EAAEsS,GAAKtS,EAAEoS,EACfpS,EAAEsR,EAAItR,EAAEuS,GAAKvS,EAAEqS,EAERrS,KAGXkP,EAAWqB,eAAe,OAAO0G,EAOjC,IAAIG,GAAc,WAChB1mB,KAAKka,MAAQ,EACbla,KAAKgiB,KAAO,KAEd5F,GAAErZ,OAAO2jB,EAAYtmB,WACnBqkB,IAAK,QACLvD,SAAU,GACVuE,iBAAkB,SAASC,EAAOC,EAAI1E,GACpC,GAAIN,GAAIgF,EAAI,GAAI/E,EAAI+E,EAAI,EACxB,QAAOD,GACL,IAAK,KAAM,OAASzE,EAAEW,GAAKjB,EAAGM,EAAEU,EAAGhB,EAAGC,EACtC,KAAK,KAAM,OAASK,EAAEW,GAAKjB,EAAIM,EAAEY,GAAKjB,EAAGD,EAAGC,EAC5C,KAAK,KAAM,OAASK,EAAES,EAAGT,EAAEU,EAAGhB,EAAGC,EACjC,KAAK,KAAM,OAASK,EAAES,EAAGT,EAAEY,GAAKjB,EAAGD,EAAGC,KAG1C+F,cAAe,SAAS1F,EAAEmF,GACxB,GAAIT,GAAMnH,EAAWkC,cAAc1gB,KAAKka,MAAM+G,EAAEN,EAAEM,EAAEL,EACpD,OAAOpC,GAAWgD,aAAaxhB,KAAKylB,iBAAiBW,EAAKT,EAAI1E,KAEhE2E,YAAa,SAASP,GACpB,GAAIQ,GAAOR,EAAES,SAAS,GAAGT,EAAEU,QACvBC,EAAOX,EAAES,SAAS,GAAGT,EAAEY,OAE3B,OAAKJ,GAAO,GAAOG,EAAO,EAAW,KACzBH,GAAQ,GAAOG,GAAQ,EAAW,KAClCH,EAAO,GAAOG,GAAQ,EAAW,KACpC,MAEX5G,OAAQ,SAAS6B,EAAEsE,EAAIN,GAErB,IAAKjlB,KAAKka,MAAO,MAAO+G,EAExB,IACIiF,IADKjF,EAAEN,EAAIM,EAAEL,EACRqE,EAAIhG,OAETmH,EAAOF,EAAIlmB,KAAK4lB,YAAYM,GAAK,IAGrC,IAFAX,EAAMA,GAAO,KAEF,QAAPA,EAAe,MAAOtE,EAE1B,QAAOsE,GACL,IAAK,IACHtE,EAAEW,GAAK5hB,KAAKklB,IACZjE,EAAEN,EAAIM,EAAEW,GAAKX,EAAES,EACf0E,EAAO,IACP,MACF,KAAK,IACHnF,EAAEW,GAAK5hB,KAAKklB,IACZjE,EAAEN,EAAIM,EAAEW,GAAKX,EAAES,EACf0E,EAAO,IACP,MACF,KAAK,IACHnF,EAAEY,GAAK7hB,KAAKmlB,IACZlE,EAAEL,EAAIK,EAAEY,GAAKZ,EAAEU,EACfyE,EAAO,IACP,MACF,KAAK,IACHnF,EAAEY,GAAK7hB,KAAKmlB,IACZlE,EAAEL,EAAIK,EAAEY,GAAKZ,EAAEU,EACfyE,EAAO,KAIX,MAAOpmB,MAAK2mB,cAAc1F,EAAEmF,IAE9BpB,QAAS,SAASC,GAChBjlB,KAAKka,MAAQ+K,EAAI2B,YACjB5mB,KAAKklB,IAAMD,EAAIjD,KAAKnJ,UAAUzR,QAC9BpH,KAAKmlB,IAAMF,EAAIjD,KAAKnJ,UAAUvR,YAGlCkX,EAAWqB,eAAe,QAAQ6G,EAOlC,IAAIG,GAAc,WAChB7mB,KAAKgiB,KAAO,KAEd5F,GAAErZ,OAAO8jB,EAAYzmB,WACnBqkB,IAAK,QACLvD,SAAU,GACV9B,OAAQ,SAAS6B,GAEf,GAAI3R,IACFoS,EAAGjR,KAAKE,MAAMsQ,EAAES,GAChBC,EAAGlR,KAAKE,MAAMsQ,EAAEU,GAChBC,GAAInR,KAAKE,MAAMsQ,EAAEW,IACjBC,GAAIpR,KAAKE,MAAMsQ,EAAEY,IAMnB,OAHAvS,GAAEqR,EAAIrR,EAAEsS,GAAKtS,EAAEoS,EACfpS,EAAEsR,EAAItR,EAAEuS,GAAKvS,EAAEqS,EAERrS,KAGXkP,EAAWqB,eAAe,QAAQgH,EAUlC,IAAIC,GAAc,SAASC,EAAQC,GACjChnB,KAAKgnB,MAAQA,GAAS,QACtBhnB,KAAK+mB,QAAUA,GAAW,GAC1B/mB,KAAKgiB,KAAO,KACZhiB,KAAKinB,UAEP7K,GAAErZ,OAAO+jB,EAAY1mB,WACnBqkB,IAAK,SACLyC,MAAM,EACNC,WAAY,QACZC,UAAW,IACXlG,SAAU,GACVnd,KAAM,WACJ,GAAIsjB,GAAIrnB,IAEHqnB,GAAEC,WACLD,EAAEE,SAAU,EAEZF,EAAExO,UAAYuD,EAAE,WAAW0C,SAASuI,EAAErF,KAAKvD,IAAI+I,YAC5CC,UAAUznB,KAAKgiB,KAAKnJ,WAAWgK,OAElCwE,EAAElC,IAAMnlB,KAAKgiB,KAAKnJ,UAAUvR,SAC5B+f,EAAEnC,IAAMllB,KAAKgiB,KAAKnJ,UAAUzR,QAE5BigB,EAAEJ,QACAxZ,IAAK4Z,EAAEK,cACPC,MAAON,EAAEK,cACTha,KAAM2Z,EAAEK,cACRE,OAAQP,EAAEK,eAGZL,EAAEC,UAAW,IAGjB3Y,QAAS,WACP3O,KAAK6Y,UAAU/Q,UAEjB+f,SAAU,SAASb,EAAMc,GACvB,GAAIT,GAAIrnB,IAER,IAAIgnB,GAASK,EAAEL,MAAO,MAAOK,EAE7BrnB,MAAKgnB,MAAQA,CACb,IAAIe,GAAYvJ,EAAW6C,mBAK3B,OAJAjF,GAAE7C,KAAK8N,EAAEJ,OAAO,SAASe,EAAEvmB,GACpB4lB,EAAEH,OAAQY,GAAYC,EACpBtmB,EAAEwmB,SAASC,gBAAgBlB,IAAQmB,OAAM,EAAMC,SAASf,EAAED,UAAUiB,OAAOhB,EAAEF,aAD9C1lB,EAAE6mB,IAAI,kBAAkBtB,KAGzDK,GAETkB,WAAY,SAASxB,EAAQe,GAC3B,GAAIT,GAAIrnB,IAER,OAAI+mB,IAAWM,EAAEN,QAAgBM,GAEjCA,EAAEN,QAAUA,EACZ3K,EAAE7C,KAAK8N,EAAEJ,OAAO,SAASe,EAAEvmB,IACpB4lB,EAAEH,MAAQY,EAASrmB,EAAE6mB,KAAKvB,QAAQA,IAChCtlB,EAAEwmB,SAASlB,QAAQA,IAAUoB,OAAM,EAAMC,SAASf,EAAED,UAAUiB,OAAOhB,EAAEF,eAEzEE,IAETK,YAAa,WACX,MAAOtL,GAAE,WAAWkM,KAClB9a,SAAU,WACV0a,gBAAiBloB,KAAKgnB,MACtBD,QAAS/mB,KAAK+mB,UACbyB,SAASxoB,KAAK6Y,YAEnBmM,QAAS,SAASC,GAChB,GAAIwD,GAAIzoB,KAAKgiB,KAAMqD,EAAIrlB,KAAKinB,MAE5BjnB,MAAK6nB,SAAS5C,EAAIyD,QAAQzD,EAAIyD,QAAQ1oB,KAAKgiB,KAAKvD,IAAIiK,SACpD1oB,KAAKuoB,WAAWtD,EAAI0D,UAAU1D,EAAI0D,UAAU3oB,KAAKgiB,KAAKvD,IAAIkK,WAE1D3oB,KAAKmlB,IAAMsD,EAAE5P,UAAUvR,SACvBtH,KAAKklB,IAAMuD,EAAE5P,UAAUzR,QACvBie,EAAEsC,MAAMW,IAAI,SAAStoB,KAAKmlB,IAAI,MAC9BE,EAAE3X,KAAK4a,IAAI,SAAStoB,KAAKmlB,IAAI,OAE/B/F,OAAQ,SAAS6B,EAAEsE,EAAIN,GAErB,IAAKA,EAAI2D,OAAQ,MAAO3H,EAExB,IAAIoG,GAAIrnB,KACNqlB,EAAIgC,EAAEJ,MA0BR,OAxBA5B,GAAE5X,IAAI6a,KACJ5a,KAAM+C,KAAKE,MAAMsQ,EAAES,GAAG,KACtBta,MAAOqJ,KAAKE,MAAMsQ,EAAEN,GAAG,KACvBrZ,OAAQmJ,KAAKE,MAAMsQ,EAAEU,GAAG,OAE1B0D,EAAEuC,OAAOU,KACP7a,IAAKgD,KAAKE,MAAMsQ,EAAEY,IAAI,KACtBnU,KAAM+C,KAAKE,MAAMsQ,EAAES,GAAG,KACtBta,MAAOqJ,KAAKE,MAAMsQ,EAAEN,GAAG,KACvBrZ,OAAS+f,EAAElC,IAAI1U,KAAKE,MAAMsQ,EAAEY,IAAK,OAEnCwD,EAAEsC,MAAMW,KACN5a,KAAM+C,KAAKE,MAAMsQ,EAAEW,IAAI,KACvBxa,MAAQigB,EAAEnC,IAAIzU,KAAKE,MAAMsQ,EAAEW,IAAK,OAElCyD,EAAE3X,KAAK4a,KACLlhB,MAAOqJ,KAAKE,MAAMsQ,EAAES,GAAG,OAGpB2F,EAAEE,UACLF,EAAExO,UAAUgQ,OACZxB,EAAEE,SAAU,GAGPtG,KAGXzC,EAAWqB,eAAe,SAASiH,EAYnC,IAAIgC,GAAiB,SAASnJ,GAC5B3f,KAAK2f,MAAQA,EACb3f,KAAKgiB,KAAOrC,EAAMqC,KAClBhiB,KAAK+oB,qBAGPD,GAAe1oB,WAEb2oB,mBAAoB,WAClB,GAAI1D,GAAIrlB,KAAK2f,KACb3f,MAAKwiB,MAAQ6C,EAAE7C,MACfxiB,KAAKyiB,MAAQ4C,EAAE5C,MACfziB,KAAK4iB,OAASyC,EAAEzC,QAGlBhf,WAAY,WACV,GAAIyhB,GAAIrlB,KAAK2f,KAEb,OAAOvD,GAAE,WACNkM,KACC9a,SAAU,WACVC,IAAK4X,EAAEzC,OAAO,GAAG,KACjBlV,KAAM2X,EAAEzC,OAAO,GAAG,KAClBxb,MAAOie,EAAE7C,MAAM,KACflb,OAAQ+d,EAAE5C,MAAM,QAItBwF,QAAS,SAASe,GAChB,GAAI3B,GAAIrnB,IAERA,MAAKyiB,MAAQziB,KAAK2f,MAAM0D,WAAWrjB,KAAKyiB,OACxC4E,EAAE1H,MAAMsC,aAAa,gBAErBoF,EAAEzjB,aAAaqkB,SACbxa,IAAK4Z,EAAEzE,OAAO,GAAG,KACjBlV,KAAM2Z,EAAEzE,OAAO,GAAG,KAClBxb,MAAOigB,EAAE7E,MAAM,KACflb,OAAQ+f,EAAE5E,MAAM,OAEhB4F,OAAQhB,EAAErF,KAAKvD,IAAIwK,WACnBb,SAAUf,EAAErF,KAAKvD,IAAIyK,aACrBtd,SAAU,WACRyb,EAAE1H,MAAMsC,aAAa,cACP,kBAAN+G,IAAqBA,EAAG7oB,KAAKH,OAEvCgL,SAAU,SAASme,GACjB,GAAgB1nB,GAAZ2nB,KAAeC,EAAKF,EAAKG,MAE7B,KAAI7nB,EAAE,EAAEA,EAAE4nB,EAAGloB,OAAOM,IAClB2nB,EAAMC,EAAG5nB,GAAGoc,MAAQwL,EAAG5nB,GAAG8nB,GAE5BlC,GAAE1H,MAAMuD,SAASkG,EAAMhiB,OACpBgc,SAASgG,EAAM9hB,QACf2b,UAAUmG,EAAM3b,IAAI2b,EAAM1b,MAC1BsV,cAMXxE,EAAWmB,MAAM6J,OAAOppB,UAAUqpB,YAAc,WAC9C,MAAO,IAAIX,GAAe9oB,OAE5Bwe,EAAWoB,kBAAkB,iBAAiBkJ,EAa9C,IAAIY,GAAe,SAASvK,GAC1Bnf,KAAKmf,UAAYA,EACjBnf,KAAKgiB,KAAO7C,EAAU6C,KAIxB0H,GAAatpB,WAEXwD,WAAY,WACV,GAAIqd,GAAIjhB,KAAKmf,UAAU7C,KAEvB,OAAOF,GAAE,WACNkM,KACC9a,SAAU,WACVC,IAAKwT,EAAEU,EAAE,KACTjU,KAAMuT,EAAES,EAAE,KACVta,MAAO6Z,EAAEN,EAAE,KACXrZ,OAAQ2Z,EAAEL,EAAE,QAIlBqH,QAAS,SAASvG,EAAEC,EAAEhB,EAAEC,EAAEoI,GACxB,GAAI3B,GAAIrnB,IAERqnB,GAAElI,UAAUwK,aAAY,GAExBtC,EAAEzjB,aAAaqkB,SACbxa,IAAKkU,EAAE,KACPjU,KAAMgU,EAAE,KACRta,MAAOuZ,EAAE,KACTrZ,OAAQsZ,EAAE,OAEVyH,OAAQhB,EAAErF,KAAKvD,IAAIwK,WACnBb,SAAUf,EAAErF,KAAKvD,IAAIyK,aACrBtd,SAAU,WACRyb,EAAElI,UAAUwK,aAAY,GACxBX,GAAMA,EAAG7oB,KAAKH,OAEhBgL,SAAU,SAASme,GACjB,GAAgB1nB,GAAZ2nB,KAAeC,EAAKF,EAAKG,MAE7B,KAAI7nB,EAAE,EAAEA,EAAE4nB,EAAGloB,OAAOM,IAClB2nB,EAAMC,EAAG5nB,GAAGoc,MAAQwL,EAAG5nB,GAAG8nB,GAE5B,IAAItI,IACFS,EAAG5D,SAASsL,EAAM1b,MAClBiU,EAAG7D,SAASsL,EAAM3b,KAClBkT,EAAG7C,SAASsL,EAAMhiB,OAClBwZ,EAAG9C,SAASsL,EAAM9hB,QAGpB2Z,GAAEW,GAAKX,EAAES,EAAIT,EAAEN,EACfM,EAAEY,GAAKZ,EAAEU,EAAIV,EAAEL,EAEfyG,EAAElI,UAAUyK,UAAU3I,EAAE,WAMhCzC,EAAWoB,kBAAkB,WAAW8J,EAWxC,IAAIG,GAAY,SAASjiB,EAAEuX,EAAUoG,GACnC,GAAI8B,GAAIrnB,IAERqnB,GAAE3F,EAAI9Z,EAAEkiB,MACRzC,EAAE1F,EAAI/Z,EAAEmiB,MAER1C,EAAElI,UAAYA,EACdkI,EAAE2C,YAAc7K,EAAU6C,KAAKvD,IAAIe,gBACnC6H,EAAE4C,KAAO9K,EAAU7C,MAEnB6C,EAAU+K,mBAAmB,UAE7B,IAAIC,GAAIhL,EAAU6C,KAAKnJ,UAAUrL,UACjC6Z,GAAE+C,IAAMD,EAAEzc,KACV2Z,EAAEgD,IAAMF,EAAE1c,IAEV4Z,EAAEtB,QAAU,EACZsB,EAAEpB,QAAU,EACZoB,EAAE9B,IAAMA,EACR8B,EAAEvB,SAAWuB,EAAEiD,0BAEfjD,EAAEkD,WAAW3iB,GAKfiiB,GAAUzpB,WAGRkqB,wBAAyB,WAEvB,GAAIvI,GAAI/hB,KAAKiqB,KACTpE,EAAO7lB,KAAK0hB,EAAI1hB,KAAKoqB,IAAMrI,EAAEL,EAC7BsE,EAAOhmB,KAAK2hB,EAAI3hB,KAAKqqB,IAAMtI,EAAEJ,CAEjC,QAAO3hB,KAAKulB,KACV,IAAK,KACL,IAAK,IACH,OAASxD,EAAEpB,EAAIkF,EAAM9D,EAAEnB,EAAIoF,EAG7B,KAAK,KACH,OAASjE,EAAEpB,EAAIkF,GAAOG,EAGxB,KAAK,KACL,IAAK,IACL,IAAK,IACH,QAAUH,GAAOG,EAGnB,KAAK,KACL,IAAK,IACH,QAAUH,EAAM9D,EAAEnB,EAAIoF,GAI1B,OAAS,KAAM,OAIjBuE,WAAY,SAAS3iB,GACnBwU,EAAEpc,KAAKgqB,aACJzpB,GAAG,kBAAkBP,KAAKwqB,qBAC1BjqB,GAAG,gBAAgBP,KAAKyqB,sBAI7BC,UAAW,SAAS9iB,GAClB5H,KAAK+lB,QAAUne,EAAEkiB,MAAQ9pB,KAAK0hB,EAC9B1hB,KAAKimB,QAAUre,EAAEmiB,MAAQ/pB,KAAK2hB,EAC9B3hB,KAAKmf,UAAUyK,UAAU5pB,KAAK2qB,SAAS3qB,KAAKulB,MAI9CqF,aAAc,SAAShjB,GACrB,GAAIqd,GAAMjlB,KAAKmf,SACf8F,GAAIjD,KAAKnJ,UAAUgS,YAAY,kBAC/B5F,EAAIrjB,QAAQ2d,QAAQ,WAAW0F,EAAIA,EAAIjD,KAAK8I,QAAQ7F,EAAI3I,SACxD2I,EAAI8F,SAINN,kBAAmB,WACjB,GAAIpD,GAAIrnB,IACR,OAAO,UAAS4H,GAGd,MAFAwU,GAAEiL,EAAE2C,aAAa1oB,IAAI,UACrB+lB,EAAEuD,aAAahjB,IACR,IAKX4iB,kBAAmB,WACjB,GAAInD,GAAIrnB,IACR,OAAO,UAAS4H,GAEd,MADAyf,GAAEqD,UAAU9iB,IACL,IAKXojB,OAAQ,SAAStJ,EAAEC,GACjB,GAAI0F,GAAIrnB,IACRqnB,GAAEtB,QAAUrE,EAAI2F,EAAE3F,EAClB2F,EAAEpB,QAAUtE,EAAI0F,EAAE1F,GAIpBsJ,WAAY,SAASC,GACnB,GAAIjK,IACAS,EAAGjR,KAAK0a,IAAID,EAAE,GAAGA,EAAE,IACnBvJ,EAAGlR,KAAK0a,IAAID,EAAE,GAAGA,EAAE,IACnBtJ,GAAInR,KAAK2a,IAAIF,EAAE,GAAGA,EAAE,IACpBrJ,GAAIpR,KAAK2a,IAAIF,EAAE,GAAGA,EAAE,IAMxB,OAHAjK,GAAEN,EAAIM,EAAEW,GAAKX,EAAES,EACfT,EAAEL,EAAIK,EAAEY,GAAKZ,EAAEU,EAERV,GAIT0J,OAAQ,WACN,GAAItD,GAAIrnB,KACJ+hB,EAAIsF,EAAE4C,KACNoB,GAAOzJ,GAAIG,EAAEL,EAAIK,EAAEpB,EAAGkB,GAAIE,EAAEJ,EAAII,EAAEnB,EACtC,QAAOyG,EAAE9B,KACP,IAAK,IAAK,MAAO8B,GAAE4D,YAAalJ,EAAEL,EAAG2F,EAAEpB,QAAUlE,EAAEJ,EAAG0J,EAAGzJ,GAAIyJ,EAAGxJ,IAChE,KAAK,IAAK,MAAOwF,GAAE4D,YAAalJ,EAAEL,EAAGK,EAAEJ,EAAG0J,EAAGzJ,GAAIyF,EAAEpB,QAAUoF,EAAGxJ,IAChE,KAAK,IAAK,MAAOwF,GAAE4D,YAAalJ,EAAEL,EAAGK,EAAEJ,EAAG0F,EAAEtB,QAAUsF,EAAGzJ,GAAIyJ,EAAGxJ,IAChE,KAAK,IAAK,MAAOwF,GAAE4D,YAAalJ,EAAEL,EAAI2F,EAAEtB,QAAShE,EAAEJ,EAAG0J,EAAGzJ,GAAIyJ,EAAGxJ,IAChE,KAAK,KAAM,MAAOwF,GAAE4D,YAAa5D,EAAEtB,QAAUhE,EAAEL,EAAGK,EAAEJ,EAAG0J,EAAGzJ,GAAIyF,EAAEpB,QAAUoF,EAAGxJ,IAC7E,KAAK,KAAM,MAAOwF,GAAE4D,YAAalJ,EAAEL,EAAGK,EAAEJ,EAAG0F,EAAEtB,QAAUsF,EAAGzJ,GAAIyF,EAAEpB,QAAUoF,EAAGxJ,IAC7E,KAAK,KAAM,MAAOwF,GAAE4D,YAAalJ,EAAEL,EAAG2F,EAAEpB,QAAUlE,EAAEJ,EAAG0F,EAAEtB,QAAUsF,EAAGzJ,GAAIyJ,EAAGxJ,IAC7E,KAAK,KAAM,MAAOwF,GAAE4D,YAAa5D,EAAEtB,QAAUhE,EAAEL,EAAG2F,EAAEpB,QAAUlE,EAAEJ,EAAG0J,EAAGzJ,GAAIyJ,EAAGxJ,IAC7E,KAAK,OAGH,MAFAwJ,GAAGC,GAAKvJ,EAAEL,EAAI2F,EAAEtB,QAChBsF,EAAGE,GAAKxJ,EAAEJ,EAAI0F,EAAEpB,QACToB,EAAE4D,YAAaI,EAAGC,GAAID,EAAGE,GAAIF,EAAGC,GAAKvJ,EAAEpB,EAAG0K,EAAGE,GAAKxJ,EAAEnB,OAKnEpC,EAAWoB,kBAAkB,YAAYiK,EAOzC,IAAI2B,GAAe,SAASxJ,GAC1BhiB,KAAKgiB,KAAOA,EAEdwJ,GAAaprB,WACTG,GAAI,SAAS+O,EAAE0Z,GAAK5M,EAAEpc,MAAMO,GAAG+O,EAAE0Z,IACjC1nB,IAAK,SAASgO,GAAI8M,EAAEpc,MAAMsB,IAAIgO,IAC9BiQ,QAAS,SAASjQ,GAAI8M,EAAEpc,MAAMuf,QAAQjQ,KAE1CkP,EAAWoB,kBAAkB,eAAe4L,EAQ5C,IAAIpJ,GAAc,SAAS5X,EAAI5I,EAAQonB,GACrChpB,KAAKwK,IAAMA,EACN5I,IAASA,EAAU,GAAIse,QAC5BlgB,KAAK4B,QAAUA,EACf5B,KAAKc,SAAWkoB,EAChBhpB,KAAKyrB,OAIPrP,GAAErZ,OAAOqf,GAEPrC,OAAQ,SAASlQ,EAAGmZ,GAClB,MAAO,IAAI5G,GAAYvS,EAAGrF,IAAIqF,EAAGmZ,IAInC5oB,WACEsrB,cAAe,WACb,GAAI7b,GAAK7P,KAAK4B,OAEd,OAAIiO,GAAGuK,cACIvK,EAAGuK,aAAcvK,EAAIwK,eAE5BxK,EAAGzI,OACIyI,EAAGzI,MAAOyI,EAAGvI,QAEjB,MAETqkB,aAAc,WACZ3rB,KAAK4B,QAAQuR,OAAS,KACM,kBAAjBnT,MAAKc,UACdd,KAAKc,SAASM,MAAMpB,KAAKA,KAAK0rB,kBAElCE,SAAU,WACR,MAAO5rB,MAAK4B,QAAQgK,UAEtB6f,KAAM,WACJ,GAAIpE,GAAIrnB,KACJ6P,EAAKwX,EAAEzlB,OAEXiO,GAAGrF,IAAM6c,EAAE7c,IAEP6c,EAAEuE,WAAYvE,EAAEsE,eACbtE,EAAEzlB,QAAQuR,OAAS,SAASvL,GAC/Byf,EAAEsE,oBAMZnN,EAAWoB,kBAAkB,cAAcwC,EAQ3C,IAAIyJ,GAAkB,SAAS7J,GAC7BhiB,KAAKgiB,KAAOA,EACZhiB,KAAK+D,OAIPqY,GAAErZ,OAAO8oB,GAEPC,QAAS,WACP,GAAI,gBAAkBhtB,SAAWA,OAAOitB,eAAiBvpB,mBAAoBupB,eAC3E,OAAO,GAGX3rB,WAEE2D,KAAM,WACJ,GAAIsjB,GAAIrnB,KACNmqB,EAAI/N,EAAEoC,WAAWkB,UAAUmK,UAAUzpB,SAIlC+pB,GAAE6B,QACL3E,EAAEkD,aACFlD,EAAE4E,gBACF5E,EAAE6E,gBACF/B,EAAE6B,OAAQ,IAKdC,cAAe,WACb,GAAI5E,GAAIrnB,IACRoc,GAAEoC,WAAWkB,UAAUmK,UAAUzpB,UAAUmqB,WAAa,SAAS3iB,GAKrC,SAAtBA,EAAE+K,KAAKwZ,OAAO,EAAE,GAElB/P,EAAEpc,KAAKgqB,aACJzpB,GAAG,8BAA8B8mB,EAAE+E,SAASpsB,KAAKwqB,sBACjDjqB,GAAG,6BAA6BP,KAAKyqB,qBAQxCrO,EAAEpc,KAAKgqB,aACJzpB,GAAG,kBAAkBP,KAAKwqB,qBAC1BjqB,GAAG,gBAAgBP,KAAKyqB,uBAQjCyB,cAAe,WACblsB,KAAKgiB,KAAKnJ,UACPiG,SAAS,eACTve,GAAG,+BAA+BP,KAAKosB,SAASpsB,KAAKgiB,KAAKhD,GAAGqN,QAAQC,sBAI1EF,SAAU,SAASpD,GACjB,MAAO,UAASphB,GAGd,MAFAA,GAAEgC,iBACFhC,EAAEiC,kBACwB,SAAtBjC,EAAE+K,KAAKwZ,OAAO,EAAE,KAClBvkB,EAAEkiB,MAAQliB,EAAE2kB,cAAcC,eAAe,GAAG1C,MAC5CliB,EAAEmiB,MAAQniB,EAAE2kB,cAAcC,eAAe,GAAGzC,MACrCf,EAAGphB,MAOhB2iB,WAAY,WACV,GAAIlD,GAAIrnB,KAAMysB,EAAIpF,EAAErF,IAEpByK,GAAE5T,UAAUtY,GACV,+BACA,IAAIksB,EAAEhO,IAAIiO,SACVrF,EAAE+E,SAASK,EAAEE,kBAMrBnO,EAAWoB,kBAAkB,QAAQiM,EAQrC,IAAIe,GAAa,SAAS5K,GACxBhiB,KAAKgiB,KAAOA,EACZhiB,KAAK+D,OAGPqY,GAAErZ,OAAO6pB,GAEPjO,UACE3R,UAAW,gBACX6f,UAAY,GACZC,OAAO,GAGT1sB,WAEE2D,KAAM,WACJqY,EAAErZ,OAAO/C,KAAK4sB,EAAWjO,UACzB3e,KAAK0O,UAIPE,QAAS,WACP5O,KAAKgiB,KAAKnJ,UAAUvX,IAAItB,KAAKgN,YAI/B0B,OAAQ,WACN,GAAI2Y,GAAIrnB,KAAMyoB,EAAIpB,EAAErF,IACpByG,GAAE5P,UAAUtY,GAAG8mB,EAAEra,UAAU,SAASpF,GAClC,GAAImlB,GAAQnlB,EAAEolB,SAAU,GAAI,CAE5B,IAAI5Q,EAAE6Q,QAAQrlB,EAAEslB,QAAQ7F,EAAEwF,WAAa,EACrC,OAAO,CAET,QAAOjlB,EAAEslB,SACP,IAAK,IAAIzE,EAAEsE,OAAOA,EAAM,EAAI,MAC5B,KAAK,IAAItE,EAAEsE,MAAM,GAAGA,EAAQ,MAC5B,KAAK,IAAItE,EAAEsE,MAAMA,EAAM,EAAI,MAC3B,KAAK,IAAItE,EAAEsE,MAAM,EAAEA,EAAQ,MAE3B,KAAK,IACL,IAAK,GAEH,MADAtE,GAAE0E,iBACK,CAGT,SACM9F,EAAEyF,OAAOhb,QAAQC,IAAI,YAAcnK,EAAEslB,SAIxCtlB,EAAEwlB,SAAYxlB,EAAEylB,SACnBzlB,EAAEgC,uBAMZ4U,EAAWoB,kBAAkB,WAAWgN,EAOxC,IAAIU,GAAY,YAEhBlR,GAAErZ,OAAOuqB,GAEP3O,UACE0H,SAAW,EAAG,GACdC,SAAW,EAAG,GACdM,YAAa,EACbxB,MAAQ9V,EAAG,EAAG+V,EAAG,EAAGzd,EAAG,EAAG+Y,EAAG,GAC7B+H,QAAS,KACTC,UAAW,KACX4E,KAAM,KAENtO,MAAO,KACP2J,QAAQ,EACR4E,QAAQ,EACRC,WAAW,EACXC,SAAS,EACTC,WAAW,EACXC,WAAW,GAGbxtB,WAEE2D,KAAM,SAASie,GACbhiB,KAAKgiB,KAAOA,EACZhiB,KAAK6tB,UACL7tB,KAAKwtB,OAASxtB,KAAKgiB,KAAKvD,IAAI+O,OAC5BxtB,KAAK+f,SACL/f,KAAKqf,WAAWrf,KAAKgiB,KAAKvD,KAC1BuD,EAAKnJ,UAAU0G,QAAQ,cAAcvf,QAIvC+f,OAAQ,aAKR8N,QAAS,WACP,GAAIxG,GAAIrnB,KAAM+hB,EAAIsF,EAAErF,KAAKvD,GACzBrC,GAAErZ,OAAOskB,EAAEiG,EAAU3O,UACrB0I,EAAEjI,OAASiI,EAAErF,KAAK8L,oBAElBzG,EAAEzlB,QAAUwa,EAAE,WAAW0C,SAASiD,EAAEgM,eAAelU,MAAOsF,UAAWkI,IACrEA,EAAE2G,MAAQ5R,EAAE,cAAc0C,SAASiD,EAAEkM,YAAYpU,KAAK,MAAM,QAAQqU,KAAK,OAAO,UAChF7G,EAAEzlB,QAAQoV,OAAOqQ,EAAE2G,OAAOxF,SAASnB,EAAErF,KAAKnJ,WAGtCwO,EAAErF,KAAKvD,IAAIG,SAASyI,EAAE2G,MAAM1F,KAC9BvB,QAAS,EACTmB,gBAAiB,UAGnBb,EAAE8G,iBAGF9G,EAAE2G,MAAMztB,GAAG,cAAc,SAASqH,GAChCyf,EAAErF,KAAKoM,aAAa/G,GACpBA,EAAEzlB,QAAQ2d,QAAQ,YAAY8H,GAC9BA,EAAEzlB,QAAQkd,SAAS,iBAClBve,GAAG,aAAa,SAASqH,GAC1Byf,EAAEzlB,QAAQipB,YAAY,eACtBxD,EAAEzlB,QAAQ2d,QAAQ,WAAW8H,MAKjC/G,WACE,YAAa,UAAW,YAAa,YACrC,UAAW,UAAW,cAAe,QAIvCjB,WAAY,SAASZ,GAGnB,MAFAD,GAAW8B,UAAUtgB,KAAKsgB,UAAU7B,EAAIze,MACxCA,KAAKglB,UACEhlB,MAITglB,QAAS,WACPhlB,KAAK2pB,cACL3pB,KAAKquB,YACLruB,KAAKsuB,cACLtuB,KAAKkqB,mBAAmB,WACxBlqB,KAAK4pB,UAAU5pB,KAAKsc,MAAM,OAI5B4N,mBAAoB,SAASqE,EAAE1tB,GAC7B,IAAI,GAAIY,GAAE,EAAEA,EAAEzB,KAAKof,OAAOje,OAAOM,IAC3BzB,KAAKof,OAAO3d,GAAG8sB,IAAIvuB,KAAKof,OAAO3d,GAAG8sB,GAAGvuB,KAC3C,OAAOA,OAITwuB,UAAW,SAASpP,GAClBA,EAAO4C,KAAOhiB,KAAKgiB,KACdhiB,KAAKyuB,UAAUrP,KAClBpf,KAAKof,OAAOze,KAAKye,GACjBpf,KAAK0uB,cACDtP,EAAOrb,MAAMqb,EAAOrb,OACxB/D,KAAKglB,YAKTyJ,UAAW,SAASrP,GAClB,GAAI3d,GAAG8sB,EAAIvuB,KAAKof,MAChB,KAAI3d,EAAE,EAAEA,EAAE8sB,EAAEptB,OAAOM,IAAK,GAAI8sB,EAAE9sB,KAAO2d,EAAQ,OAAO,GAItDsP,YAAa,WACX1uB,KAAKof,OAAO2B,KACV,SAASW,EAAEC,GAAI,MAAOD,GAAER,SAAWS,EAAET,YAKzCyN,aAAc,WAGZ,IAAI,GAFAltB,GAAG8sB,EAAIvuB,KAAKof,OAER3d,EAAE,EAAEA,EAAE8sB,EAAEptB,OAAOM,IACjB8sB,EAAE9sB,GAAGkN,SAAS4f,EAAE9sB,GAAGkN,SAEzB3O,MAAKof,WAIPwP,aAAc,SAASnK,GAGrB,IAAI,GAFAhjB,GAAG8sB,EAAIvuB,KAAKof,OAAQ9P,KAEhB7N,EAAE,EAAEA,EAAE8sB,EAAEptB,OAAOM,IAChB8sB,EAAE9sB,GAAGgjB,KAAQ8J,EAAE9sB,GAAGgjB,KAAOA,GAAUA,IAAQ8J,EAAE9sB,GAC5C8sB,EAAE9sB,GAAGkN,SAAS4f,EAAE9sB,GAAGkN,UAEpBW,EAAE3O,KAAK4tB,EAAE9sB,GAEhBzB,MAAKof,OAAS9P,GAIhBuf,WAAY,SAAS5N,EAAEsE,GACrB,IAAI,GAAI9jB,GAAE,EAAEA,EAAEzB,KAAKof,OAAOje,OAAOM,IAC/Bwf,EAAIjhB,KAAKof,OAAO3d,GAAG2d,OAAO6B,EAAEsE,EAAIvlB,KAClC,OAAOihB,IAIT6N,QAAS,WACH9uB,KAAKif,QACP7C,EAAE5Z,SAASid,MAAMne,IAAI,UACrBtB,KAAK+qB,QACL/qB,KAAKif,MAAQ,OAKjB0N,UAAW,SAAS/kB,EAAE2d,GACpB,GAAI8B,GAAIrnB,IACAqnB,GAAErF,IAMV,OAJAuD,GAAMA,GAAOnJ,EAAExU,EAAEwE,QAAQyN,KAAK,OAE9B7Z,KAAK+qB,SAEO,QAAPxF,IAAkB8B,EAAEzlB,QAAQmtB,SAAS1H,EAAErF,KAAKvD,IAAIuQ,eAGrDhvB,KAAKif,MAAQ,GAAIT,GAAWkB,UAAUmK,UAAUjiB,EAAE5H,KAAKulB,IAChD,IAIT+I,YAAa,SAASnL,GAMpB,MALUvG,UAANuG,IAAiBA,EAAInjB,KAAK4tB,WAE1BzK,GAAKnjB,KAAK4tB,UAAW5tB,KAAKguB,MAAME,KAAK,YAAW,GAC7CluB,KAAKguB,MAAME,KAAK,WAAW,YAE3BluB,MAITquB,UAAW,SAASlL,GAClB,GAAIkE,GAAIrnB,KAAM+hB,EAAIsF,EAAErF,KAAKvD,GAMzB,OALS7B,SAALuG,IAAgBA,EAAIkE,EAAEqG,SAEtBvK,GAAKkE,EAAEqG,QAASrG,EAAEzlB,QAAQipB,YAAY9I,EAAEiN,YACrC3H,EAAEzlB,QAAQkd,SAASiD,EAAEiN,YAErBhvB,MAIT2pB,YAAa,SAASxG,GACpB,GAAIkE,GAAIrnB,KAAM+hB,EAAIsF,EAAErF,KAAKvD,GAMzB,OALS7B,SAALuG,IAAgBA,EAAIkE,EAAEsG,WAEtBxK,GAAKkE,EAAEsG,UAAWtG,EAAEzlB,QAAQipB,YAAY9I,EAAEkN,cACvC5H,EAAEzlB,QAAQkd,SAASiD,EAAEkN,cAErBjvB,MAIT8H,OAAQ,WACN9H,KAAK4B,QAAQ2d,QAAQ,aAAavf,MAClCA,KAAK4B,QAAQkG,UAIfonB,OAAQ,WACNlvB,KAAK4oB,QAAS,EACd5oB,KAAK4B,QAAQipB,YAAY,8BAI3BsE,QAAS,WACPnvB,KAAK4oB,QAAS,EACd5oB,KAAK4B,QAAQkd,SAAS,iBACtB9e,KAAKkqB,mBAAmB,WACxBlqB,KAAKglB,WAIPhC,OAAQ,SAAS/B,GAIf,MAHAjhB,MAAKovB,OAAOnO,EAAES,EAAET,EAAEU,GAClB3hB,KAAK6G,OAAOoa,EAAEN,EAAEM,EAAEL,GAClB5gB,KAAKutB,KAAOtM,EACLjhB,MAITgrB,OAAQ,SAAS/J,EAAEsE,GACjB,MAAOvlB,MAAK4pB,UAAU5pB,KAAKgiB,KAAKS,MAAMxB,GAAGsE,IAI3CqE,UAAW,SAAS3I,EAAEsE,GAIpB,MAHAtE,GAAIjhB,KAAK6uB,WAAW5N,EAAEsE,GACtBvlB,KAAKgjB,OAAO/B,GACZjhB,KAAK4B,QAAQ2d,QAAQ,YAAYvf,KAAKA,KAAKgiB,KAAK8I,QAAQ7J,KACjDjhB,MAITqvB,UAAW,SAAS1J,EAAIqD,GACtB,GAAIsG,GAAK,GAAI9Q,GAAWkB,UAAU6P,SAASvvB,MACvCihB,EAAIjhB,KAAKgiB,KAAKS,MAAMjE,EAAWgD,aAAamE,GAEhD2J,GAAGrH,QAAQhH,EAAES,EAAET,EAAEU,EAAEV,EAAEN,EAAEM,EAAEL,EAAEoI,IAI7BwG,OAAQ,SAAS1H,GACf,GAAI7G,GAAIjhB,KAAKsc,MAAOmM,EAAIzoB,KAAKgiB,KACzBkD,EAAMuD,EAAE5P,UAAUzR,QAAS+d,EAAMsD,EAAE5P,UAAUvR,SAC7Cqe,IAAST,EAAIjE,EAAEN,GAAG,GAAIwE,EAAIlE,EAAEL,GAAG,EAAGK,EAAEN,EAAGM,EAAEL,EAC7C,OAAO5gB,MAAK8nB,EAAQ,YAAY,aAAanC,IAI/Cnf,cAAe,SAASmM,EAAK4S,GAC3B,MAAOnJ,GAAE,WAAW0C,SAASnM,EAAK,QAAQ4S,GAAK1L,KAAK,MAAM0L,IAI5D6J,OAAQ,SAAS1N,EAAEC,GACjB3hB,KAAK4B,QAAQ0mB,KAAK7a,IAAKkU,EAAE,KAAMjU,KAAMgU,EAAE,QAIzC+N,KAAM,WAEJ,MADAzvB,MAAK4B,QAAQ6tB,OACNzvB,MAIT+qB,MAAO,WAGL,MAFA/qB,MAAKgiB,KAAKoM,aAAapuB,MACvBA,KAAKguB,MAAMjD,QACJ/qB,MAIT6G,OAAQ,SAAS8Z,EAAEC,GACjB5gB,KAAK4B,QAAQ0mB,KAAKlhB,MAAOuZ,EAAE,KAAMrZ,OAAQsZ,EAAE,QAI7CtE,IAAK,WACH,GAAI2E,GAAIjhB,KAAK4B,QACXmgB,EAAId,EAAEzT,WACNmT,EAAIM,EAAE7Z,QACNwZ,EAAIK,EAAE3Z,SACNooB,GAAOhO,EAAGK,EAAErU,KAAMiU,EAAGI,EAAEtU,IAOzB,OALAiiB,GAAG9N,GAAK8N,EAAGhO,EAAIf,EACf+O,EAAG7N,GAAK6N,EAAG/N,EAAIf,EACf8O,EAAG/O,EAAIA,EACP+O,EAAG9O,EAAIA,EAEA8O,GAITvB,eAAgB,WACd,GAAc1sB,GAAV4lB,EAAIrnB,KAEN2vB,GADItI,EAAErF,KACDqF,EAAEzlB,SACPmgB,EAAIsF,EAAErF,KAAKvD,IACXwC,EAAIc,EAAE6N,QACNhP,EAAImB,EAAE8N,QACN3E,EAAInJ,EAAE+N,QAER,KAAIruB,EAAE,EAAGA,EAAEypB,EAAE/pB,OAAQM,IACnBkuB,EAAG3Y,OAAOqQ,EAAE7gB,cAAcub,EAAEgO,aAAa7E,EAAEzpB,IAE7C,KAAIA,EAAE,EAAGA,EAAEmf,EAAEzf,OAAQM,IACnBkuB,EAAG3Y,OAAOqQ,EAAE7gB,cAAcub,EAAEiO,YAAYpP,EAAEnf,IAE5C,KAAIA,EAAE,EAAGA,EAAEwf,EAAE9f,OAAQM,IACnBkuB,EAAG3Y,OAAOqQ,EAAE7gB,cAAcub,EAAEkO,YAAYhP,EAAExf,SAKlD+c,EAAWoB,kBAAkB,YAAY0N,EAQzC,IAAI4C,GAAY,SAAS7D,EAAQ5N,GAC/BrC,EAAErZ,OAAO/C,KAAKkwB,EAAUvR,SAASF,OACjCze,KAAKqsB,QAAUA,EACfrsB,KAAKgiB,KAAOqK,EAAQrK,KAItBkO,GAAUvR,UACRiE,SAAU,GAAI,GACdgG,QAAQ,EACRuH,SAAW,GAAI,KAIjB/T,EAAErZ,OAAOmtB,EAAU9vB,WAEjBgwB,MAAO,SAASxoB,GACd,GAAI6kB,GAAIzsB,KAAKgiB,IAGb,IAAKyK,EAAEhO,IAAI6P,YAAX,CAGA,GAAI7B,EAAEhO,IAAIS,OAASuN,EAAEhO,IAAI4R,UAAa5D,EAAEzN,GAAGE,MAAM/d,QAAUsrB,EAAEhO,IAAI4R,SAAW,OAAO,CAGnF,IAAItO,GAAI3F,EAAExU,EAAE0oB,eAAe1N,SACvB2N,EAAQ3oB,EAAEkiB,MAAQ/H,EAAErU,KAAO1N,KAAK4iB,OAAO,GACvC4N,EAAQ5oB,EAAEmiB,MAAQhI,EAAEtU,IAAMzN,KAAK4iB,OAAO,GACtC6F,EAAIgE,EAAEzN,GAAGE,KAGb,KAAKuN,EAAEhO,IAAIS,MAET,GAAIuN,EAAEhO,IAAIgS,aAAa,CACrB,IAAI,GAAIhvB,GAAE,EAAEA,EAAEgnB,EAAEtnB,OAAOM,IAAKgnB,EAAEhnB,GAAGqG,QACjC2kB,GAAEzN,GAAGE,aAILuN,GAAEiE,gBAAgBjE,EAAEzN,GAAGG,UAI3BsN,GAAE5T,UAAUiG,SAAS,iBAGrB,IAAImG,GAAMwH,EAAEkE,eAET/G,UAAUpL,EAAWgD,cAAc+O,EAAMC,EAAM,EAAE,IAIpD,OAFAvL,GAAIrjB,QAAQ2d,QAAQ,aAAa0F,EAAIjlB,KAAKgiB,KAAK8I,QAAQ7F,EAAI3I,SAEpD2I,EAAI0H,UAAU/kB,EAAE,QAIzBgpB,IAAK,SAASlP,EAAEC,GACd3hB,KAAK6wB,KAAKnP,EAAEC,EACZ,IAAIV,GAAIjhB,KAAKilB,IAAI3I,KAEjBtc,MAAKgiB,KAAKnJ,UAAUgS,YAAY,kBAE3B5J,EAAEN,EAAI3gB,KAAKmwB,QAAQ,IAAQlP,EAAEL,EAAI5gB,KAAKmwB,QAAQ,GACjDnwB,KAAKgiB,KAAKmL,gBAELntB,KAAKilB,IAAI8F,WAIpBvM,EAAWoB,kBAAkB,YAAYsQ,EAQzC,IAAIY,GAAe,SAAS9O,GAC1BhiB,KAAKgiB,KAAOA,EACZhiB,KAAKgf,GAAKgD,EAAKhD,GACfhf,KAAK+D,OAIPqY,GAAErZ,OAAO+tB,EAAa1wB,WAEpB2D,KAAM,WACJ/D,KAAK+wB,cACL/wB,KAAKgxB,QAAU,GAAId,GAAUlwB,OAI/BixB,iBAAkB,SAASpvB,GACzB,IAAI,GAAIJ,GAAE,EAAEgnB,EAAEzoB,KAAKgf,GAAGE,MAAMuB,EAAEgI,EAAEtnB,OAAOM,EAAEgf,EAAEhf,IACrCgnB,EAAEhnB,GAAG4d,aAAeoJ,EAAEhnB,GAAG+rB,QAAWxtB,KAAKgiB,KAAKvD,IAAIyS,aAAezI,EAAEhnB,IAAMzB,KAAKgf,GAAGG,YACnFsJ,EAAEhnB,GAAG4d,WAAWxd,IAItByqB,iBAAkB,WAChB,GAAIjF,GAAIrnB,IACR,OAAO,UAAS4H,GACd,IAAKA,EAAEupB,QAAU9J,EAAErF,KAAKvD,IAAII,UAAW,MAAOwI,GAAE2J,QAAQZ,MAAMxoB,KAKlEwpB,aAAc,WACZpxB,KAAKgiB,KAAKxhB,MAAMc,IAAI,gBACpBtB,KAAKgiB,KAAKnJ,UAAUvX,IAAI,iBAM1B+vB,mBAAoB,SAASxvB,GAC3B,GAA+ByvB,GAAlBtP,EAAOhiB,KAAKgiB,IAEzB5F,GAAE7C,KAAKyI,EAAKvD,IAAI8S,eAAe,SAASC,EAAE/vB,GACpC+vB,IAAK3vB,KACPyvB,EAAMzvB,EAAQ2vB,GACdxP,EAAKnJ,UAAUvX,IAAI,UAAUkwB,GAC1BjxB,GAAGkB,EAAE,gBAAgB+vB,EAAE,SAAS5pB,EAAEyd,EAAEoH,GACnC6E,EAAInxB,KAAK6hB,EAAKyK,WAEX5qB,GAAQ2vB,OAMrBT,YAAa,WACX,GAAI1J,GAAIrnB,KAAMysB,EAAIpF,EAAErF,IAEpByK,GAAEjsB,MAAMD,GAAG,2BAA2B,SAASqH,GAC7Cyf,EAAEgK,mBAAmB5E,EAAEhO,KACvB4I,EAAE4J,iBAAiBxE,EAAEhO,KACrBgO,EAAE5T,UAAU0G,QAAQ,cAAckN,EAAEA,EAAEhO,QAGxCze,KAAKgiB,KAAKnJ,UACPtY,GAAG,8BAA8BP,KAAKssB,uBAI7C9N,EAAWoB,kBAAkB,eAAekR,EAG5C,IAAIW,GAAc,YAGlBrV,GAAErZ,OAAO0uB,GACP9S,UAGEQ,UAAW,KAEXuS,QAAQ,EACRC,UAAW,IACXC,aAAc,IACdC,UAAU,EACVzqB,MAAO,GACPE,OAAQ,GACRwqB,QAAS,MAGX1xB,WACE2xB,aAAc,WACZ,GAAI1M,GAAIrlB,KAAKgiB,KAAKhD,GAAGW,MAAOqS,EAAM3M,EAAE9B,OACpCvjB,MAAKujB,QAAQ0O,aAAaD,EAAIzX,aAAa,EAAE,EAAE8K,EAAE3R,OAAOtM,MAAMie,EAAE3R,OAAOpM,QAAQ,EAAE,IAEnFvD,KAAM,SAASie,EAAKngB,GAClB,GAAIwlB,GAAIrnB,IACRA,MAAKgiB,KAAOA,EACZ5F,EAAErZ,OAAO/C,KAAKyxB,EAAY9S,SAAS9c,GACnCwlB,EAAEkD,aACFlD,EAAErC,UACFqC,EAAE8G,iBACE9G,EAAElI,WACJkI,EAAE6K,gBAAgB7K,EAAElI,WACpBkI,EAAE8K,gBAAkB9K,EAAElI,UAAUvd,QAAQ,IAC/BylB,EAAErF,KAAKhD,GAAGG,WACnBkI,EAAE6K,gBAAgB7K,EAAErF,KAAKhD,GAAGG,WAG1BkI,EAAErF,KAAKhD,GAAGW,MAAMjM,SAClB2T,EAAE9D,QAAU8D,EAAE+K,QAAQ,GAAGte,WAAW,MACpCuT,EAAErF,KAAKnJ,UAAUtY,GAAG,aAAa,SAASqH,GACxCyf,EAAE0K,eACF1K,EAAErC,cAIRqN,YAAa,SAASpS,GAKpB,MAJAjgB,MAAKoyB,QAAQtqB,SACb9H,KAAKoyB,QAAUhW,EAAEA,EAAEoC,WAAW2B,WAAWF,IACzCjgB,KAAK4B,QAAQoV,OAAOhX,KAAKoyB,SACzBpyB,KAAKglB,UACEhlB,MAETmuB,eAAgB,WACdnuB,KAAKoyB,QAAUhW,EAAEA,EAAEoC,WAAW2B,WAAWngB,KAAKgiB,KAAKhD,GAAGW,MAAM2C,SAE5DtiB,KAAK4B,QAAUwa,EAAE,WAAW0C,SAAS,eAClC1X,MAAMpH,KAAKoH,OAAOE,OAAOtH,KAAKsH,QAC9B0P,OAAOhX,KAAKoyB,SACZ5J,SAASxoB,KAAKgiB,KAAKnJ,YAExBhS,OAAQ,SAAS8Z,EAAEC,GACjB5gB,KAAKoH,MAAQuZ,EACb3gB,KAAKsH,OAASsZ,EACd5gB,KAAK4B,QAAQwF,MAAMuZ,GAAGrZ,OAAOsZ,GAC7B5gB,KAAKsyB,aAAatyB,KAAKutB,OAEzBvI,QAAS,WACPhlB,KAAKuyB,GAAMvyB,KAAKgiB,KAAKvD,IAAIqF,OAAS9jB,KAAKgiB,KAAKnJ,UAAUzR,QACtDpH,KAAKwyB,GAAMxyB,KAAKgiB,KAAKvD,IAAIsF,OAAS/jB,KAAKgiB,KAAKnJ,UAAUvR,SAClDtH,KAAKutB,MACPvtB,KAAKsyB,aAAatyB,KAAKutB,OAG3B+E,aAAc,SAAS7F,GACrB,GAAIgG,GAAKzyB,KAAKoH,MAAQqlB,EAAE9L,EACpB+R,EAAK1yB,KAAKsH,OAASmlB,EAAE7L,CAUzB,OARA5gB,MAAKoyB,QAAQ9J,KACXlhB,MAAOqJ,KAAKE,MAAM8hB,EAAKzyB,KAAKuyB,IAAM,KAClCjrB,OAAQmJ,KAAKE,MAAM+hB,EAAK1yB,KAAKwyB,IAAM,KACnCG,WAAY,IAAMliB,KAAKE,MAAM8hB,EAAKhG,EAAE/K,GAAK,KACzCkR,UAAW,IAAMniB,KAAKE,MAAM+hB,EAAKjG,EAAE9K,GAAK,OAG1C3hB,KAAKutB,KAAOd,EACLzsB,MAETkyB,gBAAiB,SAAS7M,GACxB,MAAOrlB,MAAKsyB,aAAajN,EAAErD,KAAK8I,QAAQzF,EAAE/I,SAE5CuW,eAAgB,SAASxN,GACvBrlB,KAAKkyB,gBAAgB7M,IAEvBwD,KAAM,WACA7oB,KAAK8xB,SAASgB,aAAa9yB,KAAK8xB,SAE/B9xB,KAAK0xB,OACL1xB,KAAK4B,QAAQmxB,OAAO9K,SAAUlB,QAAS,IAAMqB,SAAU,GAAID,OAAO,IADrDnoB,KAAK4B,QAAQmxB,OAAOzK,KAAMvB,QAAS,KAGvDlE,KAAM,WACJ,GAAIwE,GAAIrnB,IACHqnB,GAAEqK,OACFrK,EAAEyK,QAAUrnB,WAAW,WAC1B4c,EAAEyK,QAAU,KACZzK,EAAEzlB,QAAQmxB,OAAO9K,SAAUlB,QAAS,IAAMqB,SAAUf,EAAEuK,aAAczJ,OAAO,KAC3Ed,EAAEsK,WAJWtK,EAAEzlB,QAAQihB,QAM3B0H,WAAY,WACV,GAAIlD,GAAIrnB,IACRqnB,GAAErF,KAAKnJ,UAAUtY,GAAG,+DAA+D,SAASqH,EAAEyd,EAAEoH,GAC9F,GAAIpF,EAAE8K,iBAAoB9K,EAAE8K,kBAAoBvqB,EAAEwE,OAAS,OAAO,CAElE,QAAOxE,EAAE+K,MAEP,IAAK,YACH0U,EAAEgL,YAAY5F,EACd,MAEF,KAAK,YACHpF,EAAEwL,eAAexN,EACnB,KAAK,eACHgC,EAAEwB,MACF,MAEF,KAAK,UACHxB,EAAEiL,aAAa7F,EACjB,KAAK,aACCpF,EAAEwK,UAAUxK,EAAExE,MAClB,MAEF,KAAK,WACHwE,EAAEiL,aAAa7F,UAO3BjO,EAAWoB,kBAAkB,cAAc6R,EAQ3C,IAAIuB,GAAW,YAEfA,GAAS5yB,WAEP2D,KAAM,SAASie,EAAKiR,EAASnyB,GAGtBmyB,IAAUA,EAAWjR,EAAKnJ,WAC/B7Y,KAAKkzB,KAAO9W,EAAE6W,GACdjzB,KAAKmzB,MAAQ/W,EAAE6W,GACfjzB,KAAKgiB,KAAOA,EAEZhiB,KAAKkzB,KACFpU,SAAS,YACTve,GAAG,qBAAqBP,KAAKozB,aAC7BvZ,KAAK,WAAW7Z,MAEdoc,EAAEiX,WAAWvyB,KAAWA,EAAW,cACxCd,KAAKc,SAAWA,EAChBd,KAAKszB,OAASxyB,GAGhBgH,OAAQ,WAKN,MAJA9H,MAAKkzB,KACFrI,YAAY,YACZvpB,IAAI,aACJuY,KAAK,WAAW,MACZ7Z,MAGTuzB,UAAW,SAASxX,GAElB,MADA/b,MAAKmzB,MAAQ/W,EAAEL,GACR/b,MAGTwzB,UAAW,WACT,GAAIC,GAAOzzB,KAAKmzB,MAAOO,EAAMD,EAAK7Q,QAClC,QACE8Q,EAAIhmB,KAAQ+lB,EAAKrsB,QAAQ,EACzBssB,EAAIjmB,IAAOgmB,EAAKnsB,SAAS;EAI7BqsB,SAAU,SAAS/rB,GACjB,GAAI8Z,GAAI9Z,EAAEkiB,MAAQ9pB,KAAK4iB,OAAO,GAC1BjB,EAAI/Z,EAAEmiB,MAAQ/pB,KAAK4iB,OAAO,GAC1BgR,EAAMnjB,KAAKojB,MAAMlS,EAAED,IAAM,IAAMjR,KAAKwT,IACpC6P,EAAMrjB,KAAKsjB,KAAKtjB,KAAKC,IAAIgR,EAAE,GAAGjR,KAAKC,IAAIiR,EAAE,GAC7C,QAASD,EAAGC,EAAGiS,EAAKE,IAGtBV,UAAW,WAGT,QAASY,GAAQpsB,GACfwU,EAAEtd,QAAQwC,IAAI,aACd2yB,EAAKX,OAAOnzB,KAAK8zB,EAAKA,EAAKN,SAAS/rB,IACpCqsB,EAAKjS,KAAKnJ,UAAU0G,QAAQ,cAG9B,QAAS2U,GAAUtsB,GACjBqsB,EAAKnzB,SAASX,KAAK8zB,EAAKA,EAAKN,SAAS/rB,IATxC,GAAIqsB,GAAOj0B,IAYX,OAAO,UAAS4H,GACdqsB,EAAKrR,OAASqR,EAAKT,WACnB,IAAIW,GAAMF,EAAKN,SAAS/rB,EAYxB,OAXAqsB,GAAKG,aAAeH,EAAKjS,KAAKhD,GAAGW,MAAM6C,MAAM2R,EAAI,GACjDF,EAAKI,WAAaF,EAAI,GACtBF,EAAKK,YAAcH,EAAI,GAAGA,EAAI,IAC9BF,EAAKjS,KAAKnJ,UAAU0G,QAAQ,gBAE5BnD,EAAEtd,QACCyB,GAAG,qBAAqB2zB,GACxB3zB,GAAG,mBAAmByzB,GAEzBC,EAAKnzB,SAASX,KAAK8zB,EAAKA,EAAKN,SAAS/rB,KAE/B,KAKb4W,EAAWoB,kBAAkB,WAAWoT,GAMtCxU,EAAWG,UAGTyG,MAAQ9V,EAAG,EAAG+V,EAAG,EAAGzd,EAAG,EAAG+Y,EAAG,GAC7B4T,UAAW,KACX/G,QAAQ,EACR0D,aAAa,EACbzD,WAAW,EACXG,WAAW,EACXF,SAAS,EACTC,WAAW,EAGX6G,sBAAwBhW,EAAWkB,UAAU8L,aAC7CiJ,kBAAwBjW,EAAWkB,UAAUgV,SAC7CC,mBAAwBnW,EAAWkB,UAAUmK,UAC7C+K,sBAAwBpW,EAAWkB,UAAUoR,aAC7C+D,kBAAwBrW,EAAWkB,UAAU6P,SAC7CuF,mBAAwBtW,EAAWkB,UAAU4N,UAG7CzM,iBAAwBrC,EAAWqC,iBAGnCyN,aAAa,EACbpP,OAAO,EACPmR,UAAU,EACVI,cAAc,EACdsE,WAAW,EACX9L,WAAY,QACZC,aAAc,IACdwI,QAAQ,EACRE,aAAc,IACdzK,WAAY,QACZuB,QAAS,QACTC,UAAW,GAGXqM,cAAgB,YAAa,SAAU,UAAW,QAAS,SAAU,SACrEpF,SAAY,IAAK,IAAK,IAAK,KAC3BC,SAAY,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,MAClDC,UAAY,IAAK,IAAK,IAAK,KAE3BtQ,gBAAiB1gB,OAEjBglB,OAAQ,EACRC,OAAQ,EAERkR,SAAU,KACVC,UAAW,KAOXlG,WAAY,eACZtC,SAAU,aACV3N,cAAe,eACfyI,WAAY,eACZuG,cAAe,kBACfkC,YAAa,eACbD,YAAa,0BACb/B,WAAY,uBACZgB,aAAc,iBACdc,aAAc,2BAEdwB,gBACElT,SAAU,WACV8W,SAAU,YAOhB/Y,EAAErZ,OAAOyb,EAAWpe,WAElB2D,KAAM,WACJ/D,KAAKQ,MAAQ,GAAIR,MAAKye,IAAI+V,sBAAsBx0B,MAChDA,KAAKgf,GAAGoW,SAAW,GAAIp1B,MAAKye,IAAIgW,kBAAkBz0B,MAClDA,KAAKgf,GAAGqN,QAAU,GAAIrsB,MAAKye,IAAImW,sBAAsB50B,MACrDA,KAAKg1B,eAED5Y,EAAEoC,WAAW6W,eACf,GAAIjZ,GAAEoC,WAAWkB,UAAU4V,MAAMt1B,MAEnCA,KAAKuqB,cAIPjL,qBAAsB,WACpB,GAAIyC,GAAI/hB,KAAKye,IACThL,EAAMzT,KAAKye,IAAI6D,MAEnB,IAAI7O,EAAI,CAEN,GAAIuG,GAAKvG,EAAI2G,cAAgB3G,EAAIrM,MAC7B2S,EAAKtG,EAAI4G,eAAiB5G,EAAInM,OAC9BiuB,EAAKxT,EAAEkT,UAAYjb,EACnBwb,EAAKzT,EAAEmT,WAAanb,CAExB,IAAItG,IAASuG,EAAKub,GAAQxb,EAAKyb,GAAK,CAClC,GAAIC,GAAKjX,EAAWkC,cAAc1G,EAAGD,EAAGwb,EAAGC,EAC3CpZ,GAAE3I,GAAKrM,MAAMquB,EAAG,IAAInuB,OAAOmuB,EAAG,IAC9Bz1B,KAAK01B,gBAAgBD,EAAG,GAAGA,EAAG,IAC9Bz1B,KAAKye,IAAIqF,OAAS9J,EAAKyb,EAAG,GAC1Bz1B,KAAKye,IAAIsF,OAAShK,EAAK0b,EAAG,IAK9B,GAAIz1B,KAAKye,IAAIkX,SAAS,CACpB,GAAI9a,GAAK7a,KAAKye,IAAIkX,SAAS,GACvB7a,EAAK9a,KAAKye,IAAIkX,SAAS,GACvBC,EAAK51B,KAAK61B,kBACd71B,MAAKye,IAAIqF,OAASjJ,EAAK+a,EAAG,GAC1B51B,KAAKye,IAAIsF,OAASjJ,EAAK8a,EAAG,KAI9BE,cAAe,SAASxsB,GACtB,GAAIkV,EAAWkB,UAAUpW,GAAO,CAC9B,GAAIzI,GAAOkY,MAAM3Y,UAAUX,MAAMU,KAAKe,WAClC6a,EAAM,GAAIyC,GAAWkB,UAAUpW,EAInC,OAHAzI,GAAKkS,QACLlS,EAAKk1B,QAAQ/1B,MACb+b,EAAIhY,KAAK3C,MAAM2a,EAAIlb,GACZkb,IAIXsD,WAAY,SAASZ,EAAIuX,GAsBvB,MApBK5Z,GAAE6Z,cAAcxX,KAAMA,MAE3BrC,EAAErZ,OAAO/C,KAAKye,IAAIA,GAGdze,KAAKye,IAAI8V,YAINv0B,KAAKgf,GAAGE,MAAM/d,QACjBnB,KAAK2wB,eAGP3wB,KAAKu0B,UAAUv0B,KAAKye,IAAI8V,WAGxBv0B,KAAKye,IAAI8V,UAAY,MAGvBv0B,KAAKQ,MAAM+e,QAAQ,gBACZvf,MAIT2O,QAAS,WACH3O,KAAKye,IAAI6D,QACXtiB,KAAK6Y,UAAUkK,OAAO/iB,KAAKye,IAAI6D,QAC/BtiB,KAAK6Y,UAAU/Q,SACfsU,EAAEpc,KAAKye,IAAI6D,QAAQ4T,WAAW,cAAcrN,QAG5C7oB,KAAK6Y,UAAU/Q,UAKnBktB,aAAc,WAEZ,IAAI,GADAjZ,GACIta,EAAE,EAAE8sB,EAAEvuB,KAAKye,IAAIuW,aAAavU,EAAE8N,EAAEptB,OAAQM,EAAEgf,EAAGhf,IAC/C2a,EAAEoC,WAAWY,OAAOmP,EAAE9sB,MACxBsa,EAAM,GAAIK,GAAEoC,WAAWY,OAAOmP,EAAE9sB,KAChCsa,EAAIiG,KAAOhiB,KACP+b,EAAIhY,MAAMgY,EAAIhY,OAClB/D,KAAKof,OAAOmP,EAAE9sB,IAAMsa,GAK1B+R,kBAAmB,WAGjB,IAAI,GAFA4B,MAEIjuB,EAAE,EAAE8sB,EAAEvuB,KAAKye,IAAIuW,aAAavU,EAAE8N,EAAEptB,OAAQM,EAAEgf,EAAGhf,IAChDzB,KAAKof,OAAOzf,eAAe4uB,EAAE9sB,KAC9BiuB,EAAG/uB,KAAKX,KAAKof,OAAOmP,EAAE9sB,IAG1B,OADAiuB,GAAG3O,KAAK,SAASW,EAAEC,GAAI,MAAOD,GAAER,SAAWS,EAAET,WACtCwO,GAITtB,aAAc,SAASnJ,GAGrB,IAAI,GAFAwD,GAAIzoB,KAAKgf,GAAGE,MACZ5P,KACI7N,EAAE,EAAEA,EAAEgnB,EAAEtnB,OAAOM,IACjBgnB,EAAEhnB,KAAOwjB,GAAK3V,EAAE3O,KAAK8nB,EAAEhnB,IAC3BgnB,EAAEhnB,GAAGytB,QAMP,OAJA5f,GAAEymB,QAAQ9Q,GACVjlB,KAAKgf,GAAGE,MAAQ5P,EAChBtP,KAAKgf,GAAGG,UAAY8F,EACpBA,EAAIkK,UACGlK,GAITkR,aAAc,SAASC,GACrB,GAAInV,GAAIjhB,KAAKgf,GAAGG,UAAU7C,KAC1B,OAAO2E,IAIT0P,aAAc,SAAS1L,GAOrB,MANKA,KACHA,EAAM,GAAIjlB,MAAKye,IAAIqW,oBAErB7P,EAAIlhB,KAAK/D,MACTA,KAAKouB,aAAanJ,GAEXA,GAIToR,aAAc,SAASpR,GACrB,IAAI,GAAIxjB,GAAE,EAAEA,EAAEzB,KAAKgf,GAAGE,MAAMzd,IAC1B,GAAIwjB,IAAQjlB,KAAKgf,GAAGE,MAAMzd,GAAI,OAAO,GAIzCivB,gBAAiB,SAASzL,GAExB,IAAI,GADAxjB,GAAG6N,KAAQmZ,EAAIzoB,KAAKgf,GAAGE,MACnBzd,EAAE,EAAEA,EAAEgnB,EAAEtnB,OAAOM,IACjBwjB,IAAQwD,EAAEhnB,GACZ6N,EAAE3O,KAAK8nB,EAAEhnB,IACNgnB,EAAEhnB,GAAGqG,QAEZ,OAAO9H,MAAKgf,GAAGE,MAAQ5P,GAIzBkf,UAAW,SAASpP,GAClB,IAAI,GAAI3d,GAAE,EAAEgnB,EAAEzoB,KAAKgf,GAAGE,MAAMuB,EAAEgI,EAAEtnB,OAAQM,EAAEgf,EAAGhf,IAC3CgnB,EAAEhnB,GAAG+sB,UAAUpP,EAEjB,OAAOpf,OAIT4uB,aAAc,SAASxP,GACrB,IAAI,GAAI3d,GAAE,EAAEgnB,EAAEzoB,KAAKgf,GAAGE,MAAMuB,EAAEgI,EAAEtnB,OAAQM,EAAEgf,EAAGhf,IAC3CgnB,EAAEhnB,GAAGmtB,aAAaxP,EAEpB,OAAOpf,OAITyvB,KAAM,WAEJ,MADAzvB,MAAKgf,GAAGG,UAAUsQ,OACXzvB,MAIT+qB,MAAO,WAEL,MADA/qB,MAAKgf,GAAGG,UAAU4L,QACX/qB,MAITuqB,WAAY,WACV,GAAIlD,GAAIrnB,IACRqnB,GAAExO,UAAUtY,GAAG,cAAc,SAASqH,GAAI,OAAO,IAC9CrH,GAAG,YAAY,IAAI8mB,EAAE5I,IAAIiO,SAASrF,EAAEsF,cAIzC2J,UAAW,WACTt2B,KAAKu0B,WAAW,EAAE,EAAEv0B,KAAKklB,IAAIllB,KAAKmlB,OAIpC4H,MAAO,SAASrL,EAAEC,GAChB,GAAI0D,GAAIrlB,KAAKgf,GAAGG,UAAW8B,EAAIoE,EAAE/I,KAEjC2E,GAAES,GAAKA,EACPT,EAAEW,IAAMF,EACRT,EAAEU,GAAKA,EACPV,EAAEY,IAAMF,EAEJV,EAAES,EAAI,GAAKT,EAAEW,GAAKX,EAAEN,EAAGM,EAAES,EAAI,GACtBT,EAAEW,GAAK5hB,KAAKklB,MAAOjE,EAAEW,GAAK5hB,KAAKklB,IAAKjE,EAAES,EAAIT,EAAEW,GAAKX,EAAEN,GAE1DM,EAAEU,EAAI,GAAKV,EAAEY,GAAKZ,EAAEL,EAAGK,EAAEU,EAAI,GACtBV,EAAEY,GAAK7hB,KAAKmlB,MAAOlE,EAAEY,GAAK7hB,KAAKmlB,IAAKlE,EAAEU,EAAIV,EAAEY,GAAKZ,EAAEL,GAE9DyE,EAAEzjB,QAAQ2d,QAAQ,aAAa8F,EAAErlB,KAAK8qB,QAAQ7J,KAC9CoE,EAAEuE,UAAU3I,EAAE,QACdoE,EAAEzjB,QAAQ2d,QAAQ,WAAW8F,EAAErlB,KAAK8qB,QAAQ7J,MAI9C+D,QAAS,WACP,IAAI,GAAIvjB,GAAE,EAAE4jB,EAAErlB,KAAKgf,GAAGE,MAAMuB,EAAE4E,EAAElkB,OAAOM,EAAEgf,EAAEhf,IACzC4jB,EAAE5jB,GAAGujB,WAITuR,QAAS,WAEP,IAAI,GADA9N,GAAIzoB,KAAKgf,GAAGE,MACRzd,EAAE,EAAEA,EAAEgnB,EAAEtnB,OAAOM,IACjBgnB,EAAEhnB,KAAOwjB,KAAK3V,EAAE3O,KAAK8nB,EAAEhnB,IAC3BgnB,EAAEhnB,GAAGytB,UAKTzM,MAAO,SAASxB,GACd,GAAIuV,GAAKx2B,KAAKye,IAAIqF,OACd2S,EAAKz2B,KAAKye,IAAIsF,MAElB,QACErC,EAAGT,EAAES,EAAI8U,EACT7U,EAAGV,EAAEU,EAAI8U,EACT7U,GAAIX,EAAEW,GAAK4U,EACX3U,GAAIZ,EAAEY,GAAK4U,EACX9V,EAAGM,EAAEN,EAAI6V,EACT5V,EAAGK,EAAEL,EAAI6V,IAKb3L,QAAS,SAAS7J,GAChB,GAAIuV,GAAKx2B,KAAKye,IAAIqF,OACd2S,EAAKz2B,KAAKye,IAAIsF,MAElB,QACErC,EAAGT,EAAES,EAAI8U,EACT7U,EAAGV,EAAEU,EAAI8U,EACT7U,GAAIX,EAAEW,GAAK4U,EACX3U,GAAIZ,EAAEY,GAAK4U,EACX9V,EAAGM,EAAEN,EAAI6V,EACT5V,EAAGK,EAAEL,EAAI6V,IAKbtJ,cAAe,WACb,GAAKntB,KAAKgf,GAAGE,MAAM/d,OAAS,GAAOnB,KAAKgf,GAAGG,UAAmB,UAC5D,MAAOnf,MAAK02B,mBAIhBA,gBAAiB,WACX12B,KAAKgf,GAAGG,YACVnf,KAAK0wB,gBAAgB1wB,KAAKgf,GAAGG,WACzBnf,KAAKgf,GAAGE,MAAM/d,QAAQnB,KAAKgf,GAAGE,MAAM,GAAG6L,QAC3C/qB,KAAKgf,GAAGG,UAAU6F,YAKtBqK,UAAW,SAAS1J,GAGlB,MAFI3lB,MAAKgf,GAAGG,WACVnf,KAAKgf,GAAGG,UAAUkQ,UAAU1J,GACvB3lB,MAITu0B,UAAW,SAAS5O,GAGlB,MAFI3lB,MAAKgf,GAAGG,WACVnf,KAAKgf,GAAGG,UAAU6L,OAAOxM,EAAWgD,aAAamE,IAC5C3lB,MAIT2sB,UAAW,WACT,GAAItF,GAAIrnB,IACR,OAAO,UAAS4H,GACd,GAAIurB,GAAQ/W,EAAExU,EAAEwE,QACZ+S,EAAYgU,EAAMwD,QAAQ,IAAItP,EAAE5I,IAAIsP,eAAelU,KAAK,aACxD0L,EAAM4N,EAAMtZ,KAAK,MAGrB,OAFAwN,GAAExO,UAAU0G,QAAQ,aAAaJ,EAAUkI,EAAEyD,QAAQ3L,EAAU7C,SAC/D6C,EAAUwN,UAAU/kB,EAAE2d,IACf,IAKXsQ,iBAAkB,WAChB,OAAS71B,KAAK6Y,UAAUzR,QAASpH,KAAK6Y,UAAUvR,WAIlDouB,gBAAiB,SAAS/U,EAAEC,GAC1B5gB,KAAK6Y,UAAUzR,MAAMuZ,GAAGrZ,OAAOsZ,GAC/B5gB,KAAKglB,WAIP4R,SAAU,SAASpsB,EAAIwe,GACrB,GAAI3B,GAAIrnB,KAAMyzB,EAAOpM,EAAE5I,IAAI6D,MAE3B,SAAKmR,OAEL,IAAIrX,GAAEoC,WAAWkB,UAAU0C,YAAY5X,EAAI,KAAK,SAASmW,EAAEC,GACzDyG,EAAEqO,gBAAgB/U,EAAEC,GAEpB6S,EAAKjpB,IAAMA,EACX4R,EAAEqX,GAAMrsB,MAAMuZ,GAAGrZ,OAAOsZ,GACxByG,EAAE/H,uBACF+H,EAAErC,UACFqC,EAAExO,UAAU0G,QAAQ,aAAa8H,EAAEoM,IAElB,kBAANzK,IACTA,EAAG7oB,KAAKknB,EAAE1G,EAAEC,MAKlBoK,OAAQ,SAAS/J,GACXjhB,KAAKgf,GAAGG,WACVnf,KAAKgf,GAAGG,UAAU6L,OAAO/J,MAM/B7E,EAAE3b,GAAG+d,WAAa,SAAS3c,EAAQf,GACjCe,EAAUA,KAEV,IAAIg1B,GAAQ72B,KAAK82B,GAAG,GAAGjd,KAAK,cACxBhZ,EAAOkY,MAAM3Y,UAAUX,MAAMU,KAAKe,UAGtC,OAAe,OAAXW,EAA2Bg1B,EAGtBA,GAA4B,gBAAXh1B,KAGpBg1B,EAAMh1B,KACRhB,EAAKkS,QACL8jB,EAAMh1B,GAAST,MAAMy1B,EAAMh2B,GACpBg2B,OAQX72B,MAAKuZ,KAAK,WACR,GAAcwd,GAAK3a,EAAEpc,MACjBg3B,EAASD,EAAGld,KAAK,aAiCrB,OA7BImd,GACFA,EAAO3X,WAAWxd,IAIbA,EAAQgf,mBACXhf,EAAQgf,iBAAmBzE,EAAEoC,WAAWqC,kBAE1Chf,EAAQgf,iBAAiB7gB,KAAK6B,EAAQ,SAAS8d,EAAM9d,GACnD,GAAIsd,GAAYtd,EAAQ0yB,SACpBpV,UAAkBtd,GAAiB,SAEvC,IAAIka,GAAMK,EAAEoC,WAAWuB,OAAOJ,EAAM/d,QAAQC,EAEjB,mBAAhB8d,GAAMI,QACfJ,EAAMI,OAAOhE,GAEfgb,EAAGld,KAAK,aAAakC,GAEjBoD,IACFpD,EAAI4U,eACJ5U,EAAIwY,UAAUpV,IAGO,kBAAZre,IACTA,EAASX,KAAK4b,MAIb/b,OASb,IAAIi3B,GAAY,SAAWn4B,EAAQ0D,EAAUoa,GA+KzC,QAASsa,GAAQ1e,GACb2e,EAAOC,QAAU5e,EAOrB,QAAS6e,GAAItb,EAAKpJ,GACd,aAAcoJ,KAAQpJ,EAG1B,QAAStF,GAAUmL,EAAK2T,GACpB,UAAW,GAAK3T,GAAK1J,QAAQqd,GAGjC,QAASmL,GAAWlO,EAAOmO,GACvB,IAAM,GAAI91B,KAAK2nB,GAAQ,CACnB,GAAIvL,GAAOuL,EAAM3nB,EACjB,KAAM4L,EAASwQ,EAAM,MAAQsZ,EAAOtZ,KAAUjB,EAC1C,MAAmB,OAAZ2a,GAAoB1Z,EAGnC,OAAO,EAGX,QAAS2Z,GAAcpO,EAAOrN,EAAK0b,GAC/B,IAAM,GAAIh2B,KAAK2nB,GAAQ,CACnB,GAAIlY,GAAO6K,EAAIqN,EAAM3nB,GACrB,IAAKyP,IAAS0L,EAEE,MAAI6a,MAAS,EAAcrO,EAAM3nB,GAE7B41B,EAAGnmB,EAAM,YACFA,EAAK+L,KAAKwa,GAAQ1b,GAGtB7K,EAG3B,OAAO,EAGX,QAASwmB,GAAc7Z,EAAM0Z,EAAUE,GAEnC,GAAIE,GAAU9Z,EAAKpF,OAAO,GAAGlV,cAAgBsa,EAAKpe,MAAM,GACpD2pB,GAAWvL,EAAO,IAAM+Z,EAAcC,KAAKF,EAAS,KAAOA,GAAQte,MAAM,IAEzE,OAAGge,GAAGE,EAAU,WAAaF,EAAGE,EAAU,aACrCD,EAAUlO,EAAOmO,IAGxBnO,GAASvL,EAAO,IAAM,EAAcga,KAAKF,EAAS,KAAOA,GAAQte,MAAM,KAChEme,EAAapO,EAAOmO,EAAUE,IAlO3C,GAWAK,GAyBAC,EAiFuCC,EArHnC/1B,EAAU,QAEdg1B,KAGAgB,EAAaz1B,EAAS8Y,gBAEtB4c,EAAM,YACNC,EAAU31B,EAASgE,cAAc0xB,GACjCf,EAASgB,EAAQ/sB,MAKjBkS,KAAcA,SAEd8a,EAAW,4BAA4B/e,MAAM,KAI7Cgf,EAAa,kBAEbT,EAAgBS,EAAWhf,MAAM,KAEjCif,EAAcD,EAAWlhB,cAAckC,MAAM,KAE7Ckf,GAAMC,IAAO,8BAEbC,KAIAC,KAEAj5B,EAAQi5B,EAAQj5B,MAKhBk5B,EAA0B,SAAUC,EAAM93B,EAAU+3B,EAAOC,GAEzD,GAAI1tB,GAAO2tB,EAAKvwB,EAAMwwB,EAClBrgB,EAAMnW,EAASgE,cAAc,OACvBiZ,EAAOjd,EAASid,KAChBwZ,EAAWxZ,GAAQjd,EAASgE,cAAc,OAEpD,IAAKsX,SAAS+a,EAAO,IACL,KAAQA,KAChBrwB,EAAOhG,EAASgE,cAAc,OAC9BgC,EAAK0wB,GAAKJ,EAAYA,EAAUD,GAASX,GAAOW,EAAQ,GACxDlgB,EAAIlS,YAAY+B,EAwBxB,OApBU4C,IAAS,SAAS,eAAgB8sB,EAAK,KAAMU,EAAM,YAAYf,KAAK,IAC9Elf,EAAIugB,GAAKhB,GACJzY,EAAO9G,EAAMsgB,GAAU1vB,WAAa6B,EACzC6tB,EAASxyB,YAAYkS,GACf8G,IACIwZ,EAAS7tB,MAAM+tB,WAAa,GAC5BF,EAAS7tB,MAAMguB,SAAW,SAChCJ,EAAcf,EAAW7sB,MAAMguB,SAC/BnB,EAAW7sB,MAAMguB,SAAW,SAC5BnB,EAAWxxB,YAAYwyB,IAG3BF,EAAMj4B,EAAS6X,EAAKigB,GACZnZ,EAIJ9G,EAAIlV,WAAWC,YAAYiV,IAH3BsgB,EAASx1B,WAAWC,YAAYu1B,GAChChB,EAAW7sB,MAAMguB,SAAWJ,KAKvBD,GAMXM,EAAmB,WAQjB,QAASA,GAAkBrsB,EAAWpL,GAEpCA,EAAUA,GAAWY,EAASgE,cAAc8yB,EAAStsB,IAAc,OACnEA,EAAY,KAAOA,CAEf,IAAImU,GAAcnU,IAAapL,EAkBnC,OAhBMuf,KACQvf,EAAQwL,eAClBxL,EAAUY,EAASgE,cAAc,QAE9B5E,EAAQwL,cAAgBxL,EAAQ23B,kBACnC33B,EAAQwL,aAAaJ,EAAW,IAChCmU,EAAckW,EAAGz1B,EAAQoL,GAAY,YAEvBqqB,EAAGz1B,EAAQoL,GAAY,eACnCpL,EAAQoL,GAAa4P,GAEvBhb,EAAQ23B,gBAAgBvsB,KAI5BpL,EAAU,KACHuf,EA7BT,GAAImY,IACFE,OAAU,QAASC,OAAU,QAC7BC,OAAU,OAAQpxB,MAAS,OAC3BoC,MAAS,MAAO+gB,KAAQ,MAAO5W,MAAS,MA4B1C,OAAOwkB,MAITM,KAAuBh6B,cAQrBq4B,GANIX,EAAGsC,EAAiB,cAAiBtC,EAAGsC,EAAgBx5B,KAAM,aAMrD,SAAU+L,EAAQ0tB,GAC7B,MAASA,KAAY1tB,IAAWmrB,EAAGnrB,EAAOjM,YAAYG,UAAUw5B,GAAW,cANhE,SAAU1tB,EAAQ0tB,GAC7B,MAAOD,GAAgBx5B,KAAK+L,EAAQ0tB,IAUnC5c,SAAS5c,UAAU6c,OACtBD,SAAS5c,UAAU6c,KAAO,SAAcgX,GAEtC,GAAI7nB,GAASpM,IAEb,IAAqB,kBAAVoM,GACP,KAAM,IAAIytB,UAGd,IAAIh5B,GAAOpB,EAAMU,KAAKe,UAAW,GAC7ByjB,EAAQ,WAER,GAAI3kB,eAAgB2kB,GAAO,CAEzB,GAAIhJ,GAAI,YACRA,GAAEvb,UAAYgM,EAAOhM,SACrB,IAAI05B,GAAO,GAAIne,GAEXvI,EAAShH,EAAOhL,MAChB04B,EACAj5B,EAAKk5B,OAAOt6B,EAAMU,KAAKe,YAE3B,OAAI+c,QAAO7K,KAAYA,EACZA,EAEJ0mB,EAIP,MAAO1tB,GAAOhL,MACV6yB,EACApzB,EAAKk5B,OAAOt6B,EAAMU,KAAKe,aAOjC,OAAOyjB,KA+DX8T,EAAc,OAAI,WACd,GAAIhB,GAAOj1B,EAASgE,cAAc,SAClC,UAAUixB,EAAK3jB,aAAc2jB,EAAK3jB,WAAW,QAGjD2kB,EAAkB,WAAI,WAClB,SAAUxB,EAAkB,SAAKI,EAAG70B,EAASgE,cAAc,UAAUsN,WAAW,MAAMkmB,SAAU,cAEpGvB,EAAa,MAAI,WACb,GAAIwB,EAUJ,OARI,gBAAkBn7B,IAAWA,EAAOitB,eAAiBvpB,YAAoBupB,eAC3EkO,GAAO,EAEPtB,GAAyB,WAAWP,EAASP,KAAK,oBAAoBK,EAAI,IAAI,2CAA2CL,KAAK,IAAK,SAAUrvB,GAC3IyxB,EAA0B,IAAnBzxB,EAAK0xB,YAITD,GAGXxB,EAAmB,YAAI,WACnB,GAAI9f,GAAMnW,EAASgE,cAAc,MACjC,OAAQ,aAAemS,IAAS,eAAiBA,IAAO,UAAYA,IAIxE8f,EAAqB,cAAI,WACrB,QAASf,EAAa,cAI1Be,EAAW,IAAI,WACX,QAASj2B,EAAS23B,mBAAqB33B,EAAS23B,gBAAgB5B,EAAGC,IAAK,OAAO4B,eAGnF3B,EAAiB,UAAI,WACnB,GAAI9f,GAAMnW,EAASgE,cAAc,MAEjC,OADAmS,GAAIpP,UAAY,UACRoP,EAAI0hB,YAAc1hB,EAAI0hB,WAAWC,eAAiB/B,EAAGC,KAK/DC,EAAoB,aAAI,WACpB,QAASj2B,EAAS23B,iBAAmB,cAAc5zB,KAAK+W,EAASnd,KAAKqC,EAAS23B,gBAAgB5B,EAAGC,IAAK,cAG3G,KAAM,GAAI+B,KAAW9B,GACZT,EAAWS,EAAO8B,KACKxC,EAAewC,EAAQpjB,cAC/C8f,EAAUc,GAAeU,EAAM8B,KAE/B7B,EAAQ/3B,MAAMs2B,EAAUc,GAAe,GAAK,OAASA,GAuD7D,OAjDCd,GAAUuD,QAAU,SAAWD,EAASh0B,GACtC,GAAuB,gBAAXg0B,GACV,IAAM,GAAIr6B,KAAOq6B,GACVvC,EAAYuC,EAASr6B,IACxB+2B,EAAUuD,QAASt6B,EAAKq6B,EAASr6B,QAGhC,CAIL,GAFAq6B,EAAUA,EAAQpjB,cAEb8f,EAAUsD,KAAa3d,EACS,MAAOqa,EAG5C1wB,GAAsB,kBAARA,GAAqBA,IAASA,EAEf,mBAAlBk0B,gBAAiCA,gBAC1CxC,EAAW5xB,WAAa,KAAOE,EAAO,GAAK,OAASg0B,GAEtDtD,EAAUsD,GAAWh0B,EAIvB,MAAO0wB,IAIVC,EAAO,IACPiB,EAAUL,EAAY,KAGtBb,EAAUyD,SAAgBz4B,EAE1Bg1B,EAAU0D,UAAgBvC,EAC1BnB,EAAU2D,aAAgBtC,EAC1BrB,EAAU4D,eAAkBjD,EAG5BX,EAAU6D,SAAgBzB,EAE1BpC,EAAU8D,SAAgB,SAASld,GAC/B,MAAOyZ,IAAWzZ,KAGtBoZ,EAAU+D,aAAgBtD,EAG1BT,EAAUgE,WAAgBtC,EACnB1B,GAERn4B,OAAQA,OAAO0D,WAYlB,WAEE,GAAI04B,GAAU,GAAIhb,MAGlBgb,GAAQhnB,QAAU,WACd+iB,EAAUuD,QAAQ,UAAW,WAAc,OAAO,KAEtDU,EAAQ/nB,OAAS,WACb8jB,EAAUuD,QAAQ,UAAW,WAAc,MAAyB,IAAjBU,EAAQ9zB,OAAgC,GAAlB8zB,EAAQ5zB,UAGrF4zB,EAAQ1wB,IAAM,4EAMd4R,EAAEoC,WAAaA,EAEfpC,EAAEoC,WAAW4B,eAAiB6W,EAAUvjB,OACxC0I,EAAEoC,WAAW2c,mBAAqBlE,EAAUmE,WAC5Chf,EAAEoC,WAAW6c,oBAAsBpE,EAAUqE,YAC7Clf,EAAEoC,WAAW+c,gBAAkBtE,EAAUiE,QACzC9e,EAAEoC,WAAWgd,YAAcvE,EAAUuB,IACrCpc,EAAEoC,WAAWid,kBAAoBxE,EAAUyE,UAC3Ctf,EAAEoC,WAAWmd,qBAAuB1E,EAAU2E,aAC9Cxf,EAAEoC,WAAWqd,sBAAwB5E,EAAU6E,cAC/C1f,EAAEoC,WAAW6W,cAAgB4B,EAAUjL,OAEtC1S,QCryFH,SAAU8C,GACTA,EAAE3b,GAAGs7B,OAAS,WAEb,MADA/7B,MAAK8e,SAAS,WACP9e,MAGRoc,EAAE3b,GAAGu7B,OAAS,WAEb,MADAh8B,MAAK6qB,YAAY,WACV7qB,OAENlB,OAAOwa,QCVV0E,OAAO5d,UAAU67B,YAAc,WAC9B,MAAOj8B,MAAKmX,cAEV/U,QAAQ,SAAU,KAElBA,QAAQ,WAAY,IAGpBA,QAAQ,QAAS,SAAS85B,GAC1B,MAAOA,GAAG34B,gBAGVnB,QAAQ,KAAM,KCVhB,SAAU+5B,GACa,kBAAXC,SAAyBA,OAAOC,IAEzCD,QAAQ,UAAWD,GAGnBA,EAF4B,gBAAZ1iB,SAER6iB,QAAQ,UAGRhjB,SAEV,SAAUA,GAIV,GAAIijB,GACL,WAGC,GAAIjjB,GAAUA,EAAO7Y,IAAM6Y,EAAO7Y,GAAG+7B,SAAWljB,EAAO7Y,GAAG+7B,QAAQH,IAChE,GAAIE,GAAKjjB,EAAO7Y,GAAG+7B,QAAQH,GAE/B,IAAIE,EA4iLF,OA5iLM,YAAc,IAAKA,IAAOA,EAAGE,UAAW,CAC3CF,EAAwBD,EAAUC,EAA5BA,IAUX,IAAIE,GAAWH,EAASF,GACvB,SAAUM,GAUP,QAASC,GAAQ5gB,EAAK8B,GAClB,MAAO+e,GAAOz8B,KAAK4b,EAAK8B,GAW5B,QAASgf,GAAUvzB,EAAMwzB,GACrB,GAAIC,GAAWC,EAAaC,EAAUC,EAAUC,EAC5CC,EAAQC,EAAcC,EAAO77B,EAAG87B,EAAGC,EACnCC,EAAYX,GAAYA,EAASzjB,MAAM,KACvCqkB,EAAMld,EAAOkd,IACbC,EAAWD,GAAOA,EAAI,QAG1B,IAAIp0B,GAA2B,MAAnBA,EAAKmP,OAAO,GAIpB,GAAIqkB,EAAU,CAgBV,IAfAxzB,EAAOA,EAAK+P,MAAM,KAClB8jB,EAAY7zB,EAAKnI,OAAS,EAGtBqf,EAAOod,cAAgBC,EAAet3B,KAAK+C,EAAK6zB,MAChD7zB,EAAK6zB,GAAa7zB,EAAK6zB,GAAW/6B,QAAQy7B,EAAgB,KAO9Dv0B,EAAOm0B,EAAUh+B,MAAM,EAAGg+B,EAAUt8B,OAAS,GAAG44B,OAAOzwB,GAGlD7H,EAAI,EAAGA,EAAI6H,EAAKnI,OAAQM,GAAK,EAE9B,GADA+7B,EAAOl0B,EAAK7H,GACC,MAAT+7B,EACAl0B,EAAK5H,OAAOD,EAAG,GACfA,GAAK,MACF,IAAa,OAAT+7B,EAAe,CACtB,GAAU,IAAN/7B,IAAwB,OAAZ6H,EAAK,IAA2B,OAAZA,EAAK,IAOrC,KACO7H,GAAI,IACX6H,EAAK5H,OAAOD,EAAI,EAAG,GACnBA,GAAK,GAMjB6H,EAAOA,EAAKuuB,KAAK,SACa,KAAvBvuB,EAAKwF,QAAQ,QAGpBxF,EAAOA,EAAK2I,UAAU,GAK9B,KAAKwrB,GAAaE,IAAYD,EAAK,CAG/B,IAFAX,EAAYzzB,EAAK+P,MAAM,KAElB5X,EAAIs7B,EAAU57B,OAAQM,EAAI,EAAGA,GAAK,EAAG,CAGtC,GAFAu7B,EAAcD,EAAUt9B,MAAM,EAAGgC,GAAGo2B,KAAK,KAErC4F,EAGA,IAAKF,EAAIE,EAAUt8B,OAAQo8B,EAAI,EAAGA,GAAK,EAKnC,GAJAN,EAAWS,EAAID,EAAUh+B,MAAM,EAAG89B,GAAG1F,KAAK,MAItCoF,IACAA,EAAWA,EAASD,IACN,CAEVE,EAAWD,EACXG,EAAS37B,CACT,OAMhB,GAAIy7B,EACA,OAMCG,GAAgBM,GAAWA,EAAQX,KACpCK,EAAeM,EAAQX,GACvBM,EAAQ77B,IAIXy7B,GAAYG,IACbH,EAAWG,EACXD,EAASE,GAGTJ,IACAH,EAAUr7B,OAAO,EAAG07B,EAAQF,GAC5B5zB,EAAOyzB,EAAUlF,KAAK,MAI9B,MAAOvuB,GAGX,QAASw0B,GAAYC,EAASC,GAC1B,MAAO,YAIH,GAAIn9B,GAAOo9B,EAAI99B,KAAKe,UAAW,EAQ/B,OAHuB,gBAAZL,GAAK,IAAmC,IAAhBA,EAAKM,QACpCN,EAAKF,KAAK,MAEPu9B,EAAI98B,MAAMs7B,EAAO77B,EAAKk5B,QAAQgE,EAASC,MAItD,QAASG,GAAcJ,GACnB,MAAO,UAAUz0B,GACb,MAAOuzB,GAAUvzB,EAAMy0B,IAI/B,QAASK,GAASC,GACd,MAAO,UAAUlzB,GACbmzB,EAAQD,GAAWlzB,GAI3B,QAASozB,GAAQj1B,GACb,GAAIqzB,EAAQ6B,EAASl1B,GAAO,CACxB,GAAIzI,GAAO29B,EAAQl1B,SACZk1B,GAAQl1B,GACfm1B,EAASn1B,IAAQ,EACjBo1B,EAAKt9B,MAAMs7B,EAAO77B,GAGtB,IAAK87B,EAAQ2B,EAASh1B,KAAUqzB,EAAQ8B,EAAUn1B,GAC9C,KAAM,IAAI3G,OAAM,MAAQ2G,EAE5B,OAAOg1B,GAAQh1B,GAMnB,QAASq1B,GAAYr1B,GACjB,GAAIs1B,GACAC,EAAQv1B,EAAOA,EAAKwF,QAAQ,MAAO,CAKvC,OAJI+vB,IAAQ,IACRD,EAASt1B,EAAK2I,UAAU,EAAG4sB,GAC3Bv1B,EAAOA,EAAK2I,UAAU4sB,EAAQ,EAAGv1B,EAAKnI,UAElCy9B,EAAQt1B,GA8CpB,QAASw1B,GAAWx1B,GAChB,MAAO,YACH,MAAQkX,IAAUA,EAAOA,QAAUA,EAAOA,OAAOlX,QA1OzD,GAAIo1B,GAAMR,EAAKa,EAASC,EACpBV,KACAE,KACAhe,KACAie,KACA7B,EAAS3e,OAAO7d,UAAUT,eAC1Bs+B,KAASx+B,MACTo+B,EAAiB,OA2LrBkB,GAAU,SAAUz1B,EAAMy0B,GACtB,GAAIkB,GACAC,EAAQP,EAAYr1B,GACpBs1B,EAASM,EAAM,EA2BnB,OAzBA51B,GAAO41B,EAAM,GAETN,IACAA,EAAS/B,EAAU+B,EAAQb,GAC3BkB,EAASV,EAAQK,IAIjBA,EAEIt1B,EADA21B,GAAUA,EAAOpC,UACVoC,EAAOpC,UAAUvzB,EAAM60B,EAAcJ,IAErClB,EAAUvzB,EAAMy0B,IAG3Bz0B,EAAOuzB,EAAUvzB,EAAMy0B,GACvBmB,EAAQP,EAAYr1B,GACpBs1B,EAASM,EAAM,GACf51B,EAAO41B,EAAM,GACTN,IACAK,EAASV,EAAQK,MAMrBrQ,EAAGqQ,EAASA,EAAS,IAAMt1B,EAAOA,EAClCgG,EAAGhG,EACH61B,GAAIP,EACJzU,EAAG8U,IAUXD,GACI1C,QAAS,SAAUhzB,GACf,MAAOw0B,GAAYx0B,IAEvBmQ,QAAS,SAAUnQ,GACf,GAAI1B,GAAI02B,EAAQh1B,EAChB,OAAiB,mBAAN1B,GACAA,EAEC02B,EAAQh1B,OAGxBkQ,OAAQ,SAAUlQ,GACd,OACI4vB,GAAI5vB,EACJ81B,IAAK,GACL3lB,QAAS6kB,EAAQh1B,GACjBkX,OAAQse,EAAWx1B,MAK/Bo1B,EAAO,SAAUp1B,EAAM+1B,EAAMv+B,EAAUi9B,GACnC,GAAIuB,GAAWjB,EAAStF,EAAK2E,EAAKj8B,EAG9B89B,EAFA1+B,KACA2+B,QAAsB1+B,EAO1B,IAHAi9B,EAAUA,GAAWz0B,EAGA,cAAjBk2B,GAAiD,aAAjBA,EAA6B,CAK7D,IADAH,GAAQA,EAAKl+B,QAAUL,EAASK,QAAU,UAAW,UAAW,UAAYk+B,EACvE59B,EAAI,EAAGA,EAAI49B,EAAKl+B,OAAQM,GAAK,EAK9B,GAJAi8B,EAAMqB,EAAQM,EAAK59B,GAAIs8B,GACvBM,EAAUX,EAAInP,EAGE,YAAZ8P,EACAx9B,EAAKY,GAAKu9B,EAAS1C,QAAQhzB,OACxB,IAAgB,YAAZ+0B,EAEPx9B,EAAKY,GAAKu9B,EAASvlB,QAAQnQ,GAC3Bi2B,GAAe,MACZ,IAAgB,WAAZlB,EAEPiB,EAAYz+B,EAAKY,GAAKu9B,EAASxlB,OAAOlQ,OACnC,IAAIqzB,EAAQ2B,EAASD,IACjB1B,EAAQ6B,EAASH,IACjB1B,EAAQ8B,EAAUJ,GACzBx9B,EAAKY,GAAK88B,EAAQF,OACf,CAAA,IAAIX,EAAIvT,EAIX,KAAM,IAAIxnB,OAAM2G,EAAO,YAAc+0B,EAHrCX,GAAIvT,EAAEsB,KAAKiS,EAAIpuB,EAAGwuB,EAAYC,GAAS,GAAOK,EAASC,OACvDx9B,EAAKY,GAAK68B,EAAQD,GAM1BtF,EAAMj4B,EAAWA,EAASM,MAAMk9B,EAAQh1B,GAAOzI,GAAQ+b,OAEnDtT,IAIIg2B,GAAaA,EAAU7lB,UAAYijB,GAC/B4C,EAAU7lB,UAAY6kB,EAAQh1B,GAClCg1B,EAAQh1B,GAAQg2B,EAAU7lB,QACnBsf,IAAQ2D,GAAU6C,IAEzBjB,EAAQh1B,GAAQyvB,QAGjBzvB,KAGPg1B,EAAQh1B,GAAQxI,IAIxB27B,EAAYH,EAAU4B,EAAM,SAAUmB,EAAMv+B,EAAUi9B,EAASC,EAAWzzB,GACtE,GAAoB,gBAAT80B,GACP,MAAIL,GAASK,GAEFL,EAASK,GAAMv+B,GAMnBy9B,EAAQQ,EAAQM,EAAMv+B,GAAUytB,EACpC,KAAK8Q,EAAK39B,OAAQ,CAMrB,GAJA8e,EAAS6e,EACL7e,EAAO6e,MACPnB,EAAI1d,EAAO6e,KAAM7e,EAAO1f,WAEvBA,EACD,MAGAA,GAASY,QAGT29B,EAAOv+B,EACPA,EAAWi9B,EACXA,EAAU,MAEVsB,EAAO3C,EA6Bf,MAxBA57B,GAAWA,GAAY,aAIA,kBAAZi9B,KACPA,EAAUC,EACVA,EAAYzzB,GAIZyzB,EACAU,EAAKhC,EAAO2C,EAAMv+B,EAAUi9B,GAQ5BtzB,WAAW,WACPi0B,EAAKhC,EAAO2C,EAAMv+B,EAAUi9B,IAC7B,GAGAG,GAOXA,EAAI1d,OAAS,SAAUif,GACnB,MAAOvB,GAAIuB,IAMfhD,EAAUiD,SAAWpB,EAErBlC,EAAS,SAAU9yB,EAAM+1B,EAAMv+B,GAC3B,GAAoB,gBAATwI,GACP,KAAM,IAAI3G,OAAM,4DAIf08B,GAAK39B,SAINZ,EAAWu+B,EACXA,MAGC1C,EAAQ2B,EAASh1B,IAAUqzB,EAAQ6B,EAASl1B,KAC7Ck1B,EAAQl1B,IAASA,EAAM+1B,EAAMv+B,KAIrCs7B,EAAOC,KACH/iB,QAAQ,MAIhBijB,EAAGE,UAAYA,EAAUF,EAAGD,QAAUA,EAAQC,EAAGH,OAASA,MAG1DG,EAAGH,OAAO,SAAU,cAEpBG,EAAGH,OAAO,YAAY,WACpB,GAAIuD,GAAKrmB,GAAU8C,CAUnB,OARU,OAANujB,GAAc7tB,SAAWA,QAAQpH,OACnCoH,QAAQpH,MACN,yJAMGi1B,IAGTpD,EAAGH,OAAO,iBACR,UACC,SAAUhgB,GAuBX,QAASwjB,GAAYC,GACnB,GAAIC,GAAQD,EAASz/B,UAEjB2/B,IAEJ,KAAK,GAAIC,KAAcF,GAAO,CAC5B,GAAIrX,GAAIqX,EAAME,EAEG,mBAANvX,IAIQ,gBAAfuX,GAIJD,EAAQp/B,KAAKq/B,GAGf,MAAOD,GAzCT,GAAIE,KAEJA,GAAMC,OAAS,SAAUC,EAAYC,GAGnC,QAASC,KACPrgC,KAAKC,YAAckgC,EAHrB,GAAIzgC,MAAeC,cAMnB,KAAK,GAAIO,KAAOkgC,GACV1gC,EAAUS,KAAKigC,EAAYlgC,KAC7BigC,EAAWjgC,GAAOkgC,EAAWlgC,GAQjC,OAJAmgC,GAAgBjgC,UAAYggC,EAAWhgC,UACvC+/B,EAAW//B,UAAY,GAAIigC,GAC3BF,EAAW9/B,UAAY+/B,EAAWhgC,UAE3B+/B,GAyBTF,EAAMK,SAAW,SAAUF,EAAYG,GAIrC,QAASC,KACP,GAAIzK,GAAUhd,MAAM3Y,UAAU21B,QAE1B0K,EAAWF,EAAengC,UAAUH,YAAYkB,OAEhDu/B,EAAoBN,EAAWhgC,UAAUH,WAEzCwgC,GAAW,IACb1K,EAAQ51B,KAAKe,UAAWk/B,EAAWhgC,UAAUH,aAE7CygC,EAAoBH,EAAengC,UAAUH,aAG/CygC,EAAkBt/B,MAAMpB,KAAMkB,WAKhC,QAASy/B,KACP3gC,KAAKC,YAAcugC,EAtBrB,GAAII,GAAmBhB,EAAWW,GAC9BM,EAAejB,EAAWQ,EAkB9BG,GAAeO,YAAcV,EAAWU,YAMxCN,EAAepgC,UAAY,GAAIugC,EAE/B,KAAK,GAAIlY,GAAI,EAAGA,EAAIoY,EAAa1/B,OAAQsnB,IAAK,CAC1C,GAAIsY,GAAcF,EAAapY,EAE/B+X,GAAepgC,UAAU2gC,GACvBX,EAAWhgC,UAAU2gC,GAsB3B,IAAK,GAnBDC,IAAe,SAAUhB,GAE3B,GAAIiB,GAAiB,YAEjBjB,KAAcQ,GAAepgC,YAC/B6gC,EAAiBT,EAAepgC,UAAU4/B,GAG5C,IAAIkB,GAAkBX,EAAengC,UAAU4/B,EAE/C,OAAO,YACL,GAAIjK,GAAUhd,MAAM3Y,UAAU21B,OAI9B,OAFAA,GAAQ51B,KAAKe,UAAW+/B,GAEjBC,EAAgB9/B,MAAMpB,KAAMkB,cAI9BgqB,EAAI,EAAGA,EAAI0V,EAAiBz/B,OAAQ+pB,IAAK,CAChD,GAAIgW,GAAkBN,EAAiB1V,EAEvCsV,GAAepgC,UAAU8gC,GAAmBF,EAAaE,GAG3D,MAAOV,GAGT,IAAIW,GAAa,WACfnhC,KAAKsC,aAmKP,OAhKA6+B,GAAW/gC,UAAUG,GAAK,SAAUC,EAAOM,GACzCd,KAAKsC,UAAYtC,KAAKsC,cAElB9B,IAASR,MAAKsC,UAChBtC,KAAKsC,UAAU9B,GAAOG,KAAKG,GAE3Bd,KAAKsC,UAAU9B,IAAUM,IAI7BqgC,EAAW/gC,UAAUmf,QAAU,SAAU/e,GACvC,GAAIf,GAAQsZ,MAAM3Y,UAAUX,MACxBoF,EAASpF,EAAMU,KAAKe,UAAW,EAEnClB,MAAKsC,UAAYtC,KAAKsC,cAGR,MAAVuC,IACFA,MAIoB,IAAlBA,EAAO1D,QACT0D,EAAOlE,SAITkE,EAAO,GAAGu8B,MAAQ5gC,EAEdA,IAASR,MAAKsC,WAChBtC,KAAKqhC,OAAOrhC,KAAKsC,UAAU9B,GAAQf,EAAMU,KAAKe,UAAW,IAGvD,KAAOlB,MAAKsC,WACdtC,KAAKqhC,OAAOrhC,KAAKsC,UAAU,KAAMpB,YAIrCigC,EAAW/gC,UAAUihC,OAAS,SAAU/+B,EAAWuC,GACjD,IAAK,GAAIpD,GAAI,EAAG6/B,EAAMh/B,EAAUnB,OAAQM,EAAI6/B,EAAK7/B,IAC/Ca,EAAUb,GAAGL,MAAMpB,KAAM6E,IAI7Bo7B,EAAMkB,WAAaA,EAEnBlB,EAAMsB,cAAgB,SAAUpgC,GAG9B,IAAK,GAFDqgC,GAAQ,GAEH//B,EAAI,EAAGA,EAAIN,EAAQM,IAAK,CAC/B,GAAIggC,GAAahxB,KAAK2M,MAAsB,GAAhB3M,KAAK4M,SACjCmkB,IAASC,EAAWnkB,SAAS,IAG/B,MAAOkkB,IAGTvB,EAAMhjB,KAAO,SAAUykB,EAAMne,GAC3B,MAAO,YACLme,EAAKtgC,MAAMmiB,EAASriB,aAIxB++B,EAAM0B,aAAe,SAAU9nB,GAC7B,IAAK,GAAI+nB,KAAe/nB,GAAM,CAC5B,GAAIgoB,GAAOD,EAAYvoB,MAAM,KAEzByoB,EAAYjoB,CAEhB,IAAoB,IAAhBgoB,EAAK1gC,OAAT,CAIA,IAAK,GAAIqwB,GAAI,EAAGA,EAAIqQ,EAAK1gC,OAAQqwB,IAAK,CACpC,GAAItxB,GAAM2hC,EAAKrQ,EAIftxB,GAAMA,EAAI+R,UAAU,EAAG,GAAGkF,cAAgBjX,EAAI+R,UAAU,GAElD/R,IAAO4hC,KACXA,EAAU5hC,OAGRsxB,GAAKqQ,EAAK1gC,OAAS,IACrB2gC,EAAU5hC,GAAO2Z,EAAK+nB,IAGxBE,EAAYA,EAAU5hC,SAGjB2Z,GAAK+nB,IAGd,MAAO/nB,IAGTomB,EAAM8B,UAAY,SAAUlD,EAAOhvB,GAOjC,GAAIwM,GAAMD,EAAEvM,GACRmyB,EAAYnyB,EAAGzE,MAAM42B,UACrBC,EAAYpyB,EAAGzE,MAAM62B,SAGzB,QAAID,IAAcC,GACC,WAAdA,GAAwC,YAAdA,KAIb,WAAdD,GAAwC,WAAdC,IAItB5lB,EAAI6lB,cAAgBryB,EAAGsyB,cAC7B9lB,EAAI+lB,aAAevyB,EAAGwyB,eAG1BpC,EAAMqC,aAAe,SAAUC,GAC7B,GAAIC,IACFC,KAAM,QACNC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAM,QACNC,IAAK,QAIP,OAAsB,gBAAXR,GACFA,EAGFvkB,OAAOukB,GAAQngC,QAAQ,eAAgB,SAAUwQ,GACtD,MAAO4vB,GAAW5vB,MAKtBqtB,EAAM+C,WAAa,SAAUC,EAAUC,GAGrC,GAAiC,QAA7B9mB,EAAE3b,GAAG0iC,OAAOhX,OAAO,EAAG,GAAc,CACtC,GAAIiX,GAAWhnB,GAEfA,GAAEshB,IAAIwF,EAAQ,SAAU16B,GACtB46B,EAAWA,EAASl7B,IAAIM,KAG1B06B,EAASE,EAGXH,EAASjsB,OAAOksB,IAGXjD,IAGT1D,EAAGH,OAAO,mBACR,SACA,WACC,SAAUhgB,EAAG6jB,GACd,QAASoD,GAASJ,EAAUphC,EAASyhC,GACnCtjC,KAAKijC,SAAWA,EAChBjjC,KAAK6Z,KAAOypB,EACZtjC,KAAK6B,QAAUA,EAEfwhC,EAAQhjC,UAAUJ,YAAYE,KAAKH,MAggBrC,MA7fAigC,GAAMC,OAAOmD,EAASpD,EAAMkB,YAE5BkC,EAAQjjC,UAAUmjC,OAAS,WACzB,GAAIC,GAAWpnB,EACb,yDASF,OANIpc,MAAK6B,QAAQya,IAAI,aACnBknB,EAAStV,KAAK,uBAAwB,QAGxCluB,KAAKwjC,SAAWA,EAETA,GAGTH,EAAQjjC,UAAUqjB,MAAQ,WACxBzjB,KAAKwjC,SAASC,SAGhBJ,EAAQjjC,UAAUsjC,eAAiB,SAAU7+B,GAC3C,GAAIy9B,GAAetiC,KAAK6B,QAAQya,IAAI,eAEpCtc,MAAKyjB,QACLzjB,KAAK2jC,aAEL,IAAIC,GAAWxnB,EACb,mFAIEzR,EAAU3K,KAAK6B,QAAQya,IAAI,gBAAgBA,IAAIzX,EAAO8F,QAE1Di5B,GAAS5sB,OACPsrB,EACE33B,EAAQ9F,EAAOhE,QAInB+iC,EAAS,GAAGv9B,WAAa,4BAEzBrG,KAAKwjC,SAASxsB,OAAO4sB,IAGvBP,EAAQjjC,UAAUyjC,aAAe,WAC/B7jC,KAAKwjC,SAASM,KAAK,6BAA6Bh8B,UAGlDu7B,EAAQjjC,UAAU4W,OAAS,SAAU6C,GACnC7Z,KAAK2jC,aAEL,IAAII,KAEJ,IAAoB,MAAhBlqB,EAAKmqB,SAA2C,IAAxBnqB,EAAKmqB,QAAQ7iC,OAOvC,YANwC,IAApCnB,KAAKwjC,SAASS,WAAW9iC,QAC3BnB,KAAKuf,QAAQ,mBACX5U,QAAS,cAOfkP,GAAKmqB,QAAUhkC,KAAK+gB,KAAKlH,EAAKmqB,QAE9B,KAAK,GAAI9Y,GAAI,EAAGA,EAAIrR,EAAKmqB,QAAQ7iC,OAAQ+pB,IAAK,CAC5C,GAAIha,GAAO2I,EAAKmqB,QAAQ9Y,GAEpBgZ,EAAUlkC,KAAK8U,OAAO5D,EAE1B6yB,GAASpjC,KAAKujC,GAGhBlkC,KAAKwjC,SAASxsB,OAAO+sB,IAGvBV,EAAQjjC,UAAUoN,SAAW,SAAUg2B,EAAUW,GAC/C,GAAIC,GAAoBD,EAAUL,KAAK,mBACvCM,GAAkBptB,OAAOwsB,IAG3BH,EAAQjjC,UAAU2gB,KAAO,SAAUlH,GACjC,GAAIwqB,GAASrkC,KAAK6B,QAAQya,IAAI,SAE9B,OAAO+nB,GAAOxqB,IAGhBwpB,EAAQjjC,UAAUkkC,mBAAqB,WACrC,GAAIP,GAAW/jC,KAAKwjC,SACjBM,KAAK,2CAEJS,EAAYR,EAAS3kB,OAAO,uBAG5BmlB,GAAUpjC,OAAS,EAErBojC,EAAU1N,QAAQtX,QAAQ,cAI1BwkB,EAASlN,QAAQtX,QAAQ,cAG3Bvf,KAAKwkC,0BAGPnB,EAAQjjC,UAAUqkC,WAAa,WAC7B,GAAI3K,GAAO95B,IAEXA,MAAK6Z,KAAK6qB,QAAQ,SAAUxtB,GAC1B,GAAIytB,GAAcvoB,EAAEshB,IAAIxmB,EAAU,SAAUmO,GAC1C,MAAOA,GAAE6T,GAAG5b,aAGVymB,EAAWjK,EAAK0J,SACjBM,KAAK,0CAERC,GAASxqB,KAAK,WACZ,GAAI2qB,GAAU9nB,EAAEpc,MAEZkR,EAAOkL,EAAEvC,KAAK7Z,KAAM,QAGpBk5B,EAAK,GAAKhoB,EAAKgoB,EAEE,OAAhBhoB,EAAKtP,SAAmBsP,EAAKtP,QAAQsV,UACrB,MAAhBhG,EAAKtP,SAAmBwa,EAAE6Q,QAAQiM,EAAIyL,IAAe,EACxDT,EAAQhW,KAAK,gBAAiB,QAE9BgW,EAAQhW,KAAK,gBAAiB,cAOtCmV,EAAQjjC,UAAUwkC,YAAc,SAAU//B,GACxC7E,KAAK2jC,aAEL,IAAIkB,GAAc7kC,KAAK6B,QAAQya,IAAI,gBAAgBA,IAAI,aAEnDwoB,GACFC,UAAU,EACVD,SAAS,EACTE,KAAMH,EAAYhgC,IAEhBogC,EAAWjlC,KAAK8U,OAAOgwB,EAC3BG,GAAS5+B,WAAa,mBAEtBrG,KAAKwjC,SAAS0B,QAAQD,IAGxB5B,EAAQjjC,UAAUujC,YAAc,WAC9B3jC,KAAKwjC,SAASM,KAAK,oBAAoBh8B,UAGzCu7B,EAAQjjC,UAAU0U,OAAS,SAAU+E,GACnC,GAAI/E,GAAStS,SAASgE,cAAc,KACpCsO,GAAOzO,UAAY,yBAEnB,IAAImX,IACF2nB,KAAQ,WACRC,gBAAiB,QAGfvrB,GAAKkrB,iBACAvnB,GAAM,iBACbA,EAAM,iBAAmB,QAGZ,MAAX3D,EAAKqf,UACA1b,GAAM,iBAGO,MAAlB3D,EAAKwrB,YACPvwB,EAAOokB,GAAKrf,EAAKwrB,WAGfxrB,EAAKyrB,QACPxwB,EAAOwwB,MAAQzrB,EAAKyrB,OAGlBzrB,EAAKoqB,WACPzmB,EAAM2nB,KAAO,QACb3nB,EAAM,cAAgB3D,EAAKmrB,WACpBxnB,GAAM,iBAGf,KAAK,GAAI0Q,KAAQ1Q,GAAO,CACtB,GAAInR,GAAMmR,EAAM0Q,EAEhBpZ,GAAO1H,aAAa8gB,EAAM7hB,GAG5B,GAAIwN,EAAKoqB,SAAU,CACjB,GAAIC,GAAU9nB,EAAEtH,GAEZywB,EAAQ/iC,SAASgE,cAAc,SACnC++B,GAAMl/B,UAAY,wBAEL+V,GAAEmpB,EACfvlC,MAAKwlC,SAAS3rB,EAAM0rB,EAIpB,KAAK,GAFDE,MAEKhZ,EAAI,EAAGA,EAAI5S,EAAKoqB,SAAS9iC,OAAQsrB,IAAK,CAC7C,GAAI5sB,GAAQga,EAAKoqB,SAASxX,GAEtBiZ,EAAS1lC,KAAK8U,OAAOjV,EAEzB4lC,GAAU9kC,KAAK+kC,GAGjB,GAAIC,GAAqBvpB,EAAE,aACzBwpB,MAAS,6DAGXD,GAAmB3uB,OAAOyuB,GAE1BvB,EAAQltB,OAAOuuB,GACfrB,EAAQltB,OAAO2uB,OAEf3lC,MAAKwlC,SAAS3rB,EAAM/E,EAKtB,OAFAsH,GAAEvC,KAAK/E,EAAQ,OAAQ+E,GAEhB/E,GAGTuuB,EAAQjjC,UAAU6c,KAAO,SAAUpE,EAAWgtB,GAC5C,GAAI/L,GAAO95B,KAEPk5B,EAAKrgB,EAAUqgB,GAAK,UAExBl5B,MAAKwjC,SAAStV,KAAK,KAAMgL,GAEzBrgB,EAAUtY,GAAG,cAAe,SAAUsE,GACpCi1B,EAAKrW,QACLqW,EAAK9iB,OAAOnS,EAAOgV,MAEfhB,EAAUitB,WACZhM,EAAK2K,aACL3K,EAAKwK,wBAITzrB,EAAUtY,GAAG,iBAAkB,SAAUsE,GACvCi1B,EAAK9iB,OAAOnS,EAAOgV,MAEfhB,EAAUitB,UACZhM,EAAK2K,eAIT5rB,EAAUtY,GAAG,QAAS,SAAUsE,GAC9Bi1B,EAAK+J,eACL/J,EAAK8K,YAAY//B,KAGnBgU,EAAUtY,GAAG,SAAU,WAChBsY,EAAUitB,WAIfhM,EAAK2K,aACL3K,EAAKwK,wBAGPzrB,EAAUtY,GAAG,WAAY,WAClBsY,EAAUitB,WAIfhM,EAAK2K,aACL3K,EAAKwK,wBAGPzrB,EAAUtY,GAAG,OAAQ,WAEnBu5B,EAAK0J,SAAStV,KAAK,gBAAiB,QACpC4L,EAAK0J,SAAStV,KAAK,cAAe,SAElC4L,EAAK2K,aACL3K,EAAK0K,2BAGP3rB,EAAUtY,GAAG,QAAS,WAEpBu5B,EAAK0J,SAAStV,KAAK,gBAAiB,SACpC4L,EAAK0J,SAAStV,KAAK,cAAe,QAClC4L,EAAK0J,SAASuC,WAAW,2BAG3BltB,EAAUtY,GAAG,iBAAkB,WAC7B,GAAIylC,GAAelM,EAAKmM,uBAEI,KAAxBD,EAAa7kC,QAIjB6kC,EAAazmB,QAAQ,aAGvB1G,EAAUtY,GAAG,iBAAkB,WAC7B,GAAIylC,GAAelM,EAAKmM,uBAExB,IAA4B,IAAxBD,EAAa7kC,OAAjB,CAIA,GAAI0Y,GAAOmsB,EAAansB,KAAK,OAEa,SAAtCmsB,EAAa9X,KAAK,iBACpB4L,EAAKva,QAAQ,YAEbua,EAAKva,QAAQ,UACX1F,KAAMA,OAKZhB,EAAUtY,GAAG,mBAAoB,WAC/B,GAAIylC,GAAelM,EAAKmM,wBAEpBlC,EAAWjK,EAAK0J,SAASM,KAAK,mBAE9BoC,EAAenC,EAASlF,MAAMmH,EAGlC,IAAqB,IAAjBE,EAAJ,CAIA,GAAIC,GAAYD,EAAe,CAGH,KAAxBF,EAAa7kC,SACfglC,EAAY,EAGd,IAAIC,GAAQrC,EAASjN,GAAGqP,EAExBC,GAAM7mB,QAAQ,aAEd,IAAI8mB,GAAgBvM,EAAK0J,SAAS5gB,SAASnV,IACvC64B,EAAUF,EAAMxjB,SAASnV,IACzB84B,EAAazM,EAAK0J,SAASgD,aAAeF,EAAUD,EAEtC,KAAdF,EACFrM,EAAK0J,SAASgD,UAAU,GACfF,EAAUD,EAAgB,GACnCvM,EAAK0J,SAASgD,UAAUD,MAI5B1tB,EAAUtY,GAAG,eAAgB,WAC3B,GAAIylC,GAAelM,EAAKmM,wBAEpBlC,EAAWjK,EAAK0J,SAASM,KAAK,mBAE9BoC,EAAenC,EAASlF,MAAMmH,GAE9BG,EAAYD,EAAe,CAG/B,MAAIC,GAAapC,EAAS5iC,QAA1B,CAIA,GAAIilC,GAAQrC,EAASjN,GAAGqP,EAExBC,GAAM7mB,QAAQ,aAEd,IAAI8mB,GAAgBvM,EAAK0J,SAAS5gB,SAASnV,IACzCqsB,EAAK0J,SAASiD,aAAY,GACxBC,EAAaN,EAAMxjB,SAASnV,IAAM24B,EAAMK,aAAY,GACpDF,EAAazM,EAAK0J,SAASgD,YAAcE,EAAaL,CAExC,KAAdF,EACFrM,EAAK0J,SAASgD,UAAU,GACfE,EAAaL,GACtBvM,EAAK0J,SAASgD,UAAUD,MAI5B1tB,EAAUtY,GAAG,gBAAiB,SAAUsE,GACtCA,EAAOjD,QAAQkd,SAAS,0CAG1BjG,EAAUtY,GAAG,kBAAmB,SAAUsE,GACxCi1B,EAAK4J,eAAe7+B,KAGlBuX,EAAE3b,GAAGkmC,YACP3mC,KAAKwjC,SAASjjC,GAAG,aAAc,SAAUqH,GACvC,GAAI6F,GAAMqsB,EAAK0J,SAASgD,YAEpB5e,EAASkS,EAAK0J,SAASlnB,IAAI,GAAG6lB,aAAe10B,EAAM7F,EAAEg/B,OAErDC,EAAUj/B,EAAEg/B,OAAS,GAAKn5B,EAAM7F,EAAEg/B,QAAU,EAC5CE,EAAal/B,EAAEg/B,OAAS,GAAKhf,GAAUkS,EAAK0J,SAASl8B,QAErDu/B,IACF/M,EAAK0J,SAASgD,UAAU,GAExB5+B,EAAEgC,iBACFhC,EAAEiC,mBACOi9B,IACThN,EAAK0J,SAASgD,UACZ1M,EAAK0J,SAASlnB,IAAI,GAAG6lB,aAAerI,EAAK0J,SAASl8B,UAGpDM,EAAEgC,iBACFhC,EAAEiC,qBAKR7J,KAAKwjC,SAASjjC,GAAG,UAAW,0CAC1B,SAAUiO,GACV,GAAIu4B,GAAQ3qB,EAAEpc,MAEV6Z,EAAOktB,EAAMltB,KAAK,OAEtB,OAAoC,SAAhCktB,EAAM7Y,KAAK,sBACT4L,EAAKj4B,QAAQya,IAAI,YACnBwd,EAAKva,QAAQ,YACXgN,cAAe/d,EACfqL,KAAMA,IAGRigB,EAAKva,QAAQ,iBAMjBua,GAAKva,QAAQ,UACXgN,cAAe/d,EACfqL,KAAMA,MAIV7Z,KAAKwjC,SAASjjC,GAAG,aAAc,0CAC7B,SAAUiO,GACV,GAAIqL,GAAOuC,EAAEpc,MAAM6Z,KAAK,OAExBigB,GAAKmM,wBACApb,YAAY,wCAEjBiP,EAAKva,QAAQ,iBACX1F,KAAMA,EACNjY,QAASwa,EAAEpc,WAKjBqjC,EAAQjjC,UAAU6lC,sBAAwB,WACxC,GAAID,GAAehmC,KAAKwjC,SACvBM,KAAK,wCAEN,OAAOkC,IAGT3C,EAAQjjC,UAAUuO,QAAU,WAC1B3O,KAAKwjC,SAAS17B,UAGhBu7B,EAAQjjC,UAAUokC,uBAAyB,WACzC,GAAIwB,GAAehmC,KAAKimC,uBAExB,IAA4B,IAAxBD,EAAa7kC,OAAjB,CAIA,GAAI4iC,GAAW/jC,KAAKwjC,SAASM,KAAK,mBAE9BoC,EAAenC,EAASlF,MAAMmH,GAE9BK,EAAgBrmC,KAAKwjC,SAAS5gB,SAASnV,IACvC64B,EAAUN,EAAapjB,SAASnV,IAChC84B,EAAavmC,KAAKwjC,SAASgD,aAAeF,EAAUD,GAEpDW,EAAcV,EAAUD,CAC5BE,IAAgD,EAAlCP,EAAaS,aAAY,GAEnCP,GAAgB,EAClBlmC,KAAKwjC,SAASgD,UAAU,IACfQ,EAAchnC,KAAKwjC,SAASiD,eAAiBO,EAAc,IACpEhnC,KAAKwjC,SAASgD,UAAUD,KAI5BlD,EAAQjjC,UAAUolC,SAAW,SAAUpyB,EAAQyF,GAC7C,GAAI2sB,GAAWxlC,KAAK6B,QAAQya,IAAI,kBAC5BgmB,EAAetiC,KAAK6B,QAAQya,IAAI,gBAEhC2qB,EAAUzB,EAASpyB,EAAQyF,EAEhB,OAAXouB,EACFpuB,EAAUzN,MAAM87B,QAAU,OACE,gBAAZD,GAChBpuB,EAAUtP,UAAY+4B,EAAa2E,GAEnC7qB,EAAEvD,GAAW7B,OAAOiwB,IAIjB5D,IAGT9G,EAAGH,OAAO,kBAEP,WACD,GAAI+K,IACFC,UAAW,EACXC,IAAK,EACLC,MAAO,GACPC,MAAO,GACPC,KAAM,GACNC,IAAK,GACLC,IAAK,GACLC,MAAO,GACPC,QAAS,GACTC,UAAW,GACXC,IAAK,GACLC,KAAM,GACNC,KAAM,GACNC,GAAI,GACJC,MAAO,GACPC,KAAM,GACNC,OAAQ,GAGV,OAAOjB,KAGT5K,EAAGH,OAAO,0BACR,SACA,WACA,WACC,SAAUhgB,EAAG6jB,EAAOkH,GACrB,QAASkB,GAAepF,EAAUphC,GAChC7B,KAAKijC,SAAWA,EAChBjjC,KAAK6B,QAAUA,EAEfwmC,EAAchoC,UAAUJ,YAAYE,KAAKH,MAmJ3C,MAhJAigC,GAAMC,OAAOmI,EAAepI,EAAMkB,YAElCkH,EAAcjoC,UAAUmjC,OAAS,WAC/B,GAAI+E,GAAalsB,EACf,sGAkBF,OAbApc,MAAKuoC,UAAY,EAEyB,MAAtCvoC,KAAKijC,SAASppB,KAAK,gBACrB7Z,KAAKuoC,UAAYvoC,KAAKijC,SAASppB,KAAK,gBACO,MAAlC7Z,KAAKijC,SAAS/U,KAAK,cAC5BluB,KAAKuoC,UAAYvoC,KAAKijC,SAAS/U,KAAK,aAGtCoa,EAAWpa,KAAK,QAASluB,KAAKijC,SAAS/U,KAAK,UAC5Coa,EAAWpa,KAAK,WAAYluB,KAAKuoC,WAEjCvoC,KAAKsoC,WAAaA,EAEXA,GAGTD,EAAcjoC,UAAU6c,KAAO,SAAUpE,EAAWgtB,GAClD,GAAI/L,GAAO95B,KAGPwoC,GADK3vB,EAAUqgB,GAAK,aACRrgB,EAAUqgB,GAAK,WAE/Bl5B,MAAK6Y,UAAYA,EAEjB7Y,KAAKsoC,WAAW/nC,GAAG,QAAS,SAAUiO,GACpCsrB,EAAKva,QAAQ,QAAS/Q,KAGxBxO,KAAKsoC,WAAW/nC,GAAG,OAAQ,SAAUiO,GACnCsrB,EAAK2O,YAAYj6B,KAGnBxO,KAAKsoC,WAAW/nC,GAAG,UAAW,SAAUiO,GACtCsrB,EAAKva,QAAQ,WAAY/Q,GAErBA,EAAIk6B,QAAUvB,EAAKQ,OACrBn5B,EAAI5E,mBAIRiP,EAAUtY,GAAG,gBAAiB,SAAUsE,GACtCi1B,EAAKwO,WAAWpa,KAAK,wBAAyBrpB,EAAOgV,KAAKwrB,aAG5DxsB,EAAUtY,GAAG,mBAAoB,SAAUsE,GACzCi1B,EAAK9O,OAAOnmB,EAAOgV,QAGrBhB,EAAUtY,GAAG,OAAQ,WAEnBu5B,EAAKwO,WAAWpa,KAAK,gBAAiB,QACtC4L,EAAKwO,WAAWpa,KAAK,YAAasa,GAElC1O,EAAK6O,oBAAoB9vB,KAG3BA,EAAUtY,GAAG,QAAS,WAEpBu5B,EAAKwO,WAAWpa,KAAK,gBAAiB,SACtC4L,EAAKwO,WAAWvC,WAAW,yBAC3BjM,EAAKwO,WAAWvC,WAAW,aAE3BjM,EAAKwO,WAAWvd,QAEhB+O,EAAK8O,oBAAoB/vB,KAG3BA,EAAUtY,GAAG,SAAU,WACrBu5B,EAAKwO,WAAWpa,KAAK,WAAY4L,EAAKyO,aAGxC1vB,EAAUtY,GAAG,UAAW,WACtBu5B,EAAKwO,WAAWpa,KAAK,WAAY,SAIrCma,EAAcjoC,UAAUqoC,YAAc,SAAUj6B,GAC9C,GAAIsrB,GAAO95B,IAIXlB,QAAO2L,WAAW,WAGbjI,SAASqmC,eAAiB/O,EAAKwO,WAAW,IAC1ClsB,EAAE/O,SAASysB,EAAKwO,WAAW,GAAI9lC,SAASqmC,gBAK3C/O,EAAKva,QAAQ,OAAQ/Q,IACpB,IAGL65B,EAAcjoC,UAAUuoC,oBAAsB,SAAU9vB,GAGtDuD,EAAE5Z,SAASid,MAAMlf,GAAG,qBAAuBsY,EAAUqgB,GAAI,SAAUtxB,GACjE,GAAIkhC,GAAU1sB,EAAExU,EAAEwE,QAEd28B,EAAUD,EAAQnS,QAAQ,YAE1BqS,EAAO5sB,EAAE,mCAEb4sB,GAAKzvB,KAAK,WACR,GAAIwtB,GAAQ3qB,EAAEpc,KAEd,IAAIA,MAAQ+oC,EAAQ,GAApB,CAIA,GAAI9F,GAAW8D,EAAMltB,KAAK,UAE1BopB,GAASzG,QAAQ,eAKvB6L,EAAcjoC,UAAUwoC,oBAAsB,SAAU/vB,GACtDuD,EAAE5Z,SAASid,MAAMne,IAAI,qBAAuBuX,EAAUqgB,KAGxDmP,EAAcjoC,UAAUoN,SAAW,SAAU86B,EAAYzC,GACvD,GAAIoD,GAAsBpD,EAAW/B,KAAK,aAC1CmF,GAAoBjyB,OAAOsxB,IAG7BD,EAAcjoC,UAAUuO,QAAU,WAChC3O,KAAK4oC,oBAAoB5oC,KAAK6Y,YAGhCwvB,EAAcjoC,UAAU4qB,OAAS,SAAUnR,GACzC,KAAM,IAAIlX,OAAM,0DAGX0lC,IAGT9L,EAAGH,OAAO,4BACR,SACA,SACA,WACA,WACC,SAAUhgB,EAAGisB,EAAepI,EAAOkH,GACpC,QAAS+B,KACPA,EAAgB7oC,UAAUJ,YAAYmB,MAAMpB,KAAMkB,WA0FpD,MAvFA++B,GAAMC,OAAOgJ,EAAiBb,GAE9Ba,EAAgB9oC,UAAUmjC,OAAS,WACjC,GAAI+E,GAAaY,EAAgB7oC,UAAUkjC,OAAOpjC,KAAKH,KAWvD,OATAsoC,GAAWxpB,SAAS,6BAEpBwpB,EAAWa,KACT,kJAMKb,GAGTY,EAAgB9oC,UAAU6c,KAAO,SAAUpE,EAAWgtB,GACpD,GAAI/L,GAAO95B,IAEXkpC,GAAgB7oC,UAAU4c,KAAK7b,MAAMpB,KAAMkB,UAE3C,IAAIg4B,GAAKrgB,EAAUqgB,GAAK,YAExBl5B,MAAKsoC,WAAWxE,KAAK,gCAAgC5V,KAAK,KAAMgL,GAChEl5B,KAAKsoC,WAAWpa,KAAK,kBAAmBgL,GAExCl5B,KAAKsoC,WAAW/nC,GAAG,YAAa,SAAUiO,GAEtB,IAAdA,EAAIk6B,OAIR5O,EAAKva,QAAQ,UACXgN,cAAe/d,MAInBxO,KAAKsoC,WAAW/nC,GAAG,QAAS,SAAUiO,MAItCxO,KAAKsoC,WAAW/nC,GAAG,OAAQ,SAAUiO,MAIrCqK,EAAUtY,GAAG,QAAS,SAAUiO,GACzBqK,EAAUitB,UACbhM,EAAKwO,WAAWvd,UAIpBlS,EAAUtY,GAAG,mBAAoB,SAAUsE,GACzCi1B,EAAK9O,OAAOnmB,EAAOgV,SAIvBqvB,EAAgB9oC,UAAUqjB,MAAQ,WAChCzjB,KAAKsoC,WAAWxE,KAAK,gCAAgCL,SAGvDyF,EAAgB9oC,UAAU8mC,QAAU,SAAUrtB,EAAMhB,GAClD,GAAI2sB,GAAWxlC,KAAK6B,QAAQya,IAAI,qBAC5BgmB,EAAetiC,KAAK6B,QAAQya,IAAI,eAEpC,OAAOgmB,GAAakD,EAAS3rB,EAAMhB,KAGrCqwB,EAAgB9oC,UAAUgpC,mBAAqB,WAC7C,MAAOhtB,GAAE,kBAGX8sB,EAAgB9oC,UAAU4qB,OAAS,SAAUnR,GAC3C,GAAoB,IAAhBA,EAAK1Y,OAEP,WADAnB,MAAKyjB,OAIP,IAAItE,GAAYtF,EAAK,GAEjBwvB,EAAYrpC,KAAKsoC,WAAWxE,KAAK,gCACjCwF,EAAYtpC,KAAKknC,QAAQ/nB,EAAWkqB,EAExCA,GAAU5F,QAAQzsB,OAAOsyB,GACzBD,EAAUxrB,KAAK,QAASsB,EAAUmmB,OAASnmB,EAAU6lB,OAGhDkE,IAGT3M,EAAGH,OAAO,8BACR,SACA,SACA,YACC,SAAUhgB,EAAGisB,EAAepI,GAC7B,QAASsJ,GAAmBtG,EAAUphC,GACpC0nC,EAAkBlpC,UAAUJ,YAAYmB,MAAMpB,KAAMkB,WAqGtD,MAlGA++B,GAAMC,OAAOqJ,EAAmBlB,GAEhCkB,EAAkBnpC,UAAUmjC,OAAS,WACnC,GAAI+E,GAAaiB,EAAkBlpC,UAAUkjC,OAAOpjC,KAAKH,KAQzD,OANAsoC,GAAWxpB,SAAS,+BAEpBwpB,EAAWa,KACT,iDAGKb,GAGTiB,EAAkBnpC,UAAU6c,KAAO,SAAUpE,EAAWgtB,GACtD,GAAI/L,GAAO95B,IAEXupC,GAAkBlpC,UAAU4c,KAAK7b,MAAMpB,KAAMkB,WAE7ClB,KAAKsoC,WAAW/nC,GAAG,QAAS,SAAUiO,GACpCsrB,EAAKva,QAAQ,UACXgN,cAAe/d,MAInBxO,KAAKsoC,WAAW/nC,GACd,QACA,qCACA,SAAUiO,GAER,IAAIsrB,EAAKj4B,QAAQya,IAAI,YAArB,CAIA,GAAIktB,GAAUptB,EAAEpc,MACZsoC,EAAakB,EAAQ1pC,SAErB+Z,EAAOyuB,EAAWzuB,KAAK,OAE3BigB,GAAKva,QAAQ,YACXgN,cAAe/d,EACfqL,KAAMA,QAMd0vB,EAAkBnpC,UAAUqjB,MAAQ,WAClCzjB,KAAKsoC,WAAWxE,KAAK,gCAAgCL,SAGvD8F,EAAkBnpC,UAAU8mC,QAAU,SAAUrtB,EAAMhB,GACpD,GAAI2sB,GAAWxlC,KAAK6B,QAAQya,IAAI,qBAC5BgmB,EAAetiC,KAAK6B,QAAQya,IAAI,eAEpC,OAAOgmB,GAAakD,EAAS3rB,EAAMhB,KAGrC0wB,EAAkBnpC,UAAUgpC,mBAAqB,WAC/C,GAAIvD,GAAazpB,EACf,gIAOF,OAAOypB,IAGT0D,EAAkBnpC,UAAU4qB,OAAS,SAAUnR,GAG7C,GAFA7Z,KAAKyjB,QAEe,IAAhB5J,EAAK1Y,OAAT,CAMA,IAAK,GAFDsoC,MAEKve,EAAI,EAAGA,EAAIrR,EAAK1Y,OAAQ+pB,IAAK,CACpC,GAAI/L,GAAYtF,EAAKqR,GAEjBod,EAAatoC,KAAKopC,qBAClBE,EAAYtpC,KAAKknC,QAAQ/nB,EAAWmpB,EAExCA,GAAWtxB,OAAOsyB,GAClBhB,EAAWzqB,KAAK,QAASsB,EAAUmmB,OAASnmB,EAAU6lB,MAEtDsD,EAAWzuB,KAAK,OAAQsF,GAExBsqB,EAAY9oC,KAAK2nC,GAGnB,GAAIe,GAAYrpC,KAAKsoC,WAAWxE,KAAK,+BAErC7D,GAAM+C,WAAWqG,EAAWI,KAGvBF,IAGThN,EAAGH,OAAO,iCACR,YACC,SAAU6D,GACX,QAASyJ,GAAaC,EAAW1G,EAAUphC,GACzC7B,KAAK4pC,YAAc5pC,KAAK6pC,qBAAqBhoC,EAAQya,IAAI,gBAEzDqtB,EAAUxpC,KAAKH,KAAMijC,EAAUphC,GAyCjC,MAtCA6nC,GAAYtpC,UAAUypC,qBAAuB,SAAUC,EAAGF,GAQxD,MAP2B,gBAAhBA,KACTA,GACE1Q,GAAI,GACJ8L,KAAM4E,IAIHA,GAGTF,EAAYtpC,UAAU2pC,kBAAoB,SAAUJ,EAAWC,GAC7D,GAAII,GAAehqC,KAAKopC,oBAMxB,OAJAY,GAAab,KAAKnpC,KAAKknC,QAAQ0C,IAC/BI,EAAalrB,SAAS,kCACT+L,YAAY,6BAElBmf,GAGTN,EAAYtpC,UAAU4qB,OAAS,SAAU2e,EAAW9vB,GAClD,GAAIowB,GACa,GAAfpwB,EAAK1Y,QAAe0Y,EAAK,GAAGqf,IAAMl5B,KAAK4pC,YAAY1Q,GAEjDgR,EAAqBrwB,EAAK1Y,OAAS,CAEvC,IAAI+oC,GAAsBD,EACxB,MAAON,GAAUxpC,KAAKH,KAAM6Z,EAG9B7Z,MAAKyjB,OAEL,IAAIumB,GAAehqC,KAAK+pC,kBAAkB/pC,KAAK4pC,YAE/C5pC,MAAKsoC,WAAWxE,KAAK,gCAAgC9sB,OAAOgzB,IAGvDN,IAGTnN,EAAGH,OAAO,gCACR,SACA,WACC,SAAUhgB,EAAG+qB,GACd,QAASgD,MA2FT,MAzFAA,GAAW/pC,UAAU6c,KAAO,SAAU0sB,EAAW9wB,EAAWgtB,GAC1D,GAAI/L,GAAO95B,IAEX2pC,GAAUxpC,KAAKH,KAAM6Y,EAAWgtB,GAER,MAApB7lC,KAAK4pC,aACH5pC,KAAK6B,QAAQya,IAAI,UAAYxd,OAAOgT,SAAWA,QAAQpH,OACzDoH,QAAQpH,MACN,iGAMN1K,KAAKsoC,WAAW/nC,GAAG,YAAa,4BAC9B,SAAUiO,GACRsrB,EAAKsQ,aAAa57B,KAGtBqK,EAAUtY,GAAG,WAAY,SAAUiO,GACjCsrB,EAAKuQ,qBAAqB77B,EAAKqK,MAInCsxB,EAAW/pC,UAAUgqC,aAAe,SAAUN,EAAGt7B,GAE/C,IAAIxO,KAAK6B,QAAQya,IAAI,YAArB,CAIA,GAAIguB,GAAStqC,KAAKsoC,WAAWxE,KAAK,4BAGlC,IAAsB,IAAlBwG,EAAOnpC,OAAX,CAIAqN,EAAI3E,iBAIJ,KAAK,GAFDgQ,GAAOywB,EAAOzwB,KAAK,QAEdqR,EAAI,EAAGA,EAAIrR,EAAK1Y,OAAQ+pB,IAAK,CACpC,GAAIqf,IACF1wB,KAAMA,EAAKqR,GAQb,IAHAlrB,KAAKuf,QAAQ,WAAYgrB,GAGrBA,EAAaC,UACf,OAIJxqC,KAAKijC,SAAS52B,IAAIrM,KAAK4pC,YAAY1Q,IAAI3Z,QAAQ,UAE/Cvf,KAAKuf,QAAQ,gBAGf4qB,EAAW/pC,UAAUiqC,qBAAuB,SAAUP,EAAGt7B,EAAKqK,GACxDA,EAAUitB,UAIVt3B,EAAIk6B,OAASvB,EAAKiB,QAAU55B,EAAIk6B,OAASvB,EAAKC,WAChDpnC,KAAKoqC,aAAa57B,IAItB27B,EAAW/pC,UAAU4qB,OAAS,SAAU2e,EAAW9vB;AAGjD,GAFA8vB,EAAUxpC,KAAKH,KAAM6Z,KAEjB7Z,KAAKsoC,WAAWxE,KAAK,mCAAmC3iC,OAAS,GACjD,IAAhB0Y,EAAK1Y,QADT,CAKA,GAAIqoC,GAAUptB,EACZ,wDAIFotB,GAAQ3vB,KAAK,OAAQA,GAErB7Z,KAAKsoC,WAAWxE,KAAK,gCAAgCoB,QAAQsE,KAGxDW,IAGT5N,EAAGH,OAAO,4BACR,SACA,WACA,WACC,SAAUhgB,EAAG6jB,EAAOkH,GACrB,QAASsD,GAAQd,EAAW1G,EAAUphC,GACpC8nC,EAAUxpC,KAAKH,KAAMijC,EAAUphC,GAsNjC,MAnNA4oC,GAAOrqC,UAAUmjC,OAAS,SAAUoG,GAClC,GAAIe,GAAUtuB,EACZ,kPAOFpc,MAAK2qC,iBAAmBD,EACxB1qC,KAAK0qC,QAAUA,EAAQ5G,KAAK,QAE5B,IAAIuF,GAAYM,EAAUxpC,KAAKH,KAI/B,OAFAA,MAAK4qC,oBAEEvB,GAGToB,EAAOrqC,UAAU6c,KAAO,SAAU0sB,EAAW9wB,EAAWgtB,GACtD,GAAI/L,GAAO95B,IAEX2pC,GAAUxpC,KAAKH,KAAM6Y,EAAWgtB,GAEhChtB,EAAUtY,GAAG,OAAQ,WACnBu5B,EAAK4Q,QAAQnrB,QAAQ,WAGvB1G,EAAUtY,GAAG,QAAS,WACpBu5B,EAAK4Q,QAAQr+B,IAAI,IACjBytB,EAAK4Q,QAAQ3E,WAAW,yBACxBjM,EAAK4Q,QAAQnrB,QAAQ,WAGvB1G,EAAUtY,GAAG,SAAU,WACrBu5B,EAAK4Q,QAAQ7sB,KAAK,YAAY,GAE9Bic,EAAK8Q,sBAGP/xB,EAAUtY,GAAG,UAAW,WACtBu5B,EAAK4Q,QAAQ7sB,KAAK,YAAY,KAGhChF,EAAUtY,GAAG,QAAS,SAAUiO,GAC9BsrB,EAAK4Q,QAAQnrB,QAAQ,WAGvB1G,EAAUtY,GAAG,gBAAiB,SAAUsE,GACtCi1B,EAAK4Q,QAAQxc,KAAK,wBAAyBrpB,EAAOq0B,MAGpDl5B,KAAKsoC,WAAW/nC,GAAG,UAAW,0BAA2B,SAAUiO,GACjEsrB,EAAKva,QAAQ,QAAS/Q,KAGxBxO,KAAKsoC,WAAW/nC,GAAG,WAAY,0BAA2B,SAAUiO,GAClEsrB,EAAK2O,YAAYj6B,KAGnBxO,KAAKsoC,WAAW/nC,GAAG,UAAW,0BAA2B,SAAUiO,GACjEA,EAAI3E,kBAEJiwB,EAAKva,QAAQ,WAAY/Q,GAEzBsrB,EAAK+Q,gBAAkBr8B,EAAIs8B,oBAE3B,IAAI5qC,GAAMsO,EAAIk6B,KAEd,IAAIxoC,IAAQinC,EAAKC,WAAoC,KAAvBtN,EAAK4Q,QAAQr+B,MAAc,CACvD,GAAI0+B,GAAkBjR,EAAK6Q,iBACxBK,KAAK,6BAER,IAAID,EAAgB5pC,OAAS,EAAG,CAC9B,GAAI+P,GAAO65B,EAAgBlxB,KAAK,OAEhCigB,GAAKmR,mBAAmB/5B,GAExB1C,EAAI5E,oBAUV,IAAIshC,GAAO1oC,SAAS2oC,aAChBC,EAAqBF,GAAQA,GAAQ,EAKzClrC,MAAKsoC,WAAW/nC,GACd,oBACA,0BACA,SAAUiO,GAIR,MAAI48B,OACFtR,GAAKwO,WAAWhnC,IAAI,sCAKtBw4B,GAAKwO,WAAWhnC,IAAI,kBAIxBtB,KAAKsoC,WAAW/nC,GACd,4BACA,0BACA,SAAUiO,GAIR,GAAI48B,GAAmC,UAAb58B,EAAImE,KAE5B,WADAmnB,GAAKwO,WAAWhnC,IAAI,iCAItB,IAAIpB,GAAMsO,EAAIk6B,KAGVxoC,IAAOinC,EAAKI,OAASrnC,GAAOinC,EAAKK,MAAQtnC,GAAOinC,EAAKM,KAKrDvnC,GAAOinC,EAAKE,KAIhBvN,EAAKuR,aAAa78B,MAYxBi8B,EAAOrqC,UAAUwqC,kBAAoB,SAAUjB,GAC7C3pC,KAAK0qC,QAAQxc,KAAK,WAAYluB,KAAKsoC,WAAWpa,KAAK,aACnDluB,KAAKsoC,WAAWpa,KAAK,WAAY,OAGnCuc,EAAOrqC,UAAU2pC,kBAAoB,SAAUJ,EAAWC,GACxD5pC,KAAK0qC,QAAQxc,KAAK,cAAe0b,EAAY5E,OAG/CyF,EAAOrqC,UAAU4qB,OAAS,SAAU2e,EAAW9vB,GAC7C,GAAIyxB,GAAiBtrC,KAAK0qC,QAAQ,IAAMloC,SAASqmC,aAEjD7oC,MAAK0qC,QAAQxc,KAAK,cAAe,IAEjCyb,EAAUxpC,KAAKH,KAAM6Z,GAErB7Z,KAAKsoC,WAAWxE,KAAK,gCACL9sB,OAAOhX,KAAK2qC,kBAE5B3qC,KAAKurC,eACDD,GACFtrC,KAAK0qC,QAAQ3f,SAIjB0f,EAAOrqC,UAAUirC,aAAe,WAG9B,GAFArrC,KAAKurC,gBAEAvrC,KAAK6qC,gBAAiB,CACzB,GAAIx1B,GAAQrV,KAAK0qC,QAAQr+B,KAEzBrM,MAAKuf,QAAQ,SACXisB,KAAMn2B,IAIVrV,KAAK6qC,iBAAkB,GAGzBJ,EAAOrqC,UAAU6qC,mBAAqB,SAAUtB,EAAWz4B,GACzDlR,KAAKuf,QAAQ,YACX1F,KAAM3I,IAGRlR,KAAK0qC,QAAQr+B,IAAI6E,EAAK8zB,MACtBhlC,KAAKqrC,gBAGPZ,EAAOrqC,UAAUmrC,aAAe,WAC9BvrC,KAAK0qC,QAAQpiB,IAAI,QAAS,OAE1B,IAAIlhB,GAAQ,EAEZ,IAAyC,KAArCpH,KAAK0qC,QAAQxc,KAAK,eACpB9mB,EAAQpH,KAAKsoC,WAAWxE,KAAK,gCAAgC1B,iBACxD,CACL,GAAIqJ,GAAezrC,KAAK0qC,QAAQr+B,MAAMlL,OAAS,CAE/CiG,GAAwB,IAAfqkC,EAAuB,KAGlCzrC,KAAK0qC,QAAQpiB,IAAI,QAASlhB,IAGrBqjC,IAGTlO,EAAGH,OAAO,gCACR,UACC,SAAUhgB,GACX,QAASsvB,MAwCT,MAtCAA,GAAWtrC,UAAU6c,KAAO,SAAU0sB,EAAW9wB,EAAWgtB,GAC1D,GAAI/L,GAAO95B,KACP2rC,GACF,OAAQ,UACR,QAAS,UACT,SAAU,YACV,WAAY,eAGVC,GAAqB,UAAW,UAAW,YAAa,cAE5DjC,GAAUxpC,KAAKH,KAAM6Y,EAAWgtB,GAEhChtB,EAAUtY,GAAG,IAAK,SAAU+I,EAAMzE,GAEhC,GAAIuX,EAAE6Q,QAAQ3jB,EAAMqiC,MAAiB,EAArC,CAKA9mC,EAASA,KAGT,IAAI2J,GAAM4N,EAAEyvB,MAAM,WAAaviC,GAC7BzE,OAAQA,GAGVi1B,GAAKmJ,SAAS1jB,QAAQ/Q,GAGlB4N,EAAE6Q,QAAQ3jB,EAAMsiC,MAAuB,IAI3C/mC,EAAO2lC,UAAYh8B,EAAIs8B,0BAIpBY,IAGTnP,EAAGH,OAAO,uBACR,SACA,WACC,SAAUhgB,EAAGkgB,GACd,QAASwP,GAAaC,GACpB/rC,KAAK+rC,KAAOA,MA6Bd,MA1BAD,GAAY1rC,UAAU4rC,IAAM,WAC1B,MAAOhsC,MAAK+rC,MAGdD,EAAY1rC,UAAUkc,IAAM,SAAUpc,GACpC,MAAOF,MAAK+rC,KAAK7rC,IAGnB4rC,EAAY1rC,UAAU2C,OAAS,SAAUkpC,GACvCjsC,KAAK+rC,KAAO3vB,EAAErZ,UAAWkpC,EAAYD,MAAOhsC,KAAK+rC,OAKnDD,EAAYI,UAEZJ,EAAYK,SAAW,SAAU16B,GAC/B,KAAMA,IAAQq6B,GAAYI,QAAS,CACjC,GAAIE,GAAe9P,EAAQ7qB,EAE3Bq6B,GAAYI,OAAOz6B,GAAQ26B,EAG7B,MAAO,IAAIN,GAAYA,EAAYI,OAAOz6B,KAGrCq6B,IAGTvP,EAAGH,OAAO,wBAEP,WACD,GAAIiQ,IACFC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,KACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,KACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IACVC,IAAU,IA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","file":"script.min.js","sourcesContent":["/*============================================================================*\\\n\tDO NOT EDIT THIS FILE. THIS IS A CORE FILE.\n/*============================================================================*/\n\n// Make sure FAB is defined\nwindow.ANSEL = window.ANSEL || {};\n","/* jshint ignore:start */\n// jscs:disable\n\n/*\n *\n * More info at [www.dropzonejs.com](http://www.dropzonejs.com)\n *\n * Copyright (c) 2012, Matias Meno\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n */\n\n(function() {\n\tvar Dropzone, Emitter, camelize, contentLoaded, detectVerticalSquash, drawImageIOSFix, noop, without,\n\t\t__slice = [].slice,\n\t\t__hasProp = {}.hasOwnProperty,\n\t\t__extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n\tnoop = function() {};\n\n\tEmitter = (function() {\n\t\tfunction Emitter() {}\n\n\t\tEmitter.prototype.addEventListener = Emitter.prototype.on;\n\n\t\tEmitter.prototype.on = function(event, fn) {\n\t\t\tthis._callbacks = this._callbacks || {};\n\t\t\tif (!this._callbacks[event]) {\n\t\t\t\tthis._callbacks[event] = [];\n\t\t\t}\n\t\t\tthis._callbacks[event].push(fn);\n\t\t\treturn this;\n\t\t};\n\n\t\tEmitter.prototype.emit = function() {\n\t\t\tvar args, callback, callbacks, event, _i, _len;\n\t\t\tevent = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\t\t\tthis._callbacks = this._callbacks || {};\n\t\t\tcallbacks = this._callbacks[event];\n\t\t\tif (callbacks) {\n\t\t\t\tfor (_i = 0, _len = callbacks.length; _i < _len; _i++) {\n\t\t\t\t\tcallback = callbacks[_i];\n\t\t\t\t\tcallback.apply(this, args);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\tEmitter.prototype.removeListener = Emitter.prototype.off;\n\n\t\tEmitter.prototype.removeAllListeners = Emitter.prototype.off;\n\n\t\tEmitter.prototype.removeEventListener = Emitter.prototype.off;\n\n\t\tEmitter.prototype.off = function(event, fn) {\n\t\t\tvar callback, callbacks, i, _i, _len;\n\t\t\tif (!this._callbacks || arguments.length === 0) {\n\t\t\t\tthis._callbacks = {};\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tcallbacks = this._callbacks[event];\n\t\t\tif (!callbacks) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tif (arguments.length === 1) {\n\t\t\t\tdelete this._callbacks[event];\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tfor (i = _i = 0, _len = callbacks.length; _i < _len; i = ++_i) {\n\t\t\t\tcallback = callbacks[i];\n\t\t\t\tif (callback === fn) {\n\t\t\t\t\tcallbacks.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\treturn Emitter;\n\n\t})();\n\n\tDropzone = (function(_super) {\n\t\tvar extend, resolveOption;\n\n\t\t__extends(Dropzone, _super);\n\n\t\tDropzone.prototype.Emitter = Emitter;\n\n\n\t\t/*\n\t\t This is a list of all available events you can register on a dropzone object.\n\n\t\t You can register an event handler like this:\n\n\t\t dropzone.on(\"dragEnter\", function() { });\n\t\t */\n\n\t\tDropzone.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"addedfile\", \"addedfiles\", \"removedfile\", \"thumbnail\", \"error\", \"errormultiple\", \"processing\", \"processingmultiple\", \"uploadprogress\", \"totaluploadprogress\", \"sending\", \"sendingmultiple\", \"success\", \"successmultiple\", \"canceled\", \"canceledmultiple\", \"complete\", \"completemultiple\", \"reset\", \"maxfilesexceeded\", \"maxfilesreached\", \"queuecomplete\"];\n\n\t\tDropzone.prototype.defaultOptions = {\n\t\t\turl: null,\n\t\t\tmethod: \"post\",\n\t\t\twithCredentials: false,\n\t\t\tparallelUploads: 2,\n\t\t\tuploadMultiple: false,\n\t\t\tmaxFilesize: 256,\n\t\t\tparamName: \"file\",\n\t\t\tcreateImageThumbnails: true,\n\t\t\tmaxThumbnailFilesize: 10,\n\t\t\tthumbnailWidth: 120,\n\t\t\tthumbnailHeight: 120,\n\t\t\tfilesizeBase: 1000,\n\t\t\tmaxFiles: null,\n\t\t\tparams: {},\n\t\t\tclickable: true,\n\t\t\tignoreHiddenFiles: true,\n\t\t\tacceptedFiles: null,\n\t\t\tacceptedMimeTypes: null,\n\t\t\tautoProcessQueue: true,\n\t\t\tautoQueue: true,\n\t\t\taddRemoveLinks: false,\n\t\t\tpreviewsContainer: null,\n\t\t\thiddenInputContainer: \"body\",\n\t\t\tcapture: null,\n\t\t\trenameFilename: null,\n\t\t\tdictDefaultMessage: \"Drop files here to upload\",\n\t\t\tdictFallbackMessage: \"Your browser does not support drag'n'drop file uploads.\",\n\t\t\tdictFallbackText: \"Please use the fallback form below to upload your files like in the olden days.\",\n\t\t\tdictFileTooBig: \"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.\",\n\t\t\tdictInvalidFileType: \"You can't upload files of this type.\",\n\t\t\tdictResponseError: \"Server responded with {{statusCode}} code.\",\n\t\t\tdictCancelUpload: \"Cancel upload\",\n\t\t\tdictCancelUploadConfirmation: \"Are you sure you want to cancel this upload?\",\n\t\t\tdictRemoveFile: \"Remove file\",\n\t\t\tdictRemoveFileConfirmation: null,\n\t\t\tdictMaxFilesExceeded: \"You can not upload any more files.\",\n\t\t\taccept: function(file, done) {\n\t\t\t\treturn done();\n\t\t\t},\n\t\t\tinit: function() {\n\t\t\t\treturn noop;\n\t\t\t},\n\t\t\tforceFallback: false,\n\t\t\tfallback: function() {\n\t\t\t\tvar child, messageElement, span, _i, _len, _ref;\n\t\t\t\tthis.element.className = \"\" + this.element.className + \" dz-browser-not-supported\";\n\t\t\t\t_ref = this.element.getElementsByTagName(\"div\");\n\t\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\tchild = _ref[_i];\n\t\t\t\t\tif (/(^| )dz-message($| )/.test(child.className)) {\n\t\t\t\t\t\tmessageElement = child;\n\t\t\t\t\t\tchild.className = \"dz-message\";\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!messageElement) {\n\t\t\t\t\tmessageElement = Dropzone.createElement(\"<div class=\\\"dz-message\\\"><span></span></div>\");\n\t\t\t\t\tthis.element.appendChild(messageElement);\n\t\t\t\t}\n\t\t\t\tspan = messageElement.getElementsByTagName(\"span\")[0];\n\t\t\t\tif (span) {\n\t\t\t\t\tif (span.textContent != null) {\n\t\t\t\t\t\tspan.textContent = this.options.dictFallbackMessage;\n\t\t\t\t\t} else if (span.innerText != null) {\n\t\t\t\t\t\tspan.innerText = this.options.dictFallbackMessage;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.element.appendChild(this.getFallbackForm());\n\t\t\t},\n\t\t\tresize: function(file) {\n\t\t\t\tvar info, srcRatio, trgRatio;\n\t\t\t\tinfo = {\n\t\t\t\t\tsrcX: 0,\n\t\t\t\t\tsrcY: 0,\n\t\t\t\t\tsrcWidth: file.width,\n\t\t\t\t\tsrcHeight: file.height\n\t\t\t\t};\n\t\t\t\tsrcRatio = file.width / file.height;\n\t\t\t\tinfo.optWidth = this.options.thumbnailWidth;\n\t\t\t\tinfo.optHeight = this.options.thumbnailHeight;\n\t\t\t\tif ((info.optWidth == null) && (info.optHeight == null)) {\n\t\t\t\t\tinfo.optWidth = info.srcWidth;\n\t\t\t\t\tinfo.optHeight = info.srcHeight;\n\t\t\t\t} else if (info.optWidth == null) {\n\t\t\t\t\tinfo.optWidth = srcRatio * info.optHeight;\n\t\t\t\t} else if (info.optHeight == null) {\n\t\t\t\t\tinfo.optHeight = (1 / srcRatio) * info.optWidth;\n\t\t\t\t}\n\t\t\t\ttrgRatio = info.optWidth / info.optHeight;\n\t\t\t\tif (file.height < info.optHeight || file.width < info.optWidth) {\n\t\t\t\t\tinfo.trgHeight = info.srcHeight;\n\t\t\t\t\tinfo.trgWidth = info.srcWidth;\n\t\t\t\t} else {\n\t\t\t\t\tif (srcRatio > trgRatio) {\n\t\t\t\t\t\tinfo.srcHeight = file.height;\n\t\t\t\t\t\tinfo.srcWidth = info.srcHeight * trgRatio;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinfo.srcWidth = file.width;\n\t\t\t\t\t\tinfo.srcHeight = info.srcWidth / trgRatio;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tinfo.srcX = (file.width - info.srcWidth) / 2;\n\t\t\t\tinfo.srcY = (file.height - info.srcHeight) / 2;\n\t\t\t\treturn info;\n\t\t\t},\n\n\t\t\t/*\n\t\t\t Those functions register themselves to the events on init and handle all\n\t\t\t the user interface specific stuff. Overwriting them won't break the upload\n\t\t\t but can break the way it's displayed.\n\t\t\t You can overwrite them if you don't like the default behavior. If you just\n\t\t\t want to add an additional event handler, register it on the dropzone object\n\t\t\t and don't overwrite those options.\n\t\t\t */\n\t\t\tdrop: function(e) {\n\t\t\t\treturn this.element.classList.remove(\"dz-drag-hover\");\n\t\t\t},\n\t\t\tdragstart: noop,\n\t\t\tdragend: function(e) {\n\t\t\t\treturn this.element.classList.remove(\"dz-drag-hover\");\n\t\t\t},\n\t\t\tdragenter: function(e) {\n\t\t\t\treturn this.element.classList.add(\"dz-drag-hover\");\n\t\t\t},\n\t\t\tdragover: function(e) {\n\t\t\t\treturn this.element.classList.add(\"dz-drag-hover\");\n\t\t\t},\n\t\t\tdragleave: function(e) {\n\t\t\t\treturn this.element.classList.remove(\"dz-drag-hover\");\n\t\t\t},\n\t\t\tpaste: noop,\n\t\t\treset: function() {\n\t\t\t\treturn this.element.classList.remove(\"dz-started\");\n\t\t\t},\n\t\t\taddedfile: function(file) {\n\t\t\t\tvar node, removeFileEvent, removeLink, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;\n\t\t\t\tif (this.element === this.previewsContainer) {\n\t\t\t\t\tthis.element.classList.add(\"dz-started\");\n\t\t\t\t}\n\t\t\t\tif (this.previewsContainer) {\n\t\t\t\t\tfile.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());\n\t\t\t\t\tfile.previewTemplate = file.previewElement;\n\t\t\t\t\tthis.previewsContainer.appendChild(file.previewElement);\n\t\t\t\t\t_ref = file.previewElement.querySelectorAll(\"[data-dz-name]\");\n\t\t\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\t\tnode = _ref[_i];\n\t\t\t\t\t\tnode.textContent = this._renameFilename(file.name);\n\t\t\t\t\t}\n\t\t\t\t\t_ref1 = file.previewElement.querySelectorAll(\"[data-dz-size]\");\n\t\t\t\t\tfor (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n\t\t\t\t\t\tnode = _ref1[_j];\n\t\t\t\t\t\tnode.innerHTML = this.filesize(file.size);\n\t\t\t\t\t}\n\t\t\t\t\tif (this.options.addRemoveLinks) {\n\t\t\t\t\t\tfile._removeLink = Dropzone.createElement(\"<a class=\\\"dz-remove\\\" href=\\\"javascript:undefined;\\\" data-dz-remove>\" + this.options.dictRemoveFile + \"</a>\");\n\t\t\t\t\t\tfile.previewElement.appendChild(file._removeLink);\n\t\t\t\t\t}\n\t\t\t\t\tremoveFileEvent = (function(_this) {\n\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tif (file.status === Dropzone.UPLOADING) {\n\t\t\t\t\t\t\t\treturn Dropzone.confirm(_this.options.dictCancelUploadConfirmation, function() {\n\t\t\t\t\t\t\t\t\treturn _this.removeFile(file);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (_this.options.dictRemoveFileConfirmation) {\n\t\t\t\t\t\t\t\t\treturn Dropzone.confirm(_this.options.dictRemoveFileConfirmation, function() {\n\t\t\t\t\t\t\t\t\t\treturn _this.removeFile(file);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn _this.removeFile(file);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t})(this);\n\t\t\t\t\t_ref2 = file.previewElement.querySelectorAll(\"[data-dz-remove]\");\n\t\t\t\t\t_results = [];\n\t\t\t\t\tfor (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n\t\t\t\t\t\tremoveLink = _ref2[_k];\n\t\t\t\t\t\t_results.push(removeLink.addEventListener(\"click\", removeFileEvent));\n\t\t\t\t\t}\n\t\t\t\t\treturn _results;\n\t\t\t\t}\n\t\t\t},\n\t\t\tremovedfile: function(file) {\n\t\t\t\tvar _ref;\n\t\t\t\tif (file.previewElement) {\n\t\t\t\t\tif ((_ref = file.previewElement) != null) {\n\t\t\t\t\t\t_ref.parentNode.removeChild(file.previewElement);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this._updateMaxFilesReachedClass();\n\t\t\t},\n\t\t\tthumbnail: function(file, dataUrl) {\n\t\t\t\tvar thumbnailElement, _i, _len, _ref;\n\t\t\t\tif (file.previewElement) {\n\t\t\t\t\tfile.previewElement.classList.remove(\"dz-file-preview\");\n\t\t\t\t\t_ref = file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\");\n\t\t\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\t\tthumbnailElement = _ref[_i];\n\t\t\t\t\t\tthumbnailElement.alt = file.name;\n\t\t\t\t\t\tthumbnailElement.src = dataUrl;\n\t\t\t\t\t}\n\t\t\t\t\treturn setTimeout(((function(_this) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\treturn file.previewElement.classList.add(\"dz-image-preview\");\n\t\t\t\t\t\t};\n\t\t\t\t\t})(this)), 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(file, message) {\n\t\t\t\tvar node, _i, _len, _ref, _results;\n\t\t\t\tif (file.previewElement) {\n\t\t\t\t\tfile.previewElement.classList.add(\"dz-error\");\n\t\t\t\t\tif (typeof message !== \"String\" && message.error) {\n\t\t\t\t\t\tmessage = message.error;\n\t\t\t\t\t}\n\t\t\t\t\t_ref = file.previewElement.querySelectorAll(\"[data-dz-errormessage]\");\n\t\t\t\t\t_results = [];\n\t\t\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\t\tnode = _ref[_i];\n\t\t\t\t\t\t_results.push(node.textContent = message);\n\t\t\t\t\t}\n\t\t\t\t\treturn _results;\n\t\t\t\t}\n\t\t\t},\n\t\t\terrormultiple: noop,\n\t\t\tprocessing: function(file) {\n\t\t\t\tif (file.previewElement) {\n\t\t\t\t\tfile.previewElement.classList.add(\"dz-processing\");\n\t\t\t\t\tif (file._removeLink) {\n\t\t\t\t\t\treturn file._removeLink.textContent = this.options.dictCancelUpload;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tprocessingmultiple: noop,\n\t\t\tuploadprogress: function(file, progress, bytesSent) {\n\t\t\t\tvar node, _i, _len, _ref, _results;\n\t\t\t\tif (file.previewElement) {\n\t\t\t\t\t_ref = file.previewElement.querySelectorAll(\"[data-dz-uploadprogress]\");\n\t\t\t\t\t_results = [];\n\t\t\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\t\tnode = _ref[_i];\n\t\t\t\t\t\tif (node.nodeName === 'PROGRESS') {\n\t\t\t\t\t\t\t_results.push(node.value = progress);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_results.push(node.style.width = \"\" + progress + \"%\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn _results;\n\t\t\t\t}\n\t\t\t},\n\t\t\ttotaluploadprogress: noop,\n\t\t\tsending: noop,\n\t\t\tsendingmultiple: noop,\n\t\t\tsuccess: function(file) {\n\t\t\t\tif (file.previewElement) {\n\t\t\t\t\treturn file.previewElement.classList.add(\"dz-success\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tsuccessmultiple: noop,\n\t\t\tcanceled: function(file) {\n\t\t\t\treturn this.emit(\"error\", file, \"Upload canceled.\");\n\t\t\t},\n\t\t\tcanceledmultiple: noop,\n\t\t\tcomplete: function(file) {\n\t\t\t\tif (file._removeLink) {\n\t\t\t\t\tfile._removeLink.textContent = this.options.dictRemoveFile;\n\t\t\t\t}\n\t\t\t\tif (file.previewElement) {\n\t\t\t\t\treturn file.previewElement.classList.add(\"dz-complete\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tcompletemultiple: noop,\n\t\t\tmaxfilesexceeded: noop,\n\t\t\tmaxfilesreached: noop,\n\t\t\tqueuecomplete: noop,\n\t\t\taddedfiles: noop,\n\t\t\tpreviewTemplate: \"<div class=\\\"dz-preview dz-file-preview\\\">\\n  <div class=\\\"dz-image\\\"><img data-dz-thumbnail /></div>\\n  <div class=\\\"dz-details\\\">\\n    <div class=\\\"dz-size\\\"><span data-dz-size></span></div>\\n    <div class=\\\"dz-filename\\\"><span data-dz-name></span></div>\\n  </div>\\n  <div class=\\\"dz-progress\\\"><span class=\\\"dz-upload\\\" data-dz-uploadprogress></span></div>\\n  <div class=\\\"dz-error-message\\\"><span data-dz-errormessage></span></div>\\n  <div class=\\\"dz-success-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Check</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <path d=\\\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" stroke-opacity=\\\"0.198794158\\\" stroke=\\\"#747474\\\" fill-opacity=\\\"0.816519475\\\" fill=\\\"#FFFFFF\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\\\"dz-error-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Error</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <g id=\\\"Check-+-Oval-2\\\" sketch:type=\\\"MSLayerGroup\\\" stroke=\\\"#747474\\\" stroke-opacity=\\\"0.198794158\\\" fill=\\\"#FFFFFF\\\" fill-opacity=\\\"0.816519475\\\">\\n          <path d=\\\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n        </g>\\n      </g>\\n    </svg>\\n  </div>\\n</div>\"\n\t\t};\n\n\t\textend = function() {\n\t\t\tvar key, object, objects, target, val, _i, _len;\n\t\t\ttarget = arguments[0], objects = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\t\t\tfor (_i = 0, _len = objects.length; _i < _len; _i++) {\n\t\t\t\tobject = objects[_i];\n\t\t\t\tfor (key in object) {\n\t\t\t\t\tval = object[key];\n\t\t\t\t\ttarget[key] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn target;\n\t\t};\n\n\t\tfunction Dropzone(element, options) {\n\t\t\tvar elementOptions, fallback, _ref;\n\t\t\tthis.element = element;\n\t\t\tthis.version = Dropzone.version;\n\t\t\tthis.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\\n*/g, \"\");\n\t\t\tthis.clickableElements = [];\n\t\t\tthis.listeners = [];\n\t\t\tthis.files = [];\n\t\t\tif (typeof this.element === \"string\") {\n\t\t\t\tthis.element = document.querySelector(this.element);\n\t\t\t}\n\t\t\tif (!(this.element && (this.element.nodeType != null))) {\n\t\t\t\tthrow new Error(\"Invalid dropzone element.\");\n\t\t\t}\n\t\t\tif (this.element.dropzone) {\n\t\t\t\tthrow new Error(\"Dropzone already attached.\");\n\t\t\t}\n\t\t\tDropzone.instances.push(this);\n\t\t\tthis.element.dropzone = this;\n\t\t\telementOptions = (_ref = Dropzone.optionsForElement(this.element)) != null ? _ref : {};\n\t\t\tthis.options = extend({}, this.defaultOptions, elementOptions, options != null ? options : {});\n\t\t\tif (this.options.forceFallback || !Dropzone.isBrowserSupported()) {\n\t\t\t\treturn this.options.fallback.call(this);\n\t\t\t}\n\t\t\tif (this.options.url == null) {\n\t\t\t\tthis.options.url = this.element.getAttribute(\"action\");\n\t\t\t}\n\t\t\tif (!this.options.url) {\n\t\t\t\tthrow new Error(\"No URL provided.\");\n\t\t\t}\n\t\t\tif (this.options.acceptedFiles && this.options.acceptedMimeTypes) {\n\t\t\t\tthrow new Error(\"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.\");\n\t\t\t}\n\t\t\tif (this.options.acceptedMimeTypes) {\n\t\t\t\tthis.options.acceptedFiles = this.options.acceptedMimeTypes;\n\t\t\t\tdelete this.options.acceptedMimeTypes;\n\t\t\t}\n\t\t\tthis.options.method = this.options.method.toUpperCase();\n\t\t\tif ((fallback = this.getExistingFallback()) && fallback.parentNode) {\n\t\t\t\tfallback.parentNode.removeChild(fallback);\n\t\t\t}\n\t\t\tif (this.options.previewsContainer !== false) {\n\t\t\t\tif (this.options.previewsContainer) {\n\t\t\t\t\tthis.previewsContainer = Dropzone.getElement(this.options.previewsContainer, \"previewsContainer\");\n\t\t\t\t} else {\n\t\t\t\t\tthis.previewsContainer = this.element;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.options.clickable) {\n\t\t\t\tif (this.options.clickable === true) {\n\t\t\t\t\tthis.clickableElements = [this.element];\n\t\t\t\t} else {\n\t\t\t\t\tthis.clickableElements = Dropzone.getElements(this.options.clickable, \"clickable\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.init();\n\t\t}\n\n\t\tDropzone.prototype.getAcceptedFiles = function() {\n\t\t\tvar file, _i, _len, _ref, _results;\n\t\t\t_ref = this.files;\n\t\t\t_results = [];\n\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\tfile = _ref[_i];\n\t\t\t\tif (file.accepted) {\n\t\t\t\t\t_results.push(file);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _results;\n\t\t};\n\n\t\tDropzone.prototype.getRejectedFiles = function() {\n\t\t\tvar file, _i, _len, _ref, _results;\n\t\t\t_ref = this.files;\n\t\t\t_results = [];\n\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\tfile = _ref[_i];\n\t\t\t\tif (!file.accepted) {\n\t\t\t\t\t_results.push(file);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _results;\n\t\t};\n\n\t\tDropzone.prototype.getFilesWithStatus = function(status) {\n\t\t\tvar file, _i, _len, _ref, _results;\n\t\t\t_ref = this.files;\n\t\t\t_results = [];\n\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\tfile = _ref[_i];\n\t\t\t\tif (file.status === status) {\n\t\t\t\t\t_results.push(file);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _results;\n\t\t};\n\n\t\tDropzone.prototype.getQueuedFiles = function() {\n\t\t\treturn this.getFilesWithStatus(Dropzone.QUEUED);\n\t\t};\n\n\t\tDropzone.prototype.getUploadingFiles = function() {\n\t\t\treturn this.getFilesWithStatus(Dropzone.UPLOADING);\n\t\t};\n\n\t\tDropzone.prototype.getAddedFiles = function() {\n\t\t\treturn this.getFilesWithStatus(Dropzone.ADDED);\n\t\t};\n\n\t\tDropzone.prototype.getActiveFiles = function() {\n\t\t\tvar file, _i, _len, _ref, _results;\n\t\t\t_ref = this.files;\n\t\t\t_results = [];\n\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\tfile = _ref[_i];\n\t\t\t\tif (file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED) {\n\t\t\t\t\t_results.push(file);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _results;\n\t\t};\n\n\t\tDropzone.prototype.init = function() {\n\t\t\tvar eventName, noPropagation, setupHiddenFileInput, _i, _len, _ref, _ref1;\n\t\t\tif (this.element.tagName === \"form\") {\n\t\t\t\tthis.element.setAttribute(\"enctype\", \"multipart/form-data\");\n\t\t\t}\n\t\t\tif (this.element.classList.contains(\"dropzone\") && !this.element.querySelector(\".dz-message\")) {\n\t\t\t\tthis.element.appendChild(Dropzone.createElement(\"<div class=\\\"dz-default dz-message\\\"><span>\" + this.options.dictDefaultMessage + \"</span></div>\"));\n\t\t\t}\n\t\t\tif (this.clickableElements.length) {\n\t\t\t\tsetupHiddenFileInput = (function(_this) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif (_this.hiddenFileInput) {\n\t\t\t\t\t\t\t_this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.hiddenFileInput = document.createElement(\"input\");\n\t\t\t\t\t\t_this.hiddenFileInput.setAttribute(\"type\", \"file\");\n\t\t\t\t\t\tif ((_this.options.maxFiles == null) || _this.options.maxFiles > 1) {\n\t\t\t\t\t\t\t_this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.hiddenFileInput.className = \"dz-hidden-input\";\n\t\t\t\t\t\tif (_this.options.acceptedFiles != null) {\n\t\t\t\t\t\t\t_this.hiddenFileInput.setAttribute(\"accept\", _this.options.acceptedFiles);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (_this.options.capture != null) {\n\t\t\t\t\t\t\t_this.hiddenFileInput.setAttribute(\"capture\", _this.options.capture);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.hiddenFileInput.style.visibility = \"hidden\";\n\t\t\t\t\t\t_this.hiddenFileInput.style.position = \"absolute\";\n\t\t\t\t\t\t_this.hiddenFileInput.style.top = \"0\";\n\t\t\t\t\t\t_this.hiddenFileInput.style.left = \"0\";\n\t\t\t\t\t\t_this.hiddenFileInput.style.height = \"0\";\n\t\t\t\t\t\t_this.hiddenFileInput.style.width = \"0\";\n\t\t\t\t\t\tdocument.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput);\n\t\t\t\t\t\treturn _this.hiddenFileInput.addEventListener(\"change\", function() {\n\t\t\t\t\t\t\tvar file, files, _i, _len;\n\t\t\t\t\t\t\tfiles = _this.hiddenFileInput.files;\n\t\t\t\t\t\t\tif (files.length) {\n\t\t\t\t\t\t\t\tfor (_i = 0, _len = files.length; _i < _len; _i++) {\n\t\t\t\t\t\t\t\t\tfile = files[_i];\n\t\t\t\t\t\t\t\t\t_this.addFile(file);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_this.emit(\"addedfiles\", files);\n\t\t\t\t\t\t\treturn setupHiddenFileInput();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t})(this);\n\t\t\t\tsetupHiddenFileInput();\n\t\t\t}\n\t\t\tthis.URL = (_ref = window.URL) != null ? _ref : window.webkitURL;\n\t\t\t_ref1 = this.events;\n\t\t\tfor (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n\t\t\t\teventName = _ref1[_i];\n\t\t\t\tthis.on(eventName, this.options[eventName]);\n\t\t\t}\n\t\t\tthis.on(\"uploadprogress\", (function(_this) {\n\t\t\t\treturn function() {\n\t\t\t\t\treturn _this.updateTotalUploadProgress();\n\t\t\t\t};\n\t\t\t})(this));\n\t\t\tthis.on(\"removedfile\", (function(_this) {\n\t\t\t\treturn function() {\n\t\t\t\t\treturn _this.updateTotalUploadProgress();\n\t\t\t\t};\n\t\t\t})(this));\n\t\t\tthis.on(\"canceled\", (function(_this) {\n\t\t\t\treturn function(file) {\n\t\t\t\t\treturn _this.emit(\"complete\", file);\n\t\t\t\t};\n\t\t\t})(this));\n\t\t\tthis.on(\"complete\", (function(_this) {\n\t\t\t\treturn function(file) {\n\t\t\t\t\tif (_this.getAddedFiles().length === 0 && _this.getUploadingFiles().length === 0 && _this.getQueuedFiles().length === 0) {\n\t\t\t\t\t\treturn setTimeout((function() {\n\t\t\t\t\t\t\treturn _this.emit(\"queuecomplete\");\n\t\t\t\t\t\t}), 0);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t})(this));\n\t\t\tnoPropagation = function(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tif (e.preventDefault) {\n\t\t\t\t\treturn e.preventDefault();\n\t\t\t\t} else {\n\t\t\t\t\treturn e.returnValue = false;\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.listeners = [\n\t\t\t\t{\n\t\t\t\t\telement: this.element,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t\"dragstart\": (function(_this) {\n\t\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\t\treturn _this.emit(\"dragstart\", e);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})(this),\n\t\t\t\t\t\t\"dragenter\": (function(_this) {\n\t\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\t\tnoPropagation(e);\n\t\t\t\t\t\t\t\treturn _this.emit(\"dragenter\", e);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})(this),\n\t\t\t\t\t\t\"dragover\": (function(_this) {\n\t\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\t\tvar efct;\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tefct = e.dataTransfer.effectAllowed;\n\t\t\t\t\t\t\t\t} catch (_error) {}\n\t\t\t\t\t\t\t\te.dataTransfer.dropEffect = 'move' === efct || 'linkMove' === efct ? 'move' : 'copy';\n\t\t\t\t\t\t\t\tnoPropagation(e);\n\t\t\t\t\t\t\t\treturn _this.emit(\"dragover\", e);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})(this),\n\t\t\t\t\t\t\"dragleave\": (function(_this) {\n\t\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\t\treturn _this.emit(\"dragleave\", e);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})(this),\n\t\t\t\t\t\t\"drop\": (function(_this) {\n\t\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\t\tnoPropagation(e);\n\t\t\t\t\t\t\t\treturn _this.drop(e);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})(this),\n\t\t\t\t\t\t\"dragend\": (function(_this) {\n\t\t\t\t\t\t\treturn function(e) {\n\t\t\t\t\t\t\t\treturn _this.emit(\"dragend\", e);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\t\t\tthis.clickableElements.forEach((function(_this) {\n\t\t\t\treturn function(clickableElement) {\n\t\t\t\t\treturn _this.listeners.push({\n\t\t\t\t\t\telement: clickableElement,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\"click\": function(evt) {\n\t\t\t\t\t\t\t\tif ((clickableElement !== _this.element) || (evt.target === _this.element || Dropzone.elementInside(evt.target, _this.element.querySelector(\".dz-message\")))) {\n\t\t\t\t\t\t\t\t\t_this.hiddenFileInput.click();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t})(this));\n\t\t\tthis.enable();\n\t\t\treturn this.options.init.call(this);\n\t\t};\n\n\t\tDropzone.prototype.destroy = function() {\n\t\t\tvar _ref;\n\t\t\tthis.disable();\n\t\t\tthis.removeAllFiles(true);\n\t\t\tif ((_ref = this.hiddenFileInput) != null ? _ref.parentNode : void 0) {\n\t\t\t\tthis.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);\n\t\t\t\tthis.hiddenFileInput = null;\n\t\t\t}\n\t\t\tdelete this.element.dropzone;\n\t\t\treturn Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);\n\t\t};\n\n\t\tDropzone.prototype.updateTotalUploadProgress = function() {\n\t\t\tvar activeFiles, file, totalBytes, totalBytesSent, totalUploadProgress, _i, _len, _ref;\n\t\t\ttotalBytesSent = 0;\n\t\t\ttotalBytes = 0;\n\t\t\tactiveFiles = this.getActiveFiles();\n\t\t\tif (activeFiles.length) {\n\t\t\t\t_ref = this.getActiveFiles();\n\t\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\tfile = _ref[_i];\n\t\t\t\t\ttotalBytesSent += file.upload.bytesSent;\n\t\t\t\t\ttotalBytes += file.upload.total;\n\t\t\t\t}\n\t\t\t\ttotalUploadProgress = 100 * totalBytesSent / totalBytes;\n\t\t\t} else {\n\t\t\t\ttotalUploadProgress = 100;\n\t\t\t}\n\t\t\treturn this.emit(\"totaluploadprogress\", totalUploadProgress, totalBytes, totalBytesSent);\n\t\t};\n\n\t\tDropzone.prototype._getParamName = function(n) {\n\t\t\tif (typeof this.options.paramName === \"function\") {\n\t\t\t\treturn this.options.paramName(n);\n\t\t\t} else {\n\t\t\t\treturn \"\" + this.options.paramName + (this.options.uploadMultiple ? \"[\" + n + \"]\" : \"\");\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype._renameFilename = function(name) {\n\t\t\tif (typeof this.options.renameFilename !== \"function\") {\n\t\t\t\treturn name;\n\t\t\t}\n\t\t\treturn this.options.renameFilename(name);\n\t\t};\n\n\t\tDropzone.prototype.getFallbackForm = function() {\n\t\t\tvar existingFallback, fields, fieldsString, form;\n\t\t\tif (existingFallback = this.getExistingFallback()) {\n\t\t\t\treturn existingFallback;\n\t\t\t}\n\t\t\tfieldsString = \"<div class=\\\"dz-fallback\\\">\";\n\t\t\tif (this.options.dictFallbackText) {\n\t\t\t\tfieldsString += \"<p>\" + this.options.dictFallbackText + \"</p>\";\n\t\t\t}\n\t\t\tfieldsString += \"<input type=\\\"file\\\" name=\\\"\" + (this._getParamName(0)) + \"\\\" \" + (this.options.uploadMultiple ? 'multiple=\"multiple\"' : void 0) + \" /><input type=\\\"submit\\\" value=\\\"Upload!\\\"></div>\";\n\t\t\tfields = Dropzone.createElement(fieldsString);\n\t\t\tif (this.element.tagName !== \"FORM\") {\n\t\t\t\tform = Dropzone.createElement(\"<form action=\\\"\" + this.options.url + \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"\" + this.options.method + \"\\\"></form>\");\n\t\t\t\tform.appendChild(fields);\n\t\t\t} else {\n\t\t\t\tthis.element.setAttribute(\"enctype\", \"multipart/form-data\");\n\t\t\t\tthis.element.setAttribute(\"method\", this.options.method);\n\t\t\t}\n\t\t\treturn form != null ? form : fields;\n\t\t};\n\n\t\tDropzone.prototype.getExistingFallback = function() {\n\t\t\tvar fallback, getFallback, tagName, _i, _len, _ref;\n\t\t\tgetFallback = function(elements) {\n\t\t\t\tvar el, _i, _len;\n\t\t\t\tfor (_i = 0, _len = elements.length; _i < _len; _i++) {\n\t\t\t\t\tel = elements[_i];\n\t\t\t\t\tif (/(^| )fallback($| )/.test(el.className)) {\n\t\t\t\t\t\treturn el;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t_ref = [\"div\", \"form\"];\n\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\ttagName = _ref[_i];\n\t\t\t\tif (fallback = getFallback(this.element.getElementsByTagName(tagName))) {\n\t\t\t\t\treturn fallback;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype.setupEventListeners = function() {\n\t\t\tvar elementListeners, event, listener, _i, _len, _ref, _results;\n\t\t\t_ref = this.listeners;\n\t\t\t_results = [];\n\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\telementListeners = _ref[_i];\n\t\t\t\t_results.push((function() {\n\t\t\t\t\tvar _ref1, _results1;\n\t\t\t\t\t_ref1 = elementListeners.events;\n\t\t\t\t\t_results1 = [];\n\t\t\t\t\tfor (event in _ref1) {\n\t\t\t\t\t\tlistener = _ref1[event];\n\t\t\t\t\t\t_results1.push(elementListeners.element.addEventListener(event, listener, false));\n\t\t\t\t\t}\n\t\t\t\t\treturn _results1;\n\t\t\t\t})());\n\t\t\t}\n\t\t\treturn _results;\n\t\t};\n\n\t\tDropzone.prototype.removeEventListeners = function() {\n\t\t\tvar elementListeners, event, listener, _i, _len, _ref, _results;\n\t\t\t_ref = this.listeners;\n\t\t\t_results = [];\n\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\telementListeners = _ref[_i];\n\t\t\t\t_results.push((function() {\n\t\t\t\t\tvar _ref1, _results1;\n\t\t\t\t\t_ref1 = elementListeners.events;\n\t\t\t\t\t_results1 = [];\n\t\t\t\t\tfor (event in _ref1) {\n\t\t\t\t\t\tlistener = _ref1[event];\n\t\t\t\t\t\t_results1.push(elementListeners.element.removeEventListener(event, listener, false));\n\t\t\t\t\t}\n\t\t\t\t\treturn _results1;\n\t\t\t\t})());\n\t\t\t}\n\t\t\treturn _results;\n\t\t};\n\n\t\tDropzone.prototype.disable = function() {\n\t\t\tvar file, _i, _len, _ref, _results;\n\t\t\tthis.clickableElements.forEach(function(element) {\n\t\t\t\treturn element.classList.remove(\"dz-clickable\");\n\t\t\t});\n\t\t\tthis.removeEventListeners();\n\t\t\t_ref = this.files;\n\t\t\t_results = [];\n\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\tfile = _ref[_i];\n\t\t\t\t_results.push(this.cancelUpload(file));\n\t\t\t}\n\t\t\treturn _results;\n\t\t};\n\n\t\tDropzone.prototype.enable = function() {\n\t\t\tthis.clickableElements.forEach(function(element) {\n\t\t\t\treturn element.classList.add(\"dz-clickable\");\n\t\t\t});\n\t\t\treturn this.setupEventListeners();\n\t\t};\n\n\t\tDropzone.prototype.filesize = function(size) {\n\t\t\tvar cutoff, i, selectedSize, selectedUnit, unit, units, _i, _len;\n\t\t\tselectedSize = 0;\n\t\t\tselectedUnit = \"b\";\n\t\t\tif (size > 0) {\n\t\t\t\tunits = ['TB', 'GB', 'MB', 'KB', 'b'];\n\t\t\t\tfor (i = _i = 0, _len = units.length; _i < _len; i = ++_i) {\n\t\t\t\t\tunit = units[i];\n\t\t\t\t\tcutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;\n\t\t\t\t\tif (size >= cutoff) {\n\t\t\t\t\t\tselectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);\n\t\t\t\t\t\tselectedUnit = unit;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tselectedSize = Math.round(10 * selectedSize) / 10;\n\t\t\t}\n\t\t\treturn \"<strong>\" + selectedSize + \"</strong> \" + selectedUnit;\n\t\t};\n\n\t\tDropzone.prototype._updateMaxFilesReachedClass = function() {\n\t\t\tif ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n\t\t\t\tif (this.getAcceptedFiles().length === this.options.maxFiles) {\n\t\t\t\t\tthis.emit('maxfilesreached', this.files);\n\t\t\t\t}\n\t\t\t\treturn this.element.classList.add(\"dz-max-files-reached\");\n\t\t\t} else {\n\t\t\t\treturn this.element.classList.remove(\"dz-max-files-reached\");\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype.drop = function(e) {\n\t\t\tvar files, items;\n\t\t\tif (!e.dataTransfer) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.emit(\"drop\", e);\n\t\t\tfiles = e.dataTransfer.files;\n\t\t\tthis.emit(\"addedfiles\", files);\n\t\t\tif (files.length) {\n\t\t\t\titems = e.dataTransfer.items;\n\t\t\t\tif (items && items.length && (items[0].webkitGetAsEntry != null)) {\n\t\t\t\t\tthis._addFilesFromItems(items);\n\t\t\t\t} else {\n\t\t\t\t\tthis.handleFiles(files);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype.paste = function(e) {\n\t\t\tvar items, _ref;\n\t\t\tif ((e != null ? (_ref = e.clipboardData) != null ? _ref.items : void 0 : void 0) == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.emit(\"paste\", e);\n\t\t\titems = e.clipboardData.items;\n\t\t\tif (items.length) {\n\t\t\t\treturn this._addFilesFromItems(items);\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype.handleFiles = function(files) {\n\t\t\tvar file, _i, _len, _results;\n\t\t\t_results = [];\n\t\t\tfor (_i = 0, _len = files.length; _i < _len; _i++) {\n\t\t\t\tfile = files[_i];\n\t\t\t\t_results.push(this.addFile(file));\n\t\t\t}\n\t\t\treturn _results;\n\t\t};\n\n\t\tDropzone.prototype._addFilesFromItems = function(items) {\n\t\t\tvar entry, item, _i, _len, _results;\n\t\t\t_results = [];\n\t\t\tfor (_i = 0, _len = items.length; _i < _len; _i++) {\n\t\t\t\titem = items[_i];\n\t\t\t\tif ((item.webkitGetAsEntry != null) && (entry = item.webkitGetAsEntry())) {\n\t\t\t\t\tif (entry.isFile) {\n\t\t\t\t\t\t_results.push(this.addFile(item.getAsFile()));\n\t\t\t\t\t} else if (entry.isDirectory) {\n\t\t\t\t\t\t_results.push(this._addFilesFromDirectory(entry, entry.name));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_results.push(void 0);\n\t\t\t\t\t}\n\t\t\t\t} else if (item.getAsFile != null) {\n\t\t\t\t\tif ((item.kind == null) || item.kind === \"file\") {\n\t\t\t\t\t\t_results.push(this.addFile(item.getAsFile()));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_results.push(void 0);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_results.push(void 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn _results;\n\t\t};\n\n\t\tDropzone.prototype._addFilesFromDirectory = function(directory, path) {\n\t\t\tvar dirReader, errorHandler, readEntries;\n\t\t\tdirReader = directory.createReader();\n\t\t\terrorHandler = function(error) {\n\t\t\t\treturn typeof console !== \"undefined\" && console !== null ? typeof console.log === \"function\" ? console.log(error) : void 0 : void 0;\n\t\t\t};\n\t\t\treadEntries = (function(_this) {\n\t\t\t\treturn function() {\n\t\t\t\t\treturn dirReader.readEntries(function(entries) {\n\t\t\t\t\t\tvar entry, _i, _len;\n\t\t\t\t\t\tif (entries.length > 0) {\n\t\t\t\t\t\t\tfor (_i = 0, _len = entries.length; _i < _len; _i++) {\n\t\t\t\t\t\t\t\tentry = entries[_i];\n\t\t\t\t\t\t\t\tif (entry.isFile) {\n\t\t\t\t\t\t\t\t\tentry.file(function(file) {\n\t\t\t\t\t\t\t\t\t\tif (_this.options.ignoreHiddenFiles && file.name.substring(0, 1) === '.') {\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tfile.fullPath = \"\" + path + \"/\" + file.name;\n\t\t\t\t\t\t\t\t\t\treturn _this.addFile(file);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else if (entry.isDirectory) {\n\t\t\t\t\t\t\t\t\t_this._addFilesFromDirectory(entry, \"\" + path + \"/\" + entry.name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treadEntries();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}, errorHandler);\n\t\t\t\t};\n\t\t\t})(this);\n\t\t\treturn readEntries();\n\t\t};\n\n\t\tDropzone.prototype.accept = function(file, done) {\n\t\t\tif (file.size > this.options.maxFilesize * 1024 * 1024) {\n\t\t\t\treturn done(this.options.dictFileTooBig.replace(\"{{filesize}}\", Math.round(file.size / 1024 / 10.24) / 100).replace(\"{{maxFilesize}}\", this.options.maxFilesize));\n\t\t\t} else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {\n\t\t\t\treturn done(this.options.dictInvalidFileType);\n\t\t\t} else if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n\t\t\t\tdone(this.options.dictMaxFilesExceeded.replace(\"{{maxFiles}}\", this.options.maxFiles));\n\t\t\t\treturn this.emit(\"maxfilesexceeded\", file);\n\t\t\t} else {\n\t\t\t\treturn this.options.accept.call(this, file, done);\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype.addFile = function(file) {\n\t\t\tfile.upload = {\n\t\t\t\tprogress: 0,\n\t\t\t\ttotal: file.size,\n\t\t\t\tbytesSent: 0\n\t\t\t};\n\t\t\tthis.files.push(file);\n\t\t\tfile.status = Dropzone.ADDED;\n\t\t\tthis.emit(\"addedfile\", file);\n\t\t\tthis._enqueueThumbnail(file);\n\t\t\treturn this.accept(file, (function(_this) {\n\t\t\t\treturn function(error) {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tfile.accepted = false;\n\t\t\t\t\t\t_this._errorProcessing([file], error);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfile.accepted = true;\n\t\t\t\t\t\tif (_this.options.autoQueue) {\n\t\t\t\t\t\t\t_this.enqueueFile(file);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn _this._updateMaxFilesReachedClass();\n\t\t\t\t};\n\t\t\t})(this));\n\t\t};\n\n\t\tDropzone.prototype.enqueueFiles = function(files) {\n\t\t\tvar file, _i, _len;\n\t\t\tfor (_i = 0, _len = files.length; _i < _len; _i++) {\n\t\t\t\tfile = files[_i];\n\t\t\t\tthis.enqueueFile(file);\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\tDropzone.prototype.enqueueFile = function(file) {\n\t\t\tif (file.status === Dropzone.ADDED && file.accepted === true) {\n\t\t\t\tfile.status = Dropzone.QUEUED;\n\t\t\t\tif (this.options.autoProcessQueue) {\n\t\t\t\t\treturn setTimeout(((function(_this) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\treturn _this.processQueue();\n\t\t\t\t\t\t};\n\t\t\t\t\t})(this)), 0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"This file can't be queued because it has already been processed or was rejected.\");\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype._thumbnailQueue = [];\n\n\t\tDropzone.prototype._processingThumbnail = false;\n\n\t\tDropzone.prototype._enqueueThumbnail = function(file) {\n\t\t\tif (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\n\t\t\t\tthis._thumbnailQueue.push(file);\n\t\t\t\treturn setTimeout(((function(_this) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\treturn _this._processThumbnailQueue();\n\t\t\t\t\t};\n\t\t\t\t})(this)), 0);\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype._processThumbnailQueue = function() {\n\t\t\tif (this._processingThumbnail || this._thumbnailQueue.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._processingThumbnail = true;\n\t\t\treturn this.createThumbnail(this._thumbnailQueue.shift(), (function(_this) {\n\t\t\t\treturn function() {\n\t\t\t\t\t_this._processingThumbnail = false;\n\t\t\t\t\treturn _this._processThumbnailQueue();\n\t\t\t\t};\n\t\t\t})(this));\n\t\t};\n\n\t\tDropzone.prototype.removeFile = function(file) {\n\t\t\tif (file.status === Dropzone.UPLOADING) {\n\t\t\t\tthis.cancelUpload(file);\n\t\t\t}\n\t\t\tthis.files = without(this.files, file);\n\t\t\tthis.emit(\"removedfile\", file);\n\t\t\tif (this.files.length === 0) {\n\t\t\t\treturn this.emit(\"reset\");\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype.removeAllFiles = function(cancelIfNecessary) {\n\t\t\tvar file, _i, _len, _ref;\n\t\t\tif (cancelIfNecessary == null) {\n\t\t\t\tcancelIfNecessary = false;\n\t\t\t}\n\t\t\t_ref = this.files.slice();\n\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\tfile = _ref[_i];\n\t\t\t\tif (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {\n\t\t\t\t\tthis.removeFile(file);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\tDropzone.prototype.createThumbnail = function(file, callback) {\n\t\t\tvar fileReader;\n\t\t\tfileReader = new FileReader;\n\t\t\tfileReader.onload = (function(_this) {\n\t\t\t\treturn function() {\n\t\t\t\t\tif (file.type === \"image/svg+xml\") {\n\t\t\t\t\t\t_this.emit(\"thumbnail\", file, fileReader.result);\n\t\t\t\t\t\tif (callback != null) {\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\treturn _this.createThumbnailFromUrl(file, fileReader.result, callback);\n\t\t\t\t};\n\t\t\t})(this);\n\t\t\treturn fileReader.readAsDataURL(file);\n\t\t};\n\n\t\tDropzone.prototype.createThumbnailFromUrl = function(file, imageUrl, callback, crossOrigin) {\n\t\t\tvar img;\n\t\t\timg = document.createElement(\"img\");\n\t\t\tif (crossOrigin) {\n\t\t\t\timg.crossOrigin = crossOrigin;\n\t\t\t}\n\t\t\timg.onload = (function(_this) {\n\t\t\t\treturn function() {\n\t\t\t\t\tvar canvas, ctx, resizeInfo, thumbnail, _ref, _ref1, _ref2, _ref3;\n\t\t\t\t\tfile.width = img.width;\n\t\t\t\t\tfile.height = img.height;\n\t\t\t\t\tresizeInfo = _this.options.resize.call(_this, file);\n\t\t\t\t\tif (resizeInfo.trgWidth == null) {\n\t\t\t\t\t\tresizeInfo.trgWidth = resizeInfo.optWidth;\n\t\t\t\t\t}\n\t\t\t\t\tif (resizeInfo.trgHeight == null) {\n\t\t\t\t\t\tresizeInfo.trgHeight = resizeInfo.optHeight;\n\t\t\t\t\t}\n\t\t\t\t\tcanvas = document.createElement(\"canvas\");\n\t\t\t\t\tctx = canvas.getContext(\"2d\");\n\t\t\t\t\tcanvas.width = resizeInfo.trgWidth;\n\t\t\t\t\tcanvas.height = resizeInfo.trgHeight;\n\t\t\t\t\tdrawImageIOSFix(ctx, img, (_ref = resizeInfo.srcX) != null ? _ref : 0, (_ref1 = resizeInfo.srcY) != null ? _ref1 : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, (_ref2 = resizeInfo.trgX) != null ? _ref2 : 0, (_ref3 = resizeInfo.trgY) != null ? _ref3 : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);\n\t\t\t\t\tthumbnail = canvas.toDataURL(\"image/png\");\n\t\t\t\t\t_this.emit(\"thumbnail\", file, thumbnail);\n\t\t\t\t\tif (callback != null) {\n\t\t\t\t\t\treturn callback();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t})(this);\n\t\t\tif (callback != null) {\n\t\t\t\timg.onerror = callback;\n\t\t\t}\n\t\t\treturn img.src = imageUrl;\n\t\t};\n\n\t\tDropzone.prototype.processQueue = function() {\n\t\t\tvar i, parallelUploads, processingLength, queuedFiles;\n\t\t\tparallelUploads = this.options.parallelUploads;\n\t\t\tprocessingLength = this.getUploadingFiles().length;\n\t\t\ti = processingLength;\n\t\t\tif (processingLength >= parallelUploads) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tqueuedFiles = this.getQueuedFiles();\n\t\t\tif (!(queuedFiles.length > 0)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.options.uploadMultiple) {\n\t\t\t\treturn this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));\n\t\t\t} else {\n\t\t\t\twhile (i < parallelUploads) {\n\t\t\t\t\tif (!queuedFiles.length) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.processFile(queuedFiles.shift());\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype.processFile = function(file) {\n\t\t\treturn this.processFiles([file]);\n\t\t};\n\n\t\tDropzone.prototype.processFiles = function(files) {\n\t\t\tvar file, _i, _len;\n\t\t\tfor (_i = 0, _len = files.length; _i < _len; _i++) {\n\t\t\t\tfile = files[_i];\n\t\t\t\tfile.processing = true;\n\t\t\t\tfile.status = Dropzone.UPLOADING;\n\t\t\t\tthis.emit(\"processing\", file);\n\t\t\t}\n\t\t\tif (this.options.uploadMultiple) {\n\t\t\t\tthis.emit(\"processingmultiple\", files);\n\t\t\t}\n\t\t\treturn this.uploadFiles(files);\n\t\t};\n\n\t\tDropzone.prototype._getFilesWithXhr = function(xhr) {\n\t\t\tvar file, files;\n\t\t\treturn files = (function() {\n\t\t\t\tvar _i, _len, _ref, _results;\n\t\t\t\t_ref = this.files;\n\t\t\t\t_results = [];\n\t\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\tfile = _ref[_i];\n\t\t\t\t\tif (file.xhr === xhr) {\n\t\t\t\t\t\t_results.push(file);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _results;\n\t\t\t}).call(this);\n\t\t};\n\n\t\tDropzone.prototype.cancelUpload = function(file) {\n\t\t\tvar groupedFile, groupedFiles, _i, _j, _len, _len1, _ref;\n\t\t\tif (file.status === Dropzone.UPLOADING) {\n\t\t\t\tgroupedFiles = this._getFilesWithXhr(file.xhr);\n\t\t\t\tfor (_i = 0, _len = groupedFiles.length; _i < _len; _i++) {\n\t\t\t\t\tgroupedFile = groupedFiles[_i];\n\t\t\t\t\tgroupedFile.status = Dropzone.CANCELED;\n\t\t\t\t}\n\t\t\t\tfile.xhr.abort();\n\t\t\t\tfor (_j = 0, _len1 = groupedFiles.length; _j < _len1; _j++) {\n\t\t\t\t\tgroupedFile = groupedFiles[_j];\n\t\t\t\t\tthis.emit(\"canceled\", groupedFile);\n\t\t\t\t}\n\t\t\t\tif (this.options.uploadMultiple) {\n\t\t\t\t\tthis.emit(\"canceledmultiple\", groupedFiles);\n\t\t\t\t}\n\t\t\t} else if ((_ref = file.status) === Dropzone.ADDED || _ref === Dropzone.QUEUED) {\n\t\t\t\tfile.status = Dropzone.CANCELED;\n\t\t\t\tthis.emit(\"canceled\", file);\n\t\t\t\tif (this.options.uploadMultiple) {\n\t\t\t\t\tthis.emit(\"canceledmultiple\", [file]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.options.autoProcessQueue) {\n\t\t\t\treturn this.processQueue();\n\t\t\t}\n\t\t};\n\n\t\tresolveOption = function() {\n\t\t\tvar args, option;\n\t\t\toption = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\t\t\tif (typeof option === 'function') {\n\t\t\t\treturn option.apply(this, args);\n\t\t\t}\n\t\t\treturn option;\n\t\t};\n\n\t\tDropzone.prototype.uploadFile = function(file) {\n\t\t\treturn this.uploadFiles([file]);\n\t\t};\n\n\t\tDropzone.prototype.uploadFiles = function(files) {\n\t\t\tvar file, formData, handleError, headerName, headerValue, headers, i, input, inputName, inputType, key, method, option, progressObj, response, updateProgress, url, value, xhr, _i, _j, _k, _l, _len, _len1, _len2, _len3, _m, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;\n\t\t\txhr = new XMLHttpRequest();\n\t\t\tfor (_i = 0, _len = files.length; _i < _len; _i++) {\n\t\t\t\tfile = files[_i];\n\t\t\t\tfile.xhr = xhr;\n\t\t\t}\n\t\t\tmethod = resolveOption(this.options.method, files);\n\t\t\turl = resolveOption(this.options.url, files);\n\t\t\txhr.open(method, url, true);\n\t\t\txhr.withCredentials = !!this.options.withCredentials;\n\t\t\tresponse = null;\n\t\t\thandleError = (function(_this) {\n\t\t\t\treturn function() {\n\t\t\t\t\tvar _j, _len1, _results;\n\t\t\t\t\t_results = [];\n\t\t\t\t\tfor (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n\t\t\t\t\t\tfile = files[_j];\n\t\t\t\t\t\t_results.push(_this._errorProcessing(files, response || _this.options.dictResponseError.replace(\"{{statusCode}}\", xhr.status), xhr));\n\t\t\t\t\t}\n\t\t\t\t\treturn _results;\n\t\t\t\t};\n\t\t\t})(this);\n\t\t\tupdateProgress = (function(_this) {\n\t\t\t\treturn function(e) {\n\t\t\t\t\tvar allFilesFinished, progress, _j, _k, _l, _len1, _len2, _len3, _results;\n\t\t\t\t\tif (e != null) {\n\t\t\t\t\t\tprogress = 100 * e.loaded / e.total;\n\t\t\t\t\t\tfor (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n\t\t\t\t\t\t\tfile = files[_j];\n\t\t\t\t\t\t\tfile.upload = {\n\t\t\t\t\t\t\t\tprogress: progress,\n\t\t\t\t\t\t\t\ttotal: e.total,\n\t\t\t\t\t\t\t\tbytesSent: e.loaded\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tallFilesFinished = true;\n\t\t\t\t\t\tprogress = 100;\n\t\t\t\t\t\tfor (_k = 0, _len2 = files.length; _k < _len2; _k++) {\n\t\t\t\t\t\t\tfile = files[_k];\n\t\t\t\t\t\t\tif (!(file.upload.progress === 100 && file.upload.bytesSent === file.upload.total)) {\n\t\t\t\t\t\t\t\tallFilesFinished = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfile.upload.progress = progress;\n\t\t\t\t\t\t\tfile.upload.bytesSent = file.upload.total;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (allFilesFinished) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t_results = [];\n\t\t\t\t\tfor (_l = 0, _len3 = files.length; _l < _len3; _l++) {\n\t\t\t\t\t\tfile = files[_l];\n\t\t\t\t\t\t_results.push(_this.emit(\"uploadprogress\", file, progress, file.upload.bytesSent));\n\t\t\t\t\t}\n\t\t\t\t\treturn _results;\n\t\t\t\t};\n\t\t\t})(this);\n\t\t\txhr.onload = (function(_this) {\n\t\t\t\treturn function(e) {\n\t\t\t\t\tvar _ref;\n\t\t\t\t\tif (files[0].status === Dropzone.CANCELED) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (xhr.readyState !== 4) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresponse = xhr.responseText;\n\t\t\t\t\tif (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = JSON.parse(response);\n\t\t\t\t\t\t} catch (_error) {\n\t\t\t\t\t\t\te = _error;\n\t\t\t\t\t\t\tresponse = \"Invalid JSON response from server.\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tupdateProgress();\n\t\t\t\t\tif (!((200 <= (_ref = xhr.status) && _ref < 300))) {\n\t\t\t\t\t\treturn handleError();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn _this._finished(files, response, e);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t})(this);\n\t\t\txhr.onerror = (function(_this) {\n\t\t\t\treturn function() {\n\t\t\t\t\tif (files[0].status === Dropzone.CANCELED) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\treturn handleError();\n\t\t\t\t};\n\t\t\t})(this);\n\t\t\tprogressObj = (_ref = xhr.upload) != null ? _ref : xhr;\n\t\t\tprogressObj.onprogress = updateProgress;\n\t\t\theaders = {\n\t\t\t\t\"Accept\": \"application/json\",\n\t\t\t\t\"Cache-Control\": \"no-cache\",\n\t\t\t\t\"X-Requested-With\": \"XMLHttpRequest\"\n\t\t\t};\n\t\t\tif (this.options.headers) {\n\t\t\t\textend(headers, this.options.headers);\n\t\t\t}\n\t\t\tfor (headerName in headers) {\n\t\t\t\theaderValue = headers[headerName];\n\t\t\t\tif (headerValue) {\n\t\t\t\t\txhr.setRequestHeader(headerName, headerValue);\n\t\t\t\t}\n\t\t\t}\n\t\t\tformData = new FormData();\n\t\t\tif (this.options.params) {\n\t\t\t\t_ref1 = this.options.params;\n\t\t\t\tfor (key in _ref1) {\n\t\t\t\t\tvalue = _ref1[key];\n\t\t\t\t\tformData.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n\t\t\t\tfile = files[_j];\n\t\t\t\tthis.emit(\"sending\", file, xhr, formData);\n\t\t\t}\n\t\t\tif (this.options.uploadMultiple) {\n\t\t\t\tthis.emit(\"sendingmultiple\", files, xhr, formData);\n\t\t\t}\n\t\t\tif (this.element.tagName === \"FORM\") {\n\t\t\t\t_ref2 = this.element.querySelectorAll(\"input, textarea, select, button\");\n\t\t\t\tfor (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n\t\t\t\t\tinput = _ref2[_k];\n\t\t\t\t\tinputName = input.getAttribute(\"name\");\n\t\t\t\t\tinputType = input.getAttribute(\"type\");\n\t\t\t\t\tif (input.tagName === \"SELECT\" && input.hasAttribute(\"multiple\")) {\n\t\t\t\t\t\t_ref3 = input.options;\n\t\t\t\t\t\tfor (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {\n\t\t\t\t\t\t\toption = _ref3[_l];\n\t\t\t\t\t\t\tif (option.selected) {\n\t\t\t\t\t\t\t\tformData.append(inputName, option.value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (!inputType || ((_ref4 = inputType.toLowerCase()) !== \"checkbox\" && _ref4 !== \"radio\") || input.checked) {\n\t\t\t\t\t\tformData.append(inputName, input.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (i = _m = 0, _ref5 = files.length - 1; 0 <= _ref5 ? _m <= _ref5 : _m >= _ref5; i = 0 <= _ref5 ? ++_m : --_m) {\n\t\t\t\tformData.append(this._getParamName(i), files[i], this._renameFilename(files[i].name));\n\t\t\t}\n\t\t\treturn this.submitRequest(xhr, formData, files);\n\t\t};\n\n\t\tDropzone.prototype.submitRequest = function(xhr, formData, files) {\n\t\t\treturn xhr.send(formData);\n\t\t};\n\n\t\tDropzone.prototype._finished = function(files, responseText, e) {\n\t\t\tvar file, _i, _len;\n\t\t\tfor (_i = 0, _len = files.length; _i < _len; _i++) {\n\t\t\t\tfile = files[_i];\n\t\t\t\tfile.status = Dropzone.SUCCESS;\n\t\t\t\tthis.emit(\"success\", file, responseText, e);\n\t\t\t\tthis.emit(\"complete\", file);\n\t\t\t}\n\t\t\tif (this.options.uploadMultiple) {\n\t\t\t\tthis.emit(\"successmultiple\", files, responseText, e);\n\t\t\t\tthis.emit(\"completemultiple\", files);\n\t\t\t}\n\t\t\tif (this.options.autoProcessQueue) {\n\t\t\t\treturn this.processQueue();\n\t\t\t}\n\t\t};\n\n\t\tDropzone.prototype._errorProcessing = function(files, message, xhr) {\n\t\t\tvar file, _i, _len;\n\t\t\tfor (_i = 0, _len = files.length; _i < _len; _i++) {\n\t\t\t\tfile = files[_i];\n\t\t\t\tfile.status = Dropzone.ERROR;\n\t\t\t\tthis.emit(\"error\", file, message, xhr);\n\t\t\t\tthis.emit(\"complete\", file);\n\t\t\t}\n\t\t\tif (this.options.uploadMultiple) {\n\t\t\t\tthis.emit(\"errormultiple\", files, message, xhr);\n\t\t\t\tthis.emit(\"completemultiple\", files);\n\t\t\t}\n\t\t\tif (this.options.autoProcessQueue) {\n\t\t\t\treturn this.processQueue();\n\t\t\t}\n\t\t};\n\n\t\treturn Dropzone;\n\n\t})(Emitter);\n\n\tDropzone.version = \"4.3.0\";\n\n\tDropzone.options = {};\n\n\tDropzone.optionsForElement = function(element) {\n\t\tif (element.getAttribute(\"id\")) {\n\t\t\treturn Dropzone.options[camelize(element.getAttribute(\"id\"))];\n\t\t} else {\n\t\t\treturn void 0;\n\t\t}\n\t};\n\n\tDropzone.instances = [];\n\n\tDropzone.forElement = function(element) {\n\t\tif (typeof element === \"string\") {\n\t\t\telement = document.querySelector(element);\n\t\t}\n\t\tif ((element != null ? element.dropzone : void 0) == null) {\n\t\t\tthrow new Error(\"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.\");\n\t\t}\n\t\treturn element.dropzone;\n\t};\n\n\tDropzone.autoDiscover = true;\n\n\tDropzone.discover = function() {\n\t\tvar checkElements, dropzone, dropzones, _i, _len, _results;\n\t\tif (document.querySelectorAll) {\n\t\t\tdropzones = document.querySelectorAll(\".dropzone\");\n\t\t} else {\n\t\t\tdropzones = [];\n\t\t\tcheckElements = function(elements) {\n\t\t\t\tvar el, _i, _len, _results;\n\t\t\t\t_results = [];\n\t\t\t\tfor (_i = 0, _len = elements.length; _i < _len; _i++) {\n\t\t\t\t\tel = elements[_i];\n\t\t\t\t\tif (/(^| )dropzone($| )/.test(el.className)) {\n\t\t\t\t\t\t_results.push(dropzones.push(el));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_results.push(void 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _results;\n\t\t\t};\n\t\t\tcheckElements(document.getElementsByTagName(\"div\"));\n\t\t\tcheckElements(document.getElementsByTagName(\"form\"));\n\t\t}\n\t\t_results = [];\n\t\tfor (_i = 0, _len = dropzones.length; _i < _len; _i++) {\n\t\t\tdropzone = dropzones[_i];\n\t\t\tif (Dropzone.optionsForElement(dropzone) !== false) {\n\t\t\t\t_results.push(new Dropzone(dropzone));\n\t\t\t} else {\n\t\t\t\t_results.push(void 0);\n\t\t\t}\n\t\t}\n\t\treturn _results;\n\t};\n\n\tDropzone.blacklistedBrowsers = [/opera.*Macintosh.*version\\/12/i];\n\n\tDropzone.isBrowserSupported = function() {\n\t\tvar capableBrowser, regex, _i, _len, _ref;\n\t\tcapableBrowser = true;\n\t\tif (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {\n\t\t\tif (!(\"classList\" in document.createElement(\"a\"))) {\n\t\t\t\tcapableBrowser = false;\n\t\t\t} else {\n\t\t\t\t_ref = Dropzone.blacklistedBrowsers;\n\t\t\t\tfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t\t\t\t\tregex = _ref[_i];\n\t\t\t\t\tif (regex.test(navigator.userAgent)) {\n\t\t\t\t\t\tcapableBrowser = false;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tcapableBrowser = false;\n\t\t}\n\t\treturn capableBrowser;\n\t};\n\n\twithout = function(list, rejectedItem) {\n\t\tvar item, _i, _len, _results;\n\t\t_results = [];\n\t\tfor (_i = 0, _len = list.length; _i < _len; _i++) {\n\t\t\titem = list[_i];\n\t\t\tif (item !== rejectedItem) {\n\t\t\t\t_results.push(item);\n\t\t\t}\n\t\t}\n\t\treturn _results;\n\t};\n\n\tcamelize = function(str) {\n\t\treturn str.replace(/[\\-_](\\w)/g, function(match) {\n\t\t\treturn match.charAt(1).toUpperCase();\n\t\t});\n\t};\n\n\tDropzone.createElement = function(string) {\n\t\tvar div;\n\t\tdiv = document.createElement(\"div\");\n\t\tdiv.innerHTML = string;\n\t\treturn div.childNodes[0];\n\t};\n\n\tDropzone.elementInside = function(element, container) {\n\t\tif (element === container) {\n\t\t\treturn true;\n\t\t}\n\t\twhile (element = element.parentNode) {\n\t\t\tif (element === container) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\tDropzone.getElement = function(el, name) {\n\t\tvar element;\n\t\tif (typeof el === \"string\") {\n\t\t\telement = document.querySelector(el);\n\t\t} else if (el.nodeType != null) {\n\t\t\telement = el;\n\t\t}\n\t\tif (element == null) {\n\t\t\tthrow new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector or a plain HTML element.\");\n\t\t}\n\t\treturn element;\n\t};\n\n\tDropzone.getElements = function(els, name) {\n\t\tvar e, el, elements, _i, _j, _len, _len1, _ref;\n\t\tif (els instanceof Array) {\n\t\t\telements = [];\n\t\t\ttry {\n\t\t\t\tfor (_i = 0, _len = els.length; _i < _len; _i++) {\n\t\t\t\t\tel = els[_i];\n\t\t\t\t\telements.push(this.getElement(el, name));\n\t\t\t\t}\n\t\t\t} catch (_error) {\n\t\t\t\te = _error;\n\t\t\t\telements = null;\n\t\t\t}\n\t\t} else if (typeof els === \"string\") {\n\t\t\telements = [];\n\t\t\t_ref = document.querySelectorAll(els);\n\t\t\tfor (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {\n\t\t\t\tel = _ref[_j];\n\t\t\t\telements.push(el);\n\t\t\t}\n\t\t} else if (els.nodeType != null) {\n\t\t\telements = [els];\n\t\t}\n\t\tif (!((elements != null) && elements.length)) {\n\t\t\tthrow new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.\");\n\t\t}\n\t\treturn elements;\n\t};\n\n\tDropzone.confirm = function(question, accepted, rejected) {\n\t\tif (window.confirm(question)) {\n\t\t\treturn accepted();\n\t\t} else if (rejected != null) {\n\t\t\treturn rejected();\n\t\t}\n\t};\n\n\tDropzone.isValidFile = function(file, acceptedFiles) {\n\t\tvar baseMimeType, mimeType, validType, _i, _len;\n\t\tif (!acceptedFiles) {\n\t\t\treturn true;\n\t\t}\n\t\tacceptedFiles = acceptedFiles.split(\",\");\n\t\tmimeType = file.type;\n\t\tbaseMimeType = mimeType.replace(/\\/.*$/, \"\");\n\t\tfor (_i = 0, _len = acceptedFiles.length; _i < _len; _i++) {\n\t\t\tvalidType = acceptedFiles[_i];\n\t\t\tvalidType = validType.trim();\n\t\t\tif (validType.charAt(0) === \".\") {\n\t\t\t\tif (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else if (/\\/\\*$/.test(validType)) {\n\t\t\t\tif (baseMimeType === validType.replace(/\\/.*$/, \"\")) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (mimeType === validType) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\tif (typeof jQuery !== \"undefined\" && jQuery !== null) {\n\t\tjQuery.fn.dropzone = function(options) {\n\t\t\treturn this.each(function() {\n\t\t\t\treturn new Dropzone(this, options);\n\t\t\t});\n\t\t};\n\t}\n\n\tif (typeof module !== \"undefined\" && module !== null) {\n\t\tmodule.exports = Dropzone;\n\t} else {\n\t\twindow.Dropzone = Dropzone;\n\t}\n\n\tDropzone.ADDED = \"added\";\n\n\tDropzone.QUEUED = \"queued\";\n\n\tDropzone.ACCEPTED = Dropzone.QUEUED;\n\n\tDropzone.UPLOADING = \"uploading\";\n\n\tDropzone.PROCESSING = Dropzone.UPLOADING;\n\n\tDropzone.CANCELED = \"canceled\";\n\n\tDropzone.ERROR = \"error\";\n\n\tDropzone.SUCCESS = \"success\";\n\n\n\t/*\n\n\t Bugfix for iOS 6 and 7\n\t Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n\t based on the work of https://github.com/stomita/ios-imagefile-megapixel\n\t */\n\n\tdetectVerticalSquash = function(img) {\n\t\tvar alpha, canvas, ctx, data, ey, ih, iw, py, ratio, sy;\n\t\tiw = img.naturalWidth;\n\t\tih = img.naturalHeight;\n\t\tcanvas = document.createElement(\"canvas\");\n\t\tcanvas.width = 1;\n\t\tcanvas.height = ih;\n\t\tctx = canvas.getContext(\"2d\");\n\t\tctx.drawImage(img, 0, 0);\n\t\tdata = ctx.getImageData(0, 0, 1, ih).data;\n\t\tsy = 0;\n\t\tey = ih;\n\t\tpy = ih;\n\t\twhile (py > sy) {\n\t\t\talpha = data[(py - 1) * 4 + 3];\n\t\t\tif (alpha === 0) {\n\t\t\t\tey = py;\n\t\t\t} else {\n\t\t\t\tsy = py;\n\t\t\t}\n\t\t\tpy = (ey + sy) >> 1;\n\t\t}\n\t\tratio = py / ih;\n\t\tif (ratio === 0) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn ratio;\n\t\t}\n\t};\n\n\tdrawImageIOSFix = function(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\n\t\tvar vertSquashRatio;\n\t\tvertSquashRatio = detectVerticalSquash(img);\n\t\treturn ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n\t};\n\n\n\t/*\n\t * contentloaded.js\n\t *\n\t * Author: Diego Perini (diego.perini at gmail.com)\n\t * Summary: cross-browser wrapper for DOMContentLoaded\n\t * Updated: 20101020\n\t * License: MIT\n\t * Version: 1.2\n\t *\n\t * URL:\n\t * http://javascript.nwbox.com/ContentLoaded/\n\t * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE\n\t */\n\n\tcontentLoaded = function(win, fn) {\n\t\tvar add, doc, done, init, poll, pre, rem, root, top;\n\t\tdone = false;\n\t\ttop = true;\n\t\tdoc = win.document;\n\t\troot = doc.documentElement;\n\t\tadd = (doc.addEventListener ? \"addEventListener\" : \"attachEvent\");\n\t\trem = (doc.addEventListener ? \"removeEventListener\" : \"detachEvent\");\n\t\tpre = (doc.addEventListener ? \"\" : \"on\");\n\t\tinit = function(e) {\n\t\t\tif (e.type === \"readystatechange\" && doc.readyState !== \"complete\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t(e.type === \"load\" ? win : doc)[rem](pre + e.type, init, false);\n\t\t\tif (!done && (done = true)) {\n\t\t\t\treturn fn.call(win, e.type || e);\n\t\t\t}\n\t\t};\n\t\tpoll = function() {\n\t\t\tvar e;\n\t\t\ttry {\n\t\t\t\troot.doScroll(\"left\");\n\t\t\t} catch (_error) {\n\t\t\t\te = _error;\n\t\t\t\tsetTimeout(poll, 50);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn init(\"poll\");\n\t\t};\n\t\tif (doc.readyState !== \"complete\") {\n\t\t\tif (doc.createEventObject && root.doScroll) {\n\t\t\t\ttry {\n\t\t\t\t\ttop = !win.frameElement;\n\t\t\t\t} catch (_error) {}\n\t\t\t\tif (top) {\n\t\t\t\t\tpoll();\n\t\t\t\t}\n\t\t\t}\n\t\t\tdoc[add](pre + \"DOMContentLoaded\", init, false);\n\t\t\tdoc[add](pre + \"readystatechange\", init, false);\n\t\t\treturn win[add](pre + \"load\", init, false);\n\t\t}\n\t};\n\n\tDropzone._autoDiscoverFunction = function() {\n\t\tif (Dropzone.autoDiscover) {\n\t\t\treturn Dropzone.discover();\n\t\t}\n\t};\n\n\tcontentLoaded(window, Dropzone._autoDiscoverFunction);\n\n}).call(this);\n","/**\n * Fab Controller\n *\n * @package FAB.controller\n * @author TJ Draper <tj@buzzingpixel.com>\n * @version 1.0.2\n */\n\n// Make sure FAB is defined\nwindow.ANSEL = window.ANSEL || {};\n\n(function(F, jQuery) {\n\t'use strict';\n\n\t// A place to store constructors\n\tvar constructors = {};\n\n\t// A place to store constructed objects\n\tvar constructed = [];\n\n\t/**\n\t * Make a controller constructor\n\t *\n\t * @param {String|Object} fn - Name of constructor or options to return constructor only\n\t * @param {Object} obj - Options\n\t * @return {Constructor}\n\t */\n\tvar createConstructor = function(fn, obj) {\n\t\t// Constructor variable\n\t\tvar constructor;\n\n\t\t// Determine type of first argument\n\t\tif (typeof fn === 'object') {\n\t\t\tobj = fn;\n\t\t\tfn = null;\n\t\t} else if (typeof fn !== 'string') {\n\t\t\tobj = {};\n\t\t\tfn = null;\n\t\t}\n\n\t\t/**\n\t\t * Create a constructor\n\t\t *\n\t\t * @param {Object|boolean|null} optObj\n\t\t */\n\t\tconstructor = function(optObj) {\n\t\t\t// Set a variable for this\n\t\t\tvar thisObj = this;\n\n\t\t\t// Clone the object\n\t\t\tvar newObj = $.extend(true, {}, obj);\n\n\t\t\t// Set iterator key\n\t\t\tvar i;\n\n\t\t\t// Set model var\n\t\t\tvar ControllerModel;\n\n\t\t\t// Loop through the options and set them\n\t\t\tfor (i in newObj) {\n\t\t\t\tif (newObj.hasOwnProperty(i)) {\n\t\t\t\t\tthisObj[i] = newObj[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Loop through incoming options and set them\n\t\t\tif (typeof optObj === 'object') {\n\t\t\t\tfor (i in optObj) {\n\t\t\t\t\tif (optObj.hasOwnProperty(i)) {\n\t\t\t\t\t\tthisObj[i] = optObj[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if el or $el has been set\n\t\t\tif (! thisObj.el) {\n\t\t\t\tthisObj.$el = $('<div></div>');\n\t\t\t\tthisObj.el = thisObj.$el.get(0);\n\n\t\t\t\t// If the incoming el is a string, use as selector\n\t\t\t} else if (typeof thisObj.el === 'string') {\n\t\t\t\tthisObj.$el = $(thisObj.el);\n\t\t\t\tthisObj.el = thisObj.$el.get(0);\n\n\t\t\t\t// Check if the incoming el is a jQuery object\n\t\t\t} else if (thisObj.el instanceof jQuery) {\n\t\t\t\tthisObj.$el = thisObj.el;\n\t\t\t\tthisObj.el = thisObj.$el.get(0);\n\n\t\t\t\t// Check if the incoming el is a DOM object\n\t\t\t} else if (thisObj.el instanceof HTMLElement) {\n\t\t\t\tthisObj.$el = $(thisObj.el);\n\t\t\t}\n\n\t\t\t// Check if model is set\n\t\t\tif (typeof thisObj.model === 'object' && typeof F.model !== 'undefined') {\n\t\t\t\tif (! F.model.validateGuid(thisObj.model.guid)) {\n\t\t\t\t\tControllerModel = F.model.make(thisObj.model);\n\t\t\t\t\tthisObj.model = new ControllerModel();\n\t\t\t\t}\n\t\t\t} else if (this.model !== undefined) {\n\t\t\t\tthisObj.model = null;\n\t\t\t}\n\n\t\t\t// Check for init\n\t\t\tif (typeof thisObj.init === 'function') {\n\t\t\t\t// Remove the first argument from the arguments\n\t\t\t\tArray.prototype.shift.apply(arguments);\n\n\t\t\t\t// Run the init function\n\t\t\t\tthisObj.init.apply(thisObj, arguments);\n\t\t\t}\n\n\t\t\t// Check if there are events\n\t\t\tif (typeof thisObj.events === 'object') {\n\t\t\t\t// Loop through the events\n\t\t\t\tfor (i in thisObj.events) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Make sure the object has own property\n\t\t\t\t\t\tthisObj.events.hasOwnProperty(i) &&\n\t\t\t\t\t\t// Make sure the value is a callable function\n\t\t\t\t\t\ttypeof thisObj.events[i] === 'function'\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Enclose in a function so we have immutable vars\n\t\t\t\t\t\t(function(key, callback) {\n\t\t\t\t\t\t\tif (key[1]) {\n\t\t\t\t\t\t\t\tthisObj.$el.on(key[0], key[1], function() {\n\t\t\t\t\t\t\t\t\tcallback.apply(thisObj, arguments);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisObj.$el.on(key[0], function() {\n\t\t\t\t\t\t\t\t\tcallback.apply(thisObj, arguments);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})(i.split(' '), thisObj.events[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// If a name has been defined for this constructor, add it\n\t\tif (fn) {\n\t\t\tconstructors[fn] = constructor;\n\t\t}\n\n\t\t// Return the constructor\n\t\treturn constructor;\n\t};\n\n\t/**\n\t * Controller API\n\t */\n\tF.controller = {\n\t\t/**\n\t\t * Make a controller constructor\n\t\t * @return {Constructor}\n\t\t */\n\t\tmake: function() {\n\t\t\treturn createConstructor.apply(createConstructor, arguments);\n\t\t},\n\n\t\t/**\n\t\t * Construct a new object from a constructor\n\t\t *\n\t\t * @param {String} name\n\t\t */\n\t\tconstruct: function(name) {\n\t\t\t// Set a variable for the constructed object\n\t\t\tvar constructedObj;\n\n\t\t\t// Make sure the constructor exists\n\t\t\tif (typeof constructors[name] !== 'function') {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Run the constructor\n\t\t\tconstructedObj = new (Function.prototype.bind.apply(\n\t\t\t\tconstructors[name], arguments)\n\t\t\t)();\n\n\t\t\t// Push the constructor into the array of constructed objects\n\t\t\tconstructed.push(constructedObj);\n\n\t\t\t// Return the constructed object\n\t\t\treturn constructedObj;\n\t\t}\n\t};\n})(window.ANSEL, window.jQuery);\n","/**\n * Fab Model\n *\n * @package FAB.model\n * @author TJ Draper <tj@buzzingpixel.com>\n * @version 1.0.0\n */\n\n// Make sure FAB is defined\nwindow.ANSEL = window.ANSEL || {};\n\n(function(F) {\n\t'use strict';\n\n\t// A place to store GUIDs\n\tvar guids = [];\n\n\t// Create GUID\n\tvar guid = function() {\n\t\tvar s4 = function() {\n\t\t\treturn Math.floor((1 + Math.random()) * 0x10000)\n\t\t\t\t.toString(16)\n\t\t\t\t.substring(1);\n\t\t};\n\n\t\treturn s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n\t\t\ts4() + '-' + s4() + s4() + s4();\n\t};\n\n\t/**\n\t * Make a model constructor\n\t *\n\t * @param {Object} attrs\n\t */\n\tvar createModelConstructor = function(attrs) {\n\t\t// Set a variable for the constructor\n\t\tvar constructor;\n\n\t\t// Make sure attrs is an object\n\t\tif (typeof attrs !== 'object') {\n\t\t\tattrs = {};\n\t\t}\n\n\t\t// Define the constructor\n\t\tconstructor = function(initialValues) {\n\t\t\t// Set a local variable for this\n\t\t\tvar thisObj = this;\n\n\t\t\t// Set GUID\n\t\t\tthisObj.guid = guid();\n\n\t\t\t// Push the GUID\n\t\t\tguids.push(thisObj.guid);\n\n\t\t\t// Set up properties\n\t\t\tthisObj.properties = {};\n\n\t\t\t// Set up property types\n\t\t\tthisObj.propertyTypes = attrs;\n\n\t\t\t// Set up change events\n\t\t\tthisObj.changeEvents = {};\n\n\t\t\t// Loop through property types and set change events objects\n\t\t\tfor (var prop in thisObj.propertyTypes) {\n\t\t\t\tif (thisObj.propertyTypes.hasOwnProperty(prop)) {\n\t\t\t\t\tthisObj.changeEvents[prop] = {};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set any initial values\n\t\t\tfor (var i in initialValues) {\n\t\t\t\tif (initialValues.hasOwnProperty(i)) {\n\t\t\t\t\tif (thisObj.propertyTypes[i] !== undefined) {\n\t\t\t\t\t\tthisObj.properties[i] = initialValues[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Set prototype methods\n\t\tconstructor.prototype = {\n\t\t\tget: function(name) {\n\t\t\t\tvar model = this;\n\n\t\t\t\tif (model.properties[name]) {\n\t\t\t\t\tif (model.propertyTypes[name] === 'int') {\n\t\t\t\t\t\treturn parseInt(model.properties[name]);\n\t\t\t\t\t} else if (model.propertyTypes[name] === 'float') {\n\t\t\t\t\t\treturn parseFloat(model.properties[name]);\n\t\t\t\t\t} else if (model.propertyTypes[name] === 'string') {\n\t\t\t\t\t\treturn String(model.properties[name]);\n\t\t\t\t\t} else if (model.propertyTypes[name] === 'bool') {\n\t\t\t\t\t\treturn model.properties[name] === true;\n\t\t\t\t\t} else if (model.propertyTypes[name] === 'array') {\n\t\t\t\t\t\tif (model.properties[name].constructor === Array) {\n\t\t\t\t\t\t\treturn model.properties[name];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (model.propertyTypes[name] === 'object') {\n\t\t\t\t\t\tif (model.properties[name].constructor === Object) {\n\t\t\t\t\t\t\treturn model.properties[name];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn {};\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (\n\t\t\t\t\t\tmodel.propertyTypes[name] === 'int' ||\n\t\t\t\t\t\tmodel.propertyTypes[name] === 'float'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t} else if (model.propertyTypes[name] === 'string') {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t} else if (model.propertyTypes[name] === 'bool') {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (model.propertyTypes[name] === 'array') {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t} else if (model.propertyTypes[name] === 'object') {\n\t\t\t\t\t\treturn {};\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tset: function(name, val) {\n\t\t\t\tvar model = this;\n\t\t\t\tvar changed = false;\n\t\t\t\tvar oldVal = model.properties[name];\n\t\t\t\tvar args;\n\n\t\t\t\tif (model.propertyTypes[name] === 'int') {\n\t\t\t\t\tmodel.properties[name] = parseInt(val);\n\t\t\t\t\tchanged = true;\n\t\t\t\t} else if (model.propertyTypes[name] === 'float') {\n\t\t\t\t\tmodel.properties[name] = parseFloat(val);\n\t\t\t\t\tchanged = true;\n\t\t\t\t} else if (model.propertyTypes[name] === 'string') {\n\t\t\t\t\tmodel.properties[name] = String(val);\n\t\t\t\t\tchanged = true;\n\t\t\t\t} else if (model.propertyTypes[name] === 'bool') {\n\t\t\t\t\tmodel.properties[name] = val === true || val === 'true' || val === 'yes' || val === 'y';\n\t\t\t\t\tchanged = true;\n\t\t\t\t} else if (model.propertyTypes[name] === 'array') {\n\t\t\t\t\tif (val.constructor === Array) {\n\t\t\t\t\t\tmodel.properties[name] = val;\n\t\t\t\t\t\tchanged = true;\n\t\t\t\t\t}\n\t\t\t\t} else if (model.propertyTypes[name] === 'object') {\n\t\t\t\t\tif (val.constructor === Object) {\n\t\t\t\t\t\tmodel.properties[name] = val;\n\t\t\t\t\t\tchanged = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (! changed || oldVal === model.properties[name] || model.changeEvents[name] === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\targs = [\n\t\t\t\t\tmodel.properties[name],\n\t\t\t\t\toldVal\n\t\t\t\t];\n\n\t\t\t\tfor (var i in model.changeEvents[name]) {\n\t\t\t\t\tmodel.changeEvents[name][i].forEach(function(callback) {\n\t\t\t\t\t\tcallback.apply(callback, args);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tonChange: function(name, callback) {\n\t\t\t\tvar model = this;\n\t\t\t\tvar key = name.split('.');\n\n\t\t\t\tif (model.propertyTypes[key[0]] !== undefined) {\n\t\t\t\t\tif (key[1] === undefined) {\n\t\t\t\t\t\tif (model.changeEvents[key[0]].noNameSpace === undefined) {\n\t\t\t\t\t\t\tmodel.changeEvents[key[0]].noNameSpace = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodel.changeEvents[key[0]].noNameSpace.push(callback);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (model.changeEvents[key[0]][key[1]] === undefined) {\n\t\t\t\t\t\t\tmodel.changeEvents[key[0]][key[1]] = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodel.changeEvents[key[0]][key[1]].push(callback);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\toffChange: function(name) {\n\t\t\t\tvar model = this;\n\t\t\t\tvar key = name.split('.');\n\n\t\t\t\tif (key[1] === undefined) {\n\t\t\t\t\tmodel.changeEvents[key[0]] = {};\n\t\t\t\t} else {\n\t\t\t\t\tdelete model.changeEvents[key[0]][key[1]];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Return the constructor\n\t\treturn constructor;\n\t};\n\n\t/**\n\t * Model API\n\t */\n\tF.model = {\n\t\t/**\n\t\t * Make a model constructor\n\t\t */\n\t\tmake: function() {\n\t\t\treturn createModelConstructor.apply(\n\t\t\t\tcreateModelConstructor,\n\t\t\t\targuments\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Validate GUID\n\t\t *\n\t\t * @param {String} guid\n\t\t */\n\t\tvalidateGuid: function(guid) {\n\t\t\treturn guids.indexOf(guid) > -1;\n\t\t}\n\t};\n})(window.ANSEL);\n","/* jshint ignore:start */\n// jscs:disable\n\n/*! JcropAnsel.js v2.0.4 - build: 20151117\n *  @copyright 2008-2015 Tapmodo Interactive LLC\n *  @license Free software under MIT License\n *  @website http://jcrop.org/\n **/\n(function($){\n  'use strict';\n\n  // JcropAnsel constructor\n  var JcropAnsel = function(element,opt){\n    var _ua = navigator.userAgent.toLowerCase();\n\n    this.opt = $.extend({},JcropAnsel.defaults,opt || {});\n\n    this.container = $(element);\n\n    this.opt.is_msie = /msie/.test(_ua);\n    this.opt.is_ie_lt9 = /msie [1-8]\\./.test(_ua);\n\n    this.container.addClass(this.opt.css_container);\n\n    this.ui = {};\n    this.state = null;\n    this.ui.multi = [];\n    this.ui.selection = null;\n    this.filter = {};\n\n    this.init();\n    this.setOptions(opt);\n    this.applySizeConstraints();\n    this.container.trigger('cropinit',this);\n\n    // IE<9 doesn't work if mouse events are attached to window\n    if (this.opt.is_ie_lt9)\n      this.opt.dragEventTarget = document.body;\n  };\n\n\n  // JcropAnsel static functions\n  $.extend(JcropAnsel,{\n    component: { },\n    filter: { },\n    stage: { },\n    registerComponent: function(name,component){\n      JcropAnsel.component[name] = component;\n    },\n    registerFilter: function(name,filter){\n      JcropAnsel.filter[name] = filter;\n    },\n    registerStageType: function(name,stage){\n      JcropAnsel.stage[name] = stage;\n    },\n    // attach: function(element,opt){{{\n    attach: function(element,opt){\n      var obj = new $.JcropAnsel(element,opt);\n      return obj;\n    },\n    // }}}\n    // imgCopy: function(imgel){{{\n    imgCopy: function(imgel){\n      var img = new Image;\n      img.src = imgel.src;\n      return img;\n    },\n    // }}}\n    // imageClone: function(imgel){{{\n    imageClone: function(imgel){\n      return $.JcropAnsel.supportsCanvas?\n        JcropAnsel.canvasClone(imgel):\n        JcropAnsel.imgCopy(imgel);\n    },\n    // }}}\n    // canvasClone: function(imgel){{{\n    canvasClone: function(imgel){\n      var canvas = document.createElement('canvas'),\n          ctx = canvas.getContext('2d');\n\n      $(canvas).width(imgel.width).height(imgel.height),\n      canvas.width = imgel.naturalWidth;\n      canvas.height = imgel.naturalHeight;\n      ctx.drawImage(imgel,0,0,imgel.naturalWidth,imgel.naturalHeight);\n      return canvas;\n    },\n    // }}}\n    // propagate: function(plist,config,obj){{{\n    propagate: function(plist,config,obj){\n      for(var i=0,l=plist.length;i<l;i++)\n        if (config.hasOwnProperty(plist[i]))\n          obj[plist[i]] = config[plist[i]];\n    },\n    // }}}\n    // getLargestBox: function(ratio,w,h){{{\n    getLargestBox: function(ratio,w,h){\n      if ((w/h) > ratio)\n        return [ h * ratio, h ];\n          else return [ w, w / ratio ];\n    },\n    // }}}\n    // stageConstructor: function(el,options,callback){{{\n    stageConstructor: function(el,options,callback){\n\n      // Get a priority-ordered list of available stages\n      var stages = [];\n      $.each(JcropAnsel.stage,function(i,e){\n        stages.push(e);\n      });\n      stages.sort(function(a,b){ return a.priority - b.priority; });\n\n      // Find the first one that supports this element\n      for(var i=0,l=stages.length;i<l;i++){\n        if (stages[i].isSupported(el,options)){\n          stages[i].create(el,options,function(obj,opt){\n            if (typeof callback == 'function') callback(obj,opt);\n          });\n          break;\n        }\n      }\n    },\n    // }}}\n    // supportsColorFade: function(){{{\n    supportsColorFade: function(){\n      return $.fx.step.hasOwnProperty('backgroundColor');\n    },\n    // }}}\n    // wrapFromXywh: function(xywh){{{\n    wrapFromXywh: function(xywh){\n      var b = { x: xywh[0], y: xywh[1], w: xywh[2], h: xywh[3] };\n      b.x2 = b.x + b.w;\n      b.y2 = b.y + b.h;\n      return b;\n    }\n    // }}}\n  });\n\nvar AbstractStage = function(){\n};\n\n$.extend(AbstractStage,{\n  isSupported: function(el,o){\n    // @todo: should actually check if it's an HTML element\n    return true;\n  },\n  // A higher priority means less desirable\n  // AbstractStage is the last one we want to use\n  priority: 100,\n  create: function(el,options,callback){\n    var obj = new AbstractStage;\n    obj.element = el;\n    callback.call(this,obj,options);\n  },\n  prototype: {\n    attach: function(core){\n      this.init(core);\n      core.ui.stage = this;\n    },\n    triggerEvent: function(ev){\n      $(this.element).trigger(ev);\n      return this;\n    },\n    getElement: function(){\n      return this.element;\n    }\n  }\n});\nJcropAnsel.registerStageType('Block',AbstractStage);\n\n\nvar ImageStage = function(){\n};\n\nImageStage.prototype = new AbstractStage();\n\n$.extend(ImageStage,{\n  isSupported: function(el,o){\n    if (el.tagName == 'IMG') return true;\n  },\n  priority: 90,\n  create: function(el,options,callback){\n    $.JcropAnsel.component.ImageLoader.attach(el,function(w,h){\n      var obj = new ImageStage;\n      obj.element = $(el).wrap('<div />').parent();\n\n      obj.element.width(w).height(h);\n      obj.imgsrc = el;\n\n      if (typeof callback == 'function')\n        callback.call(this,obj,options);\n    });\n  }\n});\nJcropAnsel.registerStageType('Image',ImageStage);\n\n\nvar CanvasStage = function(){\n  this.angle = 0;\n  this.scale = 1;\n  this.scaleMin = 0.2;\n  this.scaleMax = 1.25;\n  this.offset = [0,0];\n};\n\nCanvasStage.prototype = new ImageStage();\n\n$.extend(CanvasStage,{\n  isSupported: function(el,o){\n    if ($.JcropAnsel.supportsCanvas && (el.tagName == 'IMG')) return true;\n  },\n  priority: 60,\n  create: function(el,options,callback){\n    var $el = $(el);\n    var opt = $.extend({},options);\n    $.JcropAnsel.component.ImageLoader.attach(el,function(w,h){\n      var obj = new CanvasStage;\n      $el.hide();\n      obj.createCanvas(el,w,h);\n      $el.before(obj.element);\n      obj.imgsrc = el;\n      opt.imgsrc = el;\n\n      if (typeof callback == 'function'){\n        callback(obj,opt);\n        obj.redraw();\n      }\n    });\n  }\n});\n\n$.extend(CanvasStage.prototype,{\n  init: function(core){\n    this.core = core;\n  },\n  // setOffset: function(x,y) {{{\n  setOffset: function(x,y) {\n    this.offset = [x,y];\n    return this;\n  },\n  // }}}\n  // setAngle: function(v) {{{\n  setAngle: function(v) {\n    this.angle = v;\n    return this;\n  },\n  // }}}\n  // setScale: function(v) {{{\n  setScale: function(v) {\n    this.scale = this.boundScale(v);\n    return this;\n  },\n  // }}}\n  boundScale: function(v){\n    if (v<this.scaleMin) v = this.scaleMin;\n    else if (v>this.scaleMax) v = this.scaleMax;\n    return v;\n  },\n  createCanvas: function(img,w,h){\n    this.width = w;\n    this.height = h;\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = w;\n    this.canvas.height = h;\n    this.$canvas = $(this.canvas).width('100%').height('100%');\n    this.context = this.canvas.getContext('2d');\n    this.fillstyle = \"rgba(0,0,0,0)\"; // HACKED: https://github.com/tapmodo/Jcrop/issues/196\n    this.element = this.$canvas.wrap('<div />').parent().width(w).height(h);\n  },\n  triggerEvent: function(ev){\n    this.$canvas.trigger(ev);\n    return this;\n  },\n  // clear: function() {{{\n  clear: function() {\n    this.context.fillStyle = this.fillstyle;\n    this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    return this;\n  },\n  // }}}\n  // redraw: function() {{{\n  redraw: function() {\n    // Save the current context\n    this.context.save();\n    this.clear();\n\n    // Translate to the center point of our image\n    this.context.translate(parseInt(this.width * 0.5), parseInt(this.height * 0.5));\n    // Perform the rotation and scaling\n    this.context.translate(this.offset[0]/this.core.opt.xscale,this.offset[1]/this.core.opt.yscale);\n    this.context.rotate(this.angle * (Math.PI/180));\n    this.context.scale(this.scale,this.scale);\n    // Translate back to the top left of our image\n    this.context.translate(-parseInt(this.width * 0.5), -parseInt(this.height * 0.5));\n    // Finally we draw the image\n    this.context.drawImage(this.imgsrc,0,0,this.width,this.height);\n\n    // And restore the updated context\n    this.context.restore();\n    this.$canvas.trigger('cropredraw');\n    return this;\n  },\n  // }}}\n  // setFillStyle: function(v) {{{\n  setFillStyle: function(v) {\n    this.fillstyle = v;\n    return this;\n  }\n  // }}}\n});\n\nJcropAnsel.registerStageType('Canvas',CanvasStage);\n\n\n  /**\n   *  BackoffFilter\n   *  move out-of-bounds selection into allowed position at same size\n   */\n  var BackoffFilter = function(){\n    this.minw = 40;\n    this.minh = 40;\n    this.maxw = 0;\n    this.maxh = 0;\n    this.core = null;\n  };\n  $.extend(BackoffFilter.prototype,{\n    tag: 'backoff',\n    priority: 22,\n    filter: function(b){\n      var r = this.bound;\n\n      if (b.x < r.minx) { b.x = r.minx; b.x2 = b.w + b.x; }\n      if (b.y < r.miny) { b.y = r.miny; b.y2 = b.h + b.y; }\n      if (b.x2 > r.maxx) { b.x2 = r.maxx; b.x = b.x2 - b.w; }\n      if (b.y2 > r.maxy) { b.y2 = r.maxy; b.y = b.y2 - b.h; }\n\n      return b;\n    },\n    refresh: function(sel){\n      this.elw = sel.core.container.width();\n      this.elh = sel.core.container.height();\n      this.bound = {\n        minx: 0 + sel.edge.w,\n        miny: 0 + sel.edge.n,\n        maxx: this.elw + sel.edge.e,\n        maxy: this.elh + sel.edge.s\n      };\n    }\n  });\n  JcropAnsel.registerFilter('backoff',BackoffFilter);\n\n  /**\n   *  ConstrainFilter\n   *  a filter to constrain crop selection to bounding element\n   */\n  var ConstrainFilter = function(){\n    this.core = null;\n  };\n  $.extend(ConstrainFilter.prototype,{\n    tag: 'constrain',\n    priority: 5,\n    filter: function(b,ord){\n      if (ord == 'move') {\n        if (b.x < this.minx) { b.x = this.minx; b.x2 = b.w + b.x; }\n        if (b.y < this.miny) { b.y = this.miny; b.y2 = b.h + b.y; }\n        if (b.x2 > this.maxx) { b.x2 = this.maxx; b.x = b.x2 - b.w; }\n        if (b.y2 > this.maxy) { b.y2 = this.maxy; b.y = b.y2 - b.h; }\n      } else {\n        if (b.x < this.minx) { b.x = this.minx; }\n        if (b.y < this.miny) { b.y = this.miny; }\n        if (b.x2 > this.maxx) { b.x2 = this.maxx; }\n        if (b.y2 > this.maxy) { b.y2 = this.maxy; }\n      }\n      b.w = b.x2 - b.x;\n      b.h = b.y2 - b.y;\n      return b;\n    },\n    refresh: function(sel){\n      this.elw = sel.core.container.width();\n      this.elh = sel.core.container.height();\n      this.minx = 0 + sel.edge.w;\n      this.miny = 0 + sel.edge.n;\n      this.maxx = this.elw + sel.edge.e;\n      this.maxy = this.elh + sel.edge.s;\n    }\n  });\n  JcropAnsel.registerFilter('constrain',ConstrainFilter);\n\n  /**\n   *  ExtentFilter\n   *  a filter to implement minimum or maximum size\n   */\n  var ExtentFilter = function(){\n    this.core = null;\n  };\n  $.extend(ExtentFilter.prototype,{\n    tag: 'extent',\n    priority: 12,\n    offsetFromCorner: function(corner,box,b){\n      var w = box[0], h = box[1];\n      switch(corner){\n        case 'bl': return [ b.x2 - w, b.y, w, h ];\n        case 'tl': return [ b.x2 - w , b.y2 - h, w, h ];\n        case 'br': return [ b.x, b.y, w, h ];\n        case 'tr': return [ b.x, b.y2 - h, w, h ];\n      }\n    },\n    getQuadrant: function(s){\n      var relx = s.opposite[0]-s.offsetx\n      var rely = s.opposite[1]-s.offsety;\n\n      if ((relx < 0) && (rely < 0)) return 'br';\n        else if ((relx >= 0) && (rely >= 0)) return 'tl';\n        else if ((relx < 0) && (rely >= 0)) return 'tr';\n        return 'bl';\n    },\n    filter: function(b,ord,sel){\n\n      if (ord == 'move') return b;\n\n      var w = b.w, h = b.h, st = sel.state, r = this.limits;\n      var quad = st? this.getQuadrant(st): 'br';\n\n      if (r.minw && (w < r.minw)) w = r.minw;\n      if (r.minh && (h < r.minh)) h = r.minh;\n      if (r.maxw && (w > r.maxw)) w = r.maxw;\n      if (r.maxh && (h > r.maxh)) h = r.maxh;\n\n      if ((w == b.w) && (h == b.h)) return b;\n\n      return JcropAnsel.wrapFromXywh(this.offsetFromCorner(quad,[w,h],b));\n    },\n    refresh: function(sel){\n      this.elw = sel.core.container.width();\n      this.elh = sel.core.container.height();\n\n      this.limits = {\n        minw: sel.minSize[0],\n        minh: sel.minSize[1],\n        maxw: sel.maxSize[0],\n        maxh: sel.maxSize[1]\n      };\n    }\n  });\n  JcropAnsel.registerFilter('extent',ExtentFilter);\n\n\n  /**\n   *  GridFilter\n   *  a rudimentary grid effect\n   */\n  var GridFilter = function(){\n    this.stepx = 1;\n    this.stepy = 1;\n    this.core = null;\n  };\n  $.extend(GridFilter.prototype,{\n    tag: 'grid',\n    priority: 19,\n    filter: function(b){\n\n      var n = {\n        x: Math.round(b.x / this.stepx) * this.stepx,\n        y: Math.round(b.y / this.stepy) * this.stepy,\n        x2: Math.round(b.x2 / this.stepx) * this.stepx,\n        y2: Math.round(b.y2 / this.stepy) * this.stepy\n      };\n\n      n.w = n.x2 - n.x;\n      n.h = n.y2 - n.y;\n\n      return n;\n    }\n  });\n  JcropAnsel.registerFilter('grid',GridFilter);\n\n\n  /**\n   *  RatioFilter\n   *  implements aspectRatio locking\n   */\n  var RatioFilter = function(){\n    this.ratio = 0;\n    this.core = null;\n  };\n  $.extend(RatioFilter.prototype,{\n    tag: 'ratio',\n    priority: 15,\n    offsetFromCorner: function(corner,box,b){\n      var w = box[0], h = box[1];\n      switch(corner){\n        case 'bl': return [ b.x2 - w, b.y, w, h ];\n        case 'tl': return [ b.x2 - w , b.y2 - h, w, h ];\n        case 'br': return [ b.x, b.y, w, h ];\n        case 'tr': return [ b.x, b.y2 - h, w, h ];\n      }\n    },\n    getBoundRatio: function(b,quad){\n      var box = JcropAnsel.getLargestBox(this.ratio,b.w,b.h);\n      return JcropAnsel.wrapFromXywh(this.offsetFromCorner(quad,box,b));\n    },\n    getQuadrant: function(s){\n      var relx = s.opposite[0]-s.offsetx\n      var rely = s.opposite[1]-s.offsety;\n\n      if ((relx < 0) && (rely < 0)) return 'br';\n        else if ((relx >= 0) && (rely >= 0)) return 'tl';\n        else if ((relx < 0) && (rely >= 0)) return 'tr';\n        return 'bl';\n    },\n    filter: function(b,ord,sel){\n\n      if (!this.ratio) return b;\n\n      var rt = b.w / b.h;\n      var st = sel.state;\n\n      var quad = st? this.getQuadrant(st): 'br';\n      ord = ord || 'se';\n\n      if (ord == 'move') return b;\n\n      switch(ord) {\n        case 'n':\n          b.x2 = this.elw;\n          b.w = b.x2 - b.x;\n          quad = 'tr';\n          break;\n        case 's':\n          b.x2 = this.elw;\n          b.w = b.x2 - b.x;\n          quad = 'br';\n          break;\n        case 'e':\n          b.y2 = this.elh;\n          b.h = b.y2 - b.y;\n          quad = 'br';\n          break;\n        case 'w':\n          b.y2 = this.elh;\n          b.h = b.y2 - b.y;\n          quad = 'bl';\n          break;\n      }\n\n      return this.getBoundRatio(b,quad);\n    },\n    refresh: function(sel){\n      this.ratio = sel.aspectRatio;\n      this.elw = sel.core.container.width();\n      this.elh = sel.core.container.height();\n    }\n  });\n  JcropAnsel.registerFilter('ratio',RatioFilter);\n\n\n  /**\n   *  RoundFilter\n   *  rounds coordinate values to integers\n   */\n  var RoundFilter = function(){\n    this.core = null;\n  };\n  $.extend(RoundFilter.prototype,{\n    tag: 'round',\n    priority: 90,\n    filter: function(b){\n\n      var n = {\n        x: Math.round(b.x),\n        y: Math.round(b.y),\n        x2: Math.round(b.x2),\n        y2: Math.round(b.y2)\n      };\n\n      n.w = n.x2 - n.x;\n      n.h = n.y2 - n.y;\n\n      return n;\n    }\n  });\n  JcropAnsel.registerFilter('round',RoundFilter);\n\n\n  /**\n   *  ShadeFilter\n   *  A filter that implements div-based shading on any element\n   *\n   *  The shading you see is actually four semi-opaque divs\n   *  positioned inside the container, around the selection\n   */\n  var ShadeFilter = function(opacity,color){\n    this.color = color || 'black';\n    this.opacity = opacity || 0.5;\n    this.core = null;\n    this.shades = {};\n  };\n  $.extend(ShadeFilter.prototype,{\n    tag: 'shader',\n    fade: true,\n    fadeEasing: 'swing',\n    fadeSpeed: 320,\n    priority: 95,\n    init: function(){\n      var t = this;\n\n      if (!t.attached) {\n        t.visible = false;\n\n        t.container = $('<div />').addClass(t.core.opt.css_shades)\n          .prependTo(this.core.container).hide();\n\n        t.elh = this.core.container.height();\n        t.elw = this.core.container.width();\n\n        t.shades = {\n          top: t.createShade(),\n          right: t.createShade(),\n          left: t.createShade(),\n          bottom: t.createShade()\n        };\n\n        t.attached = true;\n      }\n    },\n    destroy: function(){\n      this.container.remove();\n    },\n    setColor: function(color,instant){\n      var t = this;\n\n      if (color == t.color) return t;\n\n      this.color = color;\n      var colorfade = JcropAnsel.supportsColorFade();\n      $.each(t.shades,function(u,i){\n        if (!t.fade || instant || !colorfade) i.css('backgroundColor',color);\n          else i.animate({backgroundColor:color},{queue:false,duration:t.fadeSpeed,easing:t.fadeEasing});\n      });\n      return t;\n    },\n    setOpacity: function(opacity,instant){\n      var t = this;\n\n      if (opacity == t.opacity) return t;\n\n      t.opacity = opacity;\n      $.each(t.shades,function(u,i){\n        if (!t.fade || instant) i.css({opacity:opacity});\n          else i.animate({opacity:opacity},{queue:false,duration:t.fadeSpeed,easing:t.fadeEasing});\n      });\n      return t;\n    },\n    createShade: function(){\n      return $('<div />').css({\n        position: 'absolute',\n        backgroundColor: this.color,\n        opacity: this.opacity\n      }).appendTo(this.container);\n    },\n    refresh: function(sel){\n      var m = this.core, s = this.shades;\n\n      this.setColor(sel.bgColor?sel.bgColor:this.core.opt.bgColor);\n      this.setOpacity(sel.bgOpacity?sel.bgOpacity:this.core.opt.bgOpacity);\n\n      this.elh = m.container.height();\n      this.elw = m.container.width();\n      s.right.css('height',this.elh+'px');\n      s.left.css('height',this.elh+'px');\n    },\n    filter: function(b,ord,sel){\n\n      if (!sel.active) return b;\n\n      var t = this,\n        s = t.shades;\n\n      s.top.css({\n        left: Math.round(b.x)+'px',\n        width: Math.round(b.w)+'px',\n        height: Math.round(b.y)+'px'\n      });\n      s.bottom.css({\n        top: Math.round(b.y2)+'px',\n        left: Math.round(b.x)+'px',\n        width: Math.round(b.w)+'px',\n        height: (t.elh-Math.round(b.y2))+'px'\n      });\n      s.right.css({\n        left: Math.round(b.x2)+'px',\n        width: (t.elw-Math.round(b.x2))+'px'\n      });\n      s.left.css({\n        width: Math.round(b.x)+'px'\n      });\n\n      if (!t.visible) {\n        t.container.show();\n        t.visible = true;\n      }\n\n      return b;\n    }\n  });\n  JcropAnsel.registerFilter('shader',ShadeFilter);\n\n\n  /**\n   *  CanvasAnimator\n   *  manages smooth cropping animation\n   *\n   *  This object is called internally to manage animation.\n   *  An in-memory div is animated and a progress callback\n   *  is used to update the selection coordinates of the\n   *  visible selection in realtime.\n   */\n  var CanvasAnimator = function(stage){\n    this.stage = stage;\n    this.core = stage.core;\n    this.cloneStagePosition();\n  };\n\n  CanvasAnimator.prototype = {\n\n    cloneStagePosition: function(){\n      var s = this.stage;\n      this.angle = s.angle;\n      this.scale = s.scale;\n      this.offset = s.offset;\n    },\n\n    getElement: function(){\n      var s = this.stage;\n\n      return $('<div />')\n        .css({\n          position: 'absolute',\n          top: s.offset[0]+'px',\n          left: s.offset[1]+'px',\n          width: s.angle+'px',\n          height: s.scale+'px'\n        });\n    },\n\n    animate: function(cb){\n      var t = this;\n\n      this.scale = this.stage.boundScale(this.scale);\n      t.stage.triggerEvent('croprotstart');\n\n      t.getElement().animate({\n        top: t.offset[0]+'px',\n        left: t.offset[1]+'px',\n        width: t.angle+'px',\n        height: t.scale+'px'\n      },{\n        easing: t.core.opt.animEasing,\n        duration: t.core.opt.animDuration,\n        complete: function(){\n          t.stage.triggerEvent('croprotend');\n          (typeof cb == 'function') && cb.call(this);\n        },\n        progress: function(anim){\n          var props = {}, i, tw = anim.tweens;\n\n          for(i=0;i<tw.length;i++){\n            props[tw[i].prop] = tw[i].now; }\n\n          t.stage.setAngle(props.width)\n            .setScale(props.height)\n            .setOffset(props.top,props.left)\n            .redraw();\n        }\n      });\n    }\n\n  };\n  JcropAnsel.stage.Canvas.prototype.getAnimator = function(){\n    return new CanvasAnimator(this);\n  };\n  JcropAnsel.registerComponent('CanvasAnimator',CanvasAnimator);\n\n\n  /**\n   *  CropAnimator\n   *  manages smooth cropping animation\n   *\n   *  This object is called internally to manage animation.\n   *  An in-memory div is animated and a progress callback\n   *  is used to update the selection coordinates of the\n   *  visible selection in realtime.\n   */\n  // var CropAnimator = function(selection){{{\n  var CropAnimator = function(selection){\n    this.selection = selection;\n    this.core = selection.core;\n  };\n  // }}}\n\n  CropAnimator.prototype = {\n\n    getElement: function(){\n      var b = this.selection.get();\n\n      return $('<div />')\n        .css({\n          position: 'absolute',\n          top: b.y+'px',\n          left: b.x+'px',\n          width: b.w+'px',\n          height: b.h+'px'\n        });\n    },\n\n    animate: function(x,y,w,h,cb){\n      var t = this;\n\n      t.selection.allowResize(false);\n\n      t.getElement().animate({\n        top: y+'px',\n        left: x+'px',\n        width: w+'px',\n        height: h+'px'\n      },{\n        easing: t.core.opt.animEasing,\n        duration: t.core.opt.animDuration,\n        complete: function(){\n          t.selection.allowResize(true);\n          cb && cb.call(this);\n        },\n        progress: function(anim){\n          var props = {}, i, tw = anim.tweens;\n\n          for(i=0;i<tw.length;i++){\n            props[tw[i].prop] = tw[i].now; }\n\n          var b = {\n            x: parseInt(props.left),\n            y: parseInt(props.top),\n            w: parseInt(props.width),\n            h: parseInt(props.height)\n          };\n\n          b.x2 = b.x + b.w;\n          b.y2 = b.y + b.h;\n\n          t.selection.updateRaw(b,'se');\n        }\n      });\n    }\n\n  };\n  JcropAnsel.registerComponent('Animator',CropAnimator);\n\n\n  /**\n   *  DragState\n   *  an object that handles dragging events\n   *\n   *  This object is used by the built-in selection object to\n   *  track a dragging operation on a selection\n   */\n  // var DragState = function(e,selection,ord){{{\n  var DragState = function(e,selection,ord){\n    var t = this;\n\n    t.x = e.pageX;\n    t.y = e.pageY;\n\n    t.selection = selection;\n    t.eventTarget = selection.core.opt.dragEventTarget;\n    t.orig = selection.get();\n\n    selection.callFilterFunction('refresh');\n\n    var p = selection.core.container.position();\n    t.elx = p.left;\n    t.ely = p.top;\n\n    t.offsetx = 0;\n    t.offsety = 0;\n    t.ord = ord;\n    t.opposite = t.getOppositeCornerOffset();\n\n    t.initEvents(e);\n\n  };\n  // }}}\n\n  DragState.prototype = {\n    // getOppositeCornerOffset: function(){{{\n    // Calculate relative offset of locked corner\n    getOppositeCornerOffset: function(){\n\n      var o = this.orig;\n      var relx = this.x - this.elx - o.x;\n      var rely = this.y - this.ely - o.y;\n\n      switch(this.ord){\n        case 'nw':\n        case 'w':\n          return [ o.w - relx, o.h - rely ];\n          return [ o.x + o.w, o.y + o.h ];\n\n        case 'sw':\n          return [ o.w - relx, -rely ];\n          return [ o.x + o.w, o.y ];\n\n        case 'se':\n        case 's':\n        case 'e':\n          return [ -relx, -rely ];\n          return [ o.x, o.y ];\n\n        case 'ne':\n        case 'n':\n          return [ -relx, o.h - rely ];\n          return [ o.w, o.y + o.h ];\n      }\n\n      return [ null, null ];\n    },\n    // }}}\n    // initEvents: function(e){{{\n    initEvents: function(e){\n      $(this.eventTarget)\n        .on('mousemove.jcrop',this.createDragHandler())\n        .on('mouseup.jcrop',this.createStopHandler());\n    },\n    // }}}\n    // dragEvent: function(e){{{\n    dragEvent: function(e){\n      this.offsetx = e.pageX - this.x;\n      this.offsety = e.pageY - this.y;\n      this.selection.updateRaw(this.getBox(),this.ord);\n    },\n    // }}}\n    // endDragEvent: function(e){{{\n    endDragEvent: function(e){\n      var sel = this.selection;\n      sel.core.container.removeClass('jcrop-dragging');\n      sel.element.trigger('cropend',[sel,sel.core.unscale(sel.get())]);\n      sel.focus();\n    },\n    // }}}\n    // createStopHandler: function(){{{\n    createStopHandler: function(){\n      var t = this;\n      return function(e){\n        $(t.eventTarget).off('.jcrop');\n        t.endDragEvent(e);\n        return false;\n      };\n    },\n    // }}}\n    // createDragHandler: function(){{{\n    createDragHandler: function(){\n      var t = this;\n      return function(e){\n        t.dragEvent(e);\n        return false;\n      };\n    },\n    // }}}\n    //update: function(x,y){{{\n    update: function(x,y){\n      var t = this;\n      t.offsetx = x - t.x;\n      t.offsety = y - t.y;\n    },\n    //}}}\n    //resultWrap: function(d){{{\n    resultWrap: function(d){\n      var b = {\n          x: Math.min(d[0],d[2]),\n          y: Math.min(d[1],d[3]),\n          x2: Math.max(d[0],d[2]),\n          y2: Math.max(d[1],d[3])\n        };\n\n      b.w = b.x2 - b.x;\n      b.h = b.y2 - b.y;\n\n      return b;\n    },\n    //}}}\n    //getBox: function(){{{\n    getBox: function(){\n      var t = this;\n      var o = t.orig;\n      var _c = { x2: o.x + o.w, y2: o.y + o.h };\n      switch(t.ord){\n        case 'n': return t.resultWrap([ o.x, t.offsety + o.y, _c.x2, _c.y2 ]);\n        case 's': return t.resultWrap([ o.x, o.y, _c.x2, t.offsety + _c.y2 ]);\n        case 'e': return t.resultWrap([ o.x, o.y, t.offsetx + _c.x2, _c.y2 ]);\n        case 'w': return t.resultWrap([ o.x + t.offsetx, o.y, _c.x2, _c.y2 ]);\n        case 'sw': return t.resultWrap([ t.offsetx + o.x, o.y, _c.x2, t.offsety + _c.y2 ]);\n        case 'se': return t.resultWrap([ o.x, o.y, t.offsetx + _c.x2, t.offsety + _c.y2 ]);\n        case 'ne': return t.resultWrap([ o.x, t.offsety + o.y, t.offsetx + _c.x2, _c.y2 ]);\n        case 'nw': return t.resultWrap([ t.offsetx + o.x, t.offsety + o.y, _c.x2, _c.y2 ]);\n        case 'move':\n          _c.nx = o.x + t.offsetx;\n          _c.ny = o.y + t.offsety;\n          return t.resultWrap([ _c.nx, _c.ny, _c.nx + o.w, _c.ny + o.h ]);\n      }\n    }\n    //}}}\n  };\n  JcropAnsel.registerComponent('DragState',DragState);\n\n\n  /**\n   *  EventManager\n   *  provides internal event support\n   */\n  var EventManager = function(core){\n    this.core = core;\n  };\n  EventManager.prototype = {\n      on: function(n,cb){ $(this).on(n,cb); },\n      off: function(n){ $(this).off(n); },\n      trigger: function(n){ $(this).trigger(n); }\n  };\n  JcropAnsel.registerComponent('EventManager',EventManager);\n\n\n  /**\n   * Image Loader\n   * Reliably pre-loads images\n   */\n  // var ImageLoader = function(src,element,cb){{{\n  var ImageLoader = function(src,element,cb){\n    this.src = src;\n    if (!element) element = new Image;\n    this.element = element;\n    this.callback = cb;\n    this.load();\n  };\n  // }}}\n\n  $.extend(ImageLoader,{\n    // attach: function(el,cb){{{\n    attach: function(el,cb){\n      return new ImageLoader(el.src,el,cb);\n    },\n    // }}}\n    // prototype: {{{\n    prototype: {\n      getDimensions: function(){\n        var el = this.element;\n\n        if (el.naturalWidth)\n          return [ el.naturalWidth, el. naturalHeight ];\n\n        if (el.width)\n          return [ el.width, el.height ];\n\n        return null;\n      },\n      fireCallback: function(){\n        this.element.onload = null;\n        if (typeof this.callback == 'function')\n          this.callback.apply(this,this.getDimensions());\n      },\n      isLoaded: function(){\n        return this.element.complete;\n      },\n      load: function(){\n        var t = this;\n        var el = t.element;\n\n        el.src = t.src;\n\n        if (t.isLoaded()) t.fireCallback();\n          else t.element.onload = function(e){\n            t.fireCallback();\n          };\n      }\n    }\n    // }}}\n  });\n  JcropAnsel.registerComponent('ImageLoader',ImageLoader);\n\n\n  /**\n   * JcropAnselTouch\n   * Detects and enables mobile touch support\n   */\n  // var JcropAnselTouch = function(core){{{\n  var JcropAnselTouch = function(core){\n    this.core = core;\n    this.init();\n  };\n  // }}}\n\n  $.extend(JcropAnselTouch,{\n    // support: function(){{{\n    support: function(){\n      if(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch)\n        return true;\n    },\n    // }}}\n    prototype: {\n      // init: function(){{{\n      init: function(){\n        var t = this,\n          p = $.JcropAnsel.component.DragState.prototype;\n\n        // A bit of an ugly hack to make sure we modify prototype\n        // only once, store a key on the prototype\n        if (!p.touch) {\n          t.initEvents();\n          t.shimDragState();\n          t.shimStageDrag();\n          p.touch = true;\n        }\n      },\n      // }}}\n      // shimDragState: function(){{{\n      shimDragState: function(){\n        var t = this;\n        $.JcropAnsel.component.DragState.prototype.initEvents = function(e){\n\n          // Attach subsequent drag event handlers based on initial\n          // event type - avoids collecting \"pseudo-mouse\" events\n          // generated by some mobile browsers in some circumstances\n          if (e.type.substr(0,5) == 'touch') {\n\n            $(this.eventTarget)\n              .on('touchmove.jcrop.jcrop-touch',t.dragWrap(this.createDragHandler()))\n              .on('touchend.jcrop.jcrop-touch',this.createStopHandler());\n\n          }\n\n          // For other events, use the mouse handlers that\n          // the default DragState.initEvents() method sets...\n          else {\n\n            $(this.eventTarget)\n              .on('mousemove.jcrop',this.createDragHandler())\n              .on('mouseup.jcrop',this.createStopHandler());\n\n          }\n\n        };\n      },\n      // }}}\n      // shimStageDrag: function(){{{\n      shimStageDrag: function(){\n        this.core.container\n          .addClass('jcrop-touch')\n          .on('touchstart.jcrop.jcrop-stage',this.dragWrap(this.core.ui.manager.startDragHandler()));\n      },\n      // }}}\n      // dragWrap: function(cb){{{\n      dragWrap: function(cb){\n        return function(e){\n          e.preventDefault();\n          e.stopPropagation();\n          if (e.type.substr(0,5) == 'touch') {\n            e.pageX = e.originalEvent.changedTouches[0].pageX;\n            e.pageY = e.originalEvent.changedTouches[0].pageY;\n            return cb(e);\n          }\n          return false;\n        };\n      },\n      // }}}\n      // initEvents: function(){{{\n      initEvents: function(){\n        var t = this, c = t.core;\n\n        c.container.on(\n          'touchstart.jcrop.jcrop-touch',\n          '.'+c.opt.css_drag,\n          t.dragWrap(c.startDrag())\n        );\n      }\n      // }}}\n    }\n  });\n  JcropAnsel.registerComponent('Touch',JcropAnselTouch);\n\n\n  /**\n   *  KeyWatcher\n   *  provides keyboard support\n   */\n  // var KeyWatcher = function(core){{{\n  var KeyWatcher = function(core){\n    this.core = core;\n    this.init();\n  };\n  // }}}\n  $.extend(KeyWatcher,{\n    // defaults: {{{\n    defaults: {\n      eventName: 'keydown.jcrop',\n      passthru: [ 9 ],\n      debug: false\n    },\n    // }}}\n    prototype: {\n      // init: function(){{{\n      init: function(){\n        $.extend(this,KeyWatcher.defaults);\n        this.enable();\n      },\n      // }}}\n      // disable: function(){{{\n      disable: function(){\n        this.core.container.off(this.eventName);\n      },\n      // }}}\n      // enable: function(){{{\n      enable: function(){\n        var t = this, m = t.core;\n        m.container.on(t.eventName,function(e){\n          var nudge = e.shiftKey? 16: 2;\n\n          if ($.inArray(e.keyCode,t.passthru) >= 0)\n            return true;\n\n          switch(e.keyCode){\n            case 37: m.nudge(-nudge,0); break;\n            case 38: m.nudge(0,-nudge); break;\n            case 39: m.nudge(nudge,0); break;\n            case 40: m.nudge(0,nudge); break;\n\n            case 46:\n            case 8:\n              m.requestDelete();\n              return false;\n              break;\n\n            default:\n              if (t.debug) console.log('keycode: ' + e.keyCode);\n              break;\n          }\n\n          if (!e.metaKey && !e.ctrlKey)\n            e.preventDefault();\n        });\n      }\n      // }}}\n    }\n  });\n  JcropAnsel.registerComponent('Keyboard',KeyWatcher);\n\n\n  /**\n   * Selection\n   * Built-in selection object\n   */\n  var Selection = function(){};\n\n  $.extend(Selection,{\n    // defaults: {{{\n    defaults: {\n      minSize: [ 8, 8 ],\n      maxSize: [ 0, 0 ],\n      aspectRatio: 0,\n      edge: { n: 0, s: 0, e: 0, w: 0 },\n      bgColor: null,\n      bgOpacity: null,\n      last: null,\n\n      state: null,\n      active: true,\n      linked: true,\n      canDelete: true,\n      canDrag: true,\n      canResize: true,\n      canSelect: true\n    },\n    // }}}\n    prototype: {\n      // init: function(core){{{\n      init: function(core){\n        this.core = core;\n        this.startup();\n        this.linked = this.core.opt.linked;\n        this.attach();\n        this.setOptions(this.core.opt);\n        core.container.trigger('cropcreate',[this]);\n      },\n      // }}}\n      // attach: function(){{{\n      attach: function(){\n        // For extending init() sequence\n      },\n      // }}}\n      // startup: function(){{{\n      startup: function(){\n        var t = this, o = t.core.opt;\n        $.extend(t,Selection.defaults);\n        t.filter = t.core.getDefaultFilters();\n\n        t.element = $('<div />').addClass(o.css_selection).data({ selection: t });\n        t.frame = $('<button />').addClass(o.css_button).data('ord','move').attr('type','button');\n        t.element.append(t.frame).appendTo(t.core.container);\n\n        // IE background/draggable hack\n        if (t.core.opt.is_msie) t.frame.css({\n          opacity: 0,\n          backgroundColor: 'white'\n        });\n\n        t.insertElements();\n\n        // Bind focus and blur events for this selection\n        t.frame.on('focus.jcrop',function(e){\n          t.core.setSelection(t);\n          t.element.trigger('cropfocus',t);\n          t.element.addClass('jcrop-focus');\n        }).on('blur.jcrop',function(e){\n          t.element.removeClass('jcrop-focus');\n          t.element.trigger('cropblur',t);\n        });\n      },\n      // }}}\n      // propagate: [{{{\n      propagate: [\n        'canDelete', 'canDrag', 'canResize', 'canSelect',\n        'minSize', 'maxSize', 'aspectRatio', 'edge'\n      ],\n      // }}}\n      // setOptions: function(opt){{{\n      setOptions: function(opt){\n        JcropAnsel.propagate(this.propagate,opt,this);\n        this.refresh();\n        return this;\n      },\n      // }}}\n      // refresh: function(){{{\n      refresh: function(){\n        this.allowResize();\n        this.allowDrag();\n        this.allowSelect();\n        this.callFilterFunction('refresh');\n        this.updateRaw(this.get(),'se');\n      },\n      // }}}\n      // callFilterFunction: function(f,args){{{\n      callFilterFunction: function(f,args){\n        for(var i=0;i<this.filter.length;i++)\n          if (this.filter[i][f]) this.filter[i][f](this);\n        return this;\n      },\n      // }}}\n      //addFilter: function(filter){{{\n      addFilter: function(filter){\n        filter.core = this.core;\n        if (!this.hasFilter(filter)) {\n          this.filter.push(filter);\n          this.sortFilters();\n          if (filter.init) filter.init();\n          this.refresh();\n        }\n      },\n      //}}}\n      // hasFilter: function(filter){{{\n      hasFilter: function(filter){\n        var i, f = this.filter, n = [];\n        for(i=0;i<f.length;i++) if (f[i] === filter) return true;\n      },\n      // }}}\n      // sortFilters: function(){{{\n      sortFilters: function(){\n        this.filter.sort(\n          function(x,y){ return x.priority - y.priority; }\n        );\n      },\n      // }}}\n      //clearFilters: function(){{{\n      clearFilters: function(){\n        var i, f = this.filter;\n\n        for(var i=0;i<f.length;i++)\n          if (f[i].destroy) f[i].destroy();\n\n        this.filter = [];\n      },\n      //}}}\n      // removeFiltersByTag: function(tag){{{\n      removeFilter: function(tag){\n        var i, f = this.filter, n = [];\n\n        for(var i=0;i<f.length;i++)\n          if ((f[i].tag && (f[i].tag == tag)) || (tag === f[i])){\n            if (f[i].destroy) f[i].destroy();\n          }\n          else n.push(f[i]);\n\n        this.filter = n;\n      },\n      // }}}\n      // runFilters: function(b,ord){{{\n      runFilters: function(b,ord){\n        for(var i=0;i<this.filter.length;i++)\n          b = this.filter[i].filter(b,ord,this);\n        return b;\n      },\n      // }}}\n      //endDrag: function(){{{\n      endDrag: function(){\n        if (this.state) {\n          $(document.body).off('.jcrop');\n          this.focus();\n          this.state = null;\n        }\n      },\n      //}}}\n      // startDrag: function(e,ord){{{\n      startDrag: function(e,ord){\n        var t = this;\n        var m = t.core;\n\n        ord = ord || $(e.target).data('ord');\n\n        this.focus();\n\n        if ((ord == 'move') && t.element.hasClass(t.core.opt.css_nodrag))\n          return false;\n\n        this.state = new JcropAnsel.component.DragState(e,this,ord);\n        return false;\n      },\n      // }}}\n      // allowSelect: function(v){{{\n      allowSelect: function(v){\n        if (v === undefined) v = this.canSelect;\n\n        if (v && this.canSelect) this.frame.attr('disabled',false);\n          else this.frame.attr('disabled','disabled');\n\n        return this;\n      },\n      // }}}\n      // allowDrag: function(v){{{\n      allowDrag: function(v){\n        var t = this, o = t.core.opt;\n        if (v == undefined) v = t.canDrag;\n\n        if (v && t.canDrag) t.element.removeClass(o.css_nodrag);\n          else t.element.addClass(o.css_nodrag);\n\n        return this;\n      },\n      // }}}\n      // allowResize: function(v){{{\n      allowResize: function(v){\n        var t = this, o = t.core.opt;\n        if (v == undefined) v = t.canResize;\n\n        if (v && t.canResize) t.element.removeClass(o.css_noresize);\n          else t.element.addClass(o.css_noresize);\n\n        return this;\n      },\n      // }}}\n      // remove: function(){{{\n      remove: function(){\n        this.element.trigger('cropremove',this);\n        this.element.remove();\n      },\n      // }}}\n      // toBack: function(){{{\n      toBack: function(){\n        this.active = false;\n        this.element.removeClass('jcrop-current jcrop-focus');\n      },\n      // }}}\n      // toFront: function(){{{\n      toFront: function(){\n        this.active = true;\n        this.element.addClass('jcrop-current');\n        this.callFilterFunction('refresh');\n        this.refresh();\n      },\n      // }}}\n      // redraw: function(b){{{\n      redraw: function(b){\n        this.moveTo(b.x,b.y);\n        this.resize(b.w,b.h);\n        this.last = b;\n        return this;\n      },\n      // }}}\n      // update: function(b,ord){{{\n      update: function(b,ord){\n        return this.updateRaw(this.core.scale(b),ord);\n      },\n      // }}}\n      // update: function(b,ord){{{\n      updateRaw: function(b,ord){\n        b = this.runFilters(b,ord);\n        this.redraw(b);\n        this.element.trigger('cropmove',[this,this.core.unscale(b)]);\n        return this;\n      },\n      // }}}\n      // animateTo: function(box,cb){{{\n      animateTo: function(box,cb){\n        var ca = new JcropAnsel.component.Animator(this),\n            b = this.core.scale(JcropAnsel.wrapFromXywh(box));\n\n        ca.animate(b.x,b.y,b.w,b.h,cb);\n      },\n      // }}}\n      // center: function(instant){{{\n      center: function(instant){\n        var b = this.get(), m = this.core;\n        var elw = m.container.width(), elh = m.container.height();\n        var box = [ (elw-b.w)/2, (elh-b.h)/2, b.w, b.h ];\n        return this[instant?'setSelect':'animateTo'](box);\n      },\n      // }}}\n      //createElement: function(type,ord){{{\n      createElement: function(type,ord){\n        return $('<div />').addClass(type+' ord-'+ord).data('ord',ord);\n      },\n      //}}}\n      //moveTo: function(x,y){{{\n      moveTo: function(x,y){\n        this.element.css({top: y+'px', left: x+'px'});\n      },\n      //}}}\n      // blur: function(){{{\n      blur: function(){\n        this.element.blur();\n        return this;\n      },\n      // }}}\n      // focus: function(){{{\n      focus: function(){\n        this.core.setSelection(this);\n        this.frame.focus();\n        return this;\n      },\n      // }}}\n      //resize: function(w,h){{{\n      resize: function(w,h){\n        this.element.css({width: w+'px', height: h+'px'});\n      },\n      //}}}\n      //get: function(){{{\n      get: function(){\n        var b = this.element,\n          o = b.position(),\n          w = b.width(),\n          h = b.height(),\n          rv = { x: o.left, y: o.top };\n\n        rv.x2 = rv.x + w;\n        rv.y2 = rv.y + h;\n        rv.w = w;\n        rv.h = h;\n\n        return rv;\n      },\n      //}}}\n      //insertElements: function(){{{\n      insertElements: function(){\n        var t = this, i,\n          m = t.core,\n          fr = t.element,\n          o = t.core.opt,\n          b = o.borders,\n          h = o.handles,\n          d = o.dragbars;\n\n        for(i=0; i<d.length; i++)\n          fr.append(t.createElement(o.css_dragbars,d[i]));\n\n        for(i=0; i<h.length; i++)\n          fr.append(t.createElement(o.css_handles,h[i]));\n\n        for(i=0; i<b.length; i++)\n          fr.append(t.createElement(o.css_borders,b[i]));\n      }\n      //}}}\n    }\n  });\n  JcropAnsel.registerComponent('Selection',Selection);\n\n\n  /**\n   * StageDrag\n   * Facilitates dragging\n   */\n  // var StageDrag = function(manager,opt){{{\n  var StageDrag = function(manager,opt){\n    $.extend(this,StageDrag.defaults,opt || {});\n    this.manager = manager;\n    this.core = manager.core;\n  };\n  // }}}\n  // StageDrag.defaults = {{{\n  StageDrag.defaults = {\n    offset: [ -8, -8 ],\n    active: true,\n    minsize: [ 20, 20 ]\n  };\n  // }}}\n\n  $.extend(StageDrag.prototype,{\n    // start: function(e){{{\n    start: function(e){\n      var c = this.core;\n\n      // Do nothing if allowSelect is off\n      if (!c.opt.allowSelect) return;\n\n      // Also do nothing if we can't draw any more selections\n      if (c.opt.multi && c.opt.multiMax && (c.ui.multi.length >= c.opt.multiMax)) return false;\n\n      // calculate a few variables for this drag operation\n      var o = $(e.currentTarget).offset();\n      var origx = e.pageX - o.left + this.offset[0];\n      var origy = e.pageY - o.top + this.offset[1];\n      var m = c.ui.multi;\n\n      // Determine newly dragged crop behavior if multi disabled\n      if (!c.opt.multi) {\n        // For multiCleaanup true, remove all existing selections\n        if (c.opt.multiCleanup){\n          for(var i=0;i<m.length;i++) m[i].remove();\n          c.ui.multi = [];\n        }\n        // If not, only remove the currently active selection\n        else {\n          c.removeSelection(c.ui.selection);\n        }\n      }\n\n      c.container.addClass('jcrop-dragging');\n\n      // Create the new selection\n      var sel = c.newSelection()\n        // and position it\n        .updateRaw(JcropAnsel.wrapFromXywh([origx,origy,1,1]));\n\n      sel.element.trigger('cropstart',[sel,this.core.unscale(sel.get())]);\n\n      return sel.startDrag(e,'se');\n    },\n    // }}}\n    // end: function(x,y){{{\n    end: function(x,y){\n      this.drag(x,y);\n      var b = this.sel.get();\n\n      this.core.container.removeClass('jcrop-dragging');\n\n      if ((b.w < this.minsize[0]) || (b.h < this.minsize[1]))\n        this.core.requestDelete();\n\n        else this.sel.focus();\n    }\n    // }}}\n  });\n  JcropAnsel.registerComponent('StageDrag',StageDrag);\n\n\n  /**\n   * StageManager\n   * Provides basic stage-specific functionality\n   */\n  // var StageManager = function(core){{{\n  var StageManager = function(core){\n    this.core = core;\n    this.ui = core.ui;\n    this.init();\n  };\n  // }}}\n\n  $.extend(StageManager.prototype,{\n    // init: function(){{{\n    init: function(){\n      this.setupEvents();\n      this.dragger = new StageDrag(this);\n    },\n    // }}}\n    // tellConfigUpdate: function(options){{{\n    tellConfigUpdate: function(options){\n      for(var i=0,m=this.ui.multi,l=m.length;i<l;i++)\n        if (m[i].setOptions && (m[i].linked || (this.core.opt.linkCurrent && m[i] == this.ui.selection)))\n          m[i].setOptions(options);\n    },\n    // }}}\n    // startDragHandler: function(){{{\n    startDragHandler: function(){\n      var t = this;\n      return function(e){\n        if (!e.button || t.core.opt.is_ie_lt9) return t.dragger.start(e);\n      };\n    },\n    // }}}\n    // removeEvents: function(){{{\n    removeEvents: function(){\n      this.core.event.off('.jcrop-stage');\n      this.core.container.off('.jcrop-stage');\n    },\n    // }}}\n    // shimLegacyHandlers: function(options){{{\n    // This method uses the legacyHandlers configuration object to\n    // gracefully wrap old-style JcropAnsel events with new ones\n    shimLegacyHandlers: function(options){\n      var _x = {}, core = this.core, tmp;\n\n      $.each(core.opt.legacyHandlers,function(k,i){\n        if (k in options) {\n          tmp = options[k];\n          core.container.off('.jcrop-'+k)\n            .on(i+'.jcrop.jcrop-'+k,function(e,s,c){\n              tmp.call(core,c);\n            });\n          delete options[k];\n        }\n      });\n    },\n    // }}}\n    // setupEvents: function(){{{\n    setupEvents: function(){\n      var t = this, c = t.core;\n\n      c.event.on('configupdate.jcrop-stage',function(e){\n        t.shimLegacyHandlers(c.opt);\n        t.tellConfigUpdate(c.opt)\n        c.container.trigger('cropconfig',[c,c.opt]);\n      });\n\n      this.core.container\n        .on('mousedown.jcrop.jcrop-stage',this.startDragHandler());\n    }\n    // }}}\n  });\n  JcropAnsel.registerComponent('StageManager',StageManager);\n\n\n  var Thumbnailer = function(){\n  };\n\n  $.extend(Thumbnailer,{\n    defaults: {\n      // Set to a specific Selection object\n      // If this value is set, the preview will only track that Selection\n      selection: null,\n\n      fading: true,\n      fadeDelay: 1000,\n      fadeDuration: 1000,\n      autoHide: false,\n      width: 80,\n      height: 80,\n      _hiding: null\n    },\n\n    prototype: {\n      recopyCanvas: function(){\n        var s = this.core.ui.stage, cxt = s.context;\n        this.context.putImageData(cxt.getImageData(0,0,s.canvas.width,s.canvas.height),0,0);\n      },\n      init: function(core,options){\n        var t = this;\n        this.core = core;\n        $.extend(this,Thumbnailer.defaults,options);\n        t.initEvents();\n        t.refresh();\n        t.insertElements();\n        if (t.selection) {\n          t.renderSelection(t.selection);\n          t.selectionTarget = t.selection.element[0];\n        } else if (t.core.ui.selection) {\n          t.renderSelection(t.core.ui.selection);\n        }\n\n        if (t.core.ui.stage.canvas) {\n          t.context = t.preview[0].getContext('2d');\n          t.core.container.on('cropredraw',function(e){\n            t.recopyCanvas();\n            t.refresh();\n          });\n        }\n      },\n      updateImage: function(imgel){\n        this.preview.remove();\n        this.preview = $($.JcropAnsel.imageClone(imgel));\n        this.element.append(this.preview);\n        this.refresh();\n        return this;\n      },\n      insertElements: function(){\n        this.preview = $($.JcropAnsel.imageClone(this.core.ui.stage.imgsrc));\n\n        this.element = $('<div />').addClass('jcrop-thumb')\n          .width(this.width).height(this.height)\n          .append(this.preview)\n          .appendTo(this.core.container);\n      },\n      resize: function(w,h){\n        this.width = w;\n        this.height = h;\n        this.element.width(w).height(h);\n        this.renderCoords(this.last);\n      },\n      refresh: function(){\n        this.cw = (this.core.opt.xscale * this.core.container.width());\n        this.ch = (this.core.opt.yscale * this.core.container.height());\n        if (this.last) {\n          this.renderCoords(this.last);\n        }\n      },\n      renderCoords: function(c){\n        var rx = this.width / c.w;\n        var ry = this.height / c.h;\n\n        this.preview.css({\n          width: Math.round(rx * this.cw) + 'px',\n          height: Math.round(ry * this.ch) + 'px',\n          marginLeft: '-' + Math.round(rx * c.x) + 'px',\n          marginTop: '-' + Math.round(ry * c.y) + 'px'\n        });\n\n        this.last = c;\n        return this;\n      },\n      renderSelection: function(s){\n        return this.renderCoords(s.core.unscale(s.get()));\n      },\n      selectionStart: function(s){\n        this.renderSelection(s);\n      },\n      show: function(){\n        if (this._hiding) clearTimeout(this._hiding);\n\n        if (!this.fading) this.element.stop().css({ opacity: 1 });\n        else this.element.stop().animate({ opacity: 1 },{ duration: 80, queue: false });\n      },\n      hide: function(){\n        var t = this;\n        if (!t.fading) t.element.hide();\n        else t._hiding = setTimeout(function(){\n          t._hiding = null;\n          t.element.stop().animate({ opacity: 0 },{ duration: t.fadeDuration, queue: false });\n        },t.fadeDelay);\n      },\n      initEvents: function(){\n        var t = this;\n        t.core.container.on('croprotstart croprotend cropimage cropstart cropmove cropend',function(e,s,c){\n          if (t.selectionTarget && (t.selectionTarget !== e.target)) return false;\n\n          switch(e.type){\n\n            case 'cropimage':\n              t.updateImage(c);\n              break;\n\n            case 'cropstart':\n              t.selectionStart(s);\n            case 'croprotstart':\n              t.show();\n              break;\n\n            case 'cropend':\n              t.renderCoords(c);\n            case 'croprotend':\n              if (t.autoHide) t.hide();\n              break;\n\n            case 'cropmove':\n              t.renderCoords(c);\n              break;\n          }\n        });\n      }\n    }\n  });\n  JcropAnsel.registerComponent('Thumbnailer',Thumbnailer);\n\n\n  /**\n   * DialDrag component\n   * This is a little hacky, it was adapted from some previous/old code\n   * Plan to update this API in the future\n   */\n  var DialDrag = function() { };\n\n  DialDrag.prototype = {\n\n    init: function(core,actuator,callback){\n      var that = this;\n\n      if (!actuator) actuator = core.container;\n      this.$btn = $(actuator);\n      this.$targ = $(actuator);\n      this.core = core;\n\n      this.$btn\n        .addClass('dialdrag')\n        .on('mousedown.dialdrag',this.mousedown())\n        .data('dialdrag',this);\n\n      if (!$.isFunction(callback)) callback = function(){ };\n      this.callback = callback;\n      this.ondone = callback;\n    },\n\n    remove: function(){\n      this.$btn\n        .removeClass('dialdrag')\n        .off('.dialdrag')\n        .data('dialdrag',null);\n      return this;\n    },\n\n    setTarget: function(obj){\n      this.$targ = $(obj);\n      return this;\n    },\n\n    getOffset: function(){\n      var targ = this.$targ, pos = targ.offset();\n      return [\n        pos.left + (targ.width()/2),\n        pos.top + (targ.height()/2)\n      ];\n    },\n\n    relMouse: function(e){\n      var x = e.pageX - this.offset[0],\n          y = e.pageY - this.offset[1],\n          ang = Math.atan2(y,x) * (180 / Math.PI),\n          vec = Math.sqrt(Math.pow(x,2)+Math.pow(y,2));\n      return [ x, y, ang, vec ];\n    },\n\n    mousedown: function(){\n      var that = this;\n\n      function mouseUp(e){\n        $(window).off('.dialdrag');\n        that.ondone.call(that,that.relMouse(e));\n        that.core.container.trigger('croprotend');\n      }\n\n      function mouseMove(e){\n        that.callback.call(that,that.relMouse(e));\n      }\n\n      return function(e) {\n        that.offset = that.getOffset();\n        var rel = that.relMouse(e);\n        that.angleOffset = -that.core.ui.stage.angle+rel[2];\n        that.distOffset = rel[3];\n        that.dragOffset = [rel[0],rel[1]];\n        that.core.container.trigger('croprotstart');\n\n        $(window)\n          .on('mousemove.dialdrag',mouseMove)\n          .on('mouseup.dialdrag',mouseUp);\n\n        that.callback.call(that,that.relMouse(e));\n\n        return false;\n      };\n    }\n\n  };\n  JcropAnsel.registerComponent('DialDrag',DialDrag);\n\n\n    /////////////////////////////////\n    // DEFAULT SETTINGS\n\n    JcropAnsel.defaults = {\n\n      // Selection Behavior\n      edge: { n: 0, s: 0, e: 0, w: 0 },\n      setSelect: null,\n      linked: true,\n      linkCurrent: true,\n      canDelete: true,\n      canSelect: true,\n      canDrag: true,\n      canResize: true,\n\n      // Component constructors\n      eventManagerComponent:  JcropAnsel.component.EventManager,\n      keyboardComponent:      JcropAnsel.component.Keyboard,\n      dragstateComponent:     JcropAnsel.component.DragState,\n      stagemanagerComponent:  JcropAnsel.component.StageManager,\n      animatorComponent:      JcropAnsel.component.Animator,\n      selectionComponent:     JcropAnsel.component.Selection,\n\n      // This is a function that is called, which returns a stage object\n      stageConstructor:       JcropAnsel.stageConstructor,\n\n      // Stage Behavior\n      allowSelect: true,\n      multi: false,\n      multiMax: false,\n      multiCleanup: true,\n      animation: true,\n      animEasing: 'swing',\n      animDuration: 400,\n      fading: true,\n      fadeDuration: 300,\n      fadeEasing: 'swing',\n      bgColor: 'black',\n      bgOpacity: .5,\n\n      // Startup options\n      applyFilters: [ 'constrain', 'extent', 'backoff', 'ratio', 'shader', 'round' ],\n      borders:  [ 'e', 'w', 's', 'n' ],\n      handles:  [ 'n', 's', 'e', 'w', 'sw', 'ne', 'nw', 'se' ],\n      dragbars: [ 'n', 'e', 'w', 's' ],\n\n      dragEventTarget: window,\n\n      xscale: 1,\n      yscale: 1,\n\n      boxWidth: null,\n      boxHeight: null,\n\n      // CSS Classes\n      // @todo: These need to be moved to top-level object keys\n      // for better customization. Currently if you try to extend one\n      // via an options object to JcropAnsel, it will wipe out all\n      // the others you don't specify. Be careful for now!\n      css_nodrag: 'jcrop-nodrag',\n      css_drag: 'jcrop-drag',\n      css_container: 'jcrop-active',\n      css_shades: 'jcrop-shades',\n      css_selection: 'jcrop-selection',\n      css_borders: 'jcrop-border',\n      css_handles: 'jcrop-handle jcrop-drag',\n      css_button: 'jcrop-box jcrop-drag',\n      css_noresize: 'jcrop-noresize',\n      css_dragbars: 'jcrop-dragbar jcrop-drag',\n\n      legacyHandlers: {\n        onChange: 'cropmove',\n        onSelect: 'cropend'\n      }\n\n    };\n\n\n  // JcropAnsel API methods\n  $.extend(JcropAnsel.prototype,{\n    //init: function(){{{\n    init: function(){\n      this.event = new this.opt.eventManagerComponent(this);\n      this.ui.keyboard = new this.opt.keyboardComponent(this);\n      this.ui.manager = new this.opt.stagemanagerComponent(this);\n      this.applyFilters();\n\n      if ($.JcropAnsel.supportsTouch)\n        new $.JcropAnsel.component.Touch(this);\n\n      this.initEvents();\n    },\n    //}}}\n    // applySizeConstraints: function(){{{\n    applySizeConstraints: function(){\n      var o = this.opt,\n          img = this.opt.imgsrc;\n\n      if (img){\n\n        var iw = img.naturalWidth || img.width,\n            ih = img.naturalHeight || img.height,\n            bw = o.boxWidth || iw,\n            bh = o.boxHeight || ih;\n\n        if (img && ((iw > bw) || (ih > bh))){\n          var bx = JcropAnsel.getLargestBox(iw/ih,bw,bh);\n          $(img).width(bx[0]).height(bx[1]);\n          this.resizeContainer(bx[0],bx[1]);\n          this.opt.xscale = iw / bx[0];\n          this.opt.yscale = ih / bx[1];\n        }\n\n      }\n\n      if (this.opt.trueSize){\n        var dw = this.opt.trueSize[0];\n        var dh = this.opt.trueSize[1];\n        var cs = this.getContainerSize();\n        this.opt.xscale = dw / cs[0];\n        this.opt.yscale = dh / cs[1];\n      }\n    },\n    // }}}\n    initComponent: function(name){\n      if (JcropAnsel.component[name]) {\n        var args = Array.prototype.slice.call(arguments);\n        var obj = new JcropAnsel.component[name];\n        args.shift();\n        args.unshift(this);\n        obj.init.apply(obj,args);\n        return obj;\n      }\n    },\n    // setOptions: function(opt){{{\n    setOptions: function(opt,proptype){\n\n      if (!$.isPlainObject(opt)) opt = {};\n\n      $.extend(this.opt,opt);\n\n      // Handle a setSelect value\n      if (this.opt.setSelect) {\n\n        // If there is no current selection\n        // passing setSelect will create one\n        if (!this.ui.multi.length)\n          this.newSelection();\n\n        // Use these values to update the current selection\n        this.setSelect(this.opt.setSelect);\n\n        // Set to null so it doesn't get called again\n        this.opt.setSelect = null;\n      }\n\n      this.event.trigger('configupdate');\n      return this;\n    },\n    // }}}\n    //destroy: function(){{{\n    destroy: function(){\n      if (this.opt.imgsrc) {\n        this.container.before(this.opt.imgsrc);\n        this.container.remove();\n        $(this.opt.imgsrc).removeData('JcropAnsel').show();\n      } else {\n        // @todo: more elegant destroy() process for non-image containers\n        this.container.remove();\n      }\n    },\n    // }}}\n    // applyFilters: function(){{{\n    applyFilters: function(){\n      var obj;\n      for(var i=0,f=this.opt.applyFilters,l=f.length; i<l; i++){\n        if ($.JcropAnsel.filter[f[i]])\n          obj = new $.JcropAnsel.filter[f[i]];\n          obj.core = this;\n          if (obj.init) obj.init();\n          this.filter[f[i]] = obj;\n      }\n    },\n    // }}}\n    // getDefaultFilters: function(){{{\n    getDefaultFilters: function(){\n      var rv = [];\n\n      for(var i=0,f=this.opt.applyFilters,l=f.length; i<l; i++)\n        if(this.filter.hasOwnProperty(f[i]))\n          rv.push(this.filter[f[i]]);\n\n      rv.sort(function(x,y){ return x.priority - y.priority; });\n      return rv;\n    },\n    // }}}\n    // setSelection: function(sel){{{\n    setSelection: function(sel){\n      var m = this.ui.multi;\n      var n = [];\n      for(var i=0;i<m.length;i++) {\n        if (m[i] !== sel) n.push(m[i]);\n        m[i].toBack();\n      }\n      n.unshift(sel);\n      this.ui.multi = n;\n      this.ui.selection = sel;\n      sel.toFront();\n      return sel;\n    },\n    // }}}\n    // getSelection: function(raw){{{\n    getSelection: function(raw){\n      var b = this.ui.selection.get();\n      return b;\n    },\n    // }}}\n    // newSelection: function(){{{\n    newSelection: function(sel){\n      if (!sel)\n        sel = new this.opt.selectionComponent();\n\n      sel.init(this);\n      this.setSelection(sel);\n\n      return sel;\n    },\n    // }}}\n    // hasSelection: function(sel){{{\n    hasSelection: function(sel){\n      for(var i=0;i<this.ui.multi;i++)\n        if (sel === this.ui.multi[i]) return true;\n    },\n    // }}}\n    // removeSelection: function(sel){{{\n    removeSelection: function(sel){\n      var i, n = [], m = this.ui.multi;\n      for(var i=0;i<m.length;i++){\n        if (sel !== m[i])\n          n.push(m[i]);\n        else m[i].remove();\n      }\n      return this.ui.multi = n;\n    },\n    // }}}\n    //addFilter: function(filter){{{\n    addFilter: function(filter){\n      for(var i=0,m=this.ui.multi,l=m.length; i<l; i++)\n        m[i].addFilter(filter);\n\n      return this;\n    },\n    //}}}\n    // removeFiltersByTag: function(tag){{{\n    removeFilter: function(filter){\n      for(var i=0,m=this.ui.multi,l=m.length; i<l; i++)\n        m[i].removeFilter(filter);\n\n      return this;\n    },\n    // }}}\n    // blur: function(){{{\n    blur: function(){\n      this.ui.selection.blur();\n      return this;\n    },\n    // }}}\n    // focus: function(){{{\n    focus: function(){\n      this.ui.selection.focus();\n      return this;\n    },\n    // }}}\n    //initEvents: function(){{{\n    initEvents: function(){\n      var t = this;\n      t.container.on('selectstart',function(e){ return false; })\n        .on('mousedown','.'+t.opt.css_drag,t.startDrag());\n    },\n    //}}}\n    // maxSelect: function(){{{\n    maxSelect: function(){\n      this.setSelect([0,0,this.elw,this.elh]);\n    },\n    // }}}\n    // nudge: function(x,y){{{\n    nudge: function(x,y){\n      var s = this.ui.selection, b = s.get();\n\n      b.x += x;\n      b.x2 += x;\n      b.y += y;\n      b.y2 += y;\n\n      if (b.x < 0) { b.x2 = b.w; b.x = 0; }\n        else if (b.x2 > this.elw) { b.x2 = this.elw; b.x = b.x2 - b.w; }\n\n      if (b.y < 0) { b.y2 = b.h; b.y = 0; }\n        else if (b.y2 > this.elh) { b.y2 = this.elh; b.y = b.y2 - b.h; }\n\n      s.element.trigger('cropstart',[s,this.unscale(b)]);\n      s.updateRaw(b,'move');\n      s.element.trigger('cropend',[s,this.unscale(b)]);\n    },\n    // }}}\n    // refresh: function(){{{\n    refresh: function(){\n      for(var i=0,s=this.ui.multi,l=s.length;i<l;i++)\n        s[i].refresh();\n    },\n    // }}}\n    // blurAll: function(){{{\n    blurAll: function(){\n      var m = this.ui.multi;\n      for(var i=0;i<m.length;i++) {\n        if (m[i] !== sel) n.push(m[i]);\n        m[i].toBack();\n      }\n    },\n    // }}}\n    // scale: function(b){{{\n    scale: function(b){\n      var xs = this.opt.xscale,\n          ys = this.opt.yscale;\n\n      return {\n        x: b.x / xs,\n        y: b.y / ys,\n        x2: b.x2 / xs,\n        y2: b.y2 / ys,\n        w: b.w / xs,\n        h: b.h / ys\n      };\n    },\n    // }}}\n    // unscale: function(b){{{\n    unscale: function(b){\n      var xs = this.opt.xscale,\n          ys = this.opt.yscale;\n\n      return {\n        x: b.x * xs,\n        y: b.y * ys,\n        x2: b.x2 * xs,\n        y2: b.y2 * ys,\n        w: b.w * xs,\n        h: b.h * ys\n      };\n    },\n    // }}}\n    // requestDelete: function(){{{\n    requestDelete: function(){\n      if ((this.ui.multi.length > 1) && (this.ui.selection.canDelete))\n        return this.deleteSelection();\n    },\n    // }}}\n    // deleteSelection: function(){{{\n    deleteSelection: function(){\n      if (this.ui.selection) {\n        this.removeSelection(this.ui.selection);\n        if (this.ui.multi.length) this.ui.multi[0].focus();\n        this.ui.selection.refresh();\n      }\n    },\n    // }}}\n    // animateTo: function(box){{{\n    animateTo: function(box){\n      if (this.ui.selection)\n        this.ui.selection.animateTo(box);\n      return this;\n    },\n    // }}}\n    // setselect: function(box){{{\n    setSelect: function(box){\n      if (this.ui.selection)\n        this.ui.selection.update(JcropAnsel.wrapFromXywh(box));\n      return this;\n    },\n    // }}}\n    //startDrag: function(){{{\n    startDrag: function(){\n      var t = this;\n      return function(e){\n        var $targ = $(e.target);\n        var selection = $targ.closest('.'+t.opt.css_selection).data('selection');\n        var ord = $targ.data('ord');\n        t.container.trigger('cropstart',[selection,t.unscale(selection.get())]);\n        selection.startDrag(e,ord);\n        return false;\n      };\n    },\n    //}}}\n    // getContainerSize: function(){{{\n    getContainerSize: function(){\n      return [ this.container.width(), this.container.height() ];\n    },\n    // }}}\n    // resizeContainer: function(w,h){{{\n    resizeContainer: function(w,h){\n      this.container.width(w).height(h);\n      this.refresh();\n    },\n    // }}}\n    // setImage: function(src,cb){{{\n    setImage: function(src,cb){\n      var t = this, targ = t.opt.imgsrc;\n\n      if (!targ) return false;\n\n      new $.JcropAnsel.component.ImageLoader(src,null,function(w,h){\n        t.resizeContainer(w,h);\n\n        targ.src = src;\n        $(targ).width(w).height(h);\n        t.applySizeConstraints();\n        t.refresh();\n        t.container.trigger('cropimage',[t,targ]);\n\n        if (typeof cb == 'function')\n          cb.call(t,w,h);\n      });\n    },\n    // }}}\n    // update: function(b){{{\n    update: function(b){\n      if (this.ui.selection)\n        this.ui.selection.update(b);\n    }\n    // }}}\n  });\n\n  // JcropAnsel jQuery plugin function\n  $.fn.JcropAnsel = function(options,callback){\n    options = options || {};\n\n    var first = this.eq(0).data('JcropAnsel');\n    var args = Array.prototype.slice.call(arguments);\n\n    // Return API if requested\n    if (options == 'api') { return first; }\n\n    // Allow calling API methods (with arguments)\n    else if (first && (typeof options == 'string')) {\n\n      // Call method if it exists\n      if (first[options]) {\n        args.shift();\n        first[options].apply(first,args);\n        return first;\n      }\n\n      // Unknown input/method does not exist\n      return false;\n    }\n\n    // Otherwise, loop over selected elements\n    this.each(function(){\n      var t = this, $t = $(this);\n      var exists = $t.data('JcropAnsel');\n      var obj;\n\n      // If JcropAnsel already exists on this element only setOptions()\n      if (exists)\n        exists.setOptions(options);\n\n      else {\n\n        if (!options.stageConstructor)\n          options.stageConstructor = $.JcropAnsel.stageConstructor;\n\n        options.stageConstructor(this,options,function(stage,options){\n          var selection = options.setSelect;\n          if (selection) delete(options.setSelect);\n\n          var obj = $.JcropAnsel.attach(stage.element,options);\n\n          if (typeof stage.attach == 'function')\n            stage.attach(obj);\n\n          $t.data('JcropAnsel',obj);\n\n          if (selection) {\n            obj.newSelection();\n            obj.setSelect(selection);\n          }\n\n          if (typeof callback == 'function')\n            callback.call(obj);\n        });\n      }\n\n      return this;\n    });\n  };\n\n/* Modernizr 2.7.1 (Custom Build) | MIT & BSD\n * Build: http://modernizr.com/download/#-csstransforms-canvas-canvastext-draganddrop-inlinesvg-svg-svgclippaths-touch-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-url_data_uri\n */\n;\n\nvar Modernizr = (function( window, document, undefined ) {\n\n    var version = '2.7.1',\n\n    Modernizr = {},\n\n\n    docElement = document.documentElement,\n\n    mod = 'modernizr',\n    modElem = document.createElement(mod),\n    mStyle = modElem.style,\n\n    inputElem  ,\n\n\n    toString = {}.toString,\n\n    prefixes = ' -webkit- -moz- -o- -ms- '.split(' '),\n\n\n\n    omPrefixes = 'Webkit Moz O ms',\n\n    cssomPrefixes = omPrefixes.split(' '),\n\n    domPrefixes = omPrefixes.toLowerCase().split(' '),\n\n    ns = {'svg': 'http://www.w3.org/2000/svg'},\n\n    tests = {},\n    inputs = {},\n    attrs = {},\n\n    classes = [],\n\n    slice = classes.slice,\n\n    featureName,\n\n\n    injectElementWithStyles = function( rule, callback, nodes, testnames ) {\n\n      var style, ret, node, docOverflow,\n          div = document.createElement('div'),\n                body = document.body,\n                fakeBody = body || document.createElement('body');\n\n      if ( parseInt(nodes, 10) ) {\n                      while ( nodes-- ) {\n              node = document.createElement('div');\n              node.id = testnames ? testnames[nodes] : mod + (nodes + 1);\n              div.appendChild(node);\n          }\n      }\n\n                style = ['&#173;','<style id=\"s', mod, '\">', rule, '</style>'].join('');\n      div.id = mod;\n          (body ? div : fakeBody).innerHTML += style;\n      fakeBody.appendChild(div);\n      if ( !body ) {\n                fakeBody.style.background = '';\n                fakeBody.style.overflow = 'hidden';\n          docOverflow = docElement.style.overflow;\n          docElement.style.overflow = 'hidden';\n          docElement.appendChild(fakeBody);\n      }\n\n      ret = callback(div, rule);\n        if ( !body ) {\n          fakeBody.parentNode.removeChild(fakeBody);\n          docElement.style.overflow = docOverflow;\n      } else {\n          div.parentNode.removeChild(div);\n      }\n\n      return !!ret;\n\n    },\n\n\n\n    isEventSupported = (function() {\n\n      var TAGNAMES = {\n        'select': 'input', 'change': 'input',\n        'submit': 'form', 'reset': 'form',\n        'error': 'img', 'load': 'img', 'abort': 'img'\n      };\n\n      function isEventSupported( eventName, element ) {\n\n        element = element || document.createElement(TAGNAMES[eventName] || 'div');\n        eventName = 'on' + eventName;\n\n            var isSupported = eventName in element;\n\n        if ( !isSupported ) {\n                if ( !element.setAttribute ) {\n            element = document.createElement('div');\n          }\n          if ( element.setAttribute && element.removeAttribute ) {\n            element.setAttribute(eventName, '');\n            isSupported = is(element[eventName], 'function');\n\n                    if ( !is(element[eventName], 'undefined') ) {\n              element[eventName] = undefined;\n            }\n            element.removeAttribute(eventName);\n          }\n        }\n\n        element = null;\n        return isSupported;\n      }\n      return isEventSupported;\n    })(),\n\n\n    _hasOwnProperty = ({}).hasOwnProperty, hasOwnProp;\n\n    if ( !is(_hasOwnProperty, 'undefined') && !is(_hasOwnProperty.call, 'undefined') ) {\n      hasOwnProp = function (object, property) {\n        return _hasOwnProperty.call(object, property);\n      };\n    }\n    else {\n      hasOwnProp = function (object, property) {\n        return ((property in object) && is(object.constructor.prototype[property], 'undefined'));\n      };\n    }\n\n\n    if (!Function.prototype.bind) {\n      Function.prototype.bind = function bind(that) {\n\n        var target = this;\n\n        if (typeof target != \"function\") {\n            throw new TypeError();\n        }\n\n        var args = slice.call(arguments, 1),\n            bound = function () {\n\n            if (this instanceof bound) {\n\n              var F = function(){};\n              F.prototype = target.prototype;\n              var self = new F();\n\n              var result = target.apply(\n                  self,\n                  args.concat(slice.call(arguments))\n              );\n              if (Object(result) === result) {\n                  return result;\n              }\n              return self;\n\n            } else {\n\n              return target.apply(\n                  that,\n                  args.concat(slice.call(arguments))\n              );\n\n            }\n\n        };\n\n        return bound;\n      };\n    }\n\n    function setCss( str ) {\n        mStyle.cssText = str;\n    }\n\n    function setCssAll( str1, str2 ) {\n        return setCss(prefixes.join(str1 + ';') + ( str2 || '' ));\n    }\n\n    function is( obj, type ) {\n        return typeof obj === type;\n    }\n\n    function contains( str, substr ) {\n        return !!~('' + str).indexOf(substr);\n    }\n\n    function testProps( props, prefixed ) {\n        for ( var i in props ) {\n            var prop = props[i];\n            if ( !contains(prop, \"-\") && mStyle[prop] !== undefined ) {\n                return prefixed == 'pfx' ? prop : true;\n            }\n        }\n        return false;\n    }\n\n    function testDOMProps( props, obj, elem ) {\n        for ( var i in props ) {\n            var item = obj[props[i]];\n            if ( item !== undefined) {\n\n                            if (elem === false) return props[i];\n\n                            if (is(item, 'function')){\n                                return item.bind(elem || obj);\n                }\n\n                            return item;\n            }\n        }\n        return false;\n    }\n\n    function testPropsAll( prop, prefixed, elem ) {\n\n        var ucProp  = prop.charAt(0).toUpperCase() + prop.slice(1),\n            props   = (prop + ' ' + cssomPrefixes.join(ucProp + ' ') + ucProp).split(' ');\n\n            if(is(prefixed, \"string\") || is(prefixed, \"undefined\")) {\n          return testProps(props, prefixed);\n\n            } else {\n          props = (prop + ' ' + (domPrefixes).join(ucProp + ' ') + ucProp).split(' ');\n          return testDOMProps(props, prefixed, elem);\n        }\n    }\n\n\n\n    tests['canvas'] = function() {\n        var elem = document.createElement('canvas');\n        return !!(elem.getContext && elem.getContext('2d'));\n    };\n\n    tests['canvastext'] = function() {\n        return !!(Modernizr['canvas'] && is(document.createElement('canvas').getContext('2d').fillText, 'function'));\n    };\n    tests['touch'] = function() {\n        var bool;\n\n        if(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n          bool = true;\n        } else {\n          injectElementWithStyles(['@media (',prefixes.join('touch-enabled),('),mod,')','{#modernizr{top:9px;position:absolute}}'].join(''), function( node ) {\n            bool = node.offsetTop === 9;\n          });\n        }\n\n        return bool;\n    };\n\n    tests['draganddrop'] = function() {\n        var div = document.createElement('div');\n        return ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div);\n    };\n\n\n    tests['csstransforms'] = function() {\n        return !!testPropsAll('transform');\n    };\n\n\n    tests['svg'] = function() {\n        return !!document.createElementNS && !!document.createElementNS(ns.svg, 'svg').createSVGRect;\n    };\n\n    tests['inlinesvg'] = function() {\n      var div = document.createElement('div');\n      div.innerHTML = '<svg/>';\n      return (div.firstChild && div.firstChild.namespaceURI) == ns.svg;\n    };\n\n\n\n    tests['svgclippaths'] = function() {\n        return !!document.createElementNS && /SVGClipPath/.test(toString.call(document.createElementNS(ns.svg, 'clipPath')));\n    };\n\n    for ( var feature in tests ) {\n        if ( hasOwnProp(tests, feature) ) {\n                                    featureName  = feature.toLowerCase();\n            Modernizr[featureName] = tests[feature]();\n\n            classes.push((Modernizr[featureName] ? '' : 'no-') + featureName);\n        }\n    }\n\n\n\n     Modernizr.addTest = function ( feature, test ) {\n       if ( typeof feature == 'object' ) {\n         for ( var key in feature ) {\n           if ( hasOwnProp( feature, key ) ) {\n             Modernizr.addTest( key, feature[ key ] );\n           }\n         }\n       } else {\n\n         feature = feature.toLowerCase();\n\n         if ( Modernizr[feature] !== undefined ) {\n                                              return Modernizr;\n         }\n\n         test = typeof test == 'function' ? test() : test;\n\n         if (typeof enableClasses !== \"undefined\" && enableClasses) {\n           docElement.className += ' ' + (test ? '' : 'no-') + feature;\n         }\n         Modernizr[feature] = test;\n\n       }\n\n       return Modernizr;\n     };\n\n\n    setCss('');\n    modElem = inputElem = null;\n\n\n    Modernizr._version      = version;\n\n    Modernizr._prefixes     = prefixes;\n    Modernizr._domPrefixes  = domPrefixes;\n    Modernizr._cssomPrefixes  = cssomPrefixes;\n\n\n    Modernizr.hasEvent      = isEventSupported;\n\n    Modernizr.testProp      = function(prop){\n        return testProps([prop]);\n    };\n\n    Modernizr.testAllProps  = testPropsAll;\n\n\n    Modernizr.testStyles    = injectElementWithStyles;\n    return Modernizr;\n\n})(window, window.document);\n// data uri test.\n// https://github.com/Modernizr/Modernizr/issues/14\n\n// This test is asynchronous. Watch out.\n\n\n// in IE7 in HTTPS this can cause a Mixed Content security popup.\n//  github.com/Modernizr/Modernizr/issues/362\n// To avoid that you can create a new iframe and inject this.. perhaps..\n\n\n(function(){\n\n  var datauri = new Image();\n\n\n  datauri.onerror = function() {\n      Modernizr.addTest('datauri', function () { return false; });\n  };\n  datauri.onload = function() {\n      Modernizr.addTest('datauri', function () { return (datauri.width == 1 && datauri.height == 1); });\n  };\n\n  datauri.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\n\n})();\n;\n\n  // Attach to jQuery object\n  $.JcropAnsel = JcropAnsel;\n\n  $.JcropAnsel.supportsCanvas = Modernizr.canvas;\n  $.JcropAnsel.supportsCanvasText = Modernizr.canvastext;\n  $.JcropAnsel.supportsDragAndDrop = Modernizr.draganddrop;\n  $.JcropAnsel.supportsDataURI = Modernizr.datauri;\n  $.JcropAnsel.supportsSVG = Modernizr.svg;\n  $.JcropAnsel.supportsInlineSVG = Modernizr.inlinesvg;\n  $.JcropAnsel.supportsSVGClipPaths = Modernizr.svgclippaths;\n  $.JcropAnsel.supportsCSSTransforms = Modernizr.csstransforms;\n  $.JcropAnsel.supportsTouch = Modernizr.touch;\n\n})(jQuery);\n","/**\n * jQuery js hide\n *\n * @package jquery.jsHide\n * @author TJ Draper <tj@buzzingpixel.com>\n * @version 1.0.0\n */\n\n(function($) {\n\t$.fn.jsHide = function() {\n\t\tthis.addClass('js-hide');\n\t\treturn this;\n\t};\n\n\t$.fn.jsShow = function() {\n\t\tthis.removeClass('js-hide');\n\t\treturn this;\n\t};\n})(window.jQuery);\n","/**\n * String toCamelCase prototype method\n *\n * @package prototype.toCamelCase\n * @author TJ Draper <tj@buzzingpixel.com>\n * @version 1.0.0\n */\n\nString.prototype.toCamelCase = function() {\n\treturn this.toLowerCase()\n\t\t// Replaces any - or _ characters with a space\n\t\t.replace(/[-_]+/g, ' ')\n\t\t// Removes any non alphanumeric characters\n\t\t.replace(/[^\\w\\s]/g, '')\n\t\t// Uppercases the first character in each group immediately following a space\n\t\t// (delimited by spaces)\n\t\t.replace(/ (.)/g, function($1) {\n\t\t\treturn $1.toUpperCase();\n\t\t})\n\t\t// Removes spaces\n\t\t.replace(/ /g, '');\n};\n","/* jshint ignore:start */\n// jscs:disable\n\n/*!\n * Select2 4.0.3\n * https://select2.github.io\n *\n * Released under the MIT license\n * https://github.com/select2/select2/blob/master/LICENSE.md\n */\n(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    // Node/CommonJS\n    factory(require('jquery'));\n  } else {\n    // Browser globals\n    factory(jQuery);\n  }\n}(function (jQuery) {\n  // This is needed so we can catch the AMD loader configuration and use it\n  // The inner file should be wrapped (by `banner.start.js`) in a function that\n  // returns the AMD loader references.\n  var S2 =\n(function () {\n  // Restore the Select2 AMD loader so it can be used\n  // Needed mostly in the language files, where the loader is not inserted\n  if (jQuery && jQuery.fn && jQuery.fn.select2 && jQuery.fn.select2.amd) {\n    var S2 = jQuery.fn.select2.amd;\n  }\nvar S2;(function () { if (!S2 || !S2.requirejs) {\nif (!S2) { S2 = {}; } else { require = S2; }\n/**\n * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/almond for details\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*jslint sloppy: true */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice,\n        jsSuffixRegExp = /\\.js$/;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n            foundI, foundStarMap, starI, i, j, part,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name && name.charAt(0) === \".\") {\n            //If have a base name, try to normalize against it,\n            //otherwise, assume it is a top-level require that will\n            //be relative to baseUrl in the end.\n            if (baseName) {\n                name = name.split('/');\n                lastIndex = name.length - 1;\n\n                // Node .js allowance:\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n                }\n\n                //Lop off the last part of baseParts, so that . matches the\n                //\"directory\" and not name of the baseName's module. For instance,\n                //baseName of \"one/two/three\", maps to \"one/two/three.js\", but we\n                //want the directory, \"one/two\" for this normalization.\n                name = baseParts.slice(0, baseParts.length - 1).concat(name);\n\n                //start trimDots\n                for (i = 0; i < name.length; i += 1) {\n                    part = name[i];\n                    if (part === \".\") {\n                        name.splice(i, 1);\n                        i -= 1;\n                    } else if (part === \"..\") {\n                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {\n                            //End of the line. Keep at least one non-dot\n                            //path segment at the front so it can be mapped\n                            //correctly to disk. Otherwise, there is likely\n                            //no path mapping for a path starting with '..'.\n                            //This can still fail, but catches the most reasonable\n                            //uses of ..\n                            break;\n                        } else if (i > 0) {\n                            name.splice(i - 1, 2);\n                            i -= 2;\n                        }\n                    }\n                }\n                //end trimDots\n\n                name = name.join(\"/\");\n            } else if (name.indexOf('./') === 0) {\n                // No baseName, so this is ID is resolved relative\n                // to baseUrl, pull off the leading dot.\n                name = name.substring(2);\n            }\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            var args = aps.call(arguments, 0);\n\n            //If first arg is not require('string'), and there is only\n            //one arg, it is the array form without a callback. Insert\n            //a null so that the following concat is correct.\n            if (typeof args[0] !== 'string' && args.length === 1) {\n                args.push(null);\n            }\n            return req.apply(undef, args.concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relName) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relName));\n            } else {\n                name = normalize(name, relName);\n            }\n        } else {\n            name = normalize(name, relName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i,\n            args = [],\n            callbackType = typeof callback,\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n\n        //Call the callback to define the module, if necessary.\n        if (callbackType === 'undefined' || callbackType === 'function') {\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relName);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback ? callback.apply(defined[name], args) : undefined;\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, callback).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (config.deps) {\n                req(config.deps, config.callback);\n            }\n            if (!callback) {\n                return;\n            }\n\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        return req(cfg);\n    };\n\n    /**\n     * Expose module registry for debugging and tooling\n     */\n    requirejs._defined = defined;\n\n    define = function (name, deps, callback) {\n        if (typeof name !== 'string') {\n            throw new Error('See almond README: incorrect module build, no module name');\n        }\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\nS2.requirejs = requirejs;S2.require = require;S2.define = define;\n}\n}());\nS2.define(\"almond\", function(){});\n\nS2.define('jquery',[],function () {\n  var _$ = jQuery || $;\n\n  if (_$ == null && console && console.error) {\n    console.error(\n      'Select2: An instance of jQuery or a jQuery-compatible library was not ' +\n      'found. Make sure that you are including jQuery before Select2 on your ' +\n      'web page.'\n    );\n  }\n\n  return _$;\n});\n\nS2.define('select2/utils',[\n  'jquery'\n], function ($) {\n  var Utils = {};\n\n  Utils.Extend = function (ChildClass, SuperClass) {\n    var __hasProp = {}.hasOwnProperty;\n\n    function BaseConstructor () {\n      this.constructor = ChildClass;\n    }\n\n    for (var key in SuperClass) {\n      if (__hasProp.call(SuperClass, key)) {\n        ChildClass[key] = SuperClass[key];\n      }\n    }\n\n    BaseConstructor.prototype = SuperClass.prototype;\n    ChildClass.prototype = new BaseConstructor();\n    ChildClass.__super__ = SuperClass.prototype;\n\n    return ChildClass;\n  };\n\n  function getMethods (theClass) {\n    var proto = theClass.prototype;\n\n    var methods = [];\n\n    for (var methodName in proto) {\n      var m = proto[methodName];\n\n      if (typeof m !== 'function') {\n        continue;\n      }\n\n      if (methodName === 'constructor') {\n        continue;\n      }\n\n      methods.push(methodName);\n    }\n\n    return methods;\n  }\n\n  Utils.Decorate = function (SuperClass, DecoratorClass) {\n    var decoratedMethods = getMethods(DecoratorClass);\n    var superMethods = getMethods(SuperClass);\n\n    function DecoratedClass () {\n      var unshift = Array.prototype.unshift;\n\n      var argCount = DecoratorClass.prototype.constructor.length;\n\n      var calledConstructor = SuperClass.prototype.constructor;\n\n      if (argCount > 0) {\n        unshift.call(arguments, SuperClass.prototype.constructor);\n\n        calledConstructor = DecoratorClass.prototype.constructor;\n      }\n\n      calledConstructor.apply(this, arguments);\n    }\n\n    DecoratorClass.displayName = SuperClass.displayName;\n\n    function ctr () {\n      this.constructor = DecoratedClass;\n    }\n\n    DecoratedClass.prototype = new ctr();\n\n    for (var m = 0; m < superMethods.length; m++) {\n        var superMethod = superMethods[m];\n\n        DecoratedClass.prototype[superMethod] =\n          SuperClass.prototype[superMethod];\n    }\n\n    var calledMethod = function (methodName) {\n      // Stub out the original method if it's not decorating an actual method\n      var originalMethod = function () {};\n\n      if (methodName in DecoratedClass.prototype) {\n        originalMethod = DecoratedClass.prototype[methodName];\n      }\n\n      var decoratedMethod = DecoratorClass.prototype[methodName];\n\n      return function () {\n        var unshift = Array.prototype.unshift;\n\n        unshift.call(arguments, originalMethod);\n\n        return decoratedMethod.apply(this, arguments);\n      };\n    };\n\n    for (var d = 0; d < decoratedMethods.length; d++) {\n      var decoratedMethod = decoratedMethods[d];\n\n      DecoratedClass.prototype[decoratedMethod] = calledMethod(decoratedMethod);\n    }\n\n    return DecoratedClass;\n  };\n\n  var Observable = function () {\n    this.listeners = {};\n  };\n\n  Observable.prototype.on = function (event, callback) {\n    this.listeners = this.listeners || {};\n\n    if (event in this.listeners) {\n      this.listeners[event].push(callback);\n    } else {\n      this.listeners[event] = [callback];\n    }\n  };\n\n  Observable.prototype.trigger = function (event) {\n    var slice = Array.prototype.slice;\n    var params = slice.call(arguments, 1);\n\n    this.listeners = this.listeners || {};\n\n    // Params should always come in as an array\n    if (params == null) {\n      params = [];\n    }\n\n    // If there are no arguments to the event, use a temporary object\n    if (params.length === 0) {\n      params.push({});\n    }\n\n    // Set the `_type` of the first object to the event\n    params[0]._type = event;\n\n    if (event in this.listeners) {\n      this.invoke(this.listeners[event], slice.call(arguments, 1));\n    }\n\n    if ('*' in this.listeners) {\n      this.invoke(this.listeners['*'], arguments);\n    }\n  };\n\n  Observable.prototype.invoke = function (listeners, params) {\n    for (var i = 0, len = listeners.length; i < len; i++) {\n      listeners[i].apply(this, params);\n    }\n  };\n\n  Utils.Observable = Observable;\n\n  Utils.generateChars = function (length) {\n    var chars = '';\n\n    for (var i = 0; i < length; i++) {\n      var randomChar = Math.floor(Math.random() * 36);\n      chars += randomChar.toString(36);\n    }\n\n    return chars;\n  };\n\n  Utils.bind = function (func, context) {\n    return function () {\n      func.apply(context, arguments);\n    };\n  };\n\n  Utils._convertData = function (data) {\n    for (var originalKey in data) {\n      var keys = originalKey.split('-');\n\n      var dataLevel = data;\n\n      if (keys.length === 1) {\n        continue;\n      }\n\n      for (var k = 0; k < keys.length; k++) {\n        var key = keys[k];\n\n        // Lowercase the first letter\n        // By default, dash-separated becomes camelCase\n        key = key.substring(0, 1).toLowerCase() + key.substring(1);\n\n        if (!(key in dataLevel)) {\n          dataLevel[key] = {};\n        }\n\n        if (k == keys.length - 1) {\n          dataLevel[key] = data[originalKey];\n        }\n\n        dataLevel = dataLevel[key];\n      }\n\n      delete data[originalKey];\n    }\n\n    return data;\n  };\n\n  Utils.hasScroll = function (index, el) {\n    // Adapted from the function created by @ShadowScripter\n    // and adapted by @BillBarry on the Stack Exchange Code Review website.\n    // The original code can be found at\n    // http://codereview.stackexchange.com/q/13338\n    // and was designed to be used with the Sizzle selector engine.\n\n    var $el = $(el);\n    var overflowX = el.style.overflowX;\n    var overflowY = el.style.overflowY;\n\n    //Check both x and y declarations\n    if (overflowX === overflowY &&\n        (overflowY === 'hidden' || overflowY === 'visible')) {\n      return false;\n    }\n\n    if (overflowX === 'scroll' || overflowY === 'scroll') {\n      return true;\n    }\n\n    return ($el.innerHeight() < el.scrollHeight ||\n      $el.innerWidth() < el.scrollWidth);\n  };\n\n  Utils.escapeMarkup = function (markup) {\n    var replaceMap = {\n      '\\\\': '&#92;',\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '/': '&#47;'\n    };\n\n    // Do not try to escape the markup if it's not a string\n    if (typeof markup !== 'string') {\n      return markup;\n    }\n\n    return String(markup).replace(/[&<>\"'\\/\\\\]/g, function (match) {\n      return replaceMap[match];\n    });\n  };\n\n  // Append an array of jQuery nodes to a given element.\n  Utils.appendMany = function ($element, $nodes) {\n    // jQuery 1.7.x does not support $.fn.append() with an array\n    // Fall back to a jQuery object collection using $.fn.add()\n    if ($.fn.jquery.substr(0, 3) === '1.7') {\n      var $jqNodes = $();\n\n      $.map($nodes, function (node) {\n        $jqNodes = $jqNodes.add(node);\n      });\n\n      $nodes = $jqNodes;\n    }\n\n    $element.append($nodes);\n  };\n\n  return Utils;\n});\n\nS2.define('select2/results',[\n  'jquery',\n  './utils'\n], function ($, Utils) {\n  function Results ($element, options, dataAdapter) {\n    this.$element = $element;\n    this.data = dataAdapter;\n    this.options = options;\n\n    Results.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(Results, Utils.Observable);\n\n  Results.prototype.render = function () {\n    var $results = $(\n      '<ul class=\"select2-results__options\" role=\"tree\"></ul>'\n    );\n\n    if (this.options.get('multiple')) {\n      $results.attr('aria-multiselectable', 'true');\n    }\n\n    this.$results = $results;\n\n    return $results;\n  };\n\n  Results.prototype.clear = function () {\n    this.$results.empty();\n  };\n\n  Results.prototype.displayMessage = function (params) {\n    var escapeMarkup = this.options.get('escapeMarkup');\n\n    this.clear();\n    this.hideLoading();\n\n    var $message = $(\n      '<li role=\"treeitem\" aria-live=\"assertive\"' +\n      ' class=\"select2-results__option\"></li>'\n    );\n\n    var message = this.options.get('translations').get(params.message);\n\n    $message.append(\n      escapeMarkup(\n        message(params.args)\n      )\n    );\n\n    $message[0].className += ' select2-results__message';\n\n    this.$results.append($message);\n  };\n\n  Results.prototype.hideMessages = function () {\n    this.$results.find('.select2-results__message').remove();\n  };\n\n  Results.prototype.append = function (data) {\n    this.hideLoading();\n\n    var $options = [];\n\n    if (data.results == null || data.results.length === 0) {\n      if (this.$results.children().length === 0) {\n        this.trigger('results:message', {\n          message: 'noResults'\n        });\n      }\n\n      return;\n    }\n\n    data.results = this.sort(data.results);\n\n    for (var d = 0; d < data.results.length; d++) {\n      var item = data.results[d];\n\n      var $option = this.option(item);\n\n      $options.push($option);\n    }\n\n    this.$results.append($options);\n  };\n\n  Results.prototype.position = function ($results, $dropdown) {\n    var $resultsContainer = $dropdown.find('.select2-results');\n    $resultsContainer.append($results);\n  };\n\n  Results.prototype.sort = function (data) {\n    var sorter = this.options.get('sorter');\n\n    return sorter(data);\n  };\n\n  Results.prototype.highlightFirstItem = function () {\n    var $options = this.$results\n      .find('.select2-results__option[aria-selected]');\n\n    var $selected = $options.filter('[aria-selected=true]');\n\n    // Check if there are any selected options\n    if ($selected.length > 0) {\n      // If there are selected options, highlight the first\n      $selected.first().trigger('mouseenter');\n    } else {\n      // If there are no selected options, highlight the first option\n      // in the dropdown\n      $options.first().trigger('mouseenter');\n    }\n\n    this.ensureHighlightVisible();\n  };\n\n  Results.prototype.setClasses = function () {\n    var self = this;\n\n    this.data.current(function (selected) {\n      var selectedIds = $.map(selected, function (s) {\n        return s.id.toString();\n      });\n\n      var $options = self.$results\n        .find('.select2-results__option[aria-selected]');\n\n      $options.each(function () {\n        var $option = $(this);\n\n        var item = $.data(this, 'data');\n\n        // id needs to be converted to a string when comparing\n        var id = '' + item.id;\n\n        if ((item.element != null && item.element.selected) ||\n            (item.element == null && $.inArray(id, selectedIds) > -1)) {\n          $option.attr('aria-selected', 'true');\n        } else {\n          $option.attr('aria-selected', 'false');\n        }\n      });\n\n    });\n  };\n\n  Results.prototype.showLoading = function (params) {\n    this.hideLoading();\n\n    var loadingMore = this.options.get('translations').get('searching');\n\n    var loading = {\n      disabled: true,\n      loading: true,\n      text: loadingMore(params)\n    };\n    var $loading = this.option(loading);\n    $loading.className += ' loading-results';\n\n    this.$results.prepend($loading);\n  };\n\n  Results.prototype.hideLoading = function () {\n    this.$results.find('.loading-results').remove();\n  };\n\n  Results.prototype.option = function (data) {\n    var option = document.createElement('li');\n    option.className = 'select2-results__option';\n\n    var attrs = {\n      'role': 'treeitem',\n      'aria-selected': 'false'\n    };\n\n    if (data.disabled) {\n      delete attrs['aria-selected'];\n      attrs['aria-disabled'] = 'true';\n    }\n\n    if (data.id == null) {\n      delete attrs['aria-selected'];\n    }\n\n    if (data._resultId != null) {\n      option.id = data._resultId;\n    }\n\n    if (data.title) {\n      option.title = data.title;\n    }\n\n    if (data.children) {\n      attrs.role = 'group';\n      attrs['aria-label'] = data.text;\n      delete attrs['aria-selected'];\n    }\n\n    for (var attr in attrs) {\n      var val = attrs[attr];\n\n      option.setAttribute(attr, val);\n    }\n\n    if (data.children) {\n      var $option = $(option);\n\n      var label = document.createElement('strong');\n      label.className = 'select2-results__group';\n\n      var $label = $(label);\n      this.template(data, label);\n\n      var $children = [];\n\n      for (var c = 0; c < data.children.length; c++) {\n        var child = data.children[c];\n\n        var $child = this.option(child);\n\n        $children.push($child);\n      }\n\n      var $childrenContainer = $('<ul></ul>', {\n        'class': 'select2-results__options select2-results__options--nested'\n      });\n\n      $childrenContainer.append($children);\n\n      $option.append(label);\n      $option.append($childrenContainer);\n    } else {\n      this.template(data, option);\n    }\n\n    $.data(option, 'data', data);\n\n    return option;\n  };\n\n  Results.prototype.bind = function (container, $container) {\n    var self = this;\n\n    var id = container.id + '-results';\n\n    this.$results.attr('id', id);\n\n    container.on('results:all', function (params) {\n      self.clear();\n      self.append(params.data);\n\n      if (container.isOpen()) {\n        self.setClasses();\n        self.highlightFirstItem();\n      }\n    });\n\n    container.on('results:append', function (params) {\n      self.append(params.data);\n\n      if (container.isOpen()) {\n        self.setClasses();\n      }\n    });\n\n    container.on('query', function (params) {\n      self.hideMessages();\n      self.showLoading(params);\n    });\n\n    container.on('select', function () {\n      if (!container.isOpen()) {\n        return;\n      }\n\n      self.setClasses();\n      self.highlightFirstItem();\n    });\n\n    container.on('unselect', function () {\n      if (!container.isOpen()) {\n        return;\n      }\n\n      self.setClasses();\n      self.highlightFirstItem();\n    });\n\n    container.on('open', function () {\n      // When the dropdown is open, aria-expended=\"true\"\n      self.$results.attr('aria-expanded', 'true');\n      self.$results.attr('aria-hidden', 'false');\n\n      self.setClasses();\n      self.ensureHighlightVisible();\n    });\n\n    container.on('close', function () {\n      // When the dropdown is closed, aria-expended=\"false\"\n      self.$results.attr('aria-expanded', 'false');\n      self.$results.attr('aria-hidden', 'true');\n      self.$results.removeAttr('aria-activedescendant');\n    });\n\n    container.on('results:toggle', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      if ($highlighted.length === 0) {\n        return;\n      }\n\n      $highlighted.trigger('mouseup');\n    });\n\n    container.on('results:select', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      if ($highlighted.length === 0) {\n        return;\n      }\n\n      var data = $highlighted.data('data');\n\n      if ($highlighted.attr('aria-selected') == 'true') {\n        self.trigger('close', {});\n      } else {\n        self.trigger('select', {\n          data: data\n        });\n      }\n    });\n\n    container.on('results:previous', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      var $options = self.$results.find('[aria-selected]');\n\n      var currentIndex = $options.index($highlighted);\n\n      // If we are already at te top, don't move further\n      if (currentIndex === 0) {\n        return;\n      }\n\n      var nextIndex = currentIndex - 1;\n\n      // If none are highlighted, highlight the first\n      if ($highlighted.length === 0) {\n        nextIndex = 0;\n      }\n\n      var $next = $options.eq(nextIndex);\n\n      $next.trigger('mouseenter');\n\n      var currentOffset = self.$results.offset().top;\n      var nextTop = $next.offset().top;\n      var nextOffset = self.$results.scrollTop() + (nextTop - currentOffset);\n\n      if (nextIndex === 0) {\n        self.$results.scrollTop(0);\n      } else if (nextTop - currentOffset < 0) {\n        self.$results.scrollTop(nextOffset);\n      }\n    });\n\n    container.on('results:next', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      var $options = self.$results.find('[aria-selected]');\n\n      var currentIndex = $options.index($highlighted);\n\n      var nextIndex = currentIndex + 1;\n\n      // If we are at the last option, stay there\n      if (nextIndex >= $options.length) {\n        return;\n      }\n\n      var $next = $options.eq(nextIndex);\n\n      $next.trigger('mouseenter');\n\n      var currentOffset = self.$results.offset().top +\n        self.$results.outerHeight(false);\n      var nextBottom = $next.offset().top + $next.outerHeight(false);\n      var nextOffset = self.$results.scrollTop() + nextBottom - currentOffset;\n\n      if (nextIndex === 0) {\n        self.$results.scrollTop(0);\n      } else if (nextBottom > currentOffset) {\n        self.$results.scrollTop(nextOffset);\n      }\n    });\n\n    container.on('results:focus', function (params) {\n      params.element.addClass('select2-results__option--highlighted');\n    });\n\n    container.on('results:message', function (params) {\n      self.displayMessage(params);\n    });\n\n    if ($.fn.mousewheel) {\n      this.$results.on('mousewheel', function (e) {\n        var top = self.$results.scrollTop();\n\n        var bottom = self.$results.get(0).scrollHeight - top + e.deltaY;\n\n        var isAtTop = e.deltaY > 0 && top - e.deltaY <= 0;\n        var isAtBottom = e.deltaY < 0 && bottom <= self.$results.height();\n\n        if (isAtTop) {\n          self.$results.scrollTop(0);\n\n          e.preventDefault();\n          e.stopPropagation();\n        } else if (isAtBottom) {\n          self.$results.scrollTop(\n            self.$results.get(0).scrollHeight - self.$results.height()\n          );\n\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      });\n    }\n\n    this.$results.on('mouseup', '.select2-results__option[aria-selected]',\n      function (evt) {\n      var $this = $(this);\n\n      var data = $this.data('data');\n\n      if ($this.attr('aria-selected') === 'true') {\n        if (self.options.get('multiple')) {\n          self.trigger('unselect', {\n            originalEvent: evt,\n            data: data\n          });\n        } else {\n          self.trigger('close', {});\n        }\n\n        return;\n      }\n\n      self.trigger('select', {\n        originalEvent: evt,\n        data: data\n      });\n    });\n\n    this.$results.on('mouseenter', '.select2-results__option[aria-selected]',\n      function (evt) {\n      var data = $(this).data('data');\n\n      self.getHighlightedResults()\n          .removeClass('select2-results__option--highlighted');\n\n      self.trigger('results:focus', {\n        data: data,\n        element: $(this)\n      });\n    });\n  };\n\n  Results.prototype.getHighlightedResults = function () {\n    var $highlighted = this.$results\n    .find('.select2-results__option--highlighted');\n\n    return $highlighted;\n  };\n\n  Results.prototype.destroy = function () {\n    this.$results.remove();\n  };\n\n  Results.prototype.ensureHighlightVisible = function () {\n    var $highlighted = this.getHighlightedResults();\n\n    if ($highlighted.length === 0) {\n      return;\n    }\n\n    var $options = this.$results.find('[aria-selected]');\n\n    var currentIndex = $options.index($highlighted);\n\n    var currentOffset = this.$results.offset().top;\n    var nextTop = $highlighted.offset().top;\n    var nextOffset = this.$results.scrollTop() + (nextTop - currentOffset);\n\n    var offsetDelta = nextTop - currentOffset;\n    nextOffset -= $highlighted.outerHeight(false) * 2;\n\n    if (currentIndex <= 2) {\n      this.$results.scrollTop(0);\n    } else if (offsetDelta > this.$results.outerHeight() || offsetDelta < 0) {\n      this.$results.scrollTop(nextOffset);\n    }\n  };\n\n  Results.prototype.template = function (result, container) {\n    var template = this.options.get('templateResult');\n    var escapeMarkup = this.options.get('escapeMarkup');\n\n    var content = template(result, container);\n\n    if (content == null) {\n      container.style.display = 'none';\n    } else if (typeof content === 'string') {\n      container.innerHTML = escapeMarkup(content);\n    } else {\n      $(container).append(content);\n    }\n  };\n\n  return Results;\n});\n\nS2.define('select2/keys',[\n\n], function () {\n  var KEYS = {\n    BACKSPACE: 8,\n    TAB: 9,\n    ENTER: 13,\n    SHIFT: 16,\n    CTRL: 17,\n    ALT: 18,\n    ESC: 27,\n    SPACE: 32,\n    PAGE_UP: 33,\n    PAGE_DOWN: 34,\n    END: 35,\n    HOME: 36,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    DELETE: 46\n  };\n\n  return KEYS;\n});\n\nS2.define('select2/selection/base',[\n  'jquery',\n  '../utils',\n  '../keys'\n], function ($, Utils, KEYS) {\n  function BaseSelection ($element, options) {\n    this.$element = $element;\n    this.options = options;\n\n    BaseSelection.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(BaseSelection, Utils.Observable);\n\n  BaseSelection.prototype.render = function () {\n    var $selection = $(\n      '<span class=\"select2-selection\" role=\"combobox\" ' +\n      ' aria-haspopup=\"true\" aria-expanded=\"false\">' +\n      '</span>'\n    );\n\n    this._tabindex = 0;\n\n    if (this.$element.data('old-tabindex') != null) {\n      this._tabindex = this.$element.data('old-tabindex');\n    } else if (this.$element.attr('tabindex') != null) {\n      this._tabindex = this.$element.attr('tabindex');\n    }\n\n    $selection.attr('title', this.$element.attr('title'));\n    $selection.attr('tabindex', this._tabindex);\n\n    this.$selection = $selection;\n\n    return $selection;\n  };\n\n  BaseSelection.prototype.bind = function (container, $container) {\n    var self = this;\n\n    var id = container.id + '-container';\n    var resultsId = container.id + '-results';\n\n    this.container = container;\n\n    this.$selection.on('focus', function (evt) {\n      self.trigger('focus', evt);\n    });\n\n    this.$selection.on('blur', function (evt) {\n      self._handleBlur(evt);\n    });\n\n    this.$selection.on('keydown', function (evt) {\n      self.trigger('keypress', evt);\n\n      if (evt.which === KEYS.SPACE) {\n        evt.preventDefault();\n      }\n    });\n\n    container.on('results:focus', function (params) {\n      self.$selection.attr('aria-activedescendant', params.data._resultId);\n    });\n\n    container.on('selection:update', function (params) {\n      self.update(params.data);\n    });\n\n    container.on('open', function () {\n      // When the dropdown is open, aria-expanded=\"true\"\n      self.$selection.attr('aria-expanded', 'true');\n      self.$selection.attr('aria-owns', resultsId);\n\n      self._attachCloseHandler(container);\n    });\n\n    container.on('close', function () {\n      // When the dropdown is closed, aria-expanded=\"false\"\n      self.$selection.attr('aria-expanded', 'false');\n      self.$selection.removeAttr('aria-activedescendant');\n      self.$selection.removeAttr('aria-owns');\n\n      self.$selection.focus();\n\n      self._detachCloseHandler(container);\n    });\n\n    container.on('enable', function () {\n      self.$selection.attr('tabindex', self._tabindex);\n    });\n\n    container.on('disable', function () {\n      self.$selection.attr('tabindex', '-1');\n    });\n  };\n\n  BaseSelection.prototype._handleBlur = function (evt) {\n    var self = this;\n\n    // This needs to be delayed as the active element is the body when the tab\n    // key is pressed, possibly along with others.\n    window.setTimeout(function () {\n      // Don't trigger `blur` if the focus is still in the selection\n      if (\n        (document.activeElement == self.$selection[0]) ||\n        ($.contains(self.$selection[0], document.activeElement))\n      ) {\n        return;\n      }\n\n      self.trigger('blur', evt);\n    }, 1);\n  };\n\n  BaseSelection.prototype._attachCloseHandler = function (container) {\n    var self = this;\n\n    $(document.body).on('mousedown.select2.' + container.id, function (e) {\n      var $target = $(e.target);\n\n      var $select = $target.closest('.select2');\n\n      var $all = $('.select2.select2-container--open');\n\n      $all.each(function () {\n        var $this = $(this);\n\n        if (this == $select[0]) {\n          return;\n        }\n\n        var $element = $this.data('element');\n\n        $element.select2('close');\n      });\n    });\n  };\n\n  BaseSelection.prototype._detachCloseHandler = function (container) {\n    $(document.body).off('mousedown.select2.' + container.id);\n  };\n\n  BaseSelection.prototype.position = function ($selection, $container) {\n    var $selectionContainer = $container.find('.selection');\n    $selectionContainer.append($selection);\n  };\n\n  BaseSelection.prototype.destroy = function () {\n    this._detachCloseHandler(this.container);\n  };\n\n  BaseSelection.prototype.update = function (data) {\n    throw new Error('The `update` method must be defined in child classes.');\n  };\n\n  return BaseSelection;\n});\n\nS2.define('select2/selection/single',[\n  'jquery',\n  './base',\n  '../utils',\n  '../keys'\n], function ($, BaseSelection, Utils, KEYS) {\n  function SingleSelection () {\n    SingleSelection.__super__.constructor.apply(this, arguments);\n  }\n\n  Utils.Extend(SingleSelection, BaseSelection);\n\n  SingleSelection.prototype.render = function () {\n    var $selection = SingleSelection.__super__.render.call(this);\n\n    $selection.addClass('select2-selection--single');\n\n    $selection.html(\n      '<span class=\"select2-selection__rendered\"></span>' +\n      '<span class=\"select2-selection__arrow\" role=\"presentation\">' +\n        '<b role=\"presentation\"></b>' +\n      '</span>'\n    );\n\n    return $selection;\n  };\n\n  SingleSelection.prototype.bind = function (container, $container) {\n    var self = this;\n\n    SingleSelection.__super__.bind.apply(this, arguments);\n\n    var id = container.id + '-container';\n\n    this.$selection.find('.select2-selection__rendered').attr('id', id);\n    this.$selection.attr('aria-labelledby', id);\n\n    this.$selection.on('mousedown', function (evt) {\n      // Only respond to left clicks\n      if (evt.which !== 1) {\n        return;\n      }\n\n      self.trigger('toggle', {\n        originalEvent: evt\n      });\n    });\n\n    this.$selection.on('focus', function (evt) {\n      // User focuses on the container\n    });\n\n    this.$selection.on('blur', function (evt) {\n      // User exits the container\n    });\n\n    container.on('focus', function (evt) {\n      if (!container.isOpen()) {\n        self.$selection.focus();\n      }\n    });\n\n    container.on('selection:update', function (params) {\n      self.update(params.data);\n    });\n  };\n\n  SingleSelection.prototype.clear = function () {\n    this.$selection.find('.select2-selection__rendered').empty();\n  };\n\n  SingleSelection.prototype.display = function (data, container) {\n    var template = this.options.get('templateSelection');\n    var escapeMarkup = this.options.get('escapeMarkup');\n\n    return escapeMarkup(template(data, container));\n  };\n\n  SingleSelection.prototype.selectionContainer = function () {\n    return $('<span></span>');\n  };\n\n  SingleSelection.prototype.update = function (data) {\n    if (data.length === 0) {\n      this.clear();\n      return;\n    }\n\n    var selection = data[0];\n\n    var $rendered = this.$selection.find('.select2-selection__rendered');\n    var formatted = this.display(selection, $rendered);\n\n    $rendered.empty().append(formatted);\n    $rendered.prop('title', selection.title || selection.text);\n  };\n\n  return SingleSelection;\n});\n\nS2.define('select2/selection/multiple',[\n  'jquery',\n  './base',\n  '../utils'\n], function ($, BaseSelection, Utils) {\n  function MultipleSelection ($element, options) {\n    MultipleSelection.__super__.constructor.apply(this, arguments);\n  }\n\n  Utils.Extend(MultipleSelection, BaseSelection);\n\n  MultipleSelection.prototype.render = function () {\n    var $selection = MultipleSelection.__super__.render.call(this);\n\n    $selection.addClass('select2-selection--multiple');\n\n    $selection.html(\n      '<ul class=\"select2-selection__rendered\"></ul>'\n    );\n\n    return $selection;\n  };\n\n  MultipleSelection.prototype.bind = function (container, $container) {\n    var self = this;\n\n    MultipleSelection.__super__.bind.apply(this, arguments);\n\n    this.$selection.on('click', function (evt) {\n      self.trigger('toggle', {\n        originalEvent: evt\n      });\n    });\n\n    this.$selection.on(\n      'click',\n      '.select2-selection__choice__remove',\n      function (evt) {\n        // Ignore the event if it is disabled\n        if (self.options.get('disabled')) {\n          return;\n        }\n\n        var $remove = $(this);\n        var $selection = $remove.parent();\n\n        var data = $selection.data('data');\n\n        self.trigger('unselect', {\n          originalEvent: evt,\n          data: data\n        });\n      }\n    );\n  };\n\n  MultipleSelection.prototype.clear = function () {\n    this.$selection.find('.select2-selection__rendered').empty();\n  };\n\n  MultipleSelection.prototype.display = function (data, container) {\n    var template = this.options.get('templateSelection');\n    var escapeMarkup = this.options.get('escapeMarkup');\n\n    return escapeMarkup(template(data, container));\n  };\n\n  MultipleSelection.prototype.selectionContainer = function () {\n    var $container = $(\n      '<li class=\"select2-selection__choice\">' +\n        '<span class=\"select2-selection__choice__remove\" role=\"presentation\">' +\n          '&times;' +\n        '</span>' +\n      '</li>'\n    );\n\n    return $container;\n  };\n\n  MultipleSelection.prototype.update = function (data) {\n    this.clear();\n\n    if (data.length === 0) {\n      return;\n    }\n\n    var $selections = [];\n\n    for (var d = 0; d < data.length; d++) {\n      var selection = data[d];\n\n      var $selection = this.selectionContainer();\n      var formatted = this.display(selection, $selection);\n\n      $selection.append(formatted);\n      $selection.prop('title', selection.title || selection.text);\n\n      $selection.data('data', selection);\n\n      $selections.push($selection);\n    }\n\n    var $rendered = this.$selection.find('.select2-selection__rendered');\n\n    Utils.appendMany($rendered, $selections);\n  };\n\n  return MultipleSelection;\n});\n\nS2.define('select2/selection/placeholder',[\n  '../utils'\n], function (Utils) {\n  function Placeholder (decorated, $element, options) {\n    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\n\n    decorated.call(this, $element, options);\n  }\n\n  Placeholder.prototype.normalizePlaceholder = function (_, placeholder) {\n    if (typeof placeholder === 'string') {\n      placeholder = {\n        id: '',\n        text: placeholder\n      };\n    }\n\n    return placeholder;\n  };\n\n  Placeholder.prototype.createPlaceholder = function (decorated, placeholder) {\n    var $placeholder = this.selectionContainer();\n\n    $placeholder.html(this.display(placeholder));\n    $placeholder.addClass('select2-selection__placeholder')\n                .removeClass('select2-selection__choice');\n\n    return $placeholder;\n  };\n\n  Placeholder.prototype.update = function (decorated, data) {\n    var singlePlaceholder = (\n      data.length == 1 && data[0].id != this.placeholder.id\n    );\n    var multipleSelections = data.length > 1;\n\n    if (multipleSelections || singlePlaceholder) {\n      return decorated.call(this, data);\n    }\n\n    this.clear();\n\n    var $placeholder = this.createPlaceholder(this.placeholder);\n\n    this.$selection.find('.select2-selection__rendered').append($placeholder);\n  };\n\n  return Placeholder;\n});\n\nS2.define('select2/selection/allowClear',[\n  'jquery',\n  '../keys'\n], function ($, KEYS) {\n  function AllowClear () { }\n\n  AllowClear.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    if (this.placeholder == null) {\n      if (this.options.get('debug') && window.console && console.error) {\n        console.error(\n          'Select2: The `allowClear` option should be used in combination ' +\n          'with the `placeholder` option.'\n        );\n      }\n    }\n\n    this.$selection.on('mousedown', '.select2-selection__clear',\n      function (evt) {\n        self._handleClear(evt);\n    });\n\n    container.on('keypress', function (evt) {\n      self._handleKeyboardClear(evt, container);\n    });\n  };\n\n  AllowClear.prototype._handleClear = function (_, evt) {\n    // Ignore the event if it is disabled\n    if (this.options.get('disabled')) {\n      return;\n    }\n\n    var $clear = this.$selection.find('.select2-selection__clear');\n\n    // Ignore the event if nothing has been selected\n    if ($clear.length === 0) {\n      return;\n    }\n\n    evt.stopPropagation();\n\n    var data = $clear.data('data');\n\n    for (var d = 0; d < data.length; d++) {\n      var unselectData = {\n        data: data[d]\n      };\n\n      // Trigger the `unselect` event, so people can prevent it from being\n      // cleared.\n      this.trigger('unselect', unselectData);\n\n      // If the event was prevented, don't clear it out.\n      if (unselectData.prevented) {\n        return;\n      }\n    }\n\n    this.$element.val(this.placeholder.id).trigger('change');\n\n    this.trigger('toggle', {});\n  };\n\n  AllowClear.prototype._handleKeyboardClear = function (_, evt, container) {\n    if (container.isOpen()) {\n      return;\n    }\n\n    if (evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {\n      this._handleClear(evt);\n    }\n  };\n\n  AllowClear.prototype.update = function (decorated, data) {\n    decorated.call(this, data);\n\n    if (this.$selection.find('.select2-selection__placeholder').length > 0 ||\n        data.length === 0) {\n      return;\n    }\n\n    var $remove = $(\n      '<span class=\"select2-selection__clear\">' +\n        '&times;' +\n      '</span>'\n    );\n    $remove.data('data', data);\n\n    this.$selection.find('.select2-selection__rendered').prepend($remove);\n  };\n\n  return AllowClear;\n});\n\nS2.define('select2/selection/search',[\n  'jquery',\n  '../utils',\n  '../keys'\n], function ($, Utils, KEYS) {\n  function Search (decorated, $element, options) {\n    decorated.call(this, $element, options);\n  }\n\n  Search.prototype.render = function (decorated) {\n    var $search = $(\n      '<li class=\"select2-search select2-search--inline\">' +\n        '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\n        ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\"' +\n        ' spellcheck=\"false\" role=\"textbox\" aria-autocomplete=\"list\" />' +\n      '</li>'\n    );\n\n    this.$searchContainer = $search;\n    this.$search = $search.find('input');\n\n    var $rendered = decorated.call(this);\n\n    this._transferTabIndex();\n\n    return $rendered;\n  };\n\n  Search.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    container.on('open', function () {\n      self.$search.trigger('focus');\n    });\n\n    container.on('close', function () {\n      self.$search.val('');\n      self.$search.removeAttr('aria-activedescendant');\n      self.$search.trigger('focus');\n    });\n\n    container.on('enable', function () {\n      self.$search.prop('disabled', false);\n\n      self._transferTabIndex();\n    });\n\n    container.on('disable', function () {\n      self.$search.prop('disabled', true);\n    });\n\n    container.on('focus', function (evt) {\n      self.$search.trigger('focus');\n    });\n\n    container.on('results:focus', function (params) {\n      self.$search.attr('aria-activedescendant', params.id);\n    });\n\n    this.$selection.on('focusin', '.select2-search--inline', function (evt) {\n      self.trigger('focus', evt);\n    });\n\n    this.$selection.on('focusout', '.select2-search--inline', function (evt) {\n      self._handleBlur(evt);\n    });\n\n    this.$selection.on('keydown', '.select2-search--inline', function (evt) {\n      evt.stopPropagation();\n\n      self.trigger('keypress', evt);\n\n      self._keyUpPrevented = evt.isDefaultPrevented();\n\n      var key = evt.which;\n\n      if (key === KEYS.BACKSPACE && self.$search.val() === '') {\n        var $previousChoice = self.$searchContainer\n          .prev('.select2-selection__choice');\n\n        if ($previousChoice.length > 0) {\n          var item = $previousChoice.data('data');\n\n          self.searchRemoveChoice(item);\n\n          evt.preventDefault();\n        }\n      }\n    });\n\n    // Try to detect the IE version should the `documentMode` property that\n    // is stored on the document. This is only implemented in IE and is\n    // slightly cleaner than doing a user agent check.\n    // This property is not available in Edge, but Edge also doesn't have\n    // this bug.\n    var msie = document.documentMode;\n    var disableInputEvents = msie && msie <= 11;\n\n    // Workaround for browsers which do not support the `input` event\n    // This will prevent double-triggering of events for browsers which support\n    // both the `keyup` and `input` events.\n    this.$selection.on(\n      'input.searchcheck',\n      '.select2-search--inline',\n      function (evt) {\n        // IE will trigger the `input` event when a placeholder is used on a\n        // search box. To get around this issue, we are forced to ignore all\n        // `input` events in IE and keep using `keyup`.\n        if (disableInputEvents) {\n          self.$selection.off('input.search input.searchcheck');\n          return;\n        }\n\n        // Unbind the duplicated `keyup` event\n        self.$selection.off('keyup.search');\n      }\n    );\n\n    this.$selection.on(\n      'keyup.search input.search',\n      '.select2-search--inline',\n      function (evt) {\n        // IE will trigger the `input` event when a placeholder is used on a\n        // search box. To get around this issue, we are forced to ignore all\n        // `input` events in IE and keep using `keyup`.\n        if (disableInputEvents && evt.type === 'input') {\n          self.$selection.off('input.search input.searchcheck');\n          return;\n        }\n\n        var key = evt.which;\n\n        // We can freely ignore events from modifier keys\n        if (key == KEYS.SHIFT || key == KEYS.CTRL || key == KEYS.ALT) {\n          return;\n        }\n\n        // Tabbing will be handled during the `keydown` phase\n        if (key == KEYS.TAB) {\n          return;\n        }\n\n        self.handleSearch(evt);\n      }\n    );\n  };\n\n  /**\n   * This method will transfer the tabindex attribute from the rendered\n   * selection to the search box. This allows for the search box to be used as\n   * the primary focus instead of the selection container.\n   *\n   * @private\n   */\n  Search.prototype._transferTabIndex = function (decorated) {\n    this.$search.attr('tabindex', this.$selection.attr('tabindex'));\n    this.$selection.attr('tabindex', '-1');\n  };\n\n  Search.prototype.createPlaceholder = function (decorated, placeholder) {\n    this.$search.attr('placeholder', placeholder.text);\n  };\n\n  Search.prototype.update = function (decorated, data) {\n    var searchHadFocus = this.$search[0] == document.activeElement;\n\n    this.$search.attr('placeholder', '');\n\n    decorated.call(this, data);\n\n    this.$selection.find('.select2-selection__rendered')\n                   .append(this.$searchContainer);\n\n    this.resizeSearch();\n    if (searchHadFocus) {\n      this.$search.focus();\n    }\n  };\n\n  Search.prototype.handleSearch = function () {\n    this.resizeSearch();\n\n    if (!this._keyUpPrevented) {\n      var input = this.$search.val();\n\n      this.trigger('query', {\n        term: input\n      });\n    }\n\n    this._keyUpPrevented = false;\n  };\n\n  Search.prototype.searchRemoveChoice = function (decorated, item) {\n    this.trigger('unselect', {\n      data: item\n    });\n\n    this.$search.val(item.text);\n    this.handleSearch();\n  };\n\n  Search.prototype.resizeSearch = function () {\n    this.$search.css('width', '25px');\n\n    var width = '';\n\n    if (this.$search.attr('placeholder') !== '') {\n      width = this.$selection.find('.select2-selection__rendered').innerWidth();\n    } else {\n      var minimumWidth = this.$search.val().length + 1;\n\n      width = (minimumWidth * 0.75) + 'em';\n    }\n\n    this.$search.css('width', width);\n  };\n\n  return Search;\n});\n\nS2.define('select2/selection/eventRelay',[\n  'jquery'\n], function ($) {\n  function EventRelay () { }\n\n  EventRelay.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n    var relayEvents = [\n      'open', 'opening',\n      'close', 'closing',\n      'select', 'selecting',\n      'unselect', 'unselecting'\n    ];\n\n    var preventableEvents = ['opening', 'closing', 'selecting', 'unselecting'];\n\n    decorated.call(this, container, $container);\n\n    container.on('*', function (name, params) {\n      // Ignore events that should not be relayed\n      if ($.inArray(name, relayEvents) === -1) {\n        return;\n      }\n\n      // The parameters should always be an object\n      params = params || {};\n\n      // Generate the jQuery event for the Select2 event\n      var evt = $.Event('select2:' + name, {\n        params: params\n      });\n\n      self.$element.trigger(evt);\n\n      // Only handle preventable events if it was one\n      if ($.inArray(name, preventableEvents) === -1) {\n        return;\n      }\n\n      params.prevented = evt.isDefaultPrevented();\n    });\n  };\n\n  return EventRelay;\n});\n\nS2.define('select2/translation',[\n  'jquery',\n  'require'\n], function ($, require) {\n  function Translation (dict) {\n    this.dict = dict || {};\n  }\n\n  Translation.prototype.all = function () {\n    return this.dict;\n  };\n\n  Translation.prototype.get = function (key) {\n    return this.dict[key];\n  };\n\n  Translation.prototype.extend = function (translation) {\n    this.dict = $.extend({}, translation.all(), this.dict);\n  };\n\n  // Static functions\n\n  Translation._cache = {};\n\n  Translation.loadPath = function (path) {\n    if (!(path in Translation._cache)) {\n      var translations = require(path);\n\n      Translation._cache[path] = translations;\n    }\n\n    return new Translation(Translation._cache[path]);\n  };\n\n  return Translation;\n});\n\nS2.define('select2/diacritics',[\n\n], function () {\n  var diacritics = {\n    '\\u24B6': 'A',\n    '\\uFF21': 'A',\n    '\\u00C0': 'A',\n    '\\u00C1': 'A',\n    '\\u00C2': 'A',\n    '\\u1EA6': 'A',\n    '\\u1EA4': 'A',\n    '\\u1EAA': 'A',\n    '\\u1EA8': 'A',\n    '\\u00C3': 'A',\n    '\\u0100': 'A',\n    '\\u0102': 'A',\n    '\\u1EB0': 'A',\n    '\\u1EAE': 'A',\n    '\\u1EB4': 'A',\n    '\\u1EB2': 'A',\n    '\\u0226': 'A',\n    '\\u01E0': 'A',\n    '\\u00C4': 'A',\n    '\\u01DE': 'A',\n    '\\u1EA2': 'A',\n    '\\u00C5': 'A',\n    '\\u01FA': 'A',\n    '\\u01CD': 'A',\n    '\\u0200': 'A',\n    '\\u0202': 'A',\n    '\\u1EA0': 'A',\n    '\\u1EAC': 'A',\n    '\\u1EB6': 'A',\n    '\\u1E00': 'A',\n    '\\u0104': 'A',\n    '\\u023A': 'A',\n    '\\u2C6F': 'A',\n    '\\uA732': 'AA',\n    '\\u00C6': 'AE',\n    '\\u01FC': 'AE',\n    '\\u01E2': 'AE',\n    '\\uA734': 'AO',\n    '\\uA736': 'AU',\n    '\\uA738': 'AV',\n    '\\uA73A': 'AV',\n    '\\uA73C': 'AY',\n    '\\u24B7': 'B',\n    '\\uFF22': 'B',\n    '\\u1E02': 'B',\n    '\\u1E04': 'B',\n    '\\u1E06': 'B',\n    '\\u0243': 'B',\n    '\\u0182': 'B',\n    '\\u0181': 'B',\n    '\\u24B8': 'C',\n    '\\uFF23': 'C',\n    '\\u0106': 'C',\n    '\\u0108': 'C',\n    '\\u010A': 'C',\n    '\\u010C': 'C',\n    '\\u00C7': 'C',\n    '\\u1E08': 'C',\n    '\\u0187': 'C',\n    '\\u023B': 'C',\n    '\\uA73E': 'C',\n    '\\u24B9': 'D',\n    '\\uFF24': 'D',\n    '\\u1E0A': 'D',\n    '\\u010E': 'D',\n    '\\u1E0C': 'D',\n    '\\u1E10': 'D',\n    '\\u1E12': 'D',\n    '\\u1E0E': 'D',\n    '\\u0110': 'D',\n    '\\u018B': 'D',\n    '\\u018A': 'D',\n    '\\u0189': 'D',\n    '\\uA779': 'D',\n    '\\u01F1': 'DZ',\n    '\\u01C4': 'DZ',\n    '\\u01F2': 'Dz',\n    '\\u01C5': 'Dz',\n    '\\u24BA': 'E',\n    '\\uFF25': 'E',\n    '\\u00C8': 'E',\n    '\\u00C9': 'E',\n    '\\u00CA': 'E',\n    '\\u1EC0': 'E',\n    '\\u1EBE': 'E',\n    '\\u1EC4': 'E',\n    '\\u1EC2': 'E',\n    '\\u1EBC': 'E',\n    '\\u0112': 'E',\n    '\\u1E14': 'E',\n    '\\u1E16': 'E',\n    '\\u0114': 'E',\n    '\\u0116': 'E',\n    '\\u00CB': 'E',\n    '\\u1EBA': 'E',\n    '\\u011A': 'E',\n    '\\u0204': 'E',\n    '\\u0206': 'E',\n    '\\u1EB8': 'E',\n    '\\u1EC6': 'E',\n    '\\u0228': 'E',\n    '\\u1E1C': 'E',\n    '\\u0118': 'E',\n    '\\u1E18': 'E',\n    '\\u1E1A': 'E',\n    '\\u0190': 'E',\n    '\\u018E': 'E',\n    '\\u24BB': 'F',\n    '\\uFF26': 'F',\n    '\\u1E1E': 'F',\n    '\\u0191': 'F',\n    '\\uA77B': 'F',\n    '\\u24BC': 'G',\n    '\\uFF27': 'G',\n    '\\u01F4': 'G',\n    '\\u011C': 'G',\n    '\\u1E20': 'G',\n    '\\u011E': 'G',\n    '\\u0120': 'G',\n    '\\u01E6': 'G',\n    '\\u0122': 'G',\n    '\\u01E4': 'G',\n    '\\u0193': 'G',\n    '\\uA7A0': 'G',\n    '\\uA77D': 'G',\n    '\\uA77E': 'G',\n    '\\u24BD': 'H',\n    '\\uFF28': 'H',\n    '\\u0124': 'H',\n    '\\u1E22': 'H',\n    '\\u1E26': 'H',\n    '\\u021E': 'H',\n    '\\u1E24': 'H',\n    '\\u1E28': 'H',\n    '\\u1E2A': 'H',\n    '\\u0126': 'H',\n    '\\u2C67': 'H',\n    '\\u2C75': 'H',\n    '\\uA78D': 'H',\n    '\\u24BE': 'I',\n    '\\uFF29': 'I',\n    '\\u00CC': 'I',\n    '\\u00CD': 'I',\n    '\\u00CE': 'I',\n    '\\u0128': 'I',\n    '\\u012A': 'I',\n    '\\u012C': 'I',\n    '\\u0130': 'I',\n    '\\u00CF': 'I',\n    '\\u1E2E': 'I',\n    '\\u1EC8': 'I',\n    '\\u01CF': 'I',\n    '\\u0208': 'I',\n    '\\u020A': 'I',\n    '\\u1ECA': 'I',\n    '\\u012E': 'I',\n    '\\u1E2C': 'I',\n    '\\u0197': 'I',\n    '\\u24BF': 'J',\n    '\\uFF2A': 'J',\n    '\\u0134': 'J',\n    '\\u0248': 'J',\n    '\\u24C0': 'K',\n    '\\uFF2B': 'K',\n    '\\u1E30': 'K',\n    '\\u01E8': 'K',\n    '\\u1E32': 'K',\n    '\\u0136': 'K',\n    '\\u1E34': 'K',\n    '\\u0198': 'K',\n    '\\u2C69': 'K',\n    '\\uA740': 'K',\n    '\\uA742': 'K',\n    '\\uA744': 'K',\n    '\\uA7A2': 'K',\n    '\\u24C1': 'L',\n    '\\uFF2C': 'L',\n    '\\u013F': 'L',\n    '\\u0139': 'L',\n    '\\u013D': 'L',\n    '\\u1E36': 'L',\n    '\\u1E38': 'L',\n    '\\u013B': 'L',\n    '\\u1E3C': 'L',\n    '\\u1E3A': 'L',\n    '\\u0141': 'L',\n    '\\u023D': 'L',\n    '\\u2C62': 'L',\n    '\\u2C60': 'L',\n    '\\uA748': 'L',\n    '\\uA746': 'L',\n    '\\uA780': 'L',\n    '\\u01C7': 'LJ',\n    '\\u01C8': 'Lj',\n    '\\u24C2': 'M',\n    '\\uFF2D': 'M',\n    '\\u1E3E': 'M',\n    '\\u1E40': 'M',\n    '\\u1E42': 'M',\n    '\\u2C6E': 'M',\n    '\\u019C': 'M',\n    '\\u24C3': 'N',\n    '\\uFF2E': 'N',\n    '\\u01F8': 'N',\n    '\\u0143': 'N',\n    '\\u00D1': 'N',\n    '\\u1E44': 'N',\n    '\\u0147': 'N',\n    '\\u1E46': 'N',\n    '\\u0145': 'N',\n    '\\u1E4A': 'N',\n    '\\u1E48': 'N',\n    '\\u0220': 'N',\n    '\\u019D': 'N',\n    '\\uA790': 'N',\n    '\\uA7A4': 'N',\n    '\\u01CA': 'NJ',\n    '\\u01CB': 'Nj',\n    '\\u24C4': 'O',\n    '\\uFF2F': 'O',\n    '\\u00D2': 'O',\n    '\\u00D3': 'O',\n    '\\u00D4': 'O',\n    '\\u1ED2': 'O',\n    '\\u1ED0': 'O',\n    '\\u1ED6': 'O',\n    '\\u1ED4': 'O',\n    '\\u00D5': 'O',\n    '\\u1E4C': 'O',\n    '\\u022C': 'O',\n    '\\u1E4E': 'O',\n    '\\u014C': 'O',\n    '\\u1E50': 'O',\n    '\\u1E52': 'O',\n    '\\u014E': 'O',\n    '\\u022E': 'O',\n    '\\u0230': 'O',\n    '\\u00D6': 'O',\n    '\\u022A': 'O',\n    '\\u1ECE': 'O',\n    '\\u0150': 'O',\n    '\\u01D1': 'O',\n    '\\u020C': 'O',\n    '\\u020E': 'O',\n    '\\u01A0': 'O',\n    '\\u1EDC': 'O',\n    '\\u1EDA': 'O',\n    '\\u1EE0': 'O',\n    '\\u1EDE': 'O',\n    '\\u1EE2': 'O',\n    '\\u1ECC': 'O',\n    '\\u1ED8': 'O',\n    '\\u01EA': 'O',\n    '\\u01EC': 'O',\n    '\\u00D8': 'O',\n    '\\u01FE': 'O',\n    '\\u0186': 'O',\n    '\\u019F': 'O',\n    '\\uA74A': 'O',\n    '\\uA74C': 'O',\n    '\\u01A2': 'OI',\n    '\\uA74E': 'OO',\n    '\\u0222': 'OU',\n    '\\u24C5': 'P',\n    '\\uFF30': 'P',\n    '\\u1E54': 'P',\n    '\\u1E56': 'P',\n    '\\u01A4': 'P',\n    '\\u2C63': 'P',\n    '\\uA750': 'P',\n    '\\uA752': 'P',\n    '\\uA754': 'P',\n    '\\u24C6': 'Q',\n    '\\uFF31': 'Q',\n    '\\uA756': 'Q',\n    '\\uA758': 'Q',\n    '\\u024A': 'Q',\n    '\\u24C7': 'R',\n    '\\uFF32': 'R',\n    '\\u0154': 'R',\n    '\\u1E58': 'R',\n    '\\u0158': 'R',\n    '\\u0210': 'R',\n    '\\u0212': 'R',\n    '\\u1E5A': 'R',\n    '\\u1E5C': 'R',\n    '\\u0156': 'R',\n    '\\u1E5E': 'R',\n    '\\u024C': 'R',\n    '\\u2C64': 'R',\n    '\\uA75A': 'R',\n    '\\uA7A6': 'R',\n    '\\uA782': 'R',\n    '\\u24C8': 'S',\n    '\\uFF33': 'S',\n    '\\u1E9E': 'S',\n    '\\u015A': 'S',\n    '\\u1E64': 'S',\n    '\\u015C': 'S',\n    '\\u1E60': 'S',\n    '\\u0160': 'S',\n    '\\u1E66': 'S',\n    '\\u1E62': 'S',\n    '\\u1E68': 'S',\n    '\\u0218': 'S',\n    '\\u015E': 'S',\n    '\\u2C7E': 'S',\n    '\\uA7A8': 'S',\n    '\\uA784': 'S',\n    '\\u24C9': 'T',\n    '\\uFF34': 'T',\n    '\\u1E6A': 'T',\n    '\\u0164': 'T',\n    '\\u1E6C': 'T',\n    '\\u021A': 'T',\n    '\\u0162': 'T',\n    '\\u1E70': 'T',\n    '\\u1E6E': 'T',\n    '\\u0166': 'T',\n    '\\u01AC': 'T',\n    '\\u01AE': 'T',\n    '\\u023E': 'T',\n    '\\uA786': 'T',\n    '\\uA728': 'TZ',\n    '\\u24CA': 'U',\n    '\\uFF35': 'U',\n    '\\u00D9': 'U',\n    '\\u00DA': 'U',\n    '\\u00DB': 'U',\n    '\\u0168': 'U',\n    '\\u1E78': 'U',\n    '\\u016A': 'U',\n    '\\u1E7A': 'U',\n    '\\u016C': 'U',\n    '\\u00DC': 'U',\n    '\\u01DB': 'U',\n    '\\u01D7': 'U',\n    '\\u01D5': 'U',\n    '\\u01D9': 'U',\n    '\\u1EE6': 'U',\n    '\\u016E': 'U',\n    '\\u0170': 'U',\n    '\\u01D3': 'U',\n    '\\u0214': 'U',\n    '\\u0216': 'U',\n    '\\u01AF': 'U',\n    '\\u1EEA': 'U',\n    '\\u1EE8': 'U',\n    '\\u1EEE': 'U',\n    '\\u1EEC': 'U',\n    '\\u1EF0': 'U',\n    '\\u1EE4': 'U',\n    '\\u1E72': 'U',\n    '\\u0172': 'U',\n    '\\u1E76': 'U',\n    '\\u1E74': 'U',\n    '\\u0244': 'U',\n    '\\u24CB': 'V',\n    '\\uFF36': 'V',\n    '\\u1E7C': 'V',\n    '\\u1E7E': 'V',\n    '\\u01B2': 'V',\n    '\\uA75E': 'V',\n    '\\u0245': 'V',\n    '\\uA760': 'VY',\n    '\\u24CC': 'W',\n    '\\uFF37': 'W',\n    '\\u1E80': 'W',\n    '\\u1E82': 'W',\n    '\\u0174': 'W',\n    '\\u1E86': 'W',\n    '\\u1E84': 'W',\n    '\\u1E88': 'W',\n    '\\u2C72': 'W',\n    '\\u24CD': 'X',\n    '\\uFF38': 'X',\n    '\\u1E8A': 'X',\n    '\\u1E8C': 'X',\n    '\\u24CE': 'Y',\n    '\\uFF39': 'Y',\n    '\\u1EF2': 'Y',\n    '\\u00DD': 'Y',\n    '\\u0176': 'Y',\n    '\\u1EF8': 'Y',\n    '\\u0232': 'Y',\n    '\\u1E8E': 'Y',\n    '\\u0178': 'Y',\n    '\\u1EF6': 'Y',\n    '\\u1EF4': 'Y',\n    '\\u01B3': 'Y',\n    '\\u024E': 'Y',\n    '\\u1EFE': 'Y',\n    '\\u24CF': 'Z',\n    '\\uFF3A': 'Z',\n    '\\u0179': 'Z',\n    '\\u1E90': 'Z',\n    '\\u017B': 'Z',\n    '\\u017D': 'Z',\n    '\\u1E92': 'Z',\n    '\\u1E94': 'Z',\n    '\\u01B5': 'Z',\n    '\\u0224': 'Z',\n    '\\u2C7F': 'Z',\n    '\\u2C6B': 'Z',\n    '\\uA762': 'Z',\n    '\\u24D0': 'a',\n    '\\uFF41': 'a',\n    '\\u1E9A': 'a',\n    '\\u00E0': 'a',\n    '\\u00E1': 'a',\n    '\\u00E2': 'a',\n    '\\u1EA7': 'a',\n    '\\u1EA5': 'a',\n    '\\u1EAB': 'a',\n    '\\u1EA9': 'a',\n    '\\u00E3': 'a',\n    '\\u0101': 'a',\n    '\\u0103': 'a',\n    '\\u1EB1': 'a',\n    '\\u1EAF': 'a',\n    '\\u1EB5': 'a',\n    '\\u1EB3': 'a',\n    '\\u0227': 'a',\n    '\\u01E1': 'a',\n    '\\u00E4': 'a',\n    '\\u01DF': 'a',\n    '\\u1EA3': 'a',\n    '\\u00E5': 'a',\n    '\\u01FB': 'a',\n    '\\u01CE': 'a',\n    '\\u0201': 'a',\n    '\\u0203': 'a',\n    '\\u1EA1': 'a',\n    '\\u1EAD': 'a',\n    '\\u1EB7': 'a',\n    '\\u1E01': 'a',\n    '\\u0105': 'a',\n    '\\u2C65': 'a',\n    '\\u0250': 'a',\n    '\\uA733': 'aa',\n    '\\u00E6': 'ae',\n    '\\u01FD': 'ae',\n    '\\u01E3': 'ae',\n    '\\uA735': 'ao',\n    '\\uA737': 'au',\n    '\\uA739': 'av',\n    '\\uA73B': 'av',\n    '\\uA73D': 'ay',\n    '\\u24D1': 'b',\n    '\\uFF42': 'b',\n    '\\u1E03': 'b',\n    '\\u1E05': 'b',\n    '\\u1E07': 'b',\n    '\\u0180': 'b',\n    '\\u0183': 'b',\n    '\\u0253': 'b',\n    '\\u24D2': 'c',\n    '\\uFF43': 'c',\n    '\\u0107': 'c',\n    '\\u0109': 'c',\n    '\\u010B': 'c',\n    '\\u010D': 'c',\n    '\\u00E7': 'c',\n    '\\u1E09': 'c',\n    '\\u0188': 'c',\n    '\\u023C': 'c',\n    '\\uA73F': 'c',\n    '\\u2184': 'c',\n    '\\u24D3': 'd',\n    '\\uFF44': 'd',\n    '\\u1E0B': 'd',\n    '\\u010F': 'd',\n    '\\u1E0D': 'd',\n    '\\u1E11': 'd',\n    '\\u1E13': 'd',\n    '\\u1E0F': 'd',\n    '\\u0111': 'd',\n    '\\u018C': 'd',\n    '\\u0256': 'd',\n    '\\u0257': 'd',\n    '\\uA77A': 'd',\n    '\\u01F3': 'dz',\n    '\\u01C6': 'dz',\n    '\\u24D4': 'e',\n    '\\uFF45': 'e',\n    '\\u00E8': 'e',\n    '\\u00E9': 'e',\n    '\\u00EA': 'e',\n    '\\u1EC1': 'e',\n    '\\u1EBF': 'e',\n    '\\u1EC5': 'e',\n    '\\u1EC3': 'e',\n    '\\u1EBD': 'e',\n    '\\u0113': 'e',\n    '\\u1E15': 'e',\n    '\\u1E17': 'e',\n    '\\u0115': 'e',\n    '\\u0117': 'e',\n    '\\u00EB': 'e',\n    '\\u1EBB': 'e',\n    '\\u011B': 'e',\n    '\\u0205': 'e',\n    '\\u0207': 'e',\n    '\\u1EB9': 'e',\n    '\\u1EC7': 'e',\n    '\\u0229': 'e',\n    '\\u1E1D': 'e',\n    '\\u0119': 'e',\n    '\\u1E19': 'e',\n    '\\u1E1B': 'e',\n    '\\u0247': 'e',\n    '\\u025B': 'e',\n    '\\u01DD': 'e',\n    '\\u24D5': 'f',\n    '\\uFF46': 'f',\n    '\\u1E1F': 'f',\n    '\\u0192': 'f',\n    '\\uA77C': 'f',\n    '\\u24D6': 'g',\n    '\\uFF47': 'g',\n    '\\u01F5': 'g',\n    '\\u011D': 'g',\n    '\\u1E21': 'g',\n    '\\u011F': 'g',\n    '\\u0121': 'g',\n    '\\u01E7': 'g',\n    '\\u0123': 'g',\n    '\\u01E5': 'g',\n    '\\u0260': 'g',\n    '\\uA7A1': 'g',\n    '\\u1D79': 'g',\n    '\\uA77F': 'g',\n    '\\u24D7': 'h',\n    '\\uFF48': 'h',\n    '\\u0125': 'h',\n    '\\u1E23': 'h',\n    '\\u1E27': 'h',\n    '\\u021F': 'h',\n    '\\u1E25': 'h',\n    '\\u1E29': 'h',\n    '\\u1E2B': 'h',\n    '\\u1E96': 'h',\n    '\\u0127': 'h',\n    '\\u2C68': 'h',\n    '\\u2C76': 'h',\n    '\\u0265': 'h',\n    '\\u0195': 'hv',\n    '\\u24D8': 'i',\n    '\\uFF49': 'i',\n    '\\u00EC': 'i',\n    '\\u00ED': 'i',\n    '\\u00EE': 'i',\n    '\\u0129': 'i',\n    '\\u012B': 'i',\n    '\\u012D': 'i',\n    '\\u00EF': 'i',\n    '\\u1E2F': 'i',\n    '\\u1EC9': 'i',\n    '\\u01D0': 'i',\n    '\\u0209': 'i',\n    '\\u020B': 'i',\n    '\\u1ECB': 'i',\n    '\\u012F': 'i',\n    '\\u1E2D': 'i',\n    '\\u0268': 'i',\n    '\\u0131': 'i',\n    '\\u24D9': 'j',\n    '\\uFF4A': 'j',\n    '\\u0135': 'j',\n    '\\u01F0': 'j',\n    '\\u0249': 'j',\n    '\\u24DA': 'k',\n    '\\uFF4B': 'k',\n    '\\u1E31': 'k',\n    '\\u01E9': 'k',\n    '\\u1E33': 'k',\n    '\\u0137': 'k',\n    '\\u1E35': 'k',\n    '\\u0199': 'k',\n    '\\u2C6A': 'k',\n    '\\uA741': 'k',\n    '\\uA743': 'k',\n    '\\uA745': 'k',\n    '\\uA7A3': 'k',\n    '\\u24DB': 'l',\n    '\\uFF4C': 'l',\n    '\\u0140': 'l',\n    '\\u013A': 'l',\n    '\\u013E': 'l',\n    '\\u1E37': 'l',\n    '\\u1E39': 'l',\n    '\\u013C': 'l',\n    '\\u1E3D': 'l',\n    '\\u1E3B': 'l',\n    '\\u017F': 'l',\n    '\\u0142': 'l',\n    '\\u019A': 'l',\n    '\\u026B': 'l',\n    '\\u2C61': 'l',\n    '\\uA749': 'l',\n    '\\uA781': 'l',\n    '\\uA747': 'l',\n    '\\u01C9': 'lj',\n    '\\u24DC': 'm',\n    '\\uFF4D': 'm',\n    '\\u1E3F': 'm',\n    '\\u1E41': 'm',\n    '\\u1E43': 'm',\n    '\\u0271': 'm',\n    '\\u026F': 'm',\n    '\\u24DD': 'n',\n    '\\uFF4E': 'n',\n    '\\u01F9': 'n',\n    '\\u0144': 'n',\n    '\\u00F1': 'n',\n    '\\u1E45': 'n',\n    '\\u0148': 'n',\n    '\\u1E47': 'n',\n    '\\u0146': 'n',\n    '\\u1E4B': 'n',\n    '\\u1E49': 'n',\n    '\\u019E': 'n',\n    '\\u0272': 'n',\n    '\\u0149': 'n',\n    '\\uA791': 'n',\n    '\\uA7A5': 'n',\n    '\\u01CC': 'nj',\n    '\\u24DE': 'o',\n    '\\uFF4F': 'o',\n    '\\u00F2': 'o',\n    '\\u00F3': 'o',\n    '\\u00F4': 'o',\n    '\\u1ED3': 'o',\n    '\\u1ED1': 'o',\n    '\\u1ED7': 'o',\n    '\\u1ED5': 'o',\n    '\\u00F5': 'o',\n    '\\u1E4D': 'o',\n    '\\u022D': 'o',\n    '\\u1E4F': 'o',\n    '\\u014D': 'o',\n    '\\u1E51': 'o',\n    '\\u1E53': 'o',\n    '\\u014F': 'o',\n    '\\u022F': 'o',\n    '\\u0231': 'o',\n    '\\u00F6': 'o',\n    '\\u022B': 'o',\n    '\\u1ECF': 'o',\n    '\\u0151': 'o',\n    '\\u01D2': 'o',\n    '\\u020D': 'o',\n    '\\u020F': 'o',\n    '\\u01A1': 'o',\n    '\\u1EDD': 'o',\n    '\\u1EDB': 'o',\n    '\\u1EE1': 'o',\n    '\\u1EDF': 'o',\n    '\\u1EE3': 'o',\n    '\\u1ECD': 'o',\n    '\\u1ED9': 'o',\n    '\\u01EB': 'o',\n    '\\u01ED': 'o',\n    '\\u00F8': 'o',\n    '\\u01FF': 'o',\n    '\\u0254': 'o',\n    '\\uA74B': 'o',\n    '\\uA74D': 'o',\n    '\\u0275': 'o',\n    '\\u01A3': 'oi',\n    '\\u0223': 'ou',\n    '\\uA74F': 'oo',\n    '\\u24DF': 'p',\n    '\\uFF50': 'p',\n    '\\u1E55': 'p',\n    '\\u1E57': 'p',\n    '\\u01A5': 'p',\n    '\\u1D7D': 'p',\n    '\\uA751': 'p',\n    '\\uA753': 'p',\n    '\\uA755': 'p',\n    '\\u24E0': 'q',\n    '\\uFF51': 'q',\n    '\\u024B': 'q',\n    '\\uA757': 'q',\n    '\\uA759': 'q',\n    '\\u24E1': 'r',\n    '\\uFF52': 'r',\n    '\\u0155': 'r',\n    '\\u1E59': 'r',\n    '\\u0159': 'r',\n    '\\u0211': 'r',\n    '\\u0213': 'r',\n    '\\u1E5B': 'r',\n    '\\u1E5D': 'r',\n    '\\u0157': 'r',\n    '\\u1E5F': 'r',\n    '\\u024D': 'r',\n    '\\u027D': 'r',\n    '\\uA75B': 'r',\n    '\\uA7A7': 'r',\n    '\\uA783': 'r',\n    '\\u24E2': 's',\n    '\\uFF53': 's',\n    '\\u00DF': 's',\n    '\\u015B': 's',\n    '\\u1E65': 's',\n    '\\u015D': 's',\n    '\\u1E61': 's',\n    '\\u0161': 's',\n    '\\u1E67': 's',\n    '\\u1E63': 's',\n    '\\u1E69': 's',\n    '\\u0219': 's',\n    '\\u015F': 's',\n    '\\u023F': 's',\n    '\\uA7A9': 's',\n    '\\uA785': 's',\n    '\\u1E9B': 's',\n    '\\u24E3': 't',\n    '\\uFF54': 't',\n    '\\u1E6B': 't',\n    '\\u1E97': 't',\n    '\\u0165': 't',\n    '\\u1E6D': 't',\n    '\\u021B': 't',\n    '\\u0163': 't',\n    '\\u1E71': 't',\n    '\\u1E6F': 't',\n    '\\u0167': 't',\n    '\\u01AD': 't',\n    '\\u0288': 't',\n    '\\u2C66': 't',\n    '\\uA787': 't',\n    '\\uA729': 'tz',\n    '\\u24E4': 'u',\n    '\\uFF55': 'u',\n    '\\u00F9': 'u',\n    '\\u00FA': 'u',\n    '\\u00FB': 'u',\n    '\\u0169': 'u',\n    '\\u1E79': 'u',\n    '\\u016B': 'u',\n    '\\u1E7B': 'u',\n    '\\u016D': 'u',\n    '\\u00FC': 'u',\n    '\\u01DC': 'u',\n    '\\u01D8': 'u',\n    '\\u01D6': 'u',\n    '\\u01DA': 'u',\n    '\\u1EE7': 'u',\n    '\\u016F': 'u',\n    '\\u0171': 'u',\n    '\\u01D4': 'u',\n    '\\u0215': 'u',\n    '\\u0217': 'u',\n    '\\u01B0': 'u',\n    '\\u1EEB': 'u',\n    '\\u1EE9': 'u',\n    '\\u1EEF': 'u',\n    '\\u1EED': 'u',\n    '\\u1EF1': 'u',\n    '\\u1EE5': 'u',\n    '\\u1E73': 'u',\n    '\\u0173': 'u',\n    '\\u1E77': 'u',\n    '\\u1E75': 'u',\n    '\\u0289': 'u',\n    '\\u24E5': 'v',\n    '\\uFF56': 'v',\n    '\\u1E7D': 'v',\n    '\\u1E7F': 'v',\n    '\\u028B': 'v',\n    '\\uA75F': 'v',\n    '\\u028C': 'v',\n    '\\uA761': 'vy',\n    '\\u24E6': 'w',\n    '\\uFF57': 'w',\n    '\\u1E81': 'w',\n    '\\u1E83': 'w',\n    '\\u0175': 'w',\n    '\\u1E87': 'w',\n    '\\u1E85': 'w',\n    '\\u1E98': 'w',\n    '\\u1E89': 'w',\n    '\\u2C73': 'w',\n    '\\u24E7': 'x',\n    '\\uFF58': 'x',\n    '\\u1E8B': 'x',\n    '\\u1E8D': 'x',\n    '\\u24E8': 'y',\n    '\\uFF59': 'y',\n    '\\u1EF3': 'y',\n    '\\u00FD': 'y',\n    '\\u0177': 'y',\n    '\\u1EF9': 'y',\n    '\\u0233': 'y',\n    '\\u1E8F': 'y',\n    '\\u00FF': 'y',\n    '\\u1EF7': 'y',\n    '\\u1E99': 'y',\n    '\\u1EF5': 'y',\n    '\\u01B4': 'y',\n    '\\u024F': 'y',\n    '\\u1EFF': 'y',\n    '\\u24E9': 'z',\n    '\\uFF5A': 'z',\n    '\\u017A': 'z',\n    '\\u1E91': 'z',\n    '\\u017C': 'z',\n    '\\u017E': 'z',\n    '\\u1E93': 'z',\n    '\\u1E95': 'z',\n    '\\u01B6': 'z',\n    '\\u0225': 'z',\n    '\\u0240': 'z',\n    '\\u2C6C': 'z',\n    '\\uA763': 'z',\n    '\\u0386': '\\u0391',\n    '\\u0388': '\\u0395',\n    '\\u0389': '\\u0397',\n    '\\u038A': '\\u0399',\n    '\\u03AA': '\\u0399',\n    '\\u038C': '\\u039F',\n    '\\u038E': '\\u03A5',\n    '\\u03AB': '\\u03A5',\n    '\\u038F': '\\u03A9',\n    '\\u03AC': '\\u03B1',\n    '\\u03AD': '\\u03B5',\n    '\\u03AE': '\\u03B7',\n    '\\u03AF': '\\u03B9',\n    '\\u03CA': '\\u03B9',\n    '\\u0390': '\\u03B9',\n    '\\u03CC': '\\u03BF',\n    '\\u03CD': '\\u03C5',\n    '\\u03CB': '\\u03C5',\n    '\\u03B0': '\\u03C5',\n    '\\u03C9': '\\u03C9',\n    '\\u03C2': '\\u03C3'\n  };\n\n  return diacritics;\n});\n\nS2.define('select2/data/base',[\n  '../utils'\n], function (Utils) {\n  function BaseAdapter ($element, options) {\n    BaseAdapter.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(BaseAdapter, Utils.Observable);\n\n  BaseAdapter.prototype.current = function (callback) {\n    throw new Error('The `current` method must be defined in child classes.');\n  };\n\n  BaseAdapter.prototype.query = function (params, callback) {\n    throw new Error('The `query` method must be defined in child classes.');\n  };\n\n  BaseAdapter.prototype.bind = function (container, $container) {\n    // Can be implemented in subclasses\n  };\n\n  BaseAdapter.prototype.destroy = function () {\n    // Can be implemented in subclasses\n  };\n\n  BaseAdapter.prototype.generateResultId = function (container, data) {\n    var id = container.id + '-result-';\n\n    id += Utils.generateChars(4);\n\n    if (data.id != null) {\n      id += '-' + data.id.toString();\n    } else {\n      id += '-' + Utils.generateChars(4);\n    }\n    return id;\n  };\n\n  return BaseAdapter;\n});\n\nS2.define('select2/data/select',[\n  './base',\n  '../utils',\n  'jquery'\n], function (BaseAdapter, Utils, $) {\n  function SelectAdapter ($element, options) {\n    this.$element = $element;\n    this.options = options;\n\n    SelectAdapter.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(SelectAdapter, BaseAdapter);\n\n  SelectAdapter.prototype.current = function (callback) {\n    var data = [];\n    var self = this;\n\n    this.$element.find(':selected').each(function () {\n      var $option = $(this);\n\n      var option = self.item($option);\n\n      data.push(option);\n    });\n\n    callback(data);\n  };\n\n  SelectAdapter.prototype.select = function (data) {\n    var self = this;\n\n    data.selected = true;\n\n    // If data.element is a DOM node, use it instead\n    if ($(data.element).is('option')) {\n      data.element.selected = true;\n\n      this.$element.trigger('change');\n\n      return;\n    }\n\n    if (this.$element.prop('multiple')) {\n      this.current(function (currentData) {\n        var val = [];\n\n        data = [data];\n        data.push.apply(data, currentData);\n\n        for (var d = 0; d < data.length; d++) {\n          var id = data[d].id;\n\n          if ($.inArray(id, val) === -1) {\n            val.push(id);\n          }\n        }\n\n        self.$element.val(val);\n        self.$element.trigger('change');\n      });\n    } else {\n      var val = data.id;\n\n      this.$element.val(val);\n      this.$element.trigger('change');\n    }\n  };\n\n  SelectAdapter.prototype.unselect = function (data) {\n    var self = this;\n\n    if (!this.$element.prop('multiple')) {\n      return;\n    }\n\n    data.selected = false;\n\n    if ($(data.element).is('option')) {\n      data.element.selected = false;\n\n      this.$element.trigger('change');\n\n      return;\n    }\n\n    this.current(function (currentData) {\n      var val = [];\n\n      for (var d = 0; d < currentData.length; d++) {\n        var id = currentData[d].id;\n\n        if (id !== data.id && $.inArray(id, val) === -1) {\n          val.push(id);\n        }\n      }\n\n      self.$element.val(val);\n\n      self.$element.trigger('change');\n    });\n  };\n\n  SelectAdapter.prototype.bind = function (container, $container) {\n    var self = this;\n\n    this.container = container;\n\n    container.on('select', function (params) {\n      self.select(params.data);\n    });\n\n    container.on('unselect', function (params) {\n      self.unselect(params.data);\n    });\n  };\n\n  SelectAdapter.prototype.destroy = function () {\n    // Remove anything added to child elements\n    this.$element.find('*').each(function () {\n      // Remove any custom data set by Select2\n      $.removeData(this, 'data');\n    });\n  };\n\n  SelectAdapter.prototype.query = function (params, callback) {\n    var data = [];\n    var self = this;\n\n    var $options = this.$element.children();\n\n    $options.each(function () {\n      var $option = $(this);\n\n      if (!$option.is('option') && !$option.is('optgroup')) {\n        return;\n      }\n\n      var option = self.item($option);\n\n      var matches = self.matches(params, option);\n\n      if (matches !== null) {\n        data.push(matches);\n      }\n    });\n\n    callback({\n      results: data\n    });\n  };\n\n  SelectAdapter.prototype.addOptions = function ($options) {\n    Utils.appendMany(this.$element, $options);\n  };\n\n  SelectAdapter.prototype.option = function (data) {\n    var option;\n\n    if (data.children) {\n      option = document.createElement('optgroup');\n      option.label = data.text;\n    } else {\n      option = document.createElement('option');\n\n      if (option.textContent !== undefined) {\n        option.textContent = data.text;\n      } else {\n        option.innerText = data.text;\n      }\n    }\n\n    if (data.id) {\n      option.value = data.id;\n    }\n\n    if (data.disabled) {\n      option.disabled = true;\n    }\n\n    if (data.selected) {\n      option.selected = true;\n    }\n\n    if (data.title) {\n      option.title = data.title;\n    }\n\n    var $option = $(option);\n\n    var normalizedData = this._normalizeItem(data);\n    normalizedData.element = option;\n\n    // Override the option's data with the combined data\n    $.data(option, 'data', normalizedData);\n\n    return $option;\n  };\n\n  SelectAdapter.prototype.item = function ($option) {\n    var data = {};\n\n    data = $.data($option[0], 'data');\n\n    if (data != null) {\n      return data;\n    }\n\n    if ($option.is('option')) {\n      data = {\n        id: $option.val(),\n        text: $option.text(),\n        disabled: $option.prop('disabled'),\n        selected: $option.prop('selected'),\n        title: $option.prop('title')\n      };\n    } else if ($option.is('optgroup')) {\n      data = {\n        text: $option.prop('label'),\n        children: [],\n        title: $option.prop('title')\n      };\n\n      var $children = $option.children('option');\n      var children = [];\n\n      for (var c = 0; c < $children.length; c++) {\n        var $child = $($children[c]);\n\n        var child = this.item($child);\n\n        children.push(child);\n      }\n\n      data.children = children;\n    }\n\n    data = this._normalizeItem(data);\n    data.element = $option[0];\n\n    $.data($option[0], 'data', data);\n\n    return data;\n  };\n\n  SelectAdapter.prototype._normalizeItem = function (item) {\n    if (!$.isPlainObject(item)) {\n      item = {\n        id: item,\n        text: item\n      };\n    }\n\n    item = $.extend({}, {\n      text: ''\n    }, item);\n\n    var defaults = {\n      selected: false,\n      disabled: false\n    };\n\n    if (item.id != null) {\n      item.id = item.id.toString();\n    }\n\n    if (item.text != null) {\n      item.text = item.text.toString();\n    }\n\n    if (item._resultId == null && item.id && this.container != null) {\n      item._resultId = this.generateResultId(this.container, item);\n    }\n\n    return $.extend({}, defaults, item);\n  };\n\n  SelectAdapter.prototype.matches = function (params, data) {\n    var matcher = this.options.get('matcher');\n\n    return matcher(params, data);\n  };\n\n  return SelectAdapter;\n});\n\nS2.define('select2/data/array',[\n  './select',\n  '../utils',\n  'jquery'\n], function (SelectAdapter, Utils, $) {\n  function ArrayAdapter ($element, options) {\n    var data = options.get('data') || [];\n\n    ArrayAdapter.__super__.constructor.call(this, $element, options);\n\n    this.addOptions(this.convertToOptions(data));\n  }\n\n  Utils.Extend(ArrayAdapter, SelectAdapter);\n\n  ArrayAdapter.prototype.select = function (data) {\n    var $option = this.$element.find('option').filter(function (i, elm) {\n      return elm.value == data.id.toString();\n    });\n\n    if ($option.length === 0) {\n      $option = this.option(data);\n\n      this.addOptions($option);\n    }\n\n    ArrayAdapter.__super__.select.call(this, data);\n  };\n\n  ArrayAdapter.prototype.convertToOptions = function (data) {\n    var self = this;\n\n    var $existing = this.$element.find('option');\n    var existingIds = $existing.map(function () {\n      return self.item($(this)).id;\n    }).get();\n\n    var $options = [];\n\n    // Filter out all items except for the one passed in the argument\n    function onlyItem (item) {\n      return function () {\n        return $(this).val() == item.id;\n      };\n    }\n\n    for (var d = 0; d < data.length; d++) {\n      var item = this._normalizeItem(data[d]);\n\n      // Skip items which were pre-loaded, only merge the data\n      if ($.inArray(item.id, existingIds) >= 0) {\n        var $existingOption = $existing.filter(onlyItem(item));\n\n        var existingData = this.item($existingOption);\n        var newData = $.extend(true, {}, item, existingData);\n\n        var $newOption = this.option(newData);\n\n        $existingOption.replaceWith($newOption);\n\n        continue;\n      }\n\n      var $option = this.option(item);\n\n      if (item.children) {\n        var $children = this.convertToOptions(item.children);\n\n        Utils.appendMany($option, $children);\n      }\n\n      $options.push($option);\n    }\n\n    return $options;\n  };\n\n  return ArrayAdapter;\n});\n\nS2.define('select2/data/ajax',[\n  './array',\n  '../utils',\n  'jquery'\n], function (ArrayAdapter, Utils, $) {\n  function AjaxAdapter ($element, options) {\n    this.ajaxOptions = this._applyDefaults(options.get('ajax'));\n\n    if (this.ajaxOptions.processResults != null) {\n      this.processResults = this.ajaxOptions.processResults;\n    }\n\n    AjaxAdapter.__super__.constructor.call(this, $element, options);\n  }\n\n  Utils.Extend(AjaxAdapter, ArrayAdapter);\n\n  AjaxAdapter.prototype._applyDefaults = function (options) {\n    var defaults = {\n      data: function (params) {\n        return $.extend({}, params, {\n          q: params.term\n        });\n      },\n      transport: function (params, success, failure) {\n        var $request = $.ajax(params);\n\n        $request.then(success);\n        $request.fail(failure);\n\n        return $request;\n      }\n    };\n\n    return $.extend({}, defaults, options, true);\n  };\n\n  AjaxAdapter.prototype.processResults = function (results) {\n    return results;\n  };\n\n  AjaxAdapter.prototype.query = function (params, callback) {\n    var matches = [];\n    var self = this;\n\n    if (this._request != null) {\n      // JSONP requests cannot always be aborted\n      if ($.isFunction(this._request.abort)) {\n        this._request.abort();\n      }\n\n      this._request = null;\n    }\n\n    var options = $.extend({\n      type: 'GET'\n    }, this.ajaxOptions);\n\n    if (typeof options.url === 'function') {\n      options.url = options.url.call(this.$element, params);\n    }\n\n    if (typeof options.data === 'function') {\n      options.data = options.data.call(this.$element, params);\n    }\n\n    function request () {\n      var $request = options.transport(options, function (data) {\n        var results = self.processResults(data, params);\n\n        if (self.options.get('debug') && window.console && console.error) {\n          // Check to make sure that the response included a `results` key.\n          if (!results || !results.results || !$.isArray(results.results)) {\n            console.error(\n              'Select2: The AJAX results did not return an array in the ' +\n              '`results` key of the response.'\n            );\n          }\n        }\n\n        callback(results);\n      }, function () {\n        // Attempt to detect if a request was aborted\n        // Only works if the transport exposes a status property\n        if ($request.status && $request.status === '0') {\n          return;\n        }\n\n        self.trigger('results:message', {\n          message: 'errorLoading'\n        });\n      });\n\n      self._request = $request;\n    }\n\n    if (this.ajaxOptions.delay && params.term != null) {\n      if (this._queryTimeout) {\n        window.clearTimeout(this._queryTimeout);\n      }\n\n      this._queryTimeout = window.setTimeout(request, this.ajaxOptions.delay);\n    } else {\n      request();\n    }\n  };\n\n  return AjaxAdapter;\n});\n\nS2.define('select2/data/tags',[\n  'jquery'\n], function ($) {\n  function Tags (decorated, $element, options) {\n    var tags = options.get('tags');\n\n    var createTag = options.get('createTag');\n\n    if (createTag !== undefined) {\n      this.createTag = createTag;\n    }\n\n    var insertTag = options.get('insertTag');\n\n    if (insertTag !== undefined) {\n        this.insertTag = insertTag;\n    }\n\n    decorated.call(this, $element, options);\n\n    if ($.isArray(tags)) {\n      for (var t = 0; t < tags.length; t++) {\n        var tag = tags[t];\n        var item = this._normalizeItem(tag);\n\n        var $option = this.option(item);\n\n        this.$element.append($option);\n      }\n    }\n  }\n\n  Tags.prototype.query = function (decorated, params, callback) {\n    var self = this;\n\n    this._removeOldTags();\n\n    if (params.term == null || params.page != null) {\n      decorated.call(this, params, callback);\n      return;\n    }\n\n    function wrapper (obj, child) {\n      var data = obj.results;\n\n      for (var i = 0; i < data.length; i++) {\n        var option = data[i];\n\n        var checkChildren = (\n          option.children != null &&\n          !wrapper({\n            results: option.children\n          }, true)\n        );\n\n        var checkText = option.text === params.term;\n\n        if (checkText || checkChildren) {\n          if (child) {\n            return false;\n          }\n\n          obj.data = data;\n          callback(obj);\n\n          return;\n        }\n      }\n\n      if (child) {\n        return true;\n      }\n\n      var tag = self.createTag(params);\n\n      if (tag != null) {\n        var $option = self.option(tag);\n        $option.attr('data-select2-tag', true);\n\n        self.addOptions([$option]);\n\n        self.insertTag(data, tag);\n      }\n\n      obj.results = data;\n\n      callback(obj);\n    }\n\n    decorated.call(this, params, wrapper);\n  };\n\n  Tags.prototype.createTag = function (decorated, params) {\n    var term = $.trim(params.term);\n\n    if (term === '') {\n      return null;\n    }\n\n    return {\n      id: term,\n      text: term\n    };\n  };\n\n  Tags.prototype.insertTag = function (_, data, tag) {\n    data.unshift(tag);\n  };\n\n  Tags.prototype._removeOldTags = function (_) {\n    var tag = this._lastTag;\n\n    var $options = this.$element.find('option[data-select2-tag]');\n\n    $options.each(function () {\n      if (this.selected) {\n        return;\n      }\n\n      $(this).remove();\n    });\n  };\n\n  return Tags;\n});\n\nS2.define('select2/data/tokenizer',[\n  'jquery'\n], function ($) {\n  function Tokenizer (decorated, $element, options) {\n    var tokenizer = options.get('tokenizer');\n\n    if (tokenizer !== undefined) {\n      this.tokenizer = tokenizer;\n    }\n\n    decorated.call(this, $element, options);\n  }\n\n  Tokenizer.prototype.bind = function (decorated, container, $container) {\n    decorated.call(this, container, $container);\n\n    this.$search =  container.dropdown.$search || container.selection.$search ||\n      $container.find('.select2-search__field');\n  };\n\n  Tokenizer.prototype.query = function (decorated, params, callback) {\n    var self = this;\n\n    function createAndSelect (data) {\n      // Normalize the data object so we can use it for checks\n      var item = self._normalizeItem(data);\n\n      // Check if the data object already exists as a tag\n      // Select it if it doesn't\n      var $existingOptions = self.$element.find('option').filter(function () {\n        return $(this).val() === item.id;\n      });\n\n      // If an existing option wasn't found for it, create the option\n      if (!$existingOptions.length) {\n        var $option = self.option(item);\n        $option.attr('data-select2-tag', true);\n\n        self._removeOldTags();\n        self.addOptions([$option]);\n      }\n\n      // Select the item, now that we know there is an option for it\n      select(item);\n    }\n\n    function select (data) {\n      self.trigger('select', {\n        data: data\n      });\n    }\n\n    params.term = params.term || '';\n\n    var tokenData = this.tokenizer(params, this.options, createAndSelect);\n\n    if (tokenData.term !== params.term) {\n      // Replace the search term if we have the search box\n      if (this.$search.length) {\n        this.$search.val(tokenData.term);\n        this.$search.focus();\n      }\n\n      params.term = tokenData.term;\n    }\n\n    decorated.call(this, params, callback);\n  };\n\n  Tokenizer.prototype.tokenizer = function (_, params, options, callback) {\n    var separators = options.get('tokenSeparators') || [];\n    var term = params.term;\n    var i = 0;\n\n    var createTag = this.createTag || function (params) {\n      return {\n        id: params.term,\n        text: params.term\n      };\n    };\n\n    while (i < term.length) {\n      var termChar = term[i];\n\n      if ($.inArray(termChar, separators) === -1) {\n        i++;\n\n        continue;\n      }\n\n      var part = term.substr(0, i);\n      var partParams = $.extend({}, params, {\n        term: part\n      });\n\n      var data = createTag(partParams);\n\n      if (data == null) {\n        i++;\n        continue;\n      }\n\n      callback(data);\n\n      // Reset the term to not include the tokenized portion\n      term = term.substr(i + 1) || '';\n      i = 0;\n    }\n\n    return {\n      term: term\n    };\n  };\n\n  return Tokenizer;\n});\n\nS2.define('select2/data/minimumInputLength',[\n\n], function () {\n  function MinimumInputLength (decorated, $e, options) {\n    this.minimumInputLength = options.get('minimumInputLength');\n\n    decorated.call(this, $e, options);\n  }\n\n  MinimumInputLength.prototype.query = function (decorated, params, callback) {\n    params.term = params.term || '';\n\n    if (params.term.length < this.minimumInputLength) {\n      this.trigger('results:message', {\n        message: 'inputTooShort',\n        args: {\n          minimum: this.minimumInputLength,\n          input: params.term,\n          params: params\n        }\n      });\n\n      return;\n    }\n\n    decorated.call(this, params, callback);\n  };\n\n  return MinimumInputLength;\n});\n\nS2.define('select2/data/maximumInputLength',[\n\n], function () {\n  function MaximumInputLength (decorated, $e, options) {\n    this.maximumInputLength = options.get('maximumInputLength');\n\n    decorated.call(this, $e, options);\n  }\n\n  MaximumInputLength.prototype.query = function (decorated, params, callback) {\n    params.term = params.term || '';\n\n    if (this.maximumInputLength > 0 &&\n        params.term.length > this.maximumInputLength) {\n      this.trigger('results:message', {\n        message: 'inputTooLong',\n        args: {\n          maximum: this.maximumInputLength,\n          input: params.term,\n          params: params\n        }\n      });\n\n      return;\n    }\n\n    decorated.call(this, params, callback);\n  };\n\n  return MaximumInputLength;\n});\n\nS2.define('select2/data/maximumSelectionLength',[\n\n], function (){\n  function MaximumSelectionLength (decorated, $e, options) {\n    this.maximumSelectionLength = options.get('maximumSelectionLength');\n\n    decorated.call(this, $e, options);\n  }\n\n  MaximumSelectionLength.prototype.query =\n    function (decorated, params, callback) {\n      var self = this;\n\n      this.current(function (currentData) {\n        var count = currentData != null ? currentData.length : 0;\n        if (self.maximumSelectionLength > 0 &&\n          count >= self.maximumSelectionLength) {\n          self.trigger('results:message', {\n            message: 'maximumSelected',\n            args: {\n              maximum: self.maximumSelectionLength\n            }\n          });\n          return;\n        }\n        decorated.call(self, params, callback);\n      });\n  };\n\n  return MaximumSelectionLength;\n});\n\nS2.define('select2/dropdown',[\n  'jquery',\n  './utils'\n], function ($, Utils) {\n  function Dropdown ($element, options) {\n    this.$element = $element;\n    this.options = options;\n\n    Dropdown.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(Dropdown, Utils.Observable);\n\n  Dropdown.prototype.render = function () {\n    var $dropdown = $(\n      '<span class=\"select2-dropdown\">' +\n        '<span class=\"select2-results\"></span>' +\n      '</span>'\n    );\n\n    $dropdown.attr('dir', this.options.get('dir'));\n\n    this.$dropdown = $dropdown;\n\n    return $dropdown;\n  };\n\n  Dropdown.prototype.bind = function () {\n    // Should be implemented in subclasses\n  };\n\n  Dropdown.prototype.position = function ($dropdown, $container) {\n    // Should be implmented in subclasses\n  };\n\n  Dropdown.prototype.destroy = function () {\n    // Remove the dropdown from the DOM\n    this.$dropdown.remove();\n  };\n\n  return Dropdown;\n});\n\nS2.define('select2/dropdown/search',[\n  'jquery',\n  '../utils'\n], function ($, Utils) {\n  function Search () { }\n\n  Search.prototype.render = function (decorated) {\n    var $rendered = decorated.call(this);\n\n    var $search = $(\n      '<span class=\"select2-search select2-search--dropdown\">' +\n        '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\n        ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\"' +\n        ' spellcheck=\"false\" role=\"textbox\" />' +\n      '</span>'\n    );\n\n    this.$searchContainer = $search;\n    this.$search = $search.find('input');\n\n    $rendered.prepend($search);\n\n    return $rendered;\n  };\n\n  Search.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    this.$search.on('keydown', function (evt) {\n      self.trigger('keypress', evt);\n\n      self._keyUpPrevented = evt.isDefaultPrevented();\n    });\n\n    // Workaround for browsers which do not support the `input` event\n    // This will prevent double-triggering of events for browsers which support\n    // both the `keyup` and `input` events.\n    this.$search.on('input', function (evt) {\n      // Unbind the duplicated `keyup` event\n      $(this).off('keyup');\n    });\n\n    this.$search.on('keyup input', function (evt) {\n      self.handleSearch(evt);\n    });\n\n    container.on('open', function () {\n      self.$search.attr('tabindex', 0);\n\n      self.$search.focus();\n\n      window.setTimeout(function () {\n        self.$search.focus();\n      }, 0);\n    });\n\n    container.on('close', function () {\n      self.$search.attr('tabindex', -1);\n\n      self.$search.val('');\n    });\n\n    container.on('focus', function () {\n      if (container.isOpen()) {\n        self.$search.focus();\n      }\n    });\n\n    container.on('results:all', function (params) {\n      if (params.query.term == null || params.query.term === '') {\n        var showSearch = self.showSearch(params);\n\n        if (showSearch) {\n          self.$searchContainer.removeClass('select2-search--hide');\n        } else {\n          self.$searchContainer.addClass('select2-search--hide');\n        }\n      }\n    });\n  };\n\n  Search.prototype.handleSearch = function (evt) {\n    if (!this._keyUpPrevented) {\n      var input = this.$search.val();\n\n      this.trigger('query', {\n        term: input\n      });\n    }\n\n    this._keyUpPrevented = false;\n  };\n\n  Search.prototype.showSearch = function (_, params) {\n    return true;\n  };\n\n  return Search;\n});\n\nS2.define('select2/dropdown/hidePlaceholder',[\n\n], function () {\n  function HidePlaceholder (decorated, $element, options, dataAdapter) {\n    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\n\n    decorated.call(this, $element, options, dataAdapter);\n  }\n\n  HidePlaceholder.prototype.append = function (decorated, data) {\n    data.results = this.removePlaceholder(data.results);\n\n    decorated.call(this, data);\n  };\n\n  HidePlaceholder.prototype.normalizePlaceholder = function (_, placeholder) {\n    if (typeof placeholder === 'string') {\n      placeholder = {\n        id: '',\n        text: placeholder\n      };\n    }\n\n    return placeholder;\n  };\n\n  HidePlaceholder.prototype.removePlaceholder = function (_, data) {\n    var modifiedData = data.slice(0);\n\n    for (var d = data.length - 1; d >= 0; d--) {\n      var item = data[d];\n\n      if (this.placeholder.id === item.id) {\n        modifiedData.splice(d, 1);\n      }\n    }\n\n    return modifiedData;\n  };\n\n  return HidePlaceholder;\n});\n\nS2.define('select2/dropdown/infiniteScroll',[\n  'jquery'\n], function ($) {\n  function InfiniteScroll (decorated, $element, options, dataAdapter) {\n    this.lastParams = {};\n\n    decorated.call(this, $element, options, dataAdapter);\n\n    this.$loadingMore = this.createLoadingMore();\n    this.loading = false;\n  }\n\n  InfiniteScroll.prototype.append = function (decorated, data) {\n    this.$loadingMore.remove();\n    this.loading = false;\n\n    decorated.call(this, data);\n\n    if (this.showLoadingMore(data)) {\n      this.$results.append(this.$loadingMore);\n    }\n  };\n\n  InfiniteScroll.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    container.on('query', function (params) {\n      self.lastParams = params;\n      self.loading = true;\n    });\n\n    container.on('query:append', function (params) {\n      self.lastParams = params;\n      self.loading = true;\n    });\n\n    this.$results.on('scroll', function () {\n      var isLoadMoreVisible = $.contains(\n        document.documentElement,\n        self.$loadingMore[0]\n      );\n\n      if (self.loading || !isLoadMoreVisible) {\n        return;\n      }\n\n      var currentOffset = self.$results.offset().top +\n        self.$results.outerHeight(false);\n      var loadingMoreOffset = self.$loadingMore.offset().top +\n        self.$loadingMore.outerHeight(false);\n\n      if (currentOffset + 50 >= loadingMoreOffset) {\n        self.loadMore();\n      }\n    });\n  };\n\n  InfiniteScroll.prototype.loadMore = function () {\n    this.loading = true;\n\n    var params = $.extend({}, {page: 1}, this.lastParams);\n\n    params.page++;\n\n    this.trigger('query:append', params);\n  };\n\n  InfiniteScroll.prototype.showLoadingMore = function (_, data) {\n    return data.pagination && data.pagination.more;\n  };\n\n  InfiniteScroll.prototype.createLoadingMore = function () {\n    var $option = $(\n      '<li ' +\n      'class=\"select2-results__option select2-results__option--load-more\"' +\n      'role=\"treeitem\" aria-disabled=\"true\"></li>'\n    );\n\n    var message = this.options.get('translations').get('loadingMore');\n\n    $option.html(message(this.lastParams));\n\n    return $option;\n  };\n\n  return InfiniteScroll;\n});\n\nS2.define('select2/dropdown/attachBody',[\n  'jquery',\n  '../utils'\n], function ($, Utils) {\n  function AttachBody (decorated, $element, options) {\n    this.$dropdownParent = options.get('dropdownParent') || $(document.body);\n\n    decorated.call(this, $element, options);\n  }\n\n  AttachBody.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    var setupResultsEvents = false;\n\n    decorated.call(this, container, $container);\n\n    container.on('open', function () {\n      self._showDropdown();\n      self._attachPositioningHandler(container);\n\n      if (!setupResultsEvents) {\n        setupResultsEvents = true;\n\n        container.on('results:all', function () {\n          self._positionDropdown();\n          self._resizeDropdown();\n        });\n\n        container.on('results:append', function () {\n          self._positionDropdown();\n          self._resizeDropdown();\n        });\n      }\n    });\n\n    container.on('close', function () {\n      self._hideDropdown();\n      self._detachPositioningHandler(container);\n    });\n\n    this.$dropdownContainer.on('mousedown', function (evt) {\n      evt.stopPropagation();\n    });\n  };\n\n  AttachBody.prototype.destroy = function (decorated) {\n    decorated.call(this);\n\n    this.$dropdownContainer.remove();\n  };\n\n  AttachBody.prototype.position = function (decorated, $dropdown, $container) {\n    // Clone all of the container classes\n    $dropdown.attr('class', $container.attr('class'));\n\n    $dropdown.removeClass('select2');\n    $dropdown.addClass('select2-container--open');\n\n    $dropdown.css({\n      position: 'absolute',\n      top: -999999\n    });\n\n    this.$container = $container;\n  };\n\n  AttachBody.prototype.render = function (decorated) {\n    var $container = $('<span></span>');\n\n    var $dropdown = decorated.call(this);\n    $container.append($dropdown);\n\n    this.$dropdownContainer = $container;\n\n    return $container;\n  };\n\n  AttachBody.prototype._hideDropdown = function (decorated) {\n    this.$dropdownContainer.detach();\n  };\n\n  AttachBody.prototype._attachPositioningHandler =\n      function (decorated, container) {\n    var self = this;\n\n    var scrollEvent = 'scroll.select2.' + container.id;\n    var resizeEvent = 'resize.select2.' + container.id;\n    var orientationEvent = 'orientationchange.select2.' + container.id;\n\n    var $watchers = this.$container.parents().filter(Utils.hasScroll);\n    $watchers.each(function () {\n      $(this).data('select2-scroll-position', {\n        x: $(this).scrollLeft(),\n        y: $(this).scrollTop()\n      });\n    });\n\n    $watchers.on(scrollEvent, function (ev) {\n      var position = $(this).data('select2-scroll-position');\n      $(this).scrollTop(position.y);\n    });\n\n    $(window).on(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent,\n      function (e) {\n      self._positionDropdown();\n      self._resizeDropdown();\n    });\n  };\n\n  AttachBody.prototype._detachPositioningHandler =\n      function (decorated, container) {\n    var scrollEvent = 'scroll.select2.' + container.id;\n    var resizeEvent = 'resize.select2.' + container.id;\n    var orientationEvent = 'orientationchange.select2.' + container.id;\n\n    var $watchers = this.$container.parents().filter(Utils.hasScroll);\n    $watchers.off(scrollEvent);\n\n    $(window).off(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent);\n  };\n\n  AttachBody.prototype._positionDropdown = function () {\n    var $window = $(window);\n\n    var isCurrentlyAbove = this.$dropdown.hasClass('select2-dropdown--above');\n    var isCurrentlyBelow = this.$dropdown.hasClass('select2-dropdown--below');\n\n    var newDirection = null;\n\n    var offset = this.$container.offset();\n\n    offset.bottom = offset.top + this.$container.outerHeight(false);\n\n    var container = {\n      height: this.$container.outerHeight(false)\n    };\n\n    container.top = offset.top;\n    container.bottom = offset.top + container.height;\n\n    var dropdown = {\n      height: this.$dropdown.outerHeight(false)\n    };\n\n    var viewport = {\n      top: $window.scrollTop(),\n      bottom: $window.scrollTop() + $window.height()\n    };\n\n    var enoughRoomAbove = viewport.top < (offset.top - dropdown.height);\n    var enoughRoomBelow = viewport.bottom > (offset.bottom + dropdown.height);\n\n    var css = {\n      left: offset.left,\n      top: container.bottom\n    };\n\n    // Determine what the parent element is to use for calciulating the offset\n    var $offsetParent = this.$dropdownParent;\n\n    // For statically positoned elements, we need to get the element\n    // that is determining the offset\n    if ($offsetParent.css('position') === 'static') {\n      $offsetParent = $offsetParent.offsetParent();\n    }\n\n    var parentOffset = $offsetParent.offset();\n\n    css.top -= parentOffset.top;\n    css.left -= parentOffset.left;\n\n    if (!isCurrentlyAbove && !isCurrentlyBelow) {\n      newDirection = 'below';\n    }\n\n    if (!enoughRoomBelow && enoughRoomAbove && !isCurrentlyAbove) {\n      newDirection = 'above';\n    } else if (!enoughRoomAbove && enoughRoomBelow && isCurrentlyAbove) {\n      newDirection = 'below';\n    }\n\n    if (newDirection == 'above' ||\n      (isCurrentlyAbove && newDirection !== 'below')) {\n      css.top = container.top - parentOffset.top - dropdown.height;\n    }\n\n    if (newDirection != null) {\n      this.$dropdown\n        .removeClass('select2-dropdown--below select2-dropdown--above')\n        .addClass('select2-dropdown--' + newDirection);\n      this.$container\n        .removeClass('select2-container--below select2-container--above')\n        .addClass('select2-container--' + newDirection);\n    }\n\n    this.$dropdownContainer.css(css);\n  };\n\n  AttachBody.prototype._resizeDropdown = function () {\n    var css = {\n      width: this.$container.outerWidth(false) + 'px'\n    };\n\n    if (this.options.get('dropdownAutoWidth')) {\n      css.minWidth = css.width;\n      css.position = 'relative';\n      css.width = 'auto';\n    }\n\n    this.$dropdown.css(css);\n  };\n\n  AttachBody.prototype._showDropdown = function (decorated) {\n    this.$dropdownContainer.appendTo(this.$dropdownParent);\n\n    this._positionDropdown();\n    this._resizeDropdown();\n  };\n\n  return AttachBody;\n});\n\nS2.define('select2/dropdown/minimumResultsForSearch',[\n\n], function () {\n  function countResults (data) {\n    var count = 0;\n\n    for (var d = 0; d < data.length; d++) {\n      var item = data[d];\n\n      if (item.children) {\n        count += countResults(item.children);\n      } else {\n        count++;\n      }\n    }\n\n    return count;\n  }\n\n  function MinimumResultsForSearch (decorated, $element, options, dataAdapter) {\n    this.minimumResultsForSearch = options.get('minimumResultsForSearch');\n\n    if (this.minimumResultsForSearch < 0) {\n      this.minimumResultsForSearch = Infinity;\n    }\n\n    decorated.call(this, $element, options, dataAdapter);\n  }\n\n  MinimumResultsForSearch.prototype.showSearch = function (decorated, params) {\n    if (countResults(params.data.results) < this.minimumResultsForSearch) {\n      return false;\n    }\n\n    return decorated.call(this, params);\n  };\n\n  return MinimumResultsForSearch;\n});\n\nS2.define('select2/dropdown/selectOnClose',[\n\n], function () {\n  function SelectOnClose () { }\n\n  SelectOnClose.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    container.on('close', function (params) {\n      self._handleSelectOnClose(params);\n    });\n  };\n\n  SelectOnClose.prototype._handleSelectOnClose = function (_, params) {\n    if (params && params.originalSelect2Event != null) {\n      var event = params.originalSelect2Event;\n\n      // Don't select an item if the close event was triggered from a select or\n      // unselect event\n      if (event._type === 'select' || event._type === 'unselect') {\n        return;\n      }\n    }\n\n    var $highlightedResults = this.getHighlightedResults();\n\n    // Only select highlighted results\n    if ($highlightedResults.length < 1) {\n      return;\n    }\n\n    var data = $highlightedResults.data('data');\n\n    // Don't re-select already selected resulte\n    if (\n      (data.element != null && data.element.selected) ||\n      (data.element == null && data.selected)\n    ) {\n      return;\n    }\n\n    this.trigger('select', {\n        data: data\n    });\n  };\n\n  return SelectOnClose;\n});\n\nS2.define('select2/dropdown/closeOnSelect',[\n\n], function () {\n  function CloseOnSelect () { }\n\n  CloseOnSelect.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    container.on('select', function (evt) {\n      self._selectTriggered(evt);\n    });\n\n    container.on('unselect', function (evt) {\n      self._selectTriggered(evt);\n    });\n  };\n\n  CloseOnSelect.prototype._selectTriggered = function (_, evt) {\n    var originalEvent = evt.originalEvent;\n\n    // Don't close if the control key is being held\n    if (originalEvent && originalEvent.ctrlKey) {\n      return;\n    }\n\n    this.trigger('close', {\n      originalEvent: originalEvent,\n      originalSelect2Event: evt\n    });\n  };\n\n  return CloseOnSelect;\n});\n\nS2.define('select2/i18n/en',[],function () {\n  // English\n  return {\n    errorLoading: function () {\n      return 'The results could not be loaded.';\n    },\n    inputTooLong: function (args) {\n      var overChars = args.input.length - args.maximum;\n\n      var message = 'Please delete ' + overChars + ' character';\n\n      if (overChars != 1) {\n        message += 's';\n      }\n\n      return message;\n    },\n    inputTooShort: function (args) {\n      var remainingChars = args.minimum - args.input.length;\n\n      var message = 'Please enter ' + remainingChars + ' or more characters';\n\n      return message;\n    },\n    loadingMore: function () {\n      return 'Loading more results…';\n    },\n    maximumSelected: function (args) {\n      var message = 'You can only select ' + args.maximum + ' item';\n\n      if (args.maximum != 1) {\n        message += 's';\n      }\n\n      return message;\n    },\n    noResults: function () {\n      return 'No results found';\n    },\n    searching: function () {\n      return 'Searching…';\n    }\n  };\n});\n\nS2.define('select2/defaults',[\n  'jquery',\n  'require',\n\n  './results',\n\n  './selection/single',\n  './selection/multiple',\n  './selection/placeholder',\n  './selection/allowClear',\n  './selection/search',\n  './selection/eventRelay',\n\n  './utils',\n  './translation',\n  './diacritics',\n\n  './data/select',\n  './data/array',\n  './data/ajax',\n  './data/tags',\n  './data/tokenizer',\n  './data/minimumInputLength',\n  './data/maximumInputLength',\n  './data/maximumSelectionLength',\n\n  './dropdown',\n  './dropdown/search',\n  './dropdown/hidePlaceholder',\n  './dropdown/infiniteScroll',\n  './dropdown/attachBody',\n  './dropdown/minimumResultsForSearch',\n  './dropdown/selectOnClose',\n  './dropdown/closeOnSelect',\n\n  './i18n/en'\n], function ($, require,\n\n             ResultsList,\n\n             SingleSelection, MultipleSelection, Placeholder, AllowClear,\n             SelectionSearch, EventRelay,\n\n             Utils, Translation, DIACRITICS,\n\n             SelectData, ArrayData, AjaxData, Tags, Tokenizer,\n             MinimumInputLength, MaximumInputLength, MaximumSelectionLength,\n\n             Dropdown, DropdownSearch, HidePlaceholder, InfiniteScroll,\n             AttachBody, MinimumResultsForSearch, SelectOnClose, CloseOnSelect,\n\n             EnglishTranslation) {\n  function Defaults () {\n    this.reset();\n  }\n\n  Defaults.prototype.apply = function (options) {\n    options = $.extend(true, {}, this.defaults, options);\n\n    if (options.dataAdapter == null) {\n      if (options.ajax != null) {\n        options.dataAdapter = AjaxData;\n      } else if (options.data != null) {\n        options.dataAdapter = ArrayData;\n      } else {\n        options.dataAdapter = SelectData;\n      }\n\n      if (options.minimumInputLength > 0) {\n        options.dataAdapter = Utils.Decorate(\n          options.dataAdapter,\n          MinimumInputLength\n        );\n      }\n\n      if (options.maximumInputLength > 0) {\n        options.dataAdapter = Utils.Decorate(\n          options.dataAdapter,\n          MaximumInputLength\n        );\n      }\n\n      if (options.maximumSelectionLength > 0) {\n        options.dataAdapter = Utils.Decorate(\n          options.dataAdapter,\n          MaximumSelectionLength\n        );\n      }\n\n      if (options.tags) {\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\n      }\n\n      if (options.tokenSeparators != null || options.tokenizer != null) {\n        options.dataAdapter = Utils.Decorate(\n          options.dataAdapter,\n          Tokenizer\n        );\n      }\n\n      if (options.query != null) {\n        var Query = require(options.amdBase + 'compat/query');\n\n        options.dataAdapter = Utils.Decorate(\n          options.dataAdapter,\n          Query\n        );\n      }\n\n      if (options.initSelection != null) {\n        var InitSelection = require(options.amdBase + 'compat/initSelection');\n\n        options.dataAdapter = Utils.Decorate(\n          options.dataAdapter,\n          InitSelection\n        );\n      }\n    }\n\n    if (options.resultsAdapter == null) {\n      options.resultsAdapter = ResultsList;\n\n      if (options.ajax != null) {\n        options.resultsAdapter = Utils.Decorate(\n          options.resultsAdapter,\n          InfiniteScroll\n        );\n      }\n\n      if (options.placeholder != null) {\n        options.resultsAdapter = Utils.Decorate(\n          options.resultsAdapter,\n          HidePlaceholder\n        );\n      }\n\n      if (options.selectOnClose) {\n        options.resultsAdapter = Utils.Decorate(\n          options.resultsAdapter,\n          SelectOnClose\n        );\n      }\n    }\n\n    if (options.dropdownAdapter == null) {\n      if (options.multiple) {\n        options.dropdownAdapter = Dropdown;\n      } else {\n        var SearchableDropdown = Utils.Decorate(Dropdown, DropdownSearch);\n\n        options.dropdownAdapter = SearchableDropdown;\n      }\n\n      if (options.minimumResultsForSearch !== 0) {\n        options.dropdownAdapter = Utils.Decorate(\n          options.dropdownAdapter,\n          MinimumResultsForSearch\n        );\n      }\n\n      if (options.closeOnSelect) {\n        options.dropdownAdapter = Utils.Decorate(\n          options.dropdownAdapter,\n          CloseOnSelect\n        );\n      }\n\n      if (\n        options.dropdownCssClass != null ||\n        options.dropdownCss != null ||\n        options.adaptDropdownCssClass != null\n      ) {\n        var DropdownCSS = require(options.amdBase + 'compat/dropdownCss');\n\n        options.dropdownAdapter = Utils.Decorate(\n          options.dropdownAdapter,\n          DropdownCSS\n        );\n      }\n\n      options.dropdownAdapter = Utils.Decorate(\n        options.dropdownAdapter,\n        AttachBody\n      );\n    }\n\n    if (options.selectionAdapter == null) {\n      if (options.multiple) {\n        options.selectionAdapter = MultipleSelection;\n      } else {\n        options.selectionAdapter = SingleSelection;\n      }\n\n      // Add the placeholder mixin if a placeholder was specified\n      if (options.placeholder != null) {\n        options.selectionAdapter = Utils.Decorate(\n          options.selectionAdapter,\n          Placeholder\n        );\n      }\n\n      if (options.allowClear) {\n        options.selectionAdapter = Utils.Decorate(\n          options.selectionAdapter,\n          AllowClear\n        );\n      }\n\n      if (options.multiple) {\n        options.selectionAdapter = Utils.Decorate(\n          options.selectionAdapter,\n          SelectionSearch\n        );\n      }\n\n      if (\n        options.containerCssClass != null ||\n        options.containerCss != null ||\n        options.adaptContainerCssClass != null\n      ) {\n        var ContainerCSS = require(options.amdBase + 'compat/containerCss');\n\n        options.selectionAdapter = Utils.Decorate(\n          options.selectionAdapter,\n          ContainerCSS\n        );\n      }\n\n      options.selectionAdapter = Utils.Decorate(\n        options.selectionAdapter,\n        EventRelay\n      );\n    }\n\n    if (typeof options.language === 'string') {\n      // Check if the language is specified with a region\n      if (options.language.indexOf('-') > 0) {\n        // Extract the region information if it is included\n        var languageParts = options.language.split('-');\n        var baseLanguage = languageParts[0];\n\n        options.language = [options.language, baseLanguage];\n      } else {\n        options.language = [options.language];\n      }\n    }\n\n    if ($.isArray(options.language)) {\n      var languages = new Translation();\n      options.language.push('en');\n\n      var languageNames = options.language;\n\n      for (var l = 0; l < languageNames.length; l++) {\n        var name = languageNames[l];\n        var language = {};\n\n        try {\n          // Try to load it with the original name\n          language = Translation.loadPath(name);\n        } catch (e) {\n          try {\n            // If we couldn't load it, check if it wasn't the full path\n            name = this.defaults.amdLanguageBase + name;\n            language = Translation.loadPath(name);\n          } catch (ex) {\n            // The translation could not be loaded at all. Sometimes this is\n            // because of a configuration problem, other times this can be\n            // because of how Select2 helps load all possible translation files.\n            if (options.debug && window.console && console.warn) {\n              console.warn(\n                'Select2: The language file for \"' + name + '\" could not be ' +\n                'automatically loaded. A fallback will be used instead.'\n              );\n            }\n\n            continue;\n          }\n        }\n\n        languages.extend(language);\n      }\n\n      options.translations = languages;\n    } else {\n      var baseTranslation = Translation.loadPath(\n        this.defaults.amdLanguageBase + 'en'\n      );\n      var customTranslation = new Translation(options.language);\n\n      customTranslation.extend(baseTranslation);\n\n      options.translations = customTranslation;\n    }\n\n    return options;\n  };\n\n  Defaults.prototype.reset = function () {\n    function stripDiacritics (text) {\n      // Used 'uni range + named function' from http://jsperf.com/diacritics/18\n      function match(a) {\n        return DIACRITICS[a] || a;\n      }\n\n      return text.replace(/[^\\u0000-\\u007E]/g, match);\n    }\n\n    function matcher (params, data) {\n      // Always return the object if there is nothing to compare\n      if ($.trim(params.term) === '') {\n        return data;\n      }\n\n      // Do a recursive check for options with children\n      if (data.children && data.children.length > 0) {\n        // Clone the data object if there are children\n        // This is required as we modify the object to remove any non-matches\n        var match = $.extend(true, {}, data);\n\n        // Check each child of the option\n        for (var c = data.children.length - 1; c >= 0; c--) {\n          var child = data.children[c];\n\n          var matches = matcher(params, child);\n\n          // If there wasn't a match, remove the object in the array\n          if (matches == null) {\n            match.children.splice(c, 1);\n          }\n        }\n\n        // If any children matched, return the new object\n        if (match.children.length > 0) {\n          return match;\n        }\n\n        // If there were no matching children, check just the plain object\n        return matcher(params, match);\n      }\n\n      var original = stripDiacritics(data.text).toUpperCase();\n      var term = stripDiacritics(params.term).toUpperCase();\n\n      // Check if the text contains the term\n      if (original.indexOf(term) > -1) {\n        return data;\n      }\n\n      // If it doesn't contain the term, don't return anything\n      return null;\n    }\n\n    this.defaults = {\n      amdBase: './',\n      amdLanguageBase: './i18n/',\n      closeOnSelect: true,\n      debug: false,\n      dropdownAutoWidth: false,\n      escapeMarkup: Utils.escapeMarkup,\n      language: EnglishTranslation,\n      matcher: matcher,\n      minimumInputLength: 0,\n      maximumInputLength: 0,\n      maximumSelectionLength: 0,\n      minimumResultsForSearch: 0,\n      selectOnClose: false,\n      sorter: function (data) {\n        return data;\n      },\n      templateResult: function (result) {\n        return result.text;\n      },\n      templateSelection: function (selection) {\n        return selection.text;\n      },\n      theme: 'default',\n      width: 'resolve'\n    };\n  };\n\n  Defaults.prototype.set = function (key, value) {\n    var camelKey = $.camelCase(key);\n\n    var data = {};\n    data[camelKey] = value;\n\n    var convertedData = Utils._convertData(data);\n\n    $.extend(this.defaults, convertedData);\n  };\n\n  var defaults = new Defaults();\n\n  return defaults;\n});\n\nS2.define('select2/options',[\n  'require',\n  'jquery',\n  './defaults',\n  './utils'\n], function (require, $, Defaults, Utils) {\n  function Options (options, $element) {\n    this.options = options;\n\n    if ($element != null) {\n      this.fromElement($element);\n    }\n\n    this.options = Defaults.apply(this.options);\n\n    if ($element && $element.is('input')) {\n      var InputCompat = require(this.get('amdBase') + 'compat/inputData');\n\n      this.options.dataAdapter = Utils.Decorate(\n        this.options.dataAdapter,\n        InputCompat\n      );\n    }\n  }\n\n  Options.prototype.fromElement = function ($e) {\n    var excludedData = ['select2'];\n\n    if (this.options.multiple == null) {\n      this.options.multiple = $e.prop('multiple');\n    }\n\n    if (this.options.disabled == null) {\n      this.options.disabled = $e.prop('disabled');\n    }\n\n    if (this.options.language == null) {\n      if ($e.prop('lang')) {\n        this.options.language = $e.prop('lang').toLowerCase();\n      } else if ($e.closest('[lang]').prop('lang')) {\n        this.options.language = $e.closest('[lang]').prop('lang');\n      }\n    }\n\n    if (this.options.dir == null) {\n      if ($e.prop('dir')) {\n        this.options.dir = $e.prop('dir');\n      } else if ($e.closest('[dir]').prop('dir')) {\n        this.options.dir = $e.closest('[dir]').prop('dir');\n      } else {\n        this.options.dir = 'ltr';\n      }\n    }\n\n    $e.prop('disabled', this.options.disabled);\n    $e.prop('multiple', this.options.multiple);\n\n    if ($e.data('select2Tags')) {\n      if (this.options.debug && window.console && console.warn) {\n        console.warn(\n          'Select2: The `data-select2-tags` attribute has been changed to ' +\n          'use the `data-data` and `data-tags=\"true\"` attributes and will be ' +\n          'removed in future versions of Select2.'\n        );\n      }\n\n      $e.data('data', $e.data('select2Tags'));\n      $e.data('tags', true);\n    }\n\n    if ($e.data('ajaxUrl')) {\n      if (this.options.debug && window.console && console.warn) {\n        console.warn(\n          'Select2: The `data-ajax-url` attribute has been changed to ' +\n          '`data-ajax--url` and support for the old attribute will be removed' +\n          ' in future versions of Select2.'\n        );\n      }\n\n      $e.attr('ajax--url', $e.data('ajaxUrl'));\n      $e.data('ajax--url', $e.data('ajaxUrl'));\n    }\n\n    var dataset = {};\n\n    // Prefer the element's `dataset` attribute if it exists\n    // jQuery 1.x does not correctly handle data attributes with multiple dashes\n    if ($.fn.jquery && $.fn.jquery.substr(0, 2) == '1.' && $e[0].dataset) {\n      dataset = $.extend(true, {}, $e[0].dataset, $e.data());\n    } else {\n      dataset = $e.data();\n    }\n\n    var data = $.extend(true, {}, dataset);\n\n    data = Utils._convertData(data);\n\n    for (var key in data) {\n      if ($.inArray(key, excludedData) > -1) {\n        continue;\n      }\n\n      if ($.isPlainObject(this.options[key])) {\n        $.extend(this.options[key], data[key]);\n      } else {\n        this.options[key] = data[key];\n      }\n    }\n\n    return this;\n  };\n\n  Options.prototype.get = function (key) {\n    return this.options[key];\n  };\n\n  Options.prototype.set = function (key, val) {\n    this.options[key] = val;\n  };\n\n  return Options;\n});\n\nS2.define('select2/core',[\n  'jquery',\n  './options',\n  './utils',\n  './keys'\n], function ($, Options, Utils, KEYS) {\n  var Select2 = function ($element, options) {\n    if ($element.data('select2') != null) {\n      $element.data('select2').destroy();\n    }\n\n    this.$element = $element;\n\n    this.id = this._generateId($element);\n\n    options = options || {};\n\n    this.options = new Options(options, $element);\n\n    Select2.__super__.constructor.call(this);\n\n    // Set up the tabindex\n\n    var tabindex = $element.attr('tabindex') || 0;\n    $element.data('old-tabindex', tabindex);\n    $element.attr('tabindex', '-1');\n\n    // Set up containers and adapters\n\n    var DataAdapter = this.options.get('dataAdapter');\n    this.dataAdapter = new DataAdapter($element, this.options);\n\n    var $container = this.render();\n\n    this._placeContainer($container);\n\n    var SelectionAdapter = this.options.get('selectionAdapter');\n    this.selection = new SelectionAdapter($element, this.options);\n    this.$selection = this.selection.render();\n\n    this.selection.position(this.$selection, $container);\n\n    var DropdownAdapter = this.options.get('dropdownAdapter');\n    this.dropdown = new DropdownAdapter($element, this.options);\n    this.$dropdown = this.dropdown.render();\n\n    this.dropdown.position(this.$dropdown, $container);\n\n    var ResultsAdapter = this.options.get('resultsAdapter');\n    this.results = new ResultsAdapter($element, this.options, this.dataAdapter);\n    this.$results = this.results.render();\n\n    this.results.position(this.$results, this.$dropdown);\n\n    // Bind events\n\n    var self = this;\n\n    // Bind the container to all of the adapters\n    this._bindAdapters();\n\n    // Register any DOM event handlers\n    this._registerDomEvents();\n\n    // Register any internal event handlers\n    this._registerDataEvents();\n    this._registerSelectionEvents();\n    this._registerDropdownEvents();\n    this._registerResultsEvents();\n    this._registerEvents();\n\n    // Set the initial state\n    this.dataAdapter.current(function (initialData) {\n      self.trigger('selection:update', {\n        data: initialData\n      });\n    });\n\n    // Hide the original select\n    $element.addClass('select2-hidden-accessible');\n    $element.attr('aria-hidden', 'true');\n\n    // Synchronize any monitored attributes\n    this._syncAttributes();\n\n    $element.data('select2', this);\n  };\n\n  Utils.Extend(Select2, Utils.Observable);\n\n  Select2.prototype._generateId = function ($element) {\n    var id = '';\n\n    if ($element.attr('id') != null) {\n      id = $element.attr('id');\n    } else if ($element.attr('name') != null) {\n      id = $element.attr('name') + '-' + Utils.generateChars(2);\n    } else {\n      id = Utils.generateChars(4);\n    }\n\n    id = id.replace(/(:|\\.|\\[|\\]|,)/g, '');\n    id = 'select2-' + id;\n\n    return id;\n  };\n\n  Select2.prototype._placeContainer = function ($container) {\n    $container.insertAfter(this.$element);\n\n    var width = this._resolveWidth(this.$element, this.options.get('width'));\n\n    if (width != null) {\n      $container.css('width', width);\n    }\n  };\n\n  Select2.prototype._resolveWidth = function ($element, method) {\n    var WIDTH = /^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;\n\n    if (method == 'resolve') {\n      var styleWidth = this._resolveWidth($element, 'style');\n\n      if (styleWidth != null) {\n        return styleWidth;\n      }\n\n      return this._resolveWidth($element, 'element');\n    }\n\n    if (method == 'element') {\n      var elementWidth = $element.outerWidth(false);\n\n      if (elementWidth <= 0) {\n        return 'auto';\n      }\n\n      return elementWidth + 'px';\n    }\n\n    if (method == 'style') {\n      var style = $element.attr('style');\n\n      if (typeof(style) !== 'string') {\n        return null;\n      }\n\n      var attrs = style.split(';');\n\n      for (var i = 0, l = attrs.length; i < l; i = i + 1) {\n        var attr = attrs[i].replace(/\\s/g, '');\n        var matches = attr.match(WIDTH);\n\n        if (matches !== null && matches.length >= 1) {\n          return matches[1];\n        }\n      }\n\n      return null;\n    }\n\n    return method;\n  };\n\n  Select2.prototype._bindAdapters = function () {\n    this.dataAdapter.bind(this, this.$container);\n    this.selection.bind(this, this.$container);\n\n    this.dropdown.bind(this, this.$container);\n    this.results.bind(this, this.$container);\n  };\n\n  Select2.prototype._registerDomEvents = function () {\n    var self = this;\n\n    this.$element.on('change.select2', function () {\n      self.dataAdapter.current(function (data) {\n        self.trigger('selection:update', {\n          data: data\n        });\n      });\n    });\n\n    this.$element.on('focus.select2', function (evt) {\n      self.trigger('focus', evt);\n    });\n\n    this._syncA = Utils.bind(this._syncAttributes, this);\n    this._syncS = Utils.bind(this._syncSubtree, this);\n\n    if (this.$element[0].attachEvent) {\n      this.$element[0].attachEvent('onpropertychange', this._syncA);\n    }\n\n    var observer = window.MutationObserver ||\n      window.WebKitMutationObserver ||\n      window.MozMutationObserver\n    ;\n\n    if (observer != null) {\n      this._observer = new observer(function (mutations) {\n        $.each(mutations, self._syncA);\n        $.each(mutations, self._syncS);\n      });\n      this._observer.observe(this.$element[0], {\n        attributes: true,\n        childList: true,\n        subtree: false\n      });\n    } else if (this.$element[0].addEventListener) {\n      this.$element[0].addEventListener(\n        'DOMAttrModified',\n        self._syncA,\n        false\n      );\n      this.$element[0].addEventListener(\n        'DOMNodeInserted',\n        self._syncS,\n        false\n      );\n      this.$element[0].addEventListener(\n        'DOMNodeRemoved',\n        self._syncS,\n        false\n      );\n    }\n  };\n\n  Select2.prototype._registerDataEvents = function () {\n    var self = this;\n\n    this.dataAdapter.on('*', function (name, params) {\n      self.trigger(name, params);\n    });\n  };\n\n  Select2.prototype._registerSelectionEvents = function () {\n    var self = this;\n    var nonRelayEvents = ['toggle', 'focus'];\n\n    this.selection.on('toggle', function () {\n      self.toggleDropdown();\n    });\n\n    this.selection.on('focus', function (params) {\n      self.focus(params);\n    });\n\n    this.selection.on('*', function (name, params) {\n      if ($.inArray(name, nonRelayEvents) !== -1) {\n        return;\n      }\n\n      self.trigger(name, params);\n    });\n  };\n\n  Select2.prototype._registerDropdownEvents = function () {\n    var self = this;\n\n    this.dropdown.on('*', function (name, params) {\n      self.trigger(name, params);\n    });\n  };\n\n  Select2.prototype._registerResultsEvents = function () {\n    var self = this;\n\n    this.results.on('*', function (name, params) {\n      self.trigger(name, params);\n    });\n  };\n\n  Select2.prototype._registerEvents = function () {\n    var self = this;\n\n    this.on('open', function () {\n      self.$container.addClass('select2-container--open');\n    });\n\n    this.on('close', function () {\n      self.$container.removeClass('select2-container--open');\n    });\n\n    this.on('enable', function () {\n      self.$container.removeClass('select2-container--disabled');\n    });\n\n    this.on('disable', function () {\n      self.$container.addClass('select2-container--disabled');\n    });\n\n    this.on('blur', function () {\n      self.$container.removeClass('select2-container--focus');\n    });\n\n    this.on('query', function (params) {\n      if (!self.isOpen()) {\n        self.trigger('open', {});\n      }\n\n      this.dataAdapter.query(params, function (data) {\n        self.trigger('results:all', {\n          data: data,\n          query: params\n        });\n      });\n    });\n\n    this.on('query:append', function (params) {\n      this.dataAdapter.query(params, function (data) {\n        self.trigger('results:append', {\n          data: data,\n          query: params\n        });\n      });\n    });\n\n    this.on('keypress', function (evt) {\n      var key = evt.which;\n\n      if (self.isOpen()) {\n        if (key === KEYS.ESC || key === KEYS.TAB ||\n            (key === KEYS.UP && evt.altKey)) {\n          self.close();\n\n          evt.preventDefault();\n        } else if (key === KEYS.ENTER) {\n          self.trigger('results:select', {});\n\n          evt.preventDefault();\n        } else if ((key === KEYS.SPACE && evt.ctrlKey)) {\n          self.trigger('results:toggle', {});\n\n          evt.preventDefault();\n        } else if (key === KEYS.UP) {\n          self.trigger('results:previous', {});\n\n          evt.preventDefault();\n        } else if (key === KEYS.DOWN) {\n          self.trigger('results:next', {});\n\n          evt.preventDefault();\n        }\n      } else {\n        if (key === KEYS.ENTER || key === KEYS.SPACE ||\n            (key === KEYS.DOWN && evt.altKey)) {\n          self.open();\n\n          evt.preventDefault();\n        }\n      }\n    });\n  };\n\n  Select2.prototype._syncAttributes = function () {\n    this.options.set('disabled', this.$element.prop('disabled'));\n\n    if (this.options.get('disabled')) {\n      if (this.isOpen()) {\n        this.close();\n      }\n\n      this.trigger('disable', {});\n    } else {\n      this.trigger('enable', {});\n    }\n  };\n\n  Select2.prototype._syncSubtree = function (evt, mutations) {\n    var changed = false;\n    var self = this;\n\n    // Ignore any mutation events raised for elements that aren't options or\n    // optgroups. This handles the case when the select element is destroyed\n    if (\n      evt && evt.target && (\n        evt.target.nodeName !== 'OPTION' && evt.target.nodeName !== 'OPTGROUP'\n      )\n    ) {\n      return;\n    }\n\n    if (!mutations) {\n      // If mutation events aren't supported, then we can only assume that the\n      // change affected the selections\n      changed = true;\n    } else if (mutations.addedNodes && mutations.addedNodes.length > 0) {\n      for (var n = 0; n < mutations.addedNodes.length; n++) {\n        var node = mutations.addedNodes[n];\n\n        if (node.selected) {\n          changed = true;\n        }\n      }\n    } else if (mutations.removedNodes && mutations.removedNodes.length > 0) {\n      changed = true;\n    }\n\n    // Only re-pull the data if we think there is a change\n    if (changed) {\n      this.dataAdapter.current(function (currentData) {\n        self.trigger('selection:update', {\n          data: currentData\n        });\n      });\n    }\n  };\n\n  /**\n   * Override the trigger method to automatically trigger pre-events when\n   * there are events that can be prevented.\n   */\n  Select2.prototype.trigger = function (name, args) {\n    var actualTrigger = Select2.__super__.trigger;\n    var preTriggerMap = {\n      'open': 'opening',\n      'close': 'closing',\n      'select': 'selecting',\n      'unselect': 'unselecting'\n    };\n\n    if (args === undefined) {\n      args = {};\n    }\n\n    if (name in preTriggerMap) {\n      var preTriggerName = preTriggerMap[name];\n      var preTriggerArgs = {\n        prevented: false,\n        name: name,\n        args: args\n      };\n\n      actualTrigger.call(this, preTriggerName, preTriggerArgs);\n\n      if (preTriggerArgs.prevented) {\n        args.prevented = true;\n\n        return;\n      }\n    }\n\n    actualTrigger.call(this, name, args);\n  };\n\n  Select2.prototype.toggleDropdown = function () {\n    if (this.options.get('disabled')) {\n      return;\n    }\n\n    if (this.isOpen()) {\n      this.close();\n    } else {\n      this.open();\n    }\n  };\n\n  Select2.prototype.open = function () {\n    if (this.isOpen()) {\n      return;\n    }\n\n    this.trigger('query', {});\n  };\n\n  Select2.prototype.close = function () {\n    if (!this.isOpen()) {\n      return;\n    }\n\n    this.trigger('close', {});\n  };\n\n  Select2.prototype.isOpen = function () {\n    return this.$container.hasClass('select2-container--open');\n  };\n\n  Select2.prototype.hasFocus = function () {\n    return this.$container.hasClass('select2-container--focus');\n  };\n\n  Select2.prototype.focus = function (data) {\n    // No need to re-trigger focus events if we are already focused\n    if (this.hasFocus()) {\n      return;\n    }\n\n    this.$container.addClass('select2-container--focus');\n    this.trigger('focus', {});\n  };\n\n  Select2.prototype.enable = function (args) {\n    if (this.options.get('debug') && window.console && console.warn) {\n      console.warn(\n        'Select2: The `select2(\"enable\")` method has been deprecated and will' +\n        ' be removed in later Select2 versions. Use $element.prop(\"disabled\")' +\n        ' instead.'\n      );\n    }\n\n    if (args == null || args.length === 0) {\n      args = [true];\n    }\n\n    var disabled = !args[0];\n\n    this.$element.prop('disabled', disabled);\n  };\n\n  Select2.prototype.data = function () {\n    if (this.options.get('debug') &&\n        arguments.length > 0 && window.console && console.warn) {\n      console.warn(\n        'Select2: Data can no longer be set using `select2(\"data\")`. You ' +\n        'should consider setting the value instead using `$element.val()`.'\n      );\n    }\n\n    var data = [];\n\n    this.dataAdapter.current(function (currentData) {\n      data = currentData;\n    });\n\n    return data;\n  };\n\n  Select2.prototype.val = function (args) {\n    if (this.options.get('debug') && window.console && console.warn) {\n      console.warn(\n        'Select2: The `select2(\"val\")` method has been deprecated and will be' +\n        ' removed in later Select2 versions. Use $element.val() instead.'\n      );\n    }\n\n    if (args == null || args.length === 0) {\n      return this.$element.val();\n    }\n\n    var newVal = args[0];\n\n    if ($.isArray(newVal)) {\n      newVal = $.map(newVal, function (obj) {\n        return obj.toString();\n      });\n    }\n\n    this.$element.val(newVal).trigger('change');\n  };\n\n  Select2.prototype.destroy = function () {\n    this.$container.remove();\n\n    if (this.$element[0].detachEvent) {\n      this.$element[0].detachEvent('onpropertychange', this._syncA);\n    }\n\n    if (this._observer != null) {\n      this._observer.disconnect();\n      this._observer = null;\n    } else if (this.$element[0].removeEventListener) {\n      this.$element[0]\n        .removeEventListener('DOMAttrModified', this._syncA, false);\n      this.$element[0]\n        .removeEventListener('DOMNodeInserted', this._syncS, false);\n      this.$element[0]\n        .removeEventListener('DOMNodeRemoved', this._syncS, false);\n    }\n\n    this._syncA = null;\n    this._syncS = null;\n\n    this.$element.off('.select2');\n    this.$element.attr('tabindex', this.$element.data('old-tabindex'));\n\n    this.$element.removeClass('select2-hidden-accessible');\n    this.$element.attr('aria-hidden', 'false');\n    this.$element.removeData('select2');\n\n    this.dataAdapter.destroy();\n    this.selection.destroy();\n    this.dropdown.destroy();\n    this.results.destroy();\n\n    this.dataAdapter = null;\n    this.selection = null;\n    this.dropdown = null;\n    this.results = null;\n  };\n\n  Select2.prototype.render = function () {\n    var $container = $(\n      '<span class=\"select2 select2-container\">' +\n        '<span class=\"selection\"></span>' +\n        '<span class=\"dropdown-wrapper\" aria-hidden=\"true\"></span>' +\n      '</span>'\n    );\n\n    $container.attr('dir', this.options.get('dir'));\n\n    this.$container = $container;\n\n    this.$container.addClass('select2-container--' + this.options.get('theme'));\n\n    $container.data('element', this.$element);\n\n    return $container;\n  };\n\n  return Select2;\n});\n\nS2.define('jquery-mousewheel',[\n  'jquery'\n], function ($) {\n  // Used to shim jQuery.mousewheel for non-full builds.\n  return $;\n});\n\nS2.define('jquery.select2',[\n  'jquery',\n  'jquery-mousewheel',\n\n  './select2/core',\n  './select2/defaults'\n], function ($, _, Select2, Defaults) {\n  if ($.fn.select2 == null) {\n    // All methods that should return the element\n    var thisMethods = ['open', 'close', 'destroy'];\n\n    $.fn.select2 = function (options) {\n      options = options || {};\n\n      if (typeof options === 'object') {\n        this.each(function () {\n          var instanceOptions = $.extend(true, {}, options);\n\n          var instance = new Select2($(this), instanceOptions);\n        });\n\n        return this;\n      } else if (typeof options === 'string') {\n        var ret;\n        var args = Array.prototype.slice.call(arguments, 1);\n\n        this.each(function () {\n          var instance = $(this).data('select2');\n\n          if (instance == null && window.console && console.error) {\n            console.error(\n              'The select2(\\'' + options + '\\') method was called on an ' +\n              'element that is not using Select2.'\n            );\n          }\n\n          ret = instance[options].apply(instance, args);\n        });\n\n        // Check if we should be returning `this`\n        if ($.inArray(options, thisMethods) > -1) {\n          return this;\n        }\n\n        return ret;\n      } else {\n        throw new Error('Invalid arguments for Select2: ' + options);\n      }\n    };\n  }\n\n  if ($.fn.select2.defaults == null) {\n    $.fn.select2.defaults = Defaults;\n  }\n\n  return Select2;\n});\n\n  // Return the AMD loader configuration so it can be used outside of this file\n  return {\n    define: S2.define,\n    require: S2.require\n  };\n}());\n\n  // Autoload the jQuery bindings\n  // We know that all of the modules exist above this, so we're safe\n  var select2 = S2.require('jquery.select2');\n\n  // Hold the AMD module references on the jQuery function that was just loaded\n  // This allows Select2 to use the internal loader outside of this file, such\n  // as in the language files.\n  jQuery.fn.select2.amd = S2;\n\n  // Return the Select2 instance for anyone who is importing it.\n  return select2;\n}));\n","/* jshint ignore:start */\n// jscs:disable\n\n/**!\n * Sortable https://github.com/RubaXa/Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @license MIT\n */\n\n\n(function (factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse if (typeof Package !== \"undefined\") {\n\t\tSortable = factory();  // export for Meteor.js\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function () {\n\t\"use strict\";\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\n\t\tlastEl,\n\t\tlastCSS,\n\t\tlastParentCSS,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tautoScroll = {},\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\t\t/** @const */\n\t\tRSPACE = /\\s+/g,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\n\t\tsupportDraggable = !!('draggable' in document.createElement('div')),\n\t\tsupportCssPointerEvents = (function (el) {\n\t\t\tel = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\n\t\tabs = Math.abs,\n\t\tslice = [].slice,\n\n\t\ttouchDragOverListeners = [],\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (rootEl && options.scroll) {\n\t\t\t\tvar el,\n\t\t\t\t\trect,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinWidth = window.innerWidth,\n\t\t\t\t\twinHeight = window.innerHeight,\n\n\t\t\t\t\tvx,\n\t\t\t\t\tvy\n\t\t\t\t\t;\n\n\t\t\t\t// Delect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollParentEl = rootEl;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = rootEl;\n\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\tif ((scrollEl.offsetWidth < scrollEl.scrollWidth) ||\n\t\t\t\t\t\t\t\t(scrollEl.offsetHeight < scrollEl.scrollHeight)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\t\t} while (scrollEl = scrollEl.parentNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (scrollEl) {\n\t\t\t\t\tel = scrollEl;\n\t\t\t\t\trect = scrollEl.getBoundingClientRect();\n\t\t\t\t\tvx = (abs(rect.right - x) <= sens) - (abs(rect.left - x) <= sens);\n\t\t\t\t\tvy = (abs(rect.bottom - y) <= sens) - (abs(rect.top - y) <= sens);\n\t\t\t\t}\n\n\n\t\t\t\tif (!(vx || vy)) {\n\t\t\t\t\tvx = (winWidth - x <= sens) - (x <= sens);\n\t\t\t\t\tvy = (winHeight - y <= sens) - (y <= sens);\n\n\t\t\t\t\t/* jshint expr:true */\n\t\t\t\t\t(vx || vy) && (el = win);\n\t\t\t\t}\n\n\n\t\t\t\tif (autoScroll.vx !== vx || autoScroll.vy !== vy || autoScroll.el !== el) {\n\t\t\t\t\tautoScroll.el = el;\n\t\t\t\t\tautoScroll.vx = vx;\n\t\t\t\t\tautoScroll.vy = vy;\n\n\t\t\t\t\tclearInterval(autoScroll.pid);\n\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tautoScroll.pid = setInterval(function () {\n\t\t\t\t\t\t\tif (el === win) {\n\t\t\t\t\t\t\t\twin.scrollTo(win.pageXOffset + vx * speed, win.pageYOffset + vy * speed);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvy && (el.scrollTop += vy * speed);\n\t\t\t\t\t\t\t\tvx && (el.scrollLeft += vx * speed);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 24);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, 30),\n\n\t\t_prepareGroup = function (options) {\n\t\t\tvar group = options.group;\n\n\t\t\tif (!group || typeof group != 'object') {\n\t\t\t\tgroup = options.group = {name: group};\n\t\t\t}\n\n\t\t\t['pull', 'put'].forEach(function (key) {\n\t\t\t\tif (!(key in group)) {\n\t\t\t\t\tgroup[key] = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\toptions.groups = ' ' + group.name + (group.put.join ? ' ' + group.put.join(' ') : '') + ' ';\n\t\t}\n\t\t;\n\n\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: Math.random(),\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? 'li' : '>*',\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tanimation: 0,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\n\t\t\t// Custom addition by TJ\n\t\t\tdisableXAxis: false\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\t// Bind events\n\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t_on(el, 'touchstart', this._onTapStart);\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\ttouchDragOverListeners.push(this._onDragOver);\n\n\t\t// Restore sorting\n\t\toptions.store && this.sort(options.store.get(this));\n\t}\n\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = target,\n\t\t\t\tfilter = options.filter;\n\n\n\t\t\tif (type === 'mousedown' && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button or enabled\n\t\t\t}\n\n\t\t\ttarget = _closest(target, options.draggable, el);\n\n\t\t\tif (!target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// get the index of the dragged element within its parent\n\t\t\toldIndex = _index(target);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, oldIndex);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, oldIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target);\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\ttapEvt = evt;\n\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tactiveGroup = options.group;\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDrag();\n\n\t\t\t\t\t// Make the element draggable\n\t\t\t\t\tdragEl.draggable = true;\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, _this.options.chosenClass, true);\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(touch);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\n\t\t\t\tif (options.delay) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._disableDelayedDrag);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchmove', this._disableDelayedDrag);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Touch */touch) {\n\t\t\tif (touch) {\n\t\t\t\t// Touch device support\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: touch.clientX,\n\t\t\t\t\tclientY: touch.clientY\n\t\t\t\t};\n\n\t\t\t\tthis._onDragStart(tapEvt, 'touch');\n\t\t\t}\n\t\t\telse if (!this.nativeDraggable) {\n\t\t\t\tthis._onDragStart(tapEvt, true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function () {\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\t// Apply effect\n\t\t\t\t_toggleClass(dragEl, this.options.ghostClass, true);\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, oldIndex);\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function () {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t\t}\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY),\n\t\t\t\t\tparent = target,\n\t\t\t\t\tgroupName = ' ' + this.options.group.name + '',\n\t\t\t\t\ti = touchDragOverListeners.length;\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando] && parent[expando].options.groups.indexOf(groupName) > -1) {\n\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\ttouchDragOverListeners[i]({\n\t\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt) {\n\t\t\tif (tapEvt) {\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active) {\n\t\t\t\t\tthis._dragStarted();\n\t\t\t\t}\n\n\t\t\t\t// as well as creating the ghost element on the document body\n\t\t\t\tthis._appendGhost();\n\n\t\t\t\tvar touch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tdx = this.options.disableXAxis ? 0 : touch.clientX - tapEvt.clientX, // Ternary custom addition by TJ\n\t\t\t\t\tdy = touch.clientY - tapEvt.clientY,\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar rect = dragEl.getBoundingClientRect(),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\tghostRect;\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, this.options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, this.options.fallbackClass, true);\n\n\t\t\t\t_css(ghostEl, 'top', rect.top - parseInt(css.marginTop, 10));\n\t\t\t\t_css(ghostEl, 'left', rect.left - parseInt(css.marginLeft, 10));\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', 'fixed');\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\tthis.options.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\n\t\t\t\t// Fixing dimensions.\n\t\t\t\tghostRect = ghostEl.getBoundingClientRect();\n\t\t\t\t_css(ghostEl, 'width', rect.width * 2 - ghostRect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height * 2 - ghostRect.height);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/useFallback) {\n\t\t\tvar dataTransfer = evt.dataTransfer,\n\t\t\t\toptions = this.options;\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (activeGroup.pull == 'clone') {\n\t\t\t\tcloneEl = dragEl.cloneNode(true);\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t}\n\n\t\t\tif (useFallback) {\n\n\t\t\t\tif (useFallback === 'touch') {\n\t\t\t\t\t// Bind touch events\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'touchend', this._onDrop);\n\t\t\t\t\t_on(document, 'touchcancel', this._onDrop);\n\t\t\t\t} else {\n\t\t\t\t\t// Old brwoser\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'mouseup', this._onDrop);\n\t\t\t\t}\n\n\t\t\t\tthis._loopId = setInterval(this._emulateDragOver, 50);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', this);\n\t\t\t\tsetTimeout(this._dragStarted, 0);\n\t\t\t}\n\t\t},\n\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget,\n\t\t\t\tdragRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tgroupPut = group.put,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tcanSort = options.sort;\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation();\n\t\t\t}\n\n\t\t\tmoved = true;\n\n\t\t\tif (activeGroup && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t\t: activeGroup.pull && groupPut && (\n\t\t\t\t\t\t(activeGroup.name === group.name) || // by Name\n\t\t\t\t\t\t(groupPut.indexOf && ~groupPut.indexOf(activeGroup.name)) // by Array\n\t\t\t\t\t)\n\t\t\t\t) &&\n\t\t\t\t(evt.rootEl === void 0 || evt.rootEl === this.el) // touch fallback\n\t\t\t) {\n\t\t\t\t// Smart auto-scrolling\n\t\t\t\t_autoScroll(evt, options, this.el);\n\n\t\t\t\tif (_silent) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttarget = _closest(evt.target, options.draggable, el);\n\t\t\t\tdragRect = dragEl.getBoundingClientRect();\n\n\t\t\t\tif (revert) {\n\t\t\t\t\t_cloneHide(true);\n\n\t\t\t\t\tif (cloneEl || nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, cloneEl || nextEl);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!canSort) {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\n\t\t\t\tif ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n\t\t\t\t\t(el === evt.target) && (target = _ghostIsLast(el, evt))\n\t\t\t\t) {\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\tif (target.animated) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttargetRect = target.getBoundingClientRect();\n\t\t\t\t\t}\n\n\t\t\t\t\t_cloneHide(isOwner);\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect) !== false) {\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\ttarget && this._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && !target.animated && target !== dragEl && (target.parentNode[expando] !== void 0)) {\n\t\t\t\t\tif (lastEl !== target) {\n\t\t\t\t\t\tlastEl = target;\n\t\t\t\t\t\tlastCSS = _css(target);\n\t\t\t\t\t\tlastParentCSS = _css(target.parentNode);\n\t\t\t\t\t}\n\n\n\t\t\t\t\tvar targetRect = target.getBoundingClientRect(),\n\t\t\t\t\t\twidth = targetRect.right - targetRect.left,\n\t\t\t\t\t\theight = targetRect.bottom - targetRect.top,\n\t\t\t\t\t\tfloating = /left|right|inline/.test(lastCSS.cssFloat + lastCSS.display)\n\t\t\t\t\t\t\t|| (lastParentCSS.display == 'flex' && lastParentCSS['flex-direction'].indexOf('row') === 0),\n\t\t\t\t\t\tisWide = (target.offsetWidth > dragEl.offsetWidth),\n\t\t\t\t\t\tisLong = (target.offsetHeight > dragEl.offsetHeight),\n\t\t\t\t\t\thalfway = (floating ? (evt.clientX - targetRect.left) / width : (evt.clientY - targetRect.top) / height) > 0.5,\n\t\t\t\t\t\tnextSibling = target.nextElementSibling,\n\t\t\t\t\t\tmoveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect),\n\t\t\t\t\t\tafter\n\t\t\t\t\t\t;\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\t_cloneHide(isOwner);\n\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (floating) {\n\t\t\t\t\t\t\tvar elTop = dragEl.offsetTop,\n\t\t\t\t\t\t\t\ttgTop = target.offsetTop;\n\n\t\t\t\t\t\t\tif (elTop === tgTop) {\n\t\t\t\t\t\t\t\tafter = (target.previousElementSibling === dragEl) && !isWide || halfway && isWide;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tafter = tgTop > elTop;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tafter = (nextSibling !== dragEl) && !isLong || halfway && isLong;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\tthis._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = target.getBoundingClientRect();\n\n\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t+ (prevRect.left - currentRect.left) + 'px,'\n\t\t\t\t\t+ (prevRect.top - currentRect.top) + 'px,0)'\n\t\t\t\t);\n\n\t\t\t\ttarget.offsetWidth; // repaint\n\n\t\t\t\t_css(target, 'transition', 'all ' + ms + 'ms');\n\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\n\t\t\t\tclearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\n\t\t\tclearInterval(this._loopId);\n\t\t\tclearInterval(autoScroll.pid);\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Remove clone\n\t\t\t\t\t\tcloneEl && cloneEl.parentNode.removeChild(cloneEl);\n\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\tif (newIndex === null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Nulling\n\t\t\t\trootEl =\n\t\t\t\t\tdragEl =\n\t\t\t\t\t\tparentEl =\n\t\t\t\t\t\t\tghostEl =\n\t\t\t\t\t\t\t\tnextEl =\n\t\t\t\t\t\t\t\t\tcloneEl =\n\n\t\t\t\t\t\t\t\t\t\tscrollEl =\n\t\t\t\t\t\t\t\t\t\t\tscrollParentEl =\n\n\t\t\t\t\t\t\t\t\t\t\t\ttapEvt =\n\t\t\t\t\t\t\t\t\t\t\t\t\ttouchEvt =\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmoved =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewIndex =\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastEl =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlastCSS =\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactiveGroup =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSortable.active = null;\n\t\t\t}\n\t\t},\n\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tvar type = evt.type;\n\n\t\t\tif (type === 'dragover' || type === 'dragenter') {\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (type === 'drop' || type === 'dragend') {\n\t\t\t\tthis._onDrop(evt);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\ttouchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver), 1);\n\n\t\t\tthis._onDrop();\n\n\t\t\tthis.el = el = null;\n\t\t}\n\t};\n\n\n\tfunction _cloneHide(state) {\n\t\tif (cloneEl && (cloneEl.state !== state)) {\n\t\t\t_css(cloneEl, 'display', state ? 'none' : '');\n\t\t\t!state && cloneEl.state && rootEl.insertBefore(cloneEl, dragEl);\n\t\t\tcloneEl.state = state;\n\t\t}\n\t}\n\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\t\t\tselector = selector.split('.');\n\n\t\t\tvar tag = selector.shift().toUpperCase(),\n\t\t\t\tre = new RegExp('\\\\s(' + selector.join('|') + ')(?=\\\\s)', 'g');\n\n\t\t\tdo {\n\t\t\t\tif (\n\t\t\t\t\t(tag === '>*' && el.parentNode === ctx) || (\n\t\t\t\t\t\t(tag === '' || el.nodeName.toUpperCase() == tag) &&\n\t\t\t\t\t\t(!selector.length || ((' ' + el.className + ' ').match(re) || []).length == selector.length)\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (el !== ctx && (el = el.parentNode));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, false);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, false);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(RSPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(RSPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style)) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(sortable, rootEl, name, targetEl, fromEl, startIndex, newIndex) {\n\t\tvar evt = document.createEvent('Event'),\n\t\t\toptions = (sortable || rootEl[expando]).options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\n\t\tevt.initEvent(name, true, true);\n\n\t\tevt.to = rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\trootEl.dispatchEvent(evt);\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\n\t\tevt = document.createEvent('Event');\n\t\tevt.initEvent('move', true, true);\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || toEl.getBoundingClientRect();\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\n\t/** @returns {HTMLElement|false} */\n\tfunction _ghostIsLast(el, evt) {\n\t\tvar lastEl = el.lastElementChild,\n\t\t\trect = lastEl.getBoundingClientRect();\n\n\t\treturn ((evt.clientY - (rect.top + rect.height) > 5) || (evt.clientX - (rect.right + rect.width) > 5)) && lastEl; // min delta\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent\n\t * @param  {HTMLElement} el\n\t * @return {number}\n\t */\n\tfunction _index(el) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif (el.nodeName.toUpperCase() !== 'TEMPLATE') {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _throttle(callback, ms) {\n\t\tvar args, _this;\n\n\t\treturn function () {\n\t\t\tif (args === void 0) {\n\t\t\t\targs = arguments;\n\t\t\t\t_this = this;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\targs = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tindex: _index\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.3.0-rc2';\n\treturn Sortable;\n});\n/* jshint ignore:end */\n","(function(F, Sortable) {\n\t'use strict';\n\n\t// Create a shared model constructor\n\tvar SharedModelConstructor = F.model.make({\n\t\tfieldId: 'int',\n\t\ttype: 'string',\n\t\tuploadDirectory: 'string',\n\t\tsaveDirectory: 'string',\n\t\tminQty: 'int',\n\t\tmaxQty: 'int',\n\t\tpreventUploadOverMax: 'bool',\n\t\tquality: 'int',\n\t\tforceJpg: 'bool',\n\t\tretinaMode: 'bool',\n\t\tminWidth: 'int',\n\t\tminHeight: 'int',\n\t\tmaxWidth: 'int',\n\t\tmaxHeight: 'int',\n\t\tratio: 'string',\n\t\tratioWidth: 'float',\n\t\tratioHeight: 'float',\n\t\tshowTitle: 'bool',\n\t\trequireTitle: 'bool',\n\t\ttitleLabel: 'string',\n\t\tshowCaption: 'bool',\n\t\trequireCaption: 'bool',\n\t\tcaptionLabel: 'string',\n\t\tshowCover: 'bool',\n\t\trequireCover: 'bool',\n\t\tcoverLabel: 'string',\n\t\tfieldChangeEvent: 'int',\n\t\tcoverRowId: 'int'\n\t});\n\n\t// Create shared other model constructor\n\tvar SharedModelOtherConstructor = F.model.make({\n\t\tnumRows: 'int'\n\t});\n\n\tF.controller.make('Field', {\n\t\t/**\n\t\t * @var sharedModel\n\t\t */\n\t\tsharedModel: null,\n\n\t\t/**\n\t\t * @var sharedModelOther\n\t\t */\n\t\tsharedModelOther: null,\n\n\t\t/**\n\t\t * Shared storage\n\t\t */\n\t\tsharedStorage: {\n\t\t\tlang: {},\n\t\t\tdropZone: null,\n\t\t\trowTemplate: null,\n\t\t\tcropTableTemplate: null,\n\t\t\t$table: null,\n\t\t\t$tableBody: null,\n\t\t\t$messages: null,\n\t\t\tgetLang: function(key) {\n\t\t\t\tvar self = this;\n\n\t\t\t\tif (self.lang[key]) {\n\t\t\t\t\treturn self.lang[key];\n\t\t\t\t}\n\n\t\t\t\treturn key;\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Initialize controller\n\t\t */\n\t\tinit: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Create a common object to send to controllers\n\t\t\tvar commonObjSend;\n\n\t\t\t// Initialize field settings\n\t\t\tself.initFieldSettings();\n\n\t\t\t// Init lang\n\t\t\tself.initLang();\n\n\t\t\t// Get the row template\n\t\t\tself.sharedStorage.rowTemplate = self.$el.find(\n\t\t\t\t'.js-ansel-template__row'\n\t\t\t).html();\n\n\t\t\t// Get the CropTable template\n\t\t\tself.sharedStorage.cropTableTemplate = self.$el.find(\n\t\t\t\t'.js-ansel-template__crop-table'\n\t\t\t).html();\n\n\t\t\t// Set the messages container\n\t\t\tself.sharedStorage.$messages = self.$el.find('.js-ansel-messages');\n\n\t\t\t// Set the table\n\t\t\tself.sharedStorage.$table = self.$el.find('.js-ansel-table');\n\t\t\tself.sharedStorage.$tableBody = self.$el.find('.js-ansel-body');\n\n\t\t\t// Init sorting\n\t\t\tself.initSorting();\n\n\t\t\t// Set common object\n\t\t\tcommonObjSend = {\n\t\t\t\tel: self.$el,\n\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\tsharedModelOther: self.sharedModelOther,\n\t\t\t\tsharedStorage: self.sharedStorage\n\t\t\t};\n\n\t\t\t// Initialize DropZone\n\t\t\tF.controller.construct('DropZone', commonObjSend);\n\n\t\t\t// Initialize rows\n\t\t\tF.controller.construct('Rows', commonObjSend);\n\n\t\t\t// Initialize existing rows\n\t\t\tself.$el.find('.js-ansel-row').each(function() {\n\t\t\t\t// Create a row\n\t\t\t\tF.controller.construct('Row', {\n\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\tel: this\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Initialize EE File Chooser\n\t\t\tself.$el.find('.js-ansel-ee-choose-existing-image').each(function() {\n\t\t\t\tF.controller.construct('EEFileChooser', {\n\t\t\t\t\tel: this,\n\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\tsharedStorage: self.sharedStorage\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Initialize Treasury File Chooser\n\t\t\tself.$el.find('.js-ansel-treasury-choose-existing-image').each(function() {\n\t\t\t\tF.controller.construct('TreasuryFileChooser', {\n\t\t\t\t\tel: this,\n\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\tsharedStorage: self.sharedStorage\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Initialize Assets File Chooser\n\t\t\tself.$el.find('.js-ansel-assets-choose-existing-image').each(function() {\n\t\t\t\tF.controller.construct('AssetsFileChooser', {\n\t\t\t\t\tel: this,\n\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\tsharedStorage: self.sharedStorage\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Watch for change to numRows\n\t\t\tself.sharedModelOther.onChange('numRows', function() {\n\t\t\t\tself.$el.find('.js-ansel-field-input-placeholder').trigger(\n\t\t\t\t\t'change'\n\t\t\t\t);\n\t\t\t});\n\n\t\t\t// Watch for generic field changes to trigger EE's validation\n\t\t\tself.$el.on('change', '.js-ansel-input', function() {\n\t\t\t\tself.$el.find('.js-ansel-field-input-placeholder').trigger(\n\t\t\t\t\t'change'\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Initialize field settings\n\t\t */\n\t\tinitFieldSettings: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Create an object for the settings\n\t\t\tvar settingsObj = {};\n\n\t\t\t// Get raw field settings\n\t\t\tvar rawSettings = self.$el.data('fieldSettings');\n\n\t\t\t// Iterate through the field settings and add to object\n\t\t\tfor (var i in rawSettings) {\n\t\t\t\tif (rawSettings.hasOwnProperty(i)) {\n\t\t\t\t\tsettingsObj[i.toCamelCase()] = rawSettings[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Create a shared model with field settings\n\t\t\tself.sharedModel = new SharedModelConstructor(settingsObj);\n\n\t\t\t// Create the shared model other\n\t\t\tself.sharedModelOther = new SharedModelOtherConstructor();\n\t\t},\n\n\t\t/**\n\t\t * Init lang\n\t\t */\n\t\tinitLang: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Create an object for the lang\n\t\t\tvar langObj = {};\n\n\t\t\t// Get raw lang items\n\t\t\tvar rawLang = self.$el.data('lang');\n\n\t\t\t// Iterate through the lang items and add to object\n\t\t\tfor (var i in rawLang) {\n\t\t\t\tif (rawLang.hasOwnProperty(i)) {\n\t\t\t\t\tlangObj[i.toCamelCase()] = rawLang[i].replace(\n\t\t\t\t\t\t'{{quotePlaceholder}}',\n\t\t\t\t\t\t'\\''\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add the lang to the shared object\n\t\t\tself.sharedStorage.lang = langObj;\n\t\t},\n\n\t\t/**\n\t\t * Init sorting\n\t\t */\n\t\tinitSorting: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\tSortable.create(self.sharedStorage.$tableBody.get(0), {\n\t\t\t\tdisableXAxis: true,\n\t\t\t\tdraggable: '.js-ansel-row',\n\t\t\t\tfallbackClass: 'sortable-dragger',\n\t\t\t\tforceFallback: true,\n\t\t\t\thandle: '.js-ansel-sort-handle',\n\t\t\t\tanimation: 150,\n\t\t\t\tonEnd: function() {\n\t\t\t\t\t// Trigger a generic field change event\n\t\t\t\t\tself.sharedModel.set(\n\t\t\t\t\t\t'fieldChangeEvent',\n\t\t\t\t\t\tself.sharedModel.get('fieldChangeEvent') + 1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(window.ANSEL, window.Sortable);\n","(function(F) {\n\t'use strict';\n\n\tF.controller.make('AnselCrop', {\n\t\t/**\n\t\t * Locked - cancel crop sets this to locked so that no changes to\n\t\t * position occur after lasso has been accepted\n\t\t *\n\t\t * @var {Boolean} locked\n\t\t */\n\t\tlocked: false,\n\n\t\t/**\n\t\t * @var {jQuery} $rowImage\n\t\t */\n\t\t$rowImage: null,\n\n\t\t/**\n\t\t * @var {jQuery} $rowImage\n\t\t */\n\t\t$cropImage: null,\n\n\t\t/**\n\t\t * Jcrop holder\n\t\t */\n\t\tJcrop: null,\n\n\t\t/**\n\t\t * @var {Integer} resizingTimer\n\t\t */\n\t\tresizingTimer: 0,\n\n\t\t/**\n\t\t * @var {Boolean} resizingInProgress\n\t\t */\n\t\tresizingInProgress: false,\n\n\t\t/**\n\t\t * @var {Integer} imageWidth\n\t\t */\n\t\timageWidth: null,\n\n\t\t/**\n\t\t * @var {Integer} imageHeight\n\t\t */\n\t\timageHeight: null,\n\n\t\t/**\n\t\t * @var {Float} scale\n\t\t */\n\t\tscale: null,\n\n\t\t/**\n\t\t * @var {jQuery} $approveCropBtn\n\t\t */\n\t\t$approveCropBtn: null,\n\n\t\t/**\n\t\t * @var {jQuery} $cancelCropBtn\n\t\t */\n\t\t$cancelCropBtn: null,\n\n\t\t/**\n\t\t * @var {Object} prevCropValues\n\t\t */\n\t\tprevCropValues: null,\n\n\t\t/**\n\t\t * @var {Boolean} setInitialCoords\n\t\t */\n\t\tsetInitialCoords: true,\n\n\t\t/**\n\t\t * Initialize controller\n\t\t */\n\t\tinit: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Create a timer for image load\n\t\t\tvar timer = setTimeout(function() {\n\t\t\t\t// TODO: handle image loading fail\n\t\t\t\tconsole.log('TODO: image load failed');\n\t\t\t}, 30000);\n\n\t\t\t// Set up this element\n\t\t\tself.$el = $(self.sharedStorage.cropTableTemplate);\n\t\t\tself.el = self.$el.get(0);\n\n\t\t\t// Set the crop image\n\t\t\tself.$cropImage = self.$el.find('.js-ansel-crop-image');\n\n\t\t\t// Set the approve crop button\n\t\t\tself.$approveCropBtn = self.$el.find('.js-approve-crop');\n\n\t\t\t// Set the cancel button\n\t\t\tself.$cancelCropBtn = self.$el.find('.js-cancel-crop');\n\n\t\t\t// Watch for image load\n\t\t\tself.$cropImage.load(function() {\n\t\t\t\t// Get the image\n\t\t\t\tvar img = this;\n\n\t\t\t\t// Cancel loader\n\t\t\t\tself.$cropImage.unbind('load');\n\n\t\t\t\t// Cancel the timer\n\t\t\t\tclearTimeout(timer);\n\n\t\t\t\t// Set image dimensions\n\t\t\t\tself.imgWidth = img.width;\n\t\t\t\tself.imgHeight = img.height;\n\n\t\t\t\t// Set up initial coords\n\t\t\t\tif (self.setInitialCoords) {\n\t\t\t\t\tself.setUpInitialCoords();\n\t\t\t\t}\n\n\t\t\t\t// Watch for change to run crop\n\t\t\t\tself.model.onChange('runCrop', function() {\n\t\t\t\t\tself.render();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Set the image source\n\t\t\tself.$cropImage.attr(\n\t\t\t\t'src',\n\t\t\t\tself.$rowImage.attr('src')\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Set up initial coords\n\t\t */\n\t\tsetUpInitialCoords: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Create coords object\n\t\t\tvar coords = {\n\t\t\t\th: 200,\n\t\t\t\tw: 200,\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t};\n\n\t\t\t// Get ratio width and height\n\t\t\tvar ratioWidth = self.sharedModel.get('ratioWidth');\n\t\t\tvar ratioHeight = self.sharedModel.get('ratioHeight');\n\n\t\t\t// If there is a ratio we need to do some calculations\n\t\t\tif (ratioWidth && ratioHeight) {\n\t\t\t\t// If image ratio is greater than ratio\n\t\t\t\tif ((ratioHeight / ratioWidth) <=\n\t\t\t\t\t(self.imgHeight / self.imgWidth)\n\t\t\t\t) {\n\t\t\t\t\tcoords.h = self.imgWidth * (ratioHeight / ratioWidth);\n\t\t\t\t\tcoords.y = (self.imgHeight - coords.h) / 2;\n\t\t\t\t\tcoords.x = 0;\n\t\t\t\t\tcoords.w = self.imgWidth;\n\t\t\t\t} else {\n\t\t\t\t\tcoords.w = self.imgHeight * (ratioWidth / ratioHeight);\n\t\t\t\t\tcoords.x = (self.imgWidth - coords.w) / 2;\n\t\t\t\t\tcoords.y = 0;\n\t\t\t\t\tcoords.h = self.imgHeight;\n\t\t\t\t}\n\n\t\t\t// Otherwise we can just set width/height to image width/height\n\t\t\t} else {\n\t\t\t\tcoords.w = self.imgWidth;\n\t\t\t\tcoords.h = self.imgHeight;\n\t\t\t}\n\n\t\t\t// Set up the coords\n\t\t\tself.model.set('coords', coords);\n\t\t},\n\n\t\t/**\n\t\t * Render\n\t\t */\n\t\trender: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Save the current crop values\n\t\t\tself.prevCropValues = self.model.get('coords');\n\n\t\t\t// Place the element on the DOM\n\t\t\t$('body').append(self.$el);\n\n\t\t\t// Set up the crop\n\t\t\tself.setUpCrop();\n\n\t\t\t// Watch for resize event to re-setup crop\n\t\t\t$(window).on('resize.ansel', function() {\n\t\t\t\t// Clear timer from any previous resizing\n\t\t\t\tclearTimeout(self.resizingTimer);\n\n\t\t\t\t// Set resizingInProgress variable\n\t\t\t\tself.resizingInProgress = true;\n\n\t\t\t\t// Set a timer to do resizing\n\t\t\t\tself.resizingTimer = setTimeout(function() {\n\t\t\t\t\tself.setUpCrop();\n\t\t\t\t}, 10);\n\t\t\t});\n\n\t\t\t// Watch for approve button click\n\t\t\tself.$approveCropBtn.on('click.approve', function() {\n\t\t\t\tself.closeCrop();\n\t\t\t});\n\n\t\t\t// Watch for approve button click\n\t\t\tself.$cancelCropBtn.on('click.cancel', function() {\n\t\t\t\tself.closeCrop();\n\t\t\t\tself.resetCropValues();\n\t\t\t});\n\n\t\t\t// Set up key bindings\n\t\t\tself.setUpKeyBindings();\n\t\t},\n\n\t\t/**\n\t\t * Set up crop\n\t\t */\n\t\tsetUpCrop: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Set up Jcrop options\n\t\t\tvar JcropOptions = {\n\t\t\t\tonChange: function(coords) {\n\t\t\t\t\tif (self.locked) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Run the callback\n\t\t\t\t\tself.jCropOnChange(coords);\n\n\t\t\t\t\t// Set the model\n\t\t\t\t\tself.model.set('coords', coords);\n\t\t\t\t},\n\t\t\t\tbgColor: 'black',\n\t\t\t\tbgOpacity: 0.5\n\t\t\t};\n\n\t\t\t// Get coords\n\t\t\tvar coords = self.model.get('coords');\n\n\t\t\t// Get ratio width and height\n\t\t\tvar ratioWidth = self.sharedModel.get('ratioWidth');\n\t\t\tvar ratioHeight = self.sharedModel.get('ratioHeight');\n\n\t\t\t// Get min width and min height\n\t\t\tvar minWidth = self.sharedModel.get('minWidth');\n\t\t\tvar minHeight = self.sharedModel.get('minHeight');\n\n\t\t\t// Unlock\n\t\t\tself.locked = false;\n\n\t\t\t// If Jcrop is already set up we need to destroy it\n\t\t\tif (self.Jcrop) {\n\t\t\t\tself.Jcrop.destroy();\n\t\t\t}\n\n\t\t\t// Set the scale\n\t\t\tself.setScale();\n\n\t\t\t// Set the aspect ratio\n\t\t\tif (ratioWidth && ratioHeight) {\n\t\t\t\t// Add aspect ratio to JcropOptions\n\t\t\t\tJcropOptions.aspectRatio = ratioWidth / ratioHeight;\n\n\t\t\t\t// Set min height to aspect ratio if applicable\n\t\t\t\t// or set min width to aspect ratio if applicable\n\t\t\t\tif (minWidth && ! minHeight) {\n\t\t\t\t\tminHeight = Math.floor(\n\t\t\t\t\t\t(ratioHeight * minWidth) / ratioWidth\n\t\t\t\t\t);\n\t\t\t\t} else if (minHeight && ! minWidth) {\n\t\t\t\t\tminWidth = Math.floor(\n\t\t\t\t\t\t(ratioWidth * minHeight) / ratioHeight\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set min size\n\t\t\tif (minWidth || minHeight) {\n\t\t\t\tJcropOptions.minSize = [\n\t\t\t\t\tminWidth ? minWidth * self.scale : 0,\n\t\t\t\t\tminHeight ? minHeight * self.scale : 0\n\t\t\t\t];\n\t\t\t}\n\n\t\t\t// Set the select area\n\t\t\tJcropOptions.setSelect = [\n\t\t\t\tcoords.x,\n\t\t\t\tcoords.y,\n\t\t\t\tcoords.w,\n\t\t\t\tcoords.h\n\t\t\t];\n\n\t\t\t// Set image width\n\t\t\tself.$cropImage.css('width', self.imgWidth * self.scale);\n\t\t\tself.$cropImage.css('height', self.imgHeight * self.scale);\n\t\t\tJcropOptions.boxWidth = self.imgWidth * self.scale;\n\t\t\tJcropOptions.boxHeight = self.imgHeight * self.scale;\n\t\t\tJcropOptions.xscale = self.scale;\n\t\t\tJcropOptions.yscale = self.scale;\n\n\t\t\t// Set up Jcrop\n\t\t\tself.$cropImage.JcropAnsel(JcropOptions, function() {\n\t\t\t\t// Set Jcrop\n\t\t\t\tself.Jcrop = this;\n\n\t\t\t\t// Resizing has ended\n\t\t\t\tself.resizingInProgress = false;\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Set scale\n\t\t */\n\t\tsetScale: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Set up some variables\n\t\t\tvar widthRatio;\n\t\t\tvar heightRatio;\n\n\t\t\t// Get window size\n\t\t\tvar winWidth = window.innerWidth;\n\t\t\tvar winHeight = window.innerHeight;\n\n\t\t\t// Set max\n\t\t\tvar maxWidth = Math.max(winWidth - 80, winWidth * 0.90);\n\t\t\tvar maxHeight = Math.max(winHeight - 140, winHeight * 0.90);\n\n\t\t\t// Check if image is over any max\n\t\t\tif (self.imgWidth > maxWidth || self.imgHeight > maxHeight) {\n\t\t\t\t// Set ratios\n\t\t\t\twidthRatio = maxWidth / self.imgWidth;\n\t\t\t\theightRatio = maxHeight / self.imgHeight;\n\n\t\t\t\t// Set scale\n\t\t\t\tself.scale = (\n\t\t\t\t\tMath.round(Math.min(widthRatio, heightRatio) * 100) / 100\n\t\t\t\t);\n\n\t\t\t\t// We're done here\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If we got past the check, the scale is 1\n\t\t\tself.scale = 1;\n\t\t},\n\n\t\t/**\n\t\t * @var {Integer} limitedWidth\n\t\t */\n\t\tlimitedWidth: 0,\n\n\t\t/**\n\t\t * @var {Integer} limitedHeight\n\t\t */\n\t\tlimitedHeight: 0,\n\n\t\t/**\n\t\t * @var {Integer} JcropChangeTimeout\n\t\t */\n\t\tJcropChangeTimeout: 0,\n\n\t\t/**\n\t\t * Stupid massive long method to keep image within constraints\n\t\t *\n\t\t * @param {Object} coords\n\t\t */\n\t\tjCropOnChange: function(coords) {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Get minWidth and minHeight\n\t\t\tvar minWidth = self.sharedModel.get('minWidth') || 0;\n\t\t\tvar minHeight = self.sharedModel.get('minHeight') || 0;\n\t\t\tvar origMinWidth = self.sharedModel.get('minWidth') || 0;\n\t\t\tvar origMinHeight = self.sharedModel.get('minHeight') || 0;\n\n\t\t\t// Set maxWidth and maxHeight\n\t\t\tvar maxWidth = self.sharedModel.get('maxWidth') || 0;\n\t\t\tvar maxHeight = self.sharedModel.get('maxHeight') || 0;\n\n\t\t\t// Set limitedWidth and limitedHeight\n\t\t\tvar limitedWidth = self.limitedWidth || 0;\n\t\t\tvar limitedHeight = self.limitedHeight || 0;\n\n\t\t\t// Get old coords\n\t\t\tvar oldCoords = self.model.get('coords');\n\n\t\t\t// Stop variable\n\t\t\tvar stop = false;\n\n\t\t\t// Get the body element\n\t\t\tvar $body = $('body');\n\n\t\t\tvar ratio = self.sharedModel.get('ratio');\n\n\t\t\t// Check if this is a resizing event or of Jcrop is not set\n\t\t\tif (self.resizingInProgress || ! self.Jcrop) {\n\t\t\t\tstop = true;\n\t\t\t}\n\n\t\t\t// Check if anything has changed\n\t\t\tif (oldCoords &&\n\t\t\t\toldCoords.w === coords.w &&\n\t\t\t\toldCoords.h === coords.h &&\n\t\t\t\toldCoords.y === coords.y &&\n\t\t\t\toldCoords.y2 === coords.y2 &&\n\t\t\t\toldCoords.x === coords.x &&\n\t\t\t\toldCoords.x2 === coords.x2\n\t\t\t) {\n\t\t\t\tstop = true;\n\t\t\t}\n\n\t\t\t// Set coords\n\t\t\tself.model.set('coords', coords);\n\n\t\t\t// Check if we should go on or not\n\t\t\tif (stop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Make sure one side doesn't get too small\n\t\t\tif (maxWidth && maxHeight && ! ratio) {\n\t\t\t\t// If max height and we're over max width scale\n\t\t\t\tif (minHeight && (coords.w > maxWidth)) {\n\t\t\t\t\t// Increase the min height as the width increases over max\n\t\t\t\t\tminHeight = (coords.w * minHeight) / maxWidth;\n\n\t\t\t\t\t// If the minHeight exceeds actual image height, limit width\n\t\t\t\t\tif (minHeight >= self.imgHeight) {\n\t\t\t\t\t\t// Make sure a limited width is set\n\t\t\t\t\t\tself.limitedWidth = self.limitedWidth || coords.w;\n\n\t\t\t\t\t\t// Get the min of the limited width or coords width\n\t\t\t\t\t\tself.limitedWidth = Math.min(\n\t\t\t\t\t\t\tcoords.w,\n\t\t\t\t\t\t\tself.limitedWidth\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Set a max width\n\t\t\t\t\t\tlimitedWidth = self.limitedWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If min width and we're over max height scale\n\t\t\t\tif (minWidth && (coords.h > maxHeight)) {\n\t\t\t\t\t// Increase the min width as the height increase over max\n\t\t\t\t\tminWidth = (coords.h * minWidth) / maxHeight;\n\n\t\t\t\t\tif (minWidth >= self.imgWidth) {\n\t\t\t\t\t\t// Make sure a limited height is set\n\t\t\t\t\t\tself.limitedHeight = self.limitedHeight || coords.h;\n\n\t\t\t\t\t\t// Get the min of the limited height or coords height\n\t\t\t\t\t\tself.lmitedHeight = Math.min(\n\t\t\t\t\t\t\tcoords.h,\n\t\t\t\t\t\t\tself.limitedHeight\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Set a max height\n\t\t\t\t\t\tlimitedHeight = self.limitedHeight;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Make sure we don't go over the actual image dimensions\n\t\t\tminWidth = Math.min(self.imgWidth, minWidth);\n\t\t\tminHeight = Math.min(self.imgHeight, minHeight);\n\n\t\t\t// Clear any previous mouseup event from last change\n\t\t\t$body.off('mouseup.JcropChange');\n\n\t\t\t// Clear the previous timeout from last event change\n\t\t\tclearTimeout(self.JcropChangeTimeout);\n\n\t\t\t// Set the Jcrop values if applicable\n\t\t\tif (minWidth || minHeight || limitedWidth || limitedHeight) {\n\t\t\t\t// If we're scaling up, apply the changes immediately\n\t\t\t\tif (oldCoords.h <= coords.h && oldCoords.w <= coords.w) {\n\t\t\t\t\t// Apply the constraints\n\t\t\t\t\tself.Jcrop.setOptions({\n\t\t\t\t\t\tminSize: [\n\t\t\t\t\t\t\tminWidth * self.scale,\n\t\t\t\t\t\t\tminHeight * self.scale\n\t\t\t\t\t\t],\n\t\t\t\t\t\tmaxSize: [\n\t\t\t\t\t\t\tlimitedWidth,\n\t\t\t\t\t\t\tlimitedHeight\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\n\t\t\t\t\t// Reapply the old min size to allow for scaling down\n\t\t\t\t\t// after short wait\n\t\t\t\t\tself.JcropChangeTimeout = setTimeout(function() {\n\t\t\t\t\t\tself.Jcrop.setOptions({\n\t\t\t\t\t\t\tminSize: [\n\t\t\t\t\t\t\t\torigMinWidth ? origMinWidth * self.scale : 0,\n\t\t\t\t\t\t\t\torigMinHeight ? origMinHeight * self.scale : 0\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 500);\n\n\t\t\t\t// Otherwise we're scaling down and need to wait until mouseup\n\t\t\t\t} else {\n\t\t\t\t\t// Apply the min size on mouseup\n\t\t\t\t\t$body.on('mouseup.JcropChange', function() {\n\t\t\t\t\t\tself.Jcrop.setOptions({\n\t\t\t\t\t\t\tminSize: [\n\t\t\t\t\t\t\t\tminWidth * self.scale,\n\t\t\t\t\t\t\t\tminHeight * self.scale\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tmaxSize: [\n\t\t\t\t\t\t\t\tlimitedWidth,\n\t\t\t\t\t\t\t\tlimitedHeight\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Reapply the old min size to allow for scaling down\n\t\t\t\t\t\t// after short wait\n\t\t\t\t\t\tself.JcropChangeTimeout = setTimeout(function() {\n\t\t\t\t\t\t\tself.Jcrop.setOptions({\n\t\t\t\t\t\t\t\tminSize: [\n\t\t\t\t\t\t\t\t\torigMinWidth ? origMinWidth * self.scale : 0,\n\t\t\t\t\t\t\t\t\torigMinHeight ? origMinHeight * self.scale : 0\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Set up key bindings\n\t\t */\n\t\tsetUpKeyBindings: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Get the window\n\t\t\tvar $window = $(window);\n\n\t\t\t// Create a variable for the last pressed\n\t\t\tvar lastKey = null;\n\n\t\t\t// Save crop values on \"enter\" or \"ctrl/cmd + s\"\n\t\t\t$window.on('keydown.ansel', function(e) {\n\t\t\t\t// Save crop values if the keycode is enter key\n\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\tself.closeCrop();\n\n\t\t\t\t// If key code is escape key\n\t\t\t\t} else if (e.keyCode === 27) {\n\t\t\t\t\tself.closeCrop();\n\t\t\t\t\tself.resetCropValues();\n\n\t\t\t\t// Otherwise if last key was ctrl/cmd and this key is s\n\t\t\t\t} else if (lastKey && (lastKey === 91 && e.keyCode === 83)) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tself.closeCrop();\n\t\t\t\t}\n\n\t\t\t\t// Check if the key is ctrl/cmd, otherwise we don't care about\n\t\t\t\t// last key\n\t\t\t\tlastKey = e.keyCode === 91 ? 91 : null;\n\t\t\t});\n\n\t\t\t// If ctrl/cmd is release, reset last key to null\n\t\t\t$window.on('keyup.ansel', function(e) {\n\t\t\t\tif (e.keyCode === 91) {\n\t\t\t\t\tlastKey = null;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Close crop\n\t\t */\n\t\tcloseCrop: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Get the window\n\t\t\tvar $window = $(window);\n\n\t\t\t// Lock the values\n\t\t\tself.locked = true;\n\n\t\t\t// Detach the crop elements\n\t\t\tself.$el.detach();\n\n\t\t\t// Stop watching for approve click\n\t\t\tself.$approveCropBtn.off('click.approve');\n\n\t\t\t// Stop watching for cancel click\n\t\t\tself.$cancelCropBtn.off('click.cancel');\n\n\t\t\t// Stop watching for keydown\n\t\t\t$window.off('keydown.ansel');\n\n\t\t\t// Stop watching for keyup\n\t\t\t$window.off('keyup.ansel');\n\t\t},\n\n\t\t/**\n\t\t * Reset crop values\n\t\t */\n\t\tresetCropValues: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Reset the values\n\t\t\tsetTimeout(function() {\n\t\t\t\tself.model.set('coords', self.prevCropValues);\n\t\t\t}, 200);\n\t\t}\n\t});\n})(window.ANSEL);\n","(function(F) {\n\t'use strict';\n\n\tF.controller.make('AssetsFileChooser', {\n\t\t/**\n\t\t * @var sharedModel\n\t\t */\n\t\tsharedModel: null,\n\n\t\t/**\n\t\t * Shared storage\n\t\t */\n\t\tsharedStorage: {\n\t\t\tdropZone: null\n\t\t},\n\n\t\t/**\n\t\t * Initialize controller\n\t\t */\n\t\tinit: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\tvar sheet;\n\n\t\t\t// Make sure Assets is set up\n\t\t\tif (! window.Assets) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.init();\n\t\t\t\t}, 10);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare the assets sheet\n\t\t\tsheet = new window.Assets.Sheet({\n\t\t\t\tmultiSelect: true,\n\t\t\t\tfiledirs: [\n\t\t\t\t\tself.$el.data('fileDir')\n\t\t\t\t],\n\t\t\t\tkinds: [\n\t\t\t\t\t'image'\n\t\t\t\t],\n\t\t\t\tonSelect: function(files) {\n\t\t\t\t\t// Iterate through files\n\t\t\t\t\tfiles.forEach(function(i) {\n\t\t\t\t\t\t// Process the file selection\n\t\t\t\t\t\tself.processAssetsFileSelection(i);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Watch for click on the button\n\t\t\tself.$el.on('click', function() {\n\t\t\t\tsheet.show();\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Process Assets File Selection\n\t\t *\n\t\t * @param {Object} file\n\t\t */\n\t\tprocessAssetsFileSelection: function(file) {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Start an image variable\n\t\t\tvar img = new Image();\n\n\t\t\t// Get min width\n\t\t\tvar minWidth = self.sharedModel.get('minWidth');\n\n\t\t\t// Get min height\n\t\t\tvar minHeight = self.sharedModel.get('minHeight');\n\n\t\t\t// Set up the on image load functionality\n\t\t\timg.onload = function() {\n\t\t\t\t// Check if image meets requirements\n\t\t\t\tif (\n\t\t\t\t\t(minWidth && img.width < minWidth) ||\n\t\t\t\t\t(minHeight && img.height < minHeight)\n\t\t\t\t) {\n\t\t\t\t\t// Show a message\n\t\t\t\t\tF.controller.construct('Message', {\n\t\t\t\t\t\tautoRender: true,\n\t\t\t\t\t\tmsg: self.sharedStorage.getLang('minImageDimensionsNotMet'),\n\t\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\t\tdestroyOnEvent: 'fieldChangeEvent'\n\t\t\t\t\t});\n\n\t\t\t\t\t// End processing here\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Create a row\n\t\t\t\tF.controller.construct('Row', {\n\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\tfileData: {\n\t\t\t\t\t\t// jscs:disable\n\t\t\t\t\t\tidentifier: file.id, // jshint ignore:line\n\t\t\t\t\t\t// jscs:enable\n\t\t\t\t\t\tsrc: file.url\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t// Set the file path so the image will load\n\t\t\timg.src = file.url;\n\t\t}\n\t});\n})(window.ANSEL);\n","(function(F, DropZone) {\n\t'use strict';\n\n\t// Do not auto discover DropZones\n\tDropZone.autoDiscover = false;\n\n\tF.controller.make('DropZone', {\n\t\t/**\n\t\t * @var sharedModel\n\t\t */\n\t\tsharedModel: null,\n\n\t\t/**\n\t\t * Shared storage\n\t\t */\n\t\tsharedStorage: {\n\t\t\tdropZone: null\n\t\t},\n\n\t\t/**\n\t\t * Initialize controller\n\t\t */\n\t\tinit: function() {\n\t\t\t// Save a reference to the constructor\n\t\t\tvar self = this;\n\n\t\t\t// Get the dropzone container\n\t\t\tvar $dropZoneContainer = self.$el.find('.js-ansel-dropzone');\n\t\t\tvar dropZoneContainer = $dropZoneContainer.get(0);\n\n\t\t\t// Set should hide upload apparatus\n\t\t\tvar shouldHideUploads = self.sharedModel.get('maxQty') &&\n\t\t\t\tself.sharedModel.get('preventUploadOverMax');\n\n\t\t\t// Save a variable for hide max items\n\t\t\tvar $hideMaxEls;\n\n\t\t\t// Check if we should ever hide the upload apparatus\n\t\t\tif (shouldHideUploads) {\n\t\t\t\t$hideMaxEls = self.$el.find('.js-ansel-hide-max');\n\n\t\t\t\t// Watch for changes to numRows property\n\t\t\t\tself.sharedModelOther.onChange('numRows', function(val) {\n\t\t\t\t\tif (val >= self.sharedModel.get('maxQty')) {\n\t\t\t\t\t\t$hideMaxEls.hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$hideMaxEls.show();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Create the DropZone\n\t\t\tself.sharedStorage.dropZone = new DropZone(dropZoneContainer, {\n\t\t\t\turl: $dropZoneContainer.data('uploadUrl'),\n\t\t\t\tparams: {\n\t\t\t\t\tuploadKey: $dropZoneContainer.data('uploadKey'),\n\t\t\t\t\tminWidth: self.sharedModel.get('minWidth'),\n\t\t\t\t\tminHeight: self.sharedModel.get('minHeight')\n\t\t\t\t},\n\t\t\t\tdictDefaultMessage: self.sharedStorage.getLang('dragImagesToUpload'),\n\t\t\t\tdictFallbackMessage: self.sharedStorage.getLang('browserDoesNotSupportDragAndDrop'),\n\t\t\t\tdictFallbackText: self.sharedStorage.getLang('pleaseUseFallbackForm'),\n\t\t\t\tdictFileTooBig: self.sharedStorage.getLang('fileTooBig'),\n\t\t\t\tdictInvalidFileType: self.sharedStorage.getLang('invalidFileType'),\n\t\t\t\tdictCancelUpload: self.sharedStorage.getLang('cancelUpload'),\n\t\t\t\tdictCancelUploadConfirmation: self.sharedStorage.getLang('cancelUploadConfirmation'),\n\t\t\t\tdictRemoveFile: self.sharedStorage.getLang('removeFile'),\n\t\t\t\tdictMaxFilesExceeded: self.sharedStorage.getLang('youCannotUploadAnyMoreFiles')\n\t\t\t});\n\n\t\t\t// Look for the DropZone upload success\n\t\t\tself.sharedStorage.dropZone.on('success', function(file, json) {\n\t\t\t\t// Cast the preview element\n\t\t\t\tvar $previewEl = $(file.previewElement);\n\n\t\t\t\tvar ourJson = json;\n\n\t\t\t\t// What the hell, why don't all browsers treat this the same?\n\t\t\t\tif (typeof ourJson !== 'object') {\n\t\t\t\t\tourJson = $.parseJSON(ourJson);\n\t\t\t\t}\n\n\t\t\t\t// Set a timeout and remove the preview element\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$previewEl.fadeOut(200, function() {\n\t\t\t\t\t\t// Get the parent element\n\t\t\t\t\t\tvar $parentEl = $previewEl.parent('.js-ansel-dropzone');\n\n\t\t\t\t\t\t// Look for other uploads in the area\n\t\t\t\t\t\tvar $otherEls = $parentEl.find('.dz-image-preview')\n\t\t\t\t\t\t\t.not($previewEl);\n\n\t\t\t\t\t\t// Remove the preview element\n\t\t\t\t\t\t$previewEl.remove();\n\n\t\t\t\t\t\t// Remove appropriate classes from parent if applicable\n\t\t\t\t\t\tif (! $otherEls.length) {\n\t\t\t\t\t\t\t$parentEl.removeClass('dz-started');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 2000);\n\n\t\t\t\tif (shouldHideUploads &&\n\t\t\t\t\tself.sharedModelOther.get('numRows') >= self.sharedModel.get('maxQty')\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Create a row\n\t\t\t\tF.controller.construct('Row', {\n\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\tuploadData: ourJson\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Look for DropZone error\n\t\t\tself.sharedStorage.dropZone.on('error', function(file, json) {\n\t\t\t\t// Cast the preview element\n\t\t\t\tvar $previewEl = $(file.previewElement);\n\n\t\t\t\tvar ourJson = json;\n\n\t\t\t\t// What the hell, why don't all browsers treat this the same?\n\t\t\t\tif (typeof ourJson !== 'object') {\n\t\t\t\t\tourJson = $.parseJSON(ourJson);\n\t\t\t\t}\n\n\t\t\t\t// If the min not met\n\t\t\t\tif (ourJson.error === 'Min not met') {\n\t\t\t\t\t// Show a message\n\t\t\t\t\tF.controller.construct('Message', {\n\t\t\t\t\t\tautoRender: true,\n\t\t\t\t\t\tmsg: self.sharedStorage.getLang('minImageDimensionsNotMet'),\n\t\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\t\tdestroyOnEvent: 'fieldChangeEvent'\n\t\t\t\t\t});\n\n\t\t\t\t\t// Set the error message on the actual element\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t$previewEl.find('.dz-error-message').find('span').text(\n\t\t\t\t\t\t\tself.sharedStorage.getLang('minImageDimensionsNotMet')\n\t\t\t\t\t\t);\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\n\t\t\t\t// Wait for a change event\n\t\t\t\tself.sharedModel.onChange('fieldChangeEvent', function() {\n\t\t\t\t\t$previewEl.fadeOut(200, function() {\n\t\t\t\t\t\t// Get the parent element\n\t\t\t\t\t\tvar $parentEl = $previewEl.parent('.js-ansel-dropzone');\n\n\t\t\t\t\t\t// Look for other uploads in the area\n\t\t\t\t\t\tvar $otherEls = $parentEl.find('.dz-image-preview')\n\t\t\t\t\t\t\t.not($previewEl);\n\n\t\t\t\t\t\t// Remove the preview element\n\t\t\t\t\t\t$previewEl.remove();\n\n\t\t\t\t\t\t// Remove appropriate classes from parent if applicable\n\t\t\t\t\t\tif (! $otherEls.length) {\n\t\t\t\t\t\t\t$parentEl.removeClass('dz-started');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n})(window.ANSEL, window.Dropzone);\n","(function(F) {\n\t'use strict';\n\n\tF.controller.make('EEFileChooser', {\n\t\t/**\n\t\t * @var sharedModel\n\t\t */\n\t\tsharedModel: null,\n\n\t\t/**\n\t\t * Shared storage\n\t\t */\n\t\tsharedStorage: {\n\t\t\tdropZone: null\n\t\t},\n\n\t\t/**\n\t\t * Initialize controller\n\t\t */\n\t\tinit: function() {\n\t\t\t// Save a reference to the constructor\n\t\t\tvar self = this;\n\n\t\t\t// We have to set a timeout because of EE\n\t\t\tsetTimeout(function() {\n\t\t\t\t// Set up the EE file chooser callback\n\t\t\t\tself.$el.FilePicker({\n\t\t\t\t\tcallback: function(file, references) {\n\t\t\t\t\t\t// Start an image variable\n\t\t\t\t\t\tvar img = new Image();\n\n\t\t\t\t\t\t// Get min width\n\t\t\t\t\t\tvar minWidth = self.sharedModel.get('minWidth');\n\n\t\t\t\t\t\t// Get min height\n\t\t\t\t\t\tvar minHeight = self.sharedModel.get('minHeight');\n\n\t\t\t\t\t\t// Close the modal\n\t\t\t\t\t\treferences.modal.find('.m-close').click();\n\n\t\t\t\t\t\t// Verify upload is an image\n\t\t\t\t\t\tif (! file.isImage) {\n\t\t\t\t\t\t\t// Show a message\n\t\t\t\t\t\t\tF.controller.construct('Message', {\n\t\t\t\t\t\t\t\tautoRender: true,\n\t\t\t\t\t\t\t\tmsg: self.sharedStorage.getLang('fileIsNotAnImage'),\n\t\t\t\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\t\t\t\tdestroyOnEvent: 'fieldChangeEvent'\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set up the on image load functionality\n\t\t\t\t\t\timg.onload = function() {\n\t\t\t\t\t\t\t// Check if image meets requirements\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t(minWidth && img.width < minWidth) ||\n\t\t\t\t\t\t\t\t(minHeight && img.height < minHeight)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t// Show a message\n\t\t\t\t\t\t\t\tF.controller.construct('Message', {\n\t\t\t\t\t\t\t\t\tautoRender: true,\n\t\t\t\t\t\t\t\t\tmsg: self.sharedStorage.getLang('minImageDimensionsNotMet'),\n\t\t\t\t\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\t\t\t\t\tdestroyOnEvent: 'fieldChangeEvent'\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t// End processing here\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Create a row\n\t\t\t\t\t\t\tF.controller.construct('Row', {\n\t\t\t\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\t\t\t\tfileData: {\n\t\t\t\t\t\t\t\t\t// jscs:disable\n\t\t\t\t\t\t\t\t\tidentifier: file.file_id, // jshint ignore:line\n\t\t\t\t\t\t\t\t\t// jscs:enable\n\t\t\t\t\t\t\t\t\tsrc: file.path\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Set the file path so the image will load\n\t\t\t\t\t\timg.src = file.path;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 500);\n\t\t}\n\t});\n})(window.ANSEL);\n","(function(F) {\n\t'use strict';\n\n\tvar template = '<div class=\"ansel-field__message ansel-field-message\"></div>';\n\n\tF.controller.make('Message', {\n\t\t/**\n\t\t * @var sharedModel\n\t\t */\n\t\tsharedModel: null,\n\n\t\t/**\n\t\t * Shared storage\n\t\t */\n\t\tsharedStorage: {},\n\n\t\t/**\n\t\t * Auto render\n\t\t */\n\t\tautoRender: false,\n\n\t\t/**\n\t\t * Destroy on event\n\t\t */\n\t\tdestroyOnEvent: null,\n\n\t\t/**\n\t\t * Destroy after timeout\n\t\t */\n\t\tdestroyAfterTimeout: null,\n\n\t\t/**\n\t\t * Text\n\t\t */\n\t\tmsg: '',\n\n\t\t/**\n\t\t * Initialize controller\n\t\t */\n\t\tinit: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Set the element\n\t\t\tself.$el = $(template);\n\t\t\tself.el = self.$el.get(0);\n\n\t\t\t// Check auto render\n\t\t\tif (self.autoRender) {\n\t\t\t\tself.render();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Render\n\t\t */\n\t\trender: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Cast destroy after timeout to integer\n\t\t\tvar destroyAfterTimeout = parseInt(self.destroyAfterTimeout);\n\n\t\t\t// Add text to element\n\t\t\tself.$el.html(self.msg);\n\n\t\t\t// Place the element\n\t\t\tself.sharedStorage.$messages.append(self.$el);\n\n\t\t\t// Destroy after timeout\n\t\t\tif (destroyAfterTimeout) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.destroy();\n\t\t\t\t}, destroyAfterTimeout);\n\t\t\t}\n\n\t\t\t// Destroy on event\n\t\t\tif (self.destroyOnEvent) {\n\t\t\t\tself.sharedModel.onChange(self.destroyOnEvent, function() {\n\t\t\t\t\tself.destroy();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Destroy\n\t\t *\n\t\t * @param {Boolean} animate\n\t\t */\n\t\tdestroy: function(animate) {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\tif (animate !== false) {\n\t\t\t\tself.$el.fadeOut(200, function() {\n\t\t\t\t\tself.$el.remove();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself.$el.remove();\n\t\t\t}\n\t\t}\n\t});\n})(window.ANSEL);\n","(function(F) {\n\t'use strict';\n\n\tF.controller.make('Row', {\n\t\t/**\n\t\t * @var sourceFileMissing\n\t\t */\n\t\tsourceFileMissing: false,\n\n\t\t/**\n\t\t * @var sharedModel\n\t\t */\n\t\tsharedModel: null,\n\n\t\t/**\n\t\t * Shared storage\n\t\t */\n\t\tsharedStorage: {},\n\n\t\t/**\n\t\t * Path/Url/ or base64 encoded\n\t\t *\n\t\t * @var {String} src\n\t\t */\n\t\tsrc: null,\n\n\t\t/**\n\t\t * Upload data\n\t\t */\n\t\tuploadData: {},\n\n\t\t/**\n\t\t * File data\n\t\t */\n\t\tfileData: {},\n\n\t\t/**\n\t\t * Reference image\n\t\t */\n\t\treferenceImg: null,\n\n\t\t/**\n\t\t * @var {Integer} imgWidth\n\t\t */\n\t\timgWidth: 0,\n\n\t\t/**\n\t\t * @var {Integer} imgHeight\n\t\t */\n\t\timgHeight: 0,\n\n\t\t/**\n\t\t * Local model\n\t\t */\n\t\tmodel: {\n\t\t\torderNum: 'int',\n\t\t\trunCrop: 'int',\n\t\t\tcoords: 'object'\n\t\t},\n\n\t\t/**\n\t\t * @var {HTMLInputElement} xInput\n\t\t */\n\t\txInput: null,\n\n\t\t/**\n\t\t * @var {HTMLInputElement} yInput\n\t\t */\n\t\tyInput: null,\n\n\t\t/**\n\t\t * @var {HTMLInputElement} widthInput\n\t\t */\n\t\twidthInput: null,\n\n\t\t/**\n\t\t * @var {HTMLInputElement} heightInput\n\t\t */\n\t\theightInput: null,\n\n\t\t/**\n\t\t * @var {HTMLInputElement} orderInput\n\t\t */\n\t\torderInput: null,\n\n\t\t/**\n\t\t * @var {jQuery} $anselImageHolder\n\t\t */\n\t\t$anselImageHolder: null,\n\n\t\t/**\n\t\t * @var {jQuery} $anselImageHolderInner\n\t\t */\n\t\t$anselImageHolderInner: null,\n\n\t\t/**\n\t\t * @var {jQuery} $anselImage\n\t\t */\n\t\t$anselImage: null,\n\n\t\t/**\n\t\t * @var {Integer} rowId\n\t\t */\n\t\trowId: null,\n\n\t\t/**\n\t\t * Events\n\t\t */\n\t\tevents: {\n\t\t\t'click .js-ansel-input-cover': function() {\n\t\t\t\t// Save a reference to the controller\n\t\t\t\tvar self = this;\n\n\t\t\t\t// Set the row ID to the shared model\n\t\t\t\tself.sharedModel.set('coverRowId', self.rowId);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Initialize controller\n\t\t */\n\t\tinit: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Watch for changes to the field change event\n\t\t\tself.sharedModel.onChange('fieldChangeEvent', function() {\n\t\t\t\tself.checkOrder();\n\t\t\t});\n\n\t\t\t// Watch for changes to coords model property\n\t\t\tself.model.onChange('coords', function(val) {\n\t\t\t\t// Update coordinates inputs\n\t\t\t\tself.updateCoordsInputs(val);\n\n\t\t\t\t// Update thumbnail image position\n\t\t\t\tself.updateThumbImgPosition(val);\n\t\t\t});\n\n\t\t\t// Watch for changes to the cover row ID\n\t\t\tself.sharedModel.onChange('coverRowId', function(val) {\n\t\t\t\t// Check if val is not this rows ID\n\t\t\t\tif (val !== self.rowId) {\n\t\t\t\t\tself.$el.find('.js-ansel-input-cover').prop(\n\t\t\t\t\t\t'checked',\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Check if this is an upload or init on existing field\n\t\t\tif (Object.keys(self.fileData).length) {\n\t\t\t\tself.src = self.fileData.src;\n\t\t\t\tself.render();\n\t\t\t} else if (Object.keys(self.uploadData).length) {\n\t\t\t\tself.src = self.uploadData.base64;\n\t\t\t\tself.render();\n\t\t\t} else {\n\t\t\t\tself.setUp(true);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Render\n\t\t */\n\t\trender: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Create the element\n\t\t\tself.$el = $(self.sharedStorage.rowTemplate);\n\t\t\tself.el = self.$el.get(0);\n\n\t\t\t// Add the image\n\t\t\tself.$el.find('.js-ansel-row-image').attr(\n\t\t\t\t'src',\n\t\t\t\tself.src\n\t\t\t);\n\n\t\t\t// Set the file location path\n\t\t\tself.$el.find('.js-ansel-input-file-location').val(\n\t\t\t\tself.uploadData.anselCachePath\n\t\t\t);\n\n\t\t\t// Set the source file ID\n\t\t\tself.$el.find('.js-ansel-source-file-id').val(\n\t\t\t\tself.fileData.identifier\n\t\t\t);\n\n\t\t\t// Add the row to the table body\n\t\t\tself.sharedStorage.$tableBody.append(self.$el);\n\n\t\t\t// Show the table\n\t\t\tself.sharedStorage.$table.jsShow();\n\n\t\t\t// Slight delay to make sure the DOM is settled\n\t\t\tsetTimeout(function() {\n\t\t\t\t// Run setup\n\t\t\t\tself.setUp();\n\t\t\t}, 50);\n\t\t},\n\n\t\t/**\n\t\t * Set up\n\t\t *\n\t\t * @param {Boolean} setCoordsFromInput\n\t\t */\n\t\tsetUp: function(setCoordsFromInput) {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Get the image\n\t\t\tvar $rowImg = self.$el.find('.js-ansel-row-image');\n\n\t\t\t// Check if the source file is missing\n\t\t\tif ($rowImg.data('sourceFileMissing')) {\n\t\t\t\tself.sourceFileMissing = true;\n\t\t\t}\n\n\t\t\t// Set jQuery variables\n\t\t\tself.$anselImage = $rowImg;\n\t\t\tself.$anselImageHolder = self.$el.find('.js-ansel-image-holder');\n\t\t\tself.$anselImageHolderInner = self.$el.find(\n\t\t\t\t'.js-ansel-image-holder-inner'\n\t\t\t);\n\n\t\t\t// Set up row ID\n\t\t\tself.setUpRowId();\n\n\t\t\t// Set up input variables\n\t\t\tself.setUpInputVariables();\n\n\t\t\t// Set up a reference image\n\t\t\tself.referenceImg = new Image();\n\n\t\t\t// Watch for load and set image dimensions\n\t\t\tself.referenceImg.onload = function() {\n\t\t\t\tself.imgWidth = self.referenceImg.width;\n\t\t\t\tself.imgHeight = self.referenceImg.height;\n\n\t\t\t\tif (setCoordsFromInput) {\n\t\t\t\t\tself.setCoordsFromInput();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Set the reference image source\n\t\t\tself.referenceImg.src = $rowImg.attr('src');\n\n\t\t\t// Check if the source file is missing\n\t\t\tif (self.sourceFileMissing) {\n\t\t\t\tself.$el.find('.js-ansel-row-image').on('click', function() {\n\t\t\t\t\t// Show a message\n\t\t\t\t\tF.controller.construct('Message', {\n\t\t\t\t\t\tautoRender: true,\n\t\t\t\t\t\tmsg: self.sharedStorage.getLang('sourceImageMissing'),\n\t\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\t\tdestroyOnEvent: 'fieldChangeEvent'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Create the AnselCrop controller for this row\n\t\t\t\tF.controller.construct('AnselCrop', {\n\t\t\t\t\t$rowImage: self.$el.find('.js-ansel-row-image'),\n\t\t\t\t\tmodel: self.model,\n\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\tsetInitialCoords: ! setCoordsFromInput\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Watch for click on remove button\n\t\t\tself.$el.find('.js-ansel-remove-row').on('click', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tself.destroy();\n\t\t\t});\n\n\t\t\t// Watch for click on image\n\t\t\tself.$el.find('.js-ansel-image-holder').on('click', function() {\n\t\t\t\tself.model.set('runCrop', self.model.get('runCrop') + 1);\n\t\t\t});\n\n\t\t\t// Trigger a generic field change event\n\t\t\tself.sharedModel.set(\n\t\t\t\t'fieldChangeEvent',\n\t\t\t\tself.sharedModel.get('fieldChangeEvent') + 1\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Set up row ID\n\t\t */\n\t\tsetUpRowId: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Find inputs\n\t\t\tvar $rowInputs = self.$el.find('.js-ansel-input');\n\n\t\t\t// Get the old row id\n\t\t\tvar oldRowId = self.$el.data('rowId');\n\n\t\t\t// Create a new, unique row ID\n\t\t\tvar rowId = Math.floor((Math.random() * 99999999999) + 1);\n\n\t\t\t// Set the row ID\n\t\t\tself.rowId = rowId;\n\n\t\t\t// Set the new row ID on the element (may use this some day)\n\t\t\tself.$el.data('rowId', rowId).attr('data-row-id', rowId);\n\n\t\t\t// Iterate over row inputs and update\n\t\t\t$rowInputs.each(function() {\n\t\t\t\t// Cast this element\n\t\t\t\tvar $el = $(this);\n\n\t\t\t\t// Get the name attribute\n\t\t\t\tvar name = $el.attr('name');\n\n\t\t\t\t// Replace the row ID portion\n\t\t\t\tname = name.replace(\n\t\t\t\t\t'ansel_row_id_' + oldRowId,\n\t\t\t\t\t'ansel_row_id_' + rowId\n\t\t\t\t);\n\n\t\t\t\t// Reset the name attribute\n\t\t\t\t$el.attr('name', name);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Set up input variables\n\t\t */\n\t\tsetUpInputVariables: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\tself.xInput = self.$el.find('.js-ansel-input-x').get(0);\n\n\t\t\tself.yInput = self.$el.find('.js-ansel-input-y').get(0);\n\n\t\t\tself.widthInput = self.$el.find('.js-ansel-input-width').get(0);\n\n\t\t\tself.heightInput = self.$el.find('.js-ansel-input-height').get(0);\n\t\t},\n\n\t\t/**\n\t\t * Check order\n\t\t */\n\t\tcheckOrder: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Get the order\n\t\t\tvar order = self.$el.prevAll('tr').length + 1;\n\n\t\t\t// Get max qty\n\t\t\tvar maxQty = self.sharedModel.get('maxQty');\n\n\t\t\t// Set the order of this row\n\t\t\tself.model.set('orderNum', order);\n\n\t\t\t// Make sure order input has been set\n\t\t\tif (! self.orderInput) {\n\t\t\t\tself.orderInput = self.$el.find('.js-ansel-input-order').get(0);\n\t\t\t}\n\n\t\t\t// Set the value of the order input\n\t\t\tself.orderInput.value = order;\n\n\t\t\t// Check if we're over max allowed\n\t\t\tif (maxQty && order > maxQty) {\n\t\t\t\tself.$el.addClass('ansel-table__row--disabled');\n\t\t\t} else {\n\t\t\t\tself.$el.removeClass('ansel-table__row--disabled');\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * setCoordsFromInput\n\t\t */\n\t\tsetCoordsFromInput: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Set the coordinates\n\t\t\tself.model.set('coords', {\n\t\t\t\tx: parseFloat(self.xInput.value),\n\t\t\t\ty: parseFloat(self.yInput.value),\n\t\t\t\tw: parseFloat(self.widthInput.value),\n\t\t\t\th: parseFloat(self.heightInput.value)\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Set coordinates\n\t\t *\n\t\t * @param {Object} coords\n\t\t */\n\t\tupdateCoordsInputs: function(coords) {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\tself.xInput.value = Math.floor(coords.x);\n\n\t\t\tself.yInput.value = Math.floor(coords.y);\n\n\t\t\tself.widthInput.value = Math.min(\n\t\t\t\tMath.ceil(coords.w),\n\t\t\t\tself.imgWidth\n\t\t\t);\n\n\t\t\tself.heightInput.value = Math.min(\n\t\t\t\tMath.ceil(coords.h),\n\t\t\t\tself.imgHeight\n\t\t\t);\n\t\t},\n\n\t\t/**\n\t\t * Update Thumbnail Image Position\n\t\t *\n\t\t * @param {Object} coords\n\t\t */\n\t\tupdateThumbImgPosition: function(coords) {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Get the ratio\n\t\t\tvar ratio = coords.w / coords.h;\n\n\t\t\t// Set holder dimensions\n\t\t\tvar holderWidth = 168;\n\t\t\tvar holderHeight = Math.round(holderWidth / ratio);\n\n\t\t\t// Set holder coordinates\n\t\t\tvar rx = holderWidth / coords.w;\n\t\t\tvar ry = holderHeight / coords.h;\n\t\t\tvar thumbWidth = Math.round(rx * self.imgWidth);\n\t\t\tvar thumbHeight = Math.round(ry * self.imgHeight);\n\t\t\tvar thumbX = Math.round(rx * coords.x) * -1;\n\t\t\tvar thumbY = Math.round(ry * coords.y) * -1;\n\n\t\t\t// Check if the source file is missing\n\t\t\tif (self.sourceFileMissing) {\n\t\t\t\tself.$anselImage.css('position', 'static');\n\t\t\t\tself.$anselImage.show();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the thumbnail coords and position\n\t\t\tself.$anselImageHolderInner.css({\n\t\t\t\theight: holderHeight,\n\t\t\t\twidth: holderWidth\n\t\t\t});\n\t\t\tself.$anselImage.css({\n\t\t\t\theight: thumbHeight + 'px',\n\t\t\t\tleft: thumbX + 'px',\n\t\t\t\ttop: thumbY + 'px',\n\t\t\t\twidth: thumbWidth + 'px'\n\t\t\t});\n\t\t\tself.$anselImage.show();\n\t\t},\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Check for siblings\n\t\t\tvar siblingsLength = self.$el.siblings('tr').length;\n\n\t\t\t// Get the parent container\n\t\t\tvar $formContainer = self.$el.closest('.js-ansel-field');\n\n\t\t\t// Get the delete input\n\t\t\tvar $deleteInput = self.$el.find('.js-ansel-input-image-delete');\n\n\t\t\t// Get the ID input\n\t\t\tvar $idInput = self.$el.find('.js-ansel-input-image-id');\n\n\t\t\t// Check if there is a parent container\n\t\t\tif (! $formContainer.length) {\n\t\t\t\t$formContainer = self.$el.closest('.js-ansel-grid-field');\n\t\t\t}\n\n\t\t\t// Check if this is an existing image\n\t\t\tif ($idInput.val()) {\n\t\t\t\t// Set delete input value\n\t\t\t\t$deleteInput.val('true');\n\n\t\t\t\t// Move the delete input out of the row\n\t\t\t\t$formContainer.prepend($deleteInput);\n\n\t\t\t\t// Move the ID input\n\t\t\t\t$formContainer.prepend($idInput);\n\t\t\t}\n\n\t\t\t// Remove the row\n\t\t\tself.$el.remove();\n\n\t\t\t// Hide the table if no more elements\n\t\t\tif (! siblingsLength) {\n\t\t\t\tself.sharedStorage.$table.jsHide();\n\t\t\t}\n\n\t\t\t// Trigger a generic field change event\n\t\t\tself.sharedModel.set(\n\t\t\t\t'fieldChangeEvent',\n\t\t\t\tself.sharedModel.get('fieldChangeEvent') + 1\n\t\t\t);\n\t\t}\n\t});\n})(window.ANSEL);\n","(function(F) {\n\t'use strict';\n\n\tF.controller.make('Rows', {\n\t\t/**\n\t\t * Under min message\n\t\t */\n\t\tunderMinMsg: null,\n\n\t\t/**\n\t\t * Over max message\n\t\t */\n\t\toverMaxMsg: null,\n\n\t\t/**\n\t\t * Initialize controller\n\t\t */\n\t\tinit: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Watch for changes to numRows property\n\t\t\tself.sharedModelOther.onChange('numRows', function() {\n\t\t\t\tself.numRowsReact();\n\t\t\t});\n\n\t\t\t// Check length\n\t\t\tself.checkNumRows();\n\n\t\t\t// Watch for changes to the field change event\n\t\t\tself.sharedModel.onChange('fieldChangeEvent', function() {\n\t\t\t\tself.checkNumRows();\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Check length\n\t\t */\n\t\tcheckNumRows: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Get rows\n\t\t\tvar $rows = self.sharedStorage.$tableBody.find('.js-ansel-row');\n\n\t\t\t// Set length on model\n\t\t\tself.sharedModelOther.set('numRows', $rows.length);\n\t\t},\n\n\t\t/**\n\t\t * Num rows change\n\t\t */\n\t\tnumRowsReact: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Get the num rows\n\t\t\tvar numRows = self.sharedModelOther.get('numRows');\n\n\t\t\t// Get field min qty\n\t\t\tvar minQty = self.sharedModel.get('minQty');\n\n\t\t\t// Get field max qty\n\t\t\tvar maxQty = self.sharedModel.get('maxQty');\n\n\t\t\t// Set a message variable\n\t\t\tvar msg;\n\n\t\t\t// Set a tempQty variable\n\t\t\tvar tempQty;\n\n\t\t\t// Destroy previous messages\n\t\t\tif (self.underMinMsg) {\n\t\t\t\tself.underMinMsg.destroy(false);\n\t\t\t}\n\n\t\t\tif (self.overMaxMsg) {\n\t\t\t\tself.overMaxMsg.destroy(false);\n\t\t\t}\n\n\t\t\t// Check if there's a min qty and if we're under it\n\t\t\tif (minQty && (numRows < minQty)) {\n\t\t\t\ttempQty = minQty;\n\n\t\t\t\tif (! numRows && minQty === 1) {\n\t\t\t\t\tmsg = self.sharedStorage.getLang('mustAdd1Image');\n\t\t\t\t} else if (! numRows) {\n\t\t\t\t\tmsg = self.sharedStorage.getLang('mustAddQtyImages');\n\t\t\t\t} else {\n\t\t\t\t\ttempQty = minQty - numRows;\n\n\t\t\t\t\tif (tempQty === 1) {\n\t\t\t\t\t\tmsg = self.sharedStorage.getLang('mustAdd1MoreImage');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmsg = self.sharedStorage.getLang('mustAddQtyMoreImages');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Show a message\n\t\t\t\tself.underMinMsg = F.controller.construct('Message', {\n\t\t\t\t\tautoRender: true,\n\t\t\t\t\tmsg: msg.replace('{{qty}}', tempQty),\n\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\tsharedStorage: self.sharedStorage\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (self.sharedModel.get('preventUploadOverMax') &&\n\t\t\t\tmaxQty && (numRows >= maxQty)\n\t\t\t) {\n\t\t\t\tself.removeExtraRows();\n\t\t\t} else if (maxQty && (numRows > maxQty)) {\n\t\t\t\tif (maxQty === 1) {\n\t\t\t\t\tmsg = self.sharedStorage.getLang('fieldOverLimit1');\n\t\t\t\t} else {\n\t\t\t\t\tmsg = self.sharedStorage.getLang('fieldOverLimitQty');\n\t\t\t\t}\n\n\t\t\t\tself.overMaxMsg = F.controller.construct('Message', {\n\t\t\t\t\tautoRender: true,\n\t\t\t\t\tmsg: msg.replace('{{qty}}', maxQty),\n\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\tsharedStorage: self.sharedStorage\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Remove extra rows\n\t\t */\n\t\tremoveExtraRows: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Start a count var\n\t\t\tvar count = 1;\n\n\t\t\t// Find all the rows\n\t\t\tself.$el.find('.js-ansel-row').each(function() {\n\t\t\t\tif (count > self.sharedModel.get('maxQty')) {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\n\t\t\t\tcount++;\n\t\t\t});\n\t\t}\n\t});\n})(window.ANSEL);\n","(function(F) {\n\t'use strict';\n\n\tF.controller.make('TreasuryFileChooser', {\n\t\t/**\n\t\t * @var sharedModel\n\t\t */\n\t\tsharedModel: null,\n\n\t\t/**\n\t\t * Shared storage\n\t\t */\n\t\tsharedStorage: {\n\t\t\tdropZone: null\n\t\t},\n\n\t\t/**\n\t\t * Initialize controller\n\t\t */\n\t\tinit: function() {\n\t\t\t// Save a reference to the constructor\n\t\t\tvar self = this;\n\n\t\t\t// Make sure TreasuryFilePicker is set up\n\t\t\tif (! self.$el.TreasuryFilePicker) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.init();\n\t\t\t\t}, 10);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set up the Treasury file chooser callback\n\t\t\tself.$el.TreasuryFilePicker({\n\t\t\t\tcallback: function(file) {\n\t\t\t\t\t// Start an image variable\n\t\t\t\t\tvar img = new Image();\n\n\t\t\t\t\t// Get min width\n\t\t\t\t\tvar minWidth = self.sharedModel.get('minWidth');\n\n\t\t\t\t\t// Get min height\n\t\t\t\t\tvar minHeight = self.sharedModel.get('minHeight');\n\n\t\t\t\t\t// Verify upload is an image\n\t\t\t\t\tif (! file.isImage) {\n\t\t\t\t\t\t// Show a message\n\t\t\t\t\t\tF.controller.construct('Message', {\n\t\t\t\t\t\t\tautoRender: true,\n\t\t\t\t\t\t\tmsg: self.sharedStorage.getLang('fileIsNotAnImage'),\n\t\t\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\t\t\tdestroyOnEvent: 'fieldChangeEvent'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set up the on image load functionality\n\t\t\t\t\timg.onload = function() {\n\t\t\t\t\t\t// Check if image meets requirements\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(minWidth && img.width < minWidth) ||\n\t\t\t\t\t\t\t(minHeight && img.height < minHeight)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// Show a message\n\t\t\t\t\t\t\tF.controller.construct('Message', {\n\t\t\t\t\t\t\t\tautoRender: true,\n\t\t\t\t\t\t\t\tmsg: self.sharedStorage.getLang('minImageDimensionsNotMet'),\n\t\t\t\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\t\t\t\tdestroyOnEvent: 'fieldChangeEvent'\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// End processing here\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Create a row\n\t\t\t\t\t\tF.controller.construct('Row', {\n\t\t\t\t\t\t\tsharedModel: self.sharedModel,\n\t\t\t\t\t\t\tsharedStorage: self.sharedStorage,\n\t\t\t\t\t\t\tfileData: {\n\t\t\t\t\t\t\t\t// jscs:disable\n\t\t\t\t\t\t\t\tidentifier: file.file_id, // jshint ignore:line\n\t\t\t\t\t\t\t\t// jscs:enable\n\t\t\t\t\t\t\t\tsrc: file.path\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\t// Set the file path so the image will load\n\t\t\t\t\timg.src = file.path;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(window.ANSEL);\n","(function(F, G, FLUID) {\n\t'use strict';\n\n\tF.controller.make('FieldsInit', {\n\t\tinit: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Iterate over js fields and init\n\t\t\t$('.js-ansel-field').each(function() {\n\t\t\t\tself.initField($(this));\n\t\t\t});\n\n\t\t\t// Bind grid fields\n\t\t\t// Grid JS is being goofy and returning something as $cell that\n\t\t\t// is not, in fact $cell, so we're hacking for now\n\t\t\t// window.Grid.bind('ansel', 'display', function($cell) {\n\t\t\t// \t$cell.find('.js-ansel-grid-field').each(function() {\n\t\t\t// \t\tself.initField($(this));\n\t\t\t// \t});\n\t\t\t// });\n\n\t\t\tG.bind('ansel', 'display', function() {\n\t\t\t\t$('.js-ansel-grid-field').each(function() {\n\t\t\t\t\tself.initField($(this));\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif (FLUID !== undefined) {\n\t\t\t\tFLUID.on('ansel', 'add', function($row) {\n\t\t\t\t\t$row.find('.js-ansel-field').each(function() {\n\t\t\t\t\t\tself.initField($(this));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Init field\n\t\t *\n\t\t * @param {jQuery} $root - The root field element\n\t\t */\n\t\tinitField: function($root) {\n\t\t\t// Make sure it has not already been initialized\n\t\t\tif ($root.data('anselInit')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Construct a controller for this field\n\t\t\tF.controller.construct('Field', {\n\t\t\t\tel: $root\n\t\t\t});\n\n\t\t\t// Add the init data attribute\n\t\t\t$root.data('anselInit', true);\n\t\t}\n\t});\n})(window.ANSEL, window.Grid, window.FluidField);\n","(function(F) {\n\t'use strict';\n\n\tF.controller.make('GridSettingsSelect2', {\n\t\t/**\n\t\t * On initialize\n\t\t */\n\t\tinit: function() {\n\t\t\tthis.initSelect2Visible();\n\t\t\tthis.initGridSelect2();\n\t\t\tthis.initGridSelect2EE4();\n\t\t},\n\n\t\t/**\n\t\t * Initialize select 2 on already visible fields\n\t\t */\n\t\tinitSelect2Visible: function() {\n\t\t\t// Iterate over each select\n\t\t\t$('.js-ansel-grid-select').each(function() {\n\t\t\t\tvar $el = $(this);\n\n\t\t\t\t// If select2 has already been initialized, move on\n\t\t\t\tif ($el.data('select2-init') === true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Wait a moment to make sure other things have run\n\t\t\t\t// (this sucks, but, you know, EE)\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t// Don't init on any disabled fields\n\t\t\t\t\t// EE has a duplicate for the field disabled and waiting\n\t\t\t\t\tif (! $el.prop('disabled')) {\n\t\t\t\t\t\t// Init select 2\n\t\t\t\t\t\t$el.select2({\n\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Set the data attribute\n\t\t\t\t\t\t$el.data('select2-init', true);\n\t\t\t\t\t}\n\t\t\t\t}, 500);\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Initialize select2 on grid field when field is selected\n\t\t */\n\t\tinitGridSelect2: function() {\n\t\t\tvar self = this;\n\t\t\tvar $gridColSel = $('.grid_col_select');\n\n\t\t\t// Remove any previously set change event for ansel grid column\n\t\t\t$gridColSel.off('change.anselColSelChange');\n\n\t\t\t// Set up the change event for the grid field type select\n\t\t\t$gridColSel.on('change.anselColSelChange', function() {\n\t\t\t\tvar $sel = $(this);\n\n\t\t\t\t// If the select is set to ansel, initialize select2\n\t\t\t\tif ($sel.val() === 'ansel') {\n\t\t\t\t\tself.runGridSelect2($(this));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Set up the click function when adding a grid field\n\t\t\t$('.grid-tools').find('.add').on('click', function() {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.initSelect2Visible();\n\t\t\t\t\tself.initGridSelect2();\n\t\t\t\t}, 500);\n\t\t\t});\n\t\t},\n\n\t\tinitGridSelect2EE4: function() {\n\t\t\t$('body').on('change', '.fields-grid-common input', function() {\n\t\t\t\tvar $sel = $(this);\n\t\t\t\tvar $parent;\n\t\t\t\tvar $sib;\n\t\t\t\tvar $selects;\n\n\t\t\t\tif ($sel.val() !== 'ansel') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$parent = $sel.closest('.fields-grid-common');\n\t\t\t\t$sib = $parent.next('.grid-col-settings-custom');\n\t\t\t\t$selects = $sib.find('.js-ansel-grid-select');\n\n\t\t\t\t$selects.each(function() {\n\t\t\t\t\tvar $thisSel = $(this);\n\n\t\t\t\t\tif ($thisSel.data('select2-init')) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t$thisSel.select2({\n\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t});\n\n\t\t\t\t\t$thisSel.data('select2-init', true);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Run grid select2\n\t\t *\n\t\t * @param {jQuery} $sel The grid column field type selector\n\t\t */\n\t\trunGridSelect2: function($sel) {\n\t\t\tvar self = this;\n\t\t\t// Get the column settings wrapper and find the select fields\n\t\t\tvar $selects = $sel.parents('.grid-item')\n\t\t\t\t.find('.js-ansel-grid-select');\n\n\t\t\t// Wait until EE's JS has finished adding everything\n\t\t\tif (! $selects.length) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tself.runGridSelect2($sel);\n\t\t\t\t}, 100);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Loop through the select fields\n\t\t\t$selects.each(function() {\n\t\t\t\tvar $el = $(this);\n\n\t\t\t\t// Init select2\n\t\t\t\t$el.select2({\n\t\t\t\t\twidth: '100%'\n\t\t\t\t});\n\n\t\t\t\t// Set the data attribute\n\t\t\t\t$el.data('select2-init', true);\n\t\t\t});\n\t\t}\n\t});\n})(window.ANSEL);\n","(function(F) {\n\t'use strict';\n\n\tF.controller.make('LicensePing', {\n\t\ttries: 0,\n\t\tinit: function() {\n\t\t\t// Save a reference to the controller\n\t\t\tvar self = this;\n\n\t\t\t// Make sure action ID is available\n\t\t\tif (! F.licensePingUrl || ! F.licensePingActionId) {\n\t\t\t\tif (self.tries < 1000) {\n\t\t\t\t\tself.tries++;\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tself.init();\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Run the action\n\t\t\t$.ajax({\n\t\t\t\turl: F.licensePingUrl,\n\t\t\t\tdata: {\n\t\t\t\t\tACT: F.licensePingActionId\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n})(window.ANSEL);\n","(function(F) {\n\t'use strict';\n\n\tF.controller.make('StopNumberScroll', {\n\t\tevents: {\n\t\t\t'mousewheel': function(e) {\n\t\t\t\t$(e.currentTarget).blur();\n\t\t\t}\n\t\t}\n\t});\n})(window.ANSEL);\n","/**\n * This file is run after everything else\n */\n\n(function(F) {\n\t'use strict';\n\n\t// Run license ping controller\n\tF.controller.construct('LicensePing');\n\n\t// Run stop number scroll controller on all number inputs\n\t$(':input[type=number]').each(function() {\n\t\tF.controller.construct('StopNumberScroll', {\n\t\t\tel: this\n\t\t});\n\t});\n\n\t// Run Select2 on any\n\t$('.js-ansel-select').each(function() {\n\t\t$(this).select2({\n\t\t\twidth: '100%'\n\t\t});\n\t});\n\n\t// Run Grid Select 2\n\tF.controller.construct('GridSettingsSelect2');\n\n\t// Run FieldsInit controller\n\tF.controller.construct('FieldsInit');\n\n\t// Watch for the field manager callback in EE 4\n\tif (window.FieldManager !== undefined) {\n\t\twindow.FieldManager.on('fieldModalDisplay', function($modal) {\n\t\t\t$modal.find('.js-ansel-select').each(function() {\n\t\t\t\t$(this).select2({\n\t\t\t\t\twidth: '100%'\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n})(window.ANSEL);\n"]}